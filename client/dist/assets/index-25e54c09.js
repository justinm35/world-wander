var R6=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Tae=R6((Aae,Jv)=>{function D6(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(i,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(c){if(c.ep)return;c.ep=!0;const f=n(c);fetch(c.href,f)}})();var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qg={},k6={get exports(){return qg},set exports(e){qg=e}},sx={},ue={},L6={get exports(){return ue},set exports(e){ue=e}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My=Symbol.for("react.element"),z6=Symbol.for("react.portal"),N6=Symbol.for("react.fragment"),B6=Symbol.for("react.strict_mode"),F6=Symbol.for("react.profiler"),U6=Symbol.for("react.provider"),V6=Symbol.for("react.context"),j6=Symbol.for("react.forward_ref"),G6=Symbol.for("react.suspense"),$6=Symbol.for("react.memo"),W6=Symbol.for("react.lazy"),oP=Symbol.iterator;function q6(e){return e===null||typeof e!="object"?null:(e=oP&&e[oP]||e["@@iterator"],typeof e=="function"?e:null)}var Dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ok=Object.assign,kk={};function fp(e,t,n){this.props=e,this.context=t,this.refs=kk,this.updater=n||Dk}fp.prototype.isReactComponent={};fp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lk(){}Lk.prototype=fp.prototype;function lS(e,t,n){this.props=e,this.context=t,this.refs=kk,this.updater=n||Dk}var cS=lS.prototype=new Lk;cS.constructor=lS;Ok(cS,fp.prototype);cS.isPureReactComponent=!0;var sP=Array.isArray,zk=Object.prototype.hasOwnProperty,uS={current:null},Nk={key:!0,ref:!0,__self:!0,__source:!0};function Bk(e,t,n){var i,c={},f=null,m=null;if(t!=null)for(i in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(f=""+t.key),t)zk.call(t,i)&&!Nk.hasOwnProperty(i)&&(c[i]=t[i]);var s=arguments.length-2;if(s===1)c.children=n;else if(1<s){for(var v=Array(s),E=0;E<s;E++)v[E]=arguments[E+2];c.children=v}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)c[i]===void 0&&(c[i]=s[i]);return{$$typeof:My,type:e,key:f,ref:m,props:c,_owner:uS.current}}function H6(e,t){return{$$typeof:My,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function hS(e){return typeof e=="object"&&e!==null&&e.$$typeof===My}function Z6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var aP=/\/+/g;function Hb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Z6(""+e.key):t.toString(36)}function vv(e,t,n,i,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(f){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case My:case z6:m=!0}}if(m)return m=e,c=c(m),e=i===""?"."+Hb(m,0):i,sP(c)?(n="",e!=null&&(n=e.replace(aP,"$&/")+"/"),vv(c,t,n,"",function(E){return E})):c!=null&&(hS(c)&&(c=H6(c,n+(!c.key||m&&m.key===c.key?"":(""+c.key).replace(aP,"$&/")+"/")+e)),t.push(c)),1;if(m=0,i=i===""?".":i+":",sP(e))for(var s=0;s<e.length;s++){f=e[s];var v=i+Hb(f,s);m+=vv(f,t,n,v,c)}else if(v=q6(e),typeof v=="function")for(e=v.call(e),s=0;!(f=e.next()).done;)f=f.value,v=i+Hb(f,s++),m+=vv(f,t,n,v,c);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function R0(e,t,n){if(e==null)return e;var i=[],c=0;return vv(e,i,"","",function(f){return t.call(n,f,c++)}),i}function Y6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mo={current:null},xv={transition:null},X6={ReactCurrentDispatcher:Mo,ReactCurrentBatchConfig:xv,ReactCurrentOwner:uS};Fn.Children={map:R0,forEach:function(e,t,n){R0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R0(e,function(){t++}),t},toArray:function(e){return R0(e,function(t){return t})||[]},only:function(e){if(!hS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fn.Component=fp;Fn.Fragment=N6;Fn.Profiler=F6;Fn.PureComponent=lS;Fn.StrictMode=B6;Fn.Suspense=G6;Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X6;Fn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Ok({},e.props),c=e.key,f=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,m=uS.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(v in t)zk.call(t,v)&&!Nk.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&s!==void 0?s[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=n;else if(1<v){s=Array(v);for(var E=0;E<v;E++)s[E]=arguments[E+2];i.children=s}return{$$typeof:My,type:e.type,key:c,ref:f,props:i,_owner:m}};Fn.createContext=function(e){return e={$$typeof:V6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:U6,_context:e},e.Consumer=e};Fn.createElement=Bk;Fn.createFactory=function(e){var t=Bk.bind(null,e);return t.type=e,t};Fn.createRef=function(){return{current:null}};Fn.forwardRef=function(e){return{$$typeof:j6,render:e}};Fn.isValidElement=hS;Fn.lazy=function(e){return{$$typeof:W6,_payload:{_status:-1,_result:e},_init:Y6}};Fn.memo=function(e,t){return{$$typeof:$6,type:e,compare:t===void 0?null:t}};Fn.startTransition=function(e){var t=xv.transition;xv.transition={};try{e()}finally{xv.transition=t}};Fn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Fn.useCallback=function(e,t){return Mo.current.useCallback(e,t)};Fn.useContext=function(e){return Mo.current.useContext(e)};Fn.useDebugValue=function(){};Fn.useDeferredValue=function(e){return Mo.current.useDeferredValue(e)};Fn.useEffect=function(e,t){return Mo.current.useEffect(e,t)};Fn.useId=function(){return Mo.current.useId()};Fn.useImperativeHandle=function(e,t,n){return Mo.current.useImperativeHandle(e,t,n)};Fn.useInsertionEffect=function(e,t){return Mo.current.useInsertionEffect(e,t)};Fn.useLayoutEffect=function(e,t){return Mo.current.useLayoutEffect(e,t)};Fn.useMemo=function(e,t){return Mo.current.useMemo(e,t)};Fn.useReducer=function(e,t,n){return Mo.current.useReducer(e,t,n)};Fn.useRef=function(e){return Mo.current.useRef(e)};Fn.useState=function(e){return Mo.current.useState(e)};Fn.useSyncExternalStore=function(e,t,n){return Mo.current.useSyncExternalStore(e,t,n)};Fn.useTransition=function(){return Mo.current.useTransition()};Fn.version="18.2.0";(function(e){e.exports=Fn})(L6);const pp=O6(ue),gT=D6({__proto__:null,default:pp},[ue]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q6=ue,K6=Symbol.for("react.element"),J6=Symbol.for("react.fragment"),eU=Object.prototype.hasOwnProperty,tU=Q6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nU={key:!0,ref:!0,__self:!0,__source:!0};function Fk(e,t,n){var i,c={},f=null,m=null;n!==void 0&&(f=""+n),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(m=t.ref);for(i in t)eU.call(t,i)&&!nU.hasOwnProperty(i)&&(c[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:K6,type:e,key:f,ref:m,props:c,_owner:tU.current}}sx.Fragment=J6;sx.jsx=Fk;sx.jsxs=Fk;(function(e){e.exports=sx})(k6);const il=qg.Fragment,Pe=qg.jsx,At=qg.jsxs;var yT={},Jf={},rU={get exports(){return Jf},set exports(e){Jf=e}},ps={},_T={},iU={get exports(){return _T},set exports(e){_T=e}},Uk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(De,Be){var He=De.length;De.push(Be);e:for(;0<He;){var tt=He-1>>>1,Mt=De[tt];if(0<c(Mt,Be))De[tt]=Be,De[He]=Mt,He=tt;else break e}}function n(De){return De.length===0?null:De[0]}function i(De){if(De.length===0)return null;var Be=De[0],He=De.pop();if(He!==Be){De[0]=He;e:for(var tt=0,Mt=De.length,Dt=Mt>>>1;tt<Dt;){var bt=2*(tt+1)-1,Nt=De[bt],ft=bt+1,Ot=De[ft];if(0>c(Nt,He))ft<Mt&&0>c(Ot,Nt)?(De[tt]=Ot,De[ft]=He,tt=ft):(De[tt]=Nt,De[bt]=He,tt=bt);else if(ft<Mt&&0>c(Ot,He))De[tt]=Ot,De[ft]=He,tt=ft;else break e}}return Be}function c(De,Be){var He=De.sortIndex-Be.sortIndex;return He!==0?He:De.id-Be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var m=Date,s=m.now();e.unstable_now=function(){return m.now()-s}}var v=[],E=[],I=1,M=null,P=3,D=!1,k=!1,V=!1,H=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(De){for(var Be=n(E);Be!==null;){if(Be.callback===null)i(E);else if(Be.startTime<=De)i(E),Be.sortIndex=Be.expirationTime,t(v,Be);else break;Be=n(E)}}function W(De){if(V=!1,N(De),!k)if(n(v)!==null)k=!0,ke($);else{var Be=n(E);Be!==null&&je(W,Be.startTime-De)}}function $(De,Be){k=!1,V&&(V=!1,G(J),J=-1),D=!0;var He=P;try{for(N(Be),M=n(v);M!==null&&(!(M.expirationTime>Be)||De&&!Ee());){var tt=M.callback;if(typeof tt=="function"){M.callback=null,P=M.priorityLevel;var Mt=tt(M.expirationTime<=Be);Be=e.unstable_now(),typeof Mt=="function"?M.callback=Mt:M===n(v)&&i(v),N(Be)}else i(v);M=n(v)}if(M!==null)var Dt=!0;else{var bt=n(E);bt!==null&&je(W,bt.startTime-Be),Dt=!1}return Dt}finally{M=null,P=He,D=!1}}var X=!1,te=null,J=-1,re=5,ce=-1;function Ee(){return!(e.unstable_now()-ce<re)}function Me(){if(te!==null){var De=e.unstable_now();ce=De;var Be=!0;try{Be=te(!0,De)}finally{Be?Le():(X=!1,te=null)}}else X=!1}var Le;if(typeof z=="function")Le=function(){z(Me)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Oe=Ae.port2;Ae.port1.onmessage=Me,Le=function(){Oe.postMessage(null)}}else Le=function(){H(Me,0)};function ke(De){te=De,X||(X=!0,Le())}function je(De,Be){J=H(function(){De(e.unstable_now())},Be)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(De){De.callback=null},e.unstable_continueExecution=function(){k||D||(k=!0,ke($))},e.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<De?Math.floor(1e3/De):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(De){switch(P){case 1:case 2:case 3:var Be=3;break;default:Be=P}var He=P;P=Be;try{return De()}finally{P=He}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(De,Be){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var He=P;P=De;try{return Be()}finally{P=He}},e.unstable_scheduleCallback=function(De,Be,He){var tt=e.unstable_now();switch(typeof He=="object"&&He!==null?(He=He.delay,He=typeof He=="number"&&0<He?tt+He:tt):He=tt,De){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=He+Mt,De={id:I++,callback:Be,priorityLevel:De,startTime:He,expirationTime:Mt,sortIndex:-1},He>tt?(De.sortIndex=He,t(E,De),n(v)===null&&De===n(E)&&(V?(G(J),J=-1):V=!0,je(W,He-tt))):(De.sortIndex=Mt,t(v,De),k||D||(k=!0,ke($))),De},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(De){var Be=P;return function(){var He=P;P=Be;try{return De.apply(this,arguments)}finally{P=He}}}})(Uk);(function(e){e.exports=Uk})(iU);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=ue,hs=_T;function Ct(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jk=new Set,Hg={};function rd(e,t){ep(e,t),ep(e+"Capture",t)}function ep(e,t){for(Hg[e]=t,e=0;e<t.length;e++)jk.add(t[e])}var Zl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vT=Object.prototype.hasOwnProperty,oU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lP={},cP={};function sU(e){return vT.call(cP,e)?!0:vT.call(lP,e)?!1:oU.test(e)?cP[e]=!0:(lP[e]=!0,!1)}function aU(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lU(e,t,n,i){if(t===null||typeof t>"u"||aU(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ao(e,t,n,i,c,f,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=m}var Xi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xi[e]=new Ao(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xi[t]=new Ao(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xi[e]=new Ao(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xi[e]=new Ao(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xi[e]=new Ao(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xi[e]=new Ao(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xi[e]=new Ao(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xi[e]=new Ao(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xi[e]=new Ao(e,5,!1,e.toLowerCase(),null,!1,!1)});var dS=/[\-:]([a-z])/g;function fS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dS,fS);Xi[t]=new Ao(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dS,fS);Xi[t]=new Ao(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dS,fS);Xi[t]=new Ao(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xi[e]=new Ao(e,1,!1,e.toLowerCase(),null,!1,!1)});Xi.xlinkHref=new Ao("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xi[e]=new Ao(e,1,!1,e.toLowerCase(),null,!0,!0)});function pS(e,t,n,i){var c=Xi.hasOwnProperty(t)?Xi[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lU(t,n,c,i)&&(n=null),i||c===null?sU(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,i=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var tc=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D0=Symbol.for("react.element"),wf=Symbol.for("react.portal"),bf=Symbol.for("react.fragment"),mS=Symbol.for("react.strict_mode"),xT=Symbol.for("react.profiler"),Gk=Symbol.for("react.provider"),$k=Symbol.for("react.context"),gS=Symbol.for("react.forward_ref"),wT=Symbol.for("react.suspense"),bT=Symbol.for("react.suspense_list"),yS=Symbol.for("react.memo"),Vc=Symbol.for("react.lazy"),Wk=Symbol.for("react.offscreen"),uP=Symbol.iterator;function Zm(e){return e===null||typeof e!="object"?null:(e=uP&&e[uP]||e["@@iterator"],typeof e=="function"?e:null)}var Xr=Object.assign,Zb;function fg(e){if(Zb===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zb=t&&t[1]||""}return`
`+Zb+e}var Yb=!1;function Xb(e,t){if(!e||Yb)return"";Yb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var i=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){i=E}e.call(t.prototype)}else{try{throw Error()}catch(E){i=E}e()}}catch(E){if(E&&i&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),f=i.stack.split(`
`),m=c.length-1,s=f.length-1;1<=m&&0<=s&&c[m]!==f[s];)s--;for(;1<=m&&0<=s;m--,s--)if(c[m]!==f[s]){if(m!==1||s!==1)do if(m--,s--,0>s||c[m]!==f[s]){var v=`
`+c[m].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=m&&0<=s);break}}}finally{Yb=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?fg(e):""}function cU(e){switch(e.tag){case 5:return fg(e.type);case 16:return fg("Lazy");case 13:return fg("Suspense");case 19:return fg("SuspenseList");case 0:case 2:case 15:return e=Xb(e.type,!1),e;case 11:return e=Xb(e.type.render,!1),e;case 1:return e=Xb(e.type,!0),e;default:return""}}function ET(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bf:return"Fragment";case wf:return"Portal";case xT:return"Profiler";case mS:return"StrictMode";case wT:return"Suspense";case bT:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $k:return(e.displayName||"Context")+".Consumer";case Gk:return(e._context.displayName||"Context")+".Provider";case gS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yS:return t=e.displayName||null,t!==null?t:ET(e.type)||"Memo";case Vc:t=e._payload,e=e._init;try{return ET(e(t))}catch{}}return null}function uU(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ET(t);case 8:return t===mS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hU(e){var t=qk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){i=""+m,f.call(this,m)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function O0(e){e._valueTracker||(e._valueTracker=hU(e))}function Hk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=qk(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function e1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function TT(e,t){var n=t.checked;return Xr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hP(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=mu(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zk(e,t){t=t.checked,t!=null&&pS(e,"checked",t,!1)}function ST(e,t){Zk(e,t);var n=mu(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?IT(e,t.type,n):t.hasOwnProperty("defaultValue")&&IT(e,t.type,mu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dP(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function IT(e,t,n){(t!=="number"||e1(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pg=Array.isArray;function Vf(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+mu(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function MT(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ct(91));return Xr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fP(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ct(92));if(pg(n)){if(1<n.length)throw Error(Ct(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:mu(n)}}function Yk(e,t){var n=mu(t.value),i=mu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function pP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function AT(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var k0,Qk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(k0=k0||document.createElement("div"),k0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=k0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dU=["Webkit","ms","Moz","O"];Object.keys(wg).forEach(function(e){dU.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wg[t]=wg[e]})});function Kk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wg.hasOwnProperty(e)&&wg[e]?(""+t).trim():t+"px"}function Jk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,c=Kk(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,c):e[n]=c}}var fU=Xr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function CT(e,t){if(t){if(fU[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ct(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ct(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ct(62))}}function PT(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RT=null;function _S(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var DT=null,jf=null,Gf=null;function mP(e){if(e=Py(e)){if(typeof DT!="function")throw Error(Ct(280));var t=e.stateNode;t&&(t=hx(t),DT(e.stateNode,e.type,t))}}function eL(e){jf?Gf?Gf.push(e):Gf=[e]:jf=e}function tL(){if(jf){var e=jf,t=Gf;if(Gf=jf=null,mP(e),t)for(e=0;e<t.length;e++)mP(t[e])}}function nL(e,t){return e(t)}function rL(){}var Qb=!1;function iL(e,t,n){if(Qb)return e(t,n);Qb=!0;try{return nL(e,t,n)}finally{Qb=!1,(jf!==null||Gf!==null)&&(rL(),tL())}}function Yg(e,t){var n=e.stateNode;if(n===null)return null;var i=hx(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ct(231,t,typeof n));return n}var OT=!1;if(Zl)try{var Ym={};Object.defineProperty(Ym,"passive",{get:function(){OT=!0}}),window.addEventListener("test",Ym,Ym),window.removeEventListener("test",Ym,Ym)}catch{OT=!1}function pU(e,t,n,i,c,f,m,s,v){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(I){this.onError(I)}}var bg=!1,t1=null,n1=!1,kT=null,mU={onError:function(e){bg=!0,t1=e}};function gU(e,t,n,i,c,f,m,s,v){bg=!1,t1=null,pU.apply(mU,arguments)}function yU(e,t,n,i,c,f,m,s,v){if(gU.apply(this,arguments),bg){if(bg){var E=t1;bg=!1,t1=null}else throw Error(Ct(198));n1||(n1=!0,kT=E)}}function id(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function oL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gP(e){if(id(e)!==e)throw Error(Ct(188))}function _U(e){var t=e.alternate;if(!t){if(t=id(e),t===null)throw Error(Ct(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return gP(c),e;if(f===i)return gP(c),t;f=f.sibling}throw Error(Ct(188))}if(n.return!==i.return)n=c,i=f;else{for(var m=!1,s=c.child;s;){if(s===n){m=!0,n=c,i=f;break}if(s===i){m=!0,i=c,n=f;break}s=s.sibling}if(!m){for(s=f.child;s;){if(s===n){m=!0,n=f,i=c;break}if(s===i){m=!0,i=f,n=c;break}s=s.sibling}if(!m)throw Error(Ct(189))}}if(n.alternate!==i)throw Error(Ct(190))}if(n.tag!==3)throw Error(Ct(188));return n.stateNode.current===n?e:t}function sL(e){return e=_U(e),e!==null?aL(e):null}function aL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=aL(e);if(t!==null)return t;e=e.sibling}return null}var lL=hs.unstable_scheduleCallback,yP=hs.unstable_cancelCallback,vU=hs.unstable_shouldYield,xU=hs.unstable_requestPaint,si=hs.unstable_now,wU=hs.unstable_getCurrentPriorityLevel,vS=hs.unstable_ImmediatePriority,cL=hs.unstable_UserBlockingPriority,r1=hs.unstable_NormalPriority,bU=hs.unstable_LowPriority,uL=hs.unstable_IdlePriority,ax=null,ol=null;function EU(e){if(ol&&typeof ol.onCommitFiberRoot=="function")try{ol.onCommitFiberRoot(ax,e,void 0,(e.current.flags&128)===128)}catch{}}var pa=Math.clz32?Math.clz32:IU,TU=Math.log,SU=Math.LN2;function IU(e){return e>>>=0,e===0?32:31-(TU(e)/SU|0)|0}var L0=64,z0=4194304;function mg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function i1(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,f=e.pingedLanes,m=n&268435455;if(m!==0){var s=m&~c;s!==0?i=mg(s):(f&=m,f!==0&&(i=mg(f)))}else m=n&~c,m!==0?i=mg(m):f!==0&&(i=mg(f));if(i===0)return 0;if(t!==0&&t!==i&&!(t&c)&&(c=i&-i,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-pa(t),c=1<<n,i|=e[n],t&=~c;return i}function MU(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AU(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var m=31-pa(f),s=1<<m,v=c[m];v===-1?(!(s&n)||s&i)&&(c[m]=MU(s,t)):v<=t&&(e.expiredLanes|=s),f&=~s}}function LT(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hL(){var e=L0;return L0<<=1,!(L0&4194240)&&(L0=64),e}function Kb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ay(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pa(t),e[t]=n}function CU(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-pa(n),f=1<<c;t[c]=0,i[c]=-1,e[c]=-1,n&=~f}}function xS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-pa(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}var mr=0;function dL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fL,wS,pL,mL,gL,zT=!1,N0=[],Jc=null,eu=null,tu=null,Xg=new Map,Qg=new Map,$c=[],PU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _P(e,t){switch(e){case"focusin":case"focusout":Jc=null;break;case"dragenter":case"dragleave":eu=null;break;case"mouseover":case"mouseout":tu=null;break;case"pointerover":case"pointerout":Xg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qg.delete(t.pointerId)}}function Xm(e,t,n,i,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:f,targetContainers:[c]},t!==null&&(t=Py(t),t!==null&&wS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function RU(e,t,n,i,c){switch(t){case"focusin":return Jc=Xm(Jc,e,t,n,i,c),!0;case"dragenter":return eu=Xm(eu,e,t,n,i,c),!0;case"mouseover":return tu=Xm(tu,e,t,n,i,c),!0;case"pointerover":var f=c.pointerId;return Xg.set(f,Xm(Xg.get(f)||null,e,t,n,i,c)),!0;case"gotpointercapture":return f=c.pointerId,Qg.set(f,Xm(Qg.get(f)||null,e,t,n,i,c)),!0}return!1}function yL(e){var t=Lh(e.target);if(t!==null){var n=id(t);if(n!==null){if(t=n.tag,t===13){if(t=oL(n),t!==null){e.blockedOn=t,gL(e.priority,function(){pL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=NT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);RT=i,n.target.dispatchEvent(i),RT=null}else return t=Py(n),t!==null&&wS(t),e.blockedOn=n,!1;t.shift()}return!0}function vP(e,t,n){wv(e)&&n.delete(t)}function DU(){zT=!1,Jc!==null&&wv(Jc)&&(Jc=null),eu!==null&&wv(eu)&&(eu=null),tu!==null&&wv(tu)&&(tu=null),Xg.forEach(vP),Qg.forEach(vP)}function Qm(e,t){e.blockedOn===t&&(e.blockedOn=null,zT||(zT=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,DU)))}function Kg(e){function t(c){return Qm(c,e)}if(0<N0.length){Qm(N0[0],e);for(var n=1;n<N0.length;n++){var i=N0[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Jc!==null&&Qm(Jc,e),eu!==null&&Qm(eu,e),tu!==null&&Qm(tu,e),Xg.forEach(t),Qg.forEach(t),n=0;n<$c.length;n++)i=$c[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<$c.length&&(n=$c[0],n.blockedOn===null);)yL(n),n.blockedOn===null&&$c.shift()}var $f=tc.ReactCurrentBatchConfig,o1=!0;function OU(e,t,n,i){var c=mr,f=$f.transition;$f.transition=null;try{mr=1,bS(e,t,n,i)}finally{mr=c,$f.transition=f}}function kU(e,t,n,i){var c=mr,f=$f.transition;$f.transition=null;try{mr=4,bS(e,t,n,i)}finally{mr=c,$f.transition=f}}function bS(e,t,n,i){if(o1){var c=NT(e,t,n,i);if(c===null)lE(e,t,i,s1,n),_P(e,i);else if(RU(c,e,t,n,i))i.stopPropagation();else if(_P(e,i),t&4&&-1<PU.indexOf(e)){for(;c!==null;){var f=Py(c);if(f!==null&&fL(f),f=NT(e,t,n,i),f===null&&lE(e,t,i,s1,n),f===c)break;c=f}c!==null&&i.stopPropagation()}else lE(e,t,i,null,n)}}var s1=null;function NT(e,t,n,i){if(s1=null,e=_S(i),e=Lh(e),e!==null)if(t=id(e),t===null)e=null;else if(n=t.tag,n===13){if(e=oL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return s1=e,null}function _L(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wU()){case vS:return 1;case cL:return 4;case r1:case bU:return 16;case uL:return 536870912;default:return 16}default:return 16}}var Hc=null,ES=null,bv=null;function vL(){if(bv)return bv;var e,t=ES,n=t.length,i,c="value"in Hc?Hc.value:Hc.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var m=n-e;for(i=1;i<=m&&t[n-i]===c[f-i];i++);return bv=c.slice(e,1<i?1-i:void 0)}function Ev(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function B0(){return!0}function xP(){return!1}function ms(e){function t(n,i,c,f,m){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=f,this.target=m,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(f):f[s]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?B0:xP,this.isPropagationStopped=xP,this}return Xr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=B0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=B0)},persist:function(){},isPersistent:B0}),t}var mp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TS=ms(mp),Cy=Xr({},mp,{view:0,detail:0}),LU=ms(Cy),Jb,eE,Km,lx=Xr({},Cy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Km&&(Km&&e.type==="mousemove"?(Jb=e.screenX-Km.screenX,eE=e.screenY-Km.screenY):eE=Jb=0,Km=e),Jb)},movementY:function(e){return"movementY"in e?e.movementY:eE}}),wP=ms(lx),zU=Xr({},lx,{dataTransfer:0}),NU=ms(zU),BU=Xr({},Cy,{relatedTarget:0}),tE=ms(BU),FU=Xr({},mp,{animationName:0,elapsedTime:0,pseudoElement:0}),UU=ms(FU),VU=Xr({},mp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jU=ms(VU),GU=Xr({},mp,{data:0}),bP=ms(GU),$U={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qU[e])?!!t[e]:!1}function SS(){return HU}var ZU=Xr({},Cy,{key:function(e){if(e.key){var t=$U[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ev(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WU[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SS,charCode:function(e){return e.type==="keypress"?Ev(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ev(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YU=ms(ZU),XU=Xr({},lx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),EP=ms(XU),QU=Xr({},Cy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SS}),KU=ms(QU),JU=Xr({},mp,{propertyName:0,elapsedTime:0,pseudoElement:0}),eV=ms(JU),tV=Xr({},lx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nV=ms(tV),rV=[9,13,27,32],IS=Zl&&"CompositionEvent"in window,Eg=null;Zl&&"documentMode"in document&&(Eg=document.documentMode);var iV=Zl&&"TextEvent"in window&&!Eg,xL=Zl&&(!IS||Eg&&8<Eg&&11>=Eg),TP=String.fromCharCode(32),SP=!1;function wL(e,t){switch(e){case"keyup":return rV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ef=!1;function oV(e,t){switch(e){case"compositionend":return bL(t);case"keypress":return t.which!==32?null:(SP=!0,TP);case"textInput":return e=t.data,e===TP&&SP?null:e;default:return null}}function sV(e,t){if(Ef)return e==="compositionend"||!IS&&wL(e,t)?(e=vL(),bv=ES=Hc=null,Ef=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xL&&t.locale!=="ko"?null:t.data;default:return null}}var aV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aV[e.type]:t==="textarea"}function EL(e,t,n,i){eL(i),t=a1(t,"onChange"),0<t.length&&(n=new TS("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Tg=null,Jg=null;function lV(e){kL(e,0)}function cx(e){var t=If(e);if(Hk(t))return e}function cV(e,t){if(e==="change")return t}var TL=!1;if(Zl){var nE;if(Zl){var rE="oninput"in document;if(!rE){var MP=document.createElement("div");MP.setAttribute("oninput","return;"),rE=typeof MP.oninput=="function"}nE=rE}else nE=!1;TL=nE&&(!document.documentMode||9<document.documentMode)}function AP(){Tg&&(Tg.detachEvent("onpropertychange",SL),Jg=Tg=null)}function SL(e){if(e.propertyName==="value"&&cx(Jg)){var t=[];EL(t,Jg,e,_S(e)),iL(lV,t)}}function uV(e,t,n){e==="focusin"?(AP(),Tg=t,Jg=n,Tg.attachEvent("onpropertychange",SL)):e==="focusout"&&AP()}function hV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cx(Jg)}function dV(e,t){if(e==="click")return cx(t)}function fV(e,t){if(e==="input"||e==="change")return cx(t)}function pV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ya=typeof Object.is=="function"?Object.is:pV;function ey(e,t){if(ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!vT.call(t,c)||!ya(e[c],t[c]))return!1}return!0}function CP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function PP(e,t){var n=CP(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CP(n)}}function IL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?IL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ML(){for(var e=window,t=e1();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=e1(e.document)}return t}function MS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mV(e){var t=ML(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&IL(n.ownerDocument.documentElement,n)){if(i!==null&&MS(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,f=Math.min(i.start,c);i=i.end===void 0?f:Math.min(i.end,c),!e.extend&&f>i&&(c=i,i=f,f=c),c=PP(n,f);var m=PP(n,i);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gV=Zl&&"documentMode"in document&&11>=document.documentMode,Tf=null,BT=null,Sg=null,FT=!1;function RP(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;FT||Tf==null||Tf!==e1(i)||(i=Tf,"selectionStart"in i&&MS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Sg&&ey(Sg,i)||(Sg=i,i=a1(BT,"onSelect"),0<i.length&&(t=new TS("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Tf)))}function F0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sf={animationend:F0("Animation","AnimationEnd"),animationiteration:F0("Animation","AnimationIteration"),animationstart:F0("Animation","AnimationStart"),transitionend:F0("Transition","TransitionEnd")},iE={},AL={};Zl&&(AL=document.createElement("div").style,"AnimationEvent"in window||(delete Sf.animationend.animation,delete Sf.animationiteration.animation,delete Sf.animationstart.animation),"TransitionEvent"in window||delete Sf.transitionend.transition);function ux(e){if(iE[e])return iE[e];if(!Sf[e])return e;var t=Sf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in AL)return iE[e]=t[n];return e}var CL=ux("animationend"),PL=ux("animationiteration"),RL=ux("animationstart"),DL=ux("transitionend"),OL=new Map,DP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bu(e,t){OL.set(e,t),rd(t,[e])}for(var oE=0;oE<DP.length;oE++){var sE=DP[oE],yV=sE.toLowerCase(),_V=sE[0].toUpperCase()+sE.slice(1);bu(yV,"on"+_V)}bu(CL,"onAnimationEnd");bu(PL,"onAnimationIteration");bu(RL,"onAnimationStart");bu("dblclick","onDoubleClick");bu("focusin","onFocus");bu("focusout","onBlur");bu(DL,"onTransitionEnd");ep("onMouseEnter",["mouseout","mouseover"]);ep("onMouseLeave",["mouseout","mouseover"]);ep("onPointerEnter",["pointerout","pointerover"]);ep("onPointerLeave",["pointerout","pointerover"]);rd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rd("onBeforeInput",["compositionend","keypress","textInput","paste"]);rd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vV=new Set("cancel close invalid load scroll toggle".split(" ").concat(gg));function OP(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,yU(i,t,void 0,e),e.currentTarget=null}function kL(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var m=i.length-1;0<=m;m--){var s=i[m],v=s.instance,E=s.currentTarget;if(s=s.listener,v!==f&&c.isPropagationStopped())break e;OP(c,s,E),f=v}else for(m=0;m<i.length;m++){if(s=i[m],v=s.instance,E=s.currentTarget,s=s.listener,v!==f&&c.isPropagationStopped())break e;OP(c,s,E),f=v}}}if(n1)throw e=kT,n1=!1,kT=null,e}function Rr(e,t){var n=t[$T];n===void 0&&(n=t[$T]=new Set);var i=e+"__bubble";n.has(i)||(LL(t,e,2,!1),n.add(i))}function aE(e,t,n){var i=0;t&&(i|=4),LL(n,e,i,t)}var U0="_reactListening"+Math.random().toString(36).slice(2);function ty(e){if(!e[U0]){e[U0]=!0,jk.forEach(function(n){n!=="selectionchange"&&(vV.has(n)||aE(n,!1,e),aE(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[U0]||(t[U0]=!0,aE("selectionchange",!1,t))}}function LL(e,t,n,i){switch(_L(t)){case 1:var c=OU;break;case 4:c=kU;break;default:c=bS}n=c.bind(null,t,n,e),c=void 0,!OT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function lE(e,t,n,i,c){var f=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var s=i.stateNode.containerInfo;if(s===c||s.nodeType===8&&s.parentNode===c)break;if(m===4)for(m=i.return;m!==null;){var v=m.tag;if((v===3||v===4)&&(v=m.stateNode.containerInfo,v===c||v.nodeType===8&&v.parentNode===c))return;m=m.return}for(;s!==null;){if(m=Lh(s),m===null)return;if(v=m.tag,v===5||v===6){i=f=m;continue e}s=s.parentNode}}i=i.return}iL(function(){var E=f,I=_S(n),M=[];e:{var P=OL.get(e);if(P!==void 0){var D=TS,k=e;switch(e){case"keypress":if(Ev(n)===0)break e;case"keydown":case"keyup":D=YU;break;case"focusin":k="focus",D=tE;break;case"focusout":k="blur",D=tE;break;case"beforeblur":case"afterblur":D=tE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=wP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=NU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=KU;break;case CL:case PL:case RL:D=UU;break;case DL:D=eV;break;case"scroll":D=LU;break;case"wheel":D=nV;break;case"copy":case"cut":case"paste":D=jU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=EP}var V=(t&4)!==0,H=!V&&e==="scroll",G=V?P!==null?P+"Capture":null:P;V=[];for(var z=E,N;z!==null;){N=z;var W=N.stateNode;if(N.tag===5&&W!==null&&(N=W,G!==null&&(W=Yg(z,G),W!=null&&V.push(ny(z,W,N)))),H)break;z=z.return}0<V.length&&(P=new D(P,k,null,n,I),M.push({event:P,listeners:V}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",P&&n!==RT&&(k=n.relatedTarget||n.fromElement)&&(Lh(k)||k[Yl]))break e;if((D||P)&&(P=I.window===I?I:(P=I.ownerDocument)?P.defaultView||P.parentWindow:window,D?(k=n.relatedTarget||n.toElement,D=E,k=k?Lh(k):null,k!==null&&(H=id(k),k!==H||k.tag!==5&&k.tag!==6)&&(k=null)):(D=null,k=E),D!==k)){if(V=wP,W="onMouseLeave",G="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(V=EP,W="onPointerLeave",G="onPointerEnter",z="pointer"),H=D==null?P:If(D),N=k==null?P:If(k),P=new V(W,z+"leave",D,n,I),P.target=H,P.relatedTarget=N,W=null,Lh(I)===E&&(V=new V(G,z+"enter",k,n,I),V.target=N,V.relatedTarget=H,W=V),H=W,D&&k)t:{for(V=D,G=k,z=0,N=V;N;N=pf(N))z++;for(N=0,W=G;W;W=pf(W))N++;for(;0<z-N;)V=pf(V),z--;for(;0<N-z;)G=pf(G),N--;for(;z--;){if(V===G||G!==null&&V===G.alternate)break t;V=pf(V),G=pf(G)}V=null}else V=null;D!==null&&kP(M,P,D,V,!1),k!==null&&H!==null&&kP(M,H,k,V,!0)}}e:{if(P=E?If(E):window,D=P.nodeName&&P.nodeName.toLowerCase(),D==="select"||D==="input"&&P.type==="file")var $=cV;else if(IP(P))if(TL)$=fV;else{$=hV;var X=uV}else(D=P.nodeName)&&D.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&($=dV);if($&&($=$(e,E))){EL(M,$,n,I);break e}X&&X(e,P,E),e==="focusout"&&(X=P._wrapperState)&&X.controlled&&P.type==="number"&&IT(P,"number",P.value)}switch(X=E?If(E):window,e){case"focusin":(IP(X)||X.contentEditable==="true")&&(Tf=X,BT=E,Sg=null);break;case"focusout":Sg=BT=Tf=null;break;case"mousedown":FT=!0;break;case"contextmenu":case"mouseup":case"dragend":FT=!1,RP(M,n,I);break;case"selectionchange":if(gV)break;case"keydown":case"keyup":RP(M,n,I)}var te;if(IS)e:{switch(e){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else Ef?wL(e,n)&&(J="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(xL&&n.locale!=="ko"&&(Ef||J!=="onCompositionStart"?J==="onCompositionEnd"&&Ef&&(te=vL()):(Hc=I,ES="value"in Hc?Hc.value:Hc.textContent,Ef=!0)),X=a1(E,J),0<X.length&&(J=new bP(J,e,null,n,I),M.push({event:J,listeners:X}),te?J.data=te:(te=bL(n),te!==null&&(J.data=te)))),(te=iV?oV(e,n):sV(e,n))&&(E=a1(E,"onBeforeInput"),0<E.length&&(I=new bP("onBeforeInput","beforeinput",null,n,I),M.push({event:I,listeners:E}),I.data=te))}kL(M,t)})}function ny(e,t,n){return{instance:e,listener:t,currentTarget:n}}function a1(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Yg(e,n),f!=null&&i.unshift(ny(e,f,c)),f=Yg(e,t),f!=null&&i.push(ny(e,f,c))),e=e.return}return i}function pf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function kP(e,t,n,i,c){for(var f=t._reactName,m=[];n!==null&&n!==i;){var s=n,v=s.alternate,E=s.stateNode;if(v!==null&&v===i)break;s.tag===5&&E!==null&&(s=E,c?(v=Yg(n,f),v!=null&&m.unshift(ny(n,v,s))):c||(v=Yg(n,f),v!=null&&m.push(ny(n,v,s)))),n=n.return}m.length!==0&&e.push({event:t,listeners:m})}var xV=/\r\n?/g,wV=/\u0000|\uFFFD/g;function LP(e){return(typeof e=="string"?e:""+e).replace(xV,`
`).replace(wV,"")}function V0(e,t,n){if(t=LP(t),LP(e)!==t&&n)throw Error(Ct(425))}function l1(){}var UT=null,VT=null;function jT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var GT=typeof setTimeout=="function"?setTimeout:void 0,bV=typeof clearTimeout=="function"?clearTimeout:void 0,zP=typeof Promise=="function"?Promise:void 0,EV=typeof queueMicrotask=="function"?queueMicrotask:typeof zP<"u"?function(e){return zP.resolve(null).then(e).catch(TV)}:GT;function TV(e){setTimeout(function(){throw e})}function cE(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(i===0){e.removeChild(c),Kg(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=c}while(n);Kg(t)}function nu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function NP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gp=Math.random().toString(36).slice(2),Ja="__reactFiber$"+gp,ry="__reactProps$"+gp,Yl="__reactContainer$"+gp,$T="__reactEvents$"+gp,SV="__reactListeners$"+gp,IV="__reactHandles$"+gp;function Lh(e){var t=e[Ja];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yl]||n[Ja]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=NP(e);e!==null;){if(n=e[Ja])return n;e=NP(e)}return t}e=n,n=e.parentNode}return null}function Py(e){return e=e[Ja]||e[Yl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function If(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ct(33))}function hx(e){return e[ry]||null}var WT=[],Mf=-1;function Eu(e){return{current:e}}function Or(e){0>Mf||(e.current=WT[Mf],WT[Mf]=null,Mf--)}function Sr(e,t){Mf++,WT[Mf]=e.current,e.current=t}var gu={},po=Eu(gu),Ho=Eu(!1),Xh=gu;function tp(e,t){var n=e.type.contextTypes;if(!n)return gu;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in n)c[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Zo(e){return e=e.childContextTypes,e!=null}function c1(){Or(Ho),Or(po)}function BP(e,t,n){if(po.current!==gu)throw Error(Ct(168));Sr(po,t),Sr(Ho,n)}function zL(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(Ct(108,uU(e)||"Unknown",c));return Xr({},n,i)}function u1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gu,Xh=po.current,Sr(po,e),Sr(Ho,Ho.current),!0}function FP(e,t,n){var i=e.stateNode;if(!i)throw Error(Ct(169));n?(e=zL(e,t,Xh),i.__reactInternalMemoizedMergedChildContext=e,Or(Ho),Or(po),Sr(po,e)):Or(Ho),Sr(Ho,n)}var Nl=null,dx=!1,uE=!1;function NL(e){Nl===null?Nl=[e]:Nl.push(e)}function MV(e){dx=!0,NL(e)}function Tu(){if(!uE&&Nl!==null){uE=!0;var e=0,t=mr;try{var n=Nl;for(mr=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Nl=null,dx=!1}catch(c){throw Nl!==null&&(Nl=Nl.slice(e+1)),lL(vS,Tu),c}finally{mr=t,uE=!1}}return null}var Af=[],Cf=0,h1=null,d1=0,Ds=[],Os=0,Qh=null,Fl=1,Ul="";function Ch(e,t){Af[Cf++]=d1,Af[Cf++]=h1,h1=e,d1=t}function BL(e,t,n){Ds[Os++]=Fl,Ds[Os++]=Ul,Ds[Os++]=Qh,Qh=e;var i=Fl;e=Ul;var c=32-pa(i)-1;i&=~(1<<c),n+=1;var f=32-pa(t)+c;if(30<f){var m=c-c%5;f=(i&(1<<m)-1).toString(32),i>>=m,c-=m,Fl=1<<32-pa(t)+c|n<<c|i,Ul=f+e}else Fl=1<<f|n<<c|i,Ul=e}function AS(e){e.return!==null&&(Ch(e,1),BL(e,1,0))}function CS(e){for(;e===h1;)h1=Af[--Cf],Af[Cf]=null,d1=Af[--Cf],Af[Cf]=null;for(;e===Qh;)Qh=Ds[--Os],Ds[Os]=null,Ul=Ds[--Os],Ds[Os]=null,Fl=Ds[--Os],Ds[Os]=null}var us=null,cs=null,Vr=!1,ca=null;function FL(e,t){var n=Ls(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function UP(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,us=e,cs=nu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,us=e,cs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Qh!==null?{id:Fl,overflow:Ul}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ls(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,us=e,cs=null,!0):!1;default:return!1}}function qT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function HT(e){if(Vr){var t=cs;if(t){var n=t;if(!UP(e,t)){if(qT(e))throw Error(Ct(418));t=nu(n.nextSibling);var i=us;t&&UP(e,t)?FL(i,n):(e.flags=e.flags&-4097|2,Vr=!1,us=e)}}else{if(qT(e))throw Error(Ct(418));e.flags=e.flags&-4097|2,Vr=!1,us=e}}}function VP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;us=e}function j0(e){if(e!==us)return!1;if(!Vr)return VP(e),Vr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jT(e.type,e.memoizedProps)),t&&(t=cs)){if(qT(e))throw UL(),Error(Ct(418));for(;t;)FL(e,t),t=nu(t.nextSibling)}if(VP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ct(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){cs=nu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}cs=null}}else cs=us?nu(e.stateNode.nextSibling):null;return!0}function UL(){for(var e=cs;e;)e=nu(e.nextSibling)}function np(){cs=us=null,Vr=!1}function PS(e){ca===null?ca=[e]:ca.push(e)}var AV=tc.ReactCurrentBatchConfig;function sa(e,t){if(e&&e.defaultProps){t=Xr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var f1=Eu(null),p1=null,Pf=null,RS=null;function DS(){RS=Pf=p1=null}function OS(e){var t=f1.current;Or(f1),e._currentValue=t}function ZT(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Wf(e,t){p1=e,RS=Pf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qo=!0),e.firstContext=null)}function Bs(e){var t=e._currentValue;if(RS!==e)if(e={context:e,memoizedValue:t,next:null},Pf===null){if(p1===null)throw Error(Ct(308));Pf=e,p1.dependencies={lanes:0,firstContext:e}}else Pf=Pf.next=e;return t}var zh=null;function kS(e){zh===null?zh=[e]:zh.push(e)}function VL(e,t,n,i){var c=t.interleaved;return c===null?(n.next=n,kS(t)):(n.next=c.next,c.next=n),t.interleaved=n,Xl(e,i)}function Xl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jc=!1;function LS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $l(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ru(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Xn&2){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,Xl(e,n)}return c=i.interleaved,c===null?(t.next=t,kS(i)):(t.next=c.next,c.next=t),i.interleaved=t,Xl(e,n)}function Tv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,xS(e,n)}}function jP(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var m={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};f===null?c=f=m:f=f.next=m,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function m1(e,t,n,i){var c=e.updateQueue;jc=!1;var f=c.firstBaseUpdate,m=c.lastBaseUpdate,s=c.shared.pending;if(s!==null){c.shared.pending=null;var v=s,E=v.next;v.next=null,m===null?f=E:m.next=E,m=v;var I=e.alternate;I!==null&&(I=I.updateQueue,s=I.lastBaseUpdate,s!==m&&(s===null?I.firstBaseUpdate=E:s.next=E,I.lastBaseUpdate=v))}if(f!==null){var M=c.baseState;m=0,I=E=v=null,s=f;do{var P=s.lane,D=s.eventTime;if((i&P)===P){I!==null&&(I=I.next={eventTime:D,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var k=e,V=s;switch(P=t,D=n,V.tag){case 1:if(k=V.payload,typeof k=="function"){M=k.call(D,M,P);break e}M=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=V.payload,P=typeof k=="function"?k.call(D,M,P):k,P==null)break e;M=Xr({},M,P);break e;case 2:jc=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,P=c.effects,P===null?c.effects=[s]:P.push(s))}else D={eventTime:D,lane:P,tag:s.tag,payload:s.payload,callback:s.callback,next:null},I===null?(E=I=D,v=M):I=I.next=D,m|=P;if(s=s.next,s===null){if(s=c.shared.pending,s===null)break;P=s,s=P.next,P.next=null,c.lastBaseUpdate=P,c.shared.pending=null}}while(1);if(I===null&&(v=M),c.baseState=v,c.firstBaseUpdate=E,c.lastBaseUpdate=I,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);Jh|=m,e.lanes=m,e.memoizedState=M}}function GP(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=n,typeof c!="function")throw Error(Ct(191,c));c.call(i)}}}var GL=new Vk.Component().refs;function YT(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Xr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fx={isMounted:function(e){return(e=e._reactInternals)?id(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=So(),c=ou(e),f=$l(i,c);f.payload=t,n!=null&&(f.callback=n),t=ru(e,f,c),t!==null&&(ma(t,e,c,i),Tv(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=So(),c=ou(e),f=$l(i,c);f.tag=1,f.payload=t,n!=null&&(f.callback=n),t=ru(e,f,c),t!==null&&(ma(t,e,c,i),Tv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=So(),i=ou(e),c=$l(n,i);c.tag=2,t!=null&&(c.callback=t),t=ru(e,c,i),t!==null&&(ma(t,e,i,n),Tv(t,e,i))}};function $P(e,t,n,i,c,f,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,m):t.prototype&&t.prototype.isPureReactComponent?!ey(n,i)||!ey(c,f):!0}function $L(e,t,n){var i=!1,c=gu,f=t.contextType;return typeof f=="object"&&f!==null?f=Bs(f):(c=Zo(t)?Xh:po.current,i=t.contextTypes,f=(i=i!=null)?tp(e,c):gu),t=new t(n,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fx,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function WP(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&fx.enqueueReplaceState(t,t.state,null)}function XT(e,t,n,i){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=GL,LS(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=Bs(f):(f=Zo(t)?Xh:po.current,c.context=tp(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(YT(e,t,f,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&fx.enqueueReplaceState(c,c.state,null),m1(e,n,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Jm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ct(309));var i=n.stateNode}if(!i)throw Error(Ct(147,e));var c=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(m){var s=c.refs;s===GL&&(s=c.refs={}),m===null?delete s[f]:s[f]=m},t._stringRef=f,t)}if(typeof e!="string")throw Error(Ct(284));if(!n._owner)throw Error(Ct(290,e))}return e}function G0(e,t){throw e=Object.prototype.toString.call(t),Error(Ct(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qP(e){var t=e._init;return t(e._payload)}function WL(e){function t(G,z){if(e){var N=G.deletions;N===null?(G.deletions=[z],G.flags|=16):N.push(z)}}function n(G,z){if(!e)return null;for(;z!==null;)t(G,z),z=z.sibling;return null}function i(G,z){for(G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function c(G,z){return G=su(G,z),G.index=0,G.sibling=null,G}function f(G,z,N){return G.index=N,e?(N=G.alternate,N!==null?(N=N.index,N<z?(G.flags|=2,z):N):(G.flags|=2,z)):(G.flags|=1048576,z)}function m(G){return e&&G.alternate===null&&(G.flags|=2),G}function s(G,z,N,W){return z===null||z.tag!==6?(z=yE(N,G.mode,W),z.return=G,z):(z=c(z,N),z.return=G,z)}function v(G,z,N,W){var $=N.type;return $===bf?I(G,z,N.props.children,W,N.key):z!==null&&(z.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Vc&&qP($)===z.type)?(W=c(z,N.props),W.ref=Jm(G,z,N),W.return=G,W):(W=Pv(N.type,N.key,N.props,null,G.mode,W),W.ref=Jm(G,z,N),W.return=G,W)}function E(G,z,N,W){return z===null||z.tag!==4||z.stateNode.containerInfo!==N.containerInfo||z.stateNode.implementation!==N.implementation?(z=_E(N,G.mode,W),z.return=G,z):(z=c(z,N.children||[]),z.return=G,z)}function I(G,z,N,W,$){return z===null||z.tag!==7?(z=Wh(N,G.mode,W,$),z.return=G,z):(z=c(z,N),z.return=G,z)}function M(G,z,N){if(typeof z=="string"&&z!==""||typeof z=="number")return z=yE(""+z,G.mode,N),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D0:return N=Pv(z.type,z.key,z.props,null,G.mode,N),N.ref=Jm(G,null,z),N.return=G,N;case wf:return z=_E(z,G.mode,N),z.return=G,z;case Vc:var W=z._init;return M(G,W(z._payload),N)}if(pg(z)||Zm(z))return z=Wh(z,G.mode,N,null),z.return=G,z;G0(G,z)}return null}function P(G,z,N,W){var $=z!==null?z.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return $!==null?null:s(G,z,""+N,W);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case D0:return N.key===$?v(G,z,N,W):null;case wf:return N.key===$?E(G,z,N,W):null;case Vc:return $=N._init,P(G,z,$(N._payload),W)}if(pg(N)||Zm(N))return $!==null?null:I(G,z,N,W,null);G0(G,N)}return null}function D(G,z,N,W,$){if(typeof W=="string"&&W!==""||typeof W=="number")return G=G.get(N)||null,s(z,G,""+W,$);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case D0:return G=G.get(W.key===null?N:W.key)||null,v(z,G,W,$);case wf:return G=G.get(W.key===null?N:W.key)||null,E(z,G,W,$);case Vc:var X=W._init;return D(G,z,N,X(W._payload),$)}if(pg(W)||Zm(W))return G=G.get(N)||null,I(z,G,W,$,null);G0(z,W)}return null}function k(G,z,N,W){for(var $=null,X=null,te=z,J=z=0,re=null;te!==null&&J<N.length;J++){te.index>J?(re=te,te=null):re=te.sibling;var ce=P(G,te,N[J],W);if(ce===null){te===null&&(te=re);break}e&&te&&ce.alternate===null&&t(G,te),z=f(ce,z,J),X===null?$=ce:X.sibling=ce,X=ce,te=re}if(J===N.length)return n(G,te),Vr&&Ch(G,J),$;if(te===null){for(;J<N.length;J++)te=M(G,N[J],W),te!==null&&(z=f(te,z,J),X===null?$=te:X.sibling=te,X=te);return Vr&&Ch(G,J),$}for(te=i(G,te);J<N.length;J++)re=D(te,G,J,N[J],W),re!==null&&(e&&re.alternate!==null&&te.delete(re.key===null?J:re.key),z=f(re,z,J),X===null?$=re:X.sibling=re,X=re);return e&&te.forEach(function(Ee){return t(G,Ee)}),Vr&&Ch(G,J),$}function V(G,z,N,W){var $=Zm(N);if(typeof $!="function")throw Error(Ct(150));if(N=$.call(N),N==null)throw Error(Ct(151));for(var X=$=null,te=z,J=z=0,re=null,ce=N.next();te!==null&&!ce.done;J++,ce=N.next()){te.index>J?(re=te,te=null):re=te.sibling;var Ee=P(G,te,ce.value,W);if(Ee===null){te===null&&(te=re);break}e&&te&&Ee.alternate===null&&t(G,te),z=f(Ee,z,J),X===null?$=Ee:X.sibling=Ee,X=Ee,te=re}if(ce.done)return n(G,te),Vr&&Ch(G,J),$;if(te===null){for(;!ce.done;J++,ce=N.next())ce=M(G,ce.value,W),ce!==null&&(z=f(ce,z,J),X===null?$=ce:X.sibling=ce,X=ce);return Vr&&Ch(G,J),$}for(te=i(G,te);!ce.done;J++,ce=N.next())ce=D(te,G,J,ce.value,W),ce!==null&&(e&&ce.alternate!==null&&te.delete(ce.key===null?J:ce.key),z=f(ce,z,J),X===null?$=ce:X.sibling=ce,X=ce);return e&&te.forEach(function(Me){return t(G,Me)}),Vr&&Ch(G,J),$}function H(G,z,N,W){if(typeof N=="object"&&N!==null&&N.type===bf&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case D0:e:{for(var $=N.key,X=z;X!==null;){if(X.key===$){if($=N.type,$===bf){if(X.tag===7){n(G,X.sibling),z=c(X,N.props.children),z.return=G,G=z;break e}}else if(X.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Vc&&qP($)===X.type){n(G,X.sibling),z=c(X,N.props),z.ref=Jm(G,X,N),z.return=G,G=z;break e}n(G,X);break}else t(G,X);X=X.sibling}N.type===bf?(z=Wh(N.props.children,G.mode,W,N.key),z.return=G,G=z):(W=Pv(N.type,N.key,N.props,null,G.mode,W),W.ref=Jm(G,z,N),W.return=G,G=W)}return m(G);case wf:e:{for(X=N.key;z!==null;){if(z.key===X)if(z.tag===4&&z.stateNode.containerInfo===N.containerInfo&&z.stateNode.implementation===N.implementation){n(G,z.sibling),z=c(z,N.children||[]),z.return=G,G=z;break e}else{n(G,z);break}else t(G,z);z=z.sibling}z=_E(N,G.mode,W),z.return=G,G=z}return m(G);case Vc:return X=N._init,H(G,z,X(N._payload),W)}if(pg(N))return k(G,z,N,W);if(Zm(N))return V(G,z,N,W);G0(G,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,z!==null&&z.tag===6?(n(G,z.sibling),z=c(z,N),z.return=G,G=z):(n(G,z),z=yE(N,G.mode,W),z.return=G,G=z),m(G)):n(G,z)}return H}var rp=WL(!0),qL=WL(!1),Ry={},sl=Eu(Ry),iy=Eu(Ry),oy=Eu(Ry);function Nh(e){if(e===Ry)throw Error(Ct(174));return e}function zS(e,t){switch(Sr(oy,t),Sr(iy,e),Sr(sl,Ry),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:AT(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=AT(t,e)}Or(sl),Sr(sl,t)}function ip(){Or(sl),Or(iy),Or(oy)}function HL(e){Nh(oy.current);var t=Nh(sl.current),n=AT(t,e.type);t!==n&&(Sr(iy,e),Sr(sl,n))}function NS(e){iy.current===e&&(Or(sl),Or(iy))}var Hr=Eu(0);function g1(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hE=[];function BS(){for(var e=0;e<hE.length;e++)hE[e]._workInProgressVersionPrimary=null;hE.length=0}var Sv=tc.ReactCurrentDispatcher,dE=tc.ReactCurrentBatchConfig,Kh=0,Yr=null,Ti=null,zi=null,y1=!1,Ig=!1,sy=0,CV=0;function oo(){throw Error(Ct(321))}function FS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ya(e[n],t[n]))return!1;return!0}function US(e,t,n,i,c,f){if(Kh=f,Yr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sv.current=e===null||e.memoizedState===null?OV:kV,e=n(i,c),Ig){f=0;do{if(Ig=!1,sy=0,25<=f)throw Error(Ct(301));f+=1,zi=Ti=null,t.updateQueue=null,Sv.current=LV,e=n(i,c)}while(Ig)}if(Sv.current=_1,t=Ti!==null&&Ti.next!==null,Kh=0,zi=Ti=Yr=null,y1=!1,t)throw Error(Ct(300));return e}function VS(){var e=sy!==0;return sy=0,e}function Xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?Yr.memoizedState=zi=e:zi=zi.next=e,zi}function Fs(){if(Ti===null){var e=Yr.alternate;e=e!==null?e.memoizedState:null}else e=Ti.next;var t=zi===null?Yr.memoizedState:zi.next;if(t!==null)zi=t,Ti=e;else{if(e===null)throw Error(Ct(310));Ti=e,e={memoizedState:Ti.memoizedState,baseState:Ti.baseState,baseQueue:Ti.baseQueue,queue:Ti.queue,next:null},zi===null?Yr.memoizedState=zi=e:zi=zi.next=e}return zi}function ay(e,t){return typeof t=="function"?t(e):t}function fE(e){var t=Fs(),n=t.queue;if(n===null)throw Error(Ct(311));n.lastRenderedReducer=e;var i=Ti,c=i.baseQueue,f=n.pending;if(f!==null){if(c!==null){var m=c.next;c.next=f.next,f.next=m}i.baseQueue=c=f,n.pending=null}if(c!==null){f=c.next,i=i.baseState;var s=m=null,v=null,E=f;do{var I=E.lane;if((Kh&I)===I)v!==null&&(v=v.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),i=E.hasEagerState?E.eagerState:e(i,E.action);else{var M={lane:I,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};v===null?(s=v=M,m=i):v=v.next=M,Yr.lanes|=I,Jh|=I}E=E.next}while(E!==null&&E!==f);v===null?m=i:v.next=s,ya(i,t.memoizedState)||(qo=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=v,n.lastRenderedState=i}if(e=n.interleaved,e!==null){c=e;do f=c.lane,Yr.lanes|=f,Jh|=f,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function pE(e){var t=Fs(),n=t.queue;if(n===null)throw Error(Ct(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var m=c=c.next;do f=e(f,m.action),m=m.next;while(m!==c);ya(f,t.memoizedState)||(qo=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,i]}function ZL(){}function YL(e,t){var n=Yr,i=Fs(),c=t(),f=!ya(i.memoizedState,c);if(f&&(i.memoizedState=c,qo=!0),i=i.queue,jS(KL.bind(null,n,i,e),[e]),i.getSnapshot!==t||f||zi!==null&&zi.memoizedState.tag&1){if(n.flags|=2048,ly(9,QL.bind(null,n,i,c,t),void 0,null),Bi===null)throw Error(Ct(349));Kh&30||XL(n,t,c)}return c}function XL(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Yr.updateQueue,t===null?(t={lastEffect:null,stores:null},Yr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function QL(e,t,n,i){t.value=n,t.getSnapshot=i,JL(t)&&e3(e)}function KL(e,t,n){return n(function(){JL(t)&&e3(e)})}function JL(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ya(e,n)}catch{return!0}}function e3(e){var t=Xl(e,1);t!==null&&ma(t,e,1,-1)}function HP(e){var t=Xa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ay,lastRenderedState:e},t.queue=e,e=e.dispatch=DV.bind(null,Yr,e),[t.memoizedState,e]}function ly(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Yr.updateQueue,t===null?(t={lastEffect:null,stores:null},Yr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function t3(){return Fs().memoizedState}function Iv(e,t,n,i){var c=Xa();Yr.flags|=e,c.memoizedState=ly(1|t,n,void 0,i===void 0?null:i)}function px(e,t,n,i){var c=Fs();i=i===void 0?null:i;var f=void 0;if(Ti!==null){var m=Ti.memoizedState;if(f=m.destroy,i!==null&&FS(i,m.deps)){c.memoizedState=ly(t,n,f,i);return}}Yr.flags|=e,c.memoizedState=ly(1|t,n,f,i)}function ZP(e,t){return Iv(8390656,8,e,t)}function jS(e,t){return px(2048,8,e,t)}function n3(e,t){return px(4,2,e,t)}function r3(e,t){return px(4,4,e,t)}function i3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function o3(e,t,n){return n=n!=null?n.concat([e]):null,px(4,4,i3.bind(null,t,e),n)}function GS(){}function s3(e,t){var n=Fs();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&FS(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function a3(e,t){var n=Fs();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&FS(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function l3(e,t,n){return Kh&21?(ya(n,t)||(n=hL(),Yr.lanes|=n,Jh|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qo=!0),e.memoizedState=n)}function PV(e,t){var n=mr;mr=n!==0&&4>n?n:4,e(!0);var i=dE.transition;dE.transition={};try{e(!1),t()}finally{mr=n,dE.transition=i}}function c3(){return Fs().memoizedState}function RV(e,t,n){var i=ou(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},u3(e))h3(t,n);else if(n=VL(e,t,n,i),n!==null){var c=So();ma(n,e,i,c),d3(n,t,i)}}function DV(e,t,n){var i=ou(e),c={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(u3(e))h3(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var m=t.lastRenderedState,s=f(m,n);if(c.hasEagerState=!0,c.eagerState=s,ya(s,m)){var v=t.interleaved;v===null?(c.next=c,kS(t)):(c.next=v.next,v.next=c),t.interleaved=c;return}}catch{}finally{}n=VL(e,t,c,i),n!==null&&(c=So(),ma(n,e,i,c),d3(n,t,i))}}function u3(e){var t=e.alternate;return e===Yr||t!==null&&t===Yr}function h3(e,t){Ig=y1=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function d3(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,xS(e,n)}}var _1={readContext:Bs,useCallback:oo,useContext:oo,useEffect:oo,useImperativeHandle:oo,useInsertionEffect:oo,useLayoutEffect:oo,useMemo:oo,useReducer:oo,useRef:oo,useState:oo,useDebugValue:oo,useDeferredValue:oo,useTransition:oo,useMutableSource:oo,useSyncExternalStore:oo,useId:oo,unstable_isNewReconciler:!1},OV={readContext:Bs,useCallback:function(e,t){return Xa().memoizedState=[e,t===void 0?null:t],e},useContext:Bs,useEffect:ZP,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Iv(4194308,4,i3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Iv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Iv(4,2,e,t)},useMemo:function(e,t){var n=Xa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Xa();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=RV.bind(null,Yr,e),[i.memoizedState,e]},useRef:function(e){var t=Xa();return e={current:e},t.memoizedState=e},useState:HP,useDebugValue:GS,useDeferredValue:function(e){return Xa().memoizedState=e},useTransition:function(){var e=HP(!1),t=e[0];return e=PV.bind(null,e[1]),Xa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Yr,c=Xa();if(Vr){if(n===void 0)throw Error(Ct(407));n=n()}else{if(n=t(),Bi===null)throw Error(Ct(349));Kh&30||XL(i,t,n)}c.memoizedState=n;var f={value:n,getSnapshot:t};return c.queue=f,ZP(KL.bind(null,i,f,e),[e]),i.flags|=2048,ly(9,QL.bind(null,i,f,n,t),void 0,null),n},useId:function(){var e=Xa(),t=Bi.identifierPrefix;if(Vr){var n=Ul,i=Fl;n=(i&~(1<<32-pa(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=sy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=CV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kV={readContext:Bs,useCallback:s3,useContext:Bs,useEffect:jS,useImperativeHandle:o3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:a3,useReducer:fE,useRef:t3,useState:function(){return fE(ay)},useDebugValue:GS,useDeferredValue:function(e){var t=Fs();return l3(t,Ti.memoizedState,e)},useTransition:function(){var e=fE(ay)[0],t=Fs().memoizedState;return[e,t]},useMutableSource:ZL,useSyncExternalStore:YL,useId:c3,unstable_isNewReconciler:!1},LV={readContext:Bs,useCallback:s3,useContext:Bs,useEffect:jS,useImperativeHandle:o3,useInsertionEffect:n3,useLayoutEffect:r3,useMemo:a3,useReducer:pE,useRef:t3,useState:function(){return pE(ay)},useDebugValue:GS,useDeferredValue:function(e){var t=Fs();return Ti===null?t.memoizedState=e:l3(t,Ti.memoizedState,e)},useTransition:function(){var e=pE(ay)[0],t=Fs().memoizedState;return[e,t]},useMutableSource:ZL,useSyncExternalStore:YL,useId:c3,unstable_isNewReconciler:!1};function op(e,t){try{var n="",i=t;do n+=cU(i),i=i.return;while(i);var c=n}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function mE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function QT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var zV=typeof WeakMap=="function"?WeakMap:Map;function f3(e,t,n){n=$l(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){x1||(x1=!0,a2=i),QT(e,t)},n}function p3(e,t,n){n=$l(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;n.payload=function(){return i(c)},n.callback=function(){QT(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(n.callback=function(){QT(e,t),typeof i!="function"&&(iu===null?iu=new Set([this]):iu.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),n}function YP(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new zV;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(c.add(n),e=XV.bind(null,e,t,n),t.then(e,e))}function XP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function QP(e,t,n,i,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$l(-1,1),t.tag=2,ru(n,t,1))),n.lanes|=1),e)}var NV=tc.ReactCurrentOwner,qo=!1;function To(e,t,n,i){t.child=e===null?qL(t,null,n,i):rp(t,e.child,n,i)}function KP(e,t,n,i,c){n=n.render;var f=t.ref;return Wf(t,c),i=US(e,t,n,i,f,c),n=VS(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ql(e,t,c)):(Vr&&n&&AS(t),t.flags|=1,To(e,t,i,c),t.child)}function JP(e,t,n,i,c){if(e===null){var f=n.type;return typeof f=="function"&&!QS(f)&&f.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=f,m3(e,t,f,i,c)):(e=Pv(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&c)){var m=f.memoizedProps;if(n=n.compare,n=n!==null?n:ey,n(m,i)&&e.ref===t.ref)return Ql(e,t,c)}return t.flags|=1,e=su(f,i),e.ref=t.ref,e.return=t,t.child=e}function m3(e,t,n,i,c){if(e!==null){var f=e.memoizedProps;if(ey(f,i)&&e.ref===t.ref)if(qo=!1,t.pendingProps=i=f,(e.lanes&c)!==0)e.flags&131072&&(qo=!0);else return t.lanes=e.lanes,Ql(e,t,c)}return KT(e,t,n,i,c)}function g3(e,t,n){var i=t.pendingProps,c=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(Df,ss),ss|=n;else{if(!(n&1073741824))return e=f!==null?f.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sr(Df,ss),ss|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:n,Sr(Df,ss),ss|=i}else f!==null?(i=f.baseLanes|n,t.memoizedState=null):i=n,Sr(Df,ss),ss|=i;return To(e,t,c,n),t.child}function y3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function KT(e,t,n,i,c){var f=Zo(n)?Xh:po.current;return f=tp(t,f),Wf(t,c),n=US(e,t,n,i,f,c),i=VS(),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ql(e,t,c)):(Vr&&i&&AS(t),t.flags|=1,To(e,t,n,c),t.child)}function eR(e,t,n,i,c){if(Zo(n)){var f=!0;u1(t)}else f=!1;if(Wf(t,c),t.stateNode===null)Mv(e,t),$L(t,n,i),XT(t,n,i,c),i=!0;else if(e===null){var m=t.stateNode,s=t.memoizedProps;m.props=s;var v=m.context,E=n.contextType;typeof E=="object"&&E!==null?E=Bs(E):(E=Zo(n)?Xh:po.current,E=tp(t,E));var I=n.getDerivedStateFromProps,M=typeof I=="function"||typeof m.getSnapshotBeforeUpdate=="function";M||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(s!==i||v!==E)&&WP(t,m,i,E),jc=!1;var P=t.memoizedState;m.state=P,m1(t,i,m,c),v=t.memoizedState,s!==i||P!==v||Ho.current||jc?(typeof I=="function"&&(YT(t,n,I,i),v=t.memoizedState),(s=jc||$P(t,n,s,i,P,v,E))?(M||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),m.props=i,m.state=v,m.context=E,i=s):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,jL(e,t),s=t.memoizedProps,E=t.type===t.elementType?s:sa(t.type,s),m.props=E,M=t.pendingProps,P=m.context,v=n.contextType,typeof v=="object"&&v!==null?v=Bs(v):(v=Zo(n)?Xh:po.current,v=tp(t,v));var D=n.getDerivedStateFromProps;(I=typeof D=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(s!==M||P!==v)&&WP(t,m,i,v),jc=!1,P=t.memoizedState,m.state=P,m1(t,i,m,c);var k=t.memoizedState;s!==M||P!==k||Ho.current||jc?(typeof D=="function"&&(YT(t,n,D,i),k=t.memoizedState),(E=jc||$P(t,n,E,i,P,k,v)||!1)?(I||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,k,v),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,k,v)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=k),m.props=i,m.state=k,m.context=v,i=E):(typeof m.componentDidUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),i=!1)}return JT(e,t,n,i,f,c)}function JT(e,t,n,i,c,f){y3(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return c&&FP(t,n,!1),Ql(e,t,f);i=t.stateNode,NV.current=t;var s=m&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=rp(t,e.child,null,f),t.child=rp(t,null,s,f)):To(e,t,s,f),t.memoizedState=i.state,c&&FP(t,n,!0),t.child}function _3(e){var t=e.stateNode;t.pendingContext?BP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&BP(e,t.context,!1),zS(e,t.containerInfo)}function tR(e,t,n,i,c){return np(),PS(c),t.flags|=256,To(e,t,n,i),t.child}var e2={dehydrated:null,treeContext:null,retryLane:0};function t2(e){return{baseLanes:e,cachePool:null,transitions:null}}function v3(e,t,n){var i=t.pendingProps,c=Hr.current,f=!1,m=(t.flags&128)!==0,s;if((s=m)||(s=e!==null&&e.memoizedState===null?!1:(c&2)!==0),s?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Sr(Hr,c&1),e===null)return HT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=i.children,e=i.fallback,f?(i=t.mode,f=t.child,m={mode:"hidden",children:m},!(i&1)&&f!==null?(f.childLanes=0,f.pendingProps=m):f=yx(m,i,0,null),e=Wh(e,i,n,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=t2(n),t.memoizedState=e2,e):$S(t,m));if(c=e.memoizedState,c!==null&&(s=c.dehydrated,s!==null))return BV(e,t,m,i,s,c,n);if(f){f=i.fallback,m=t.mode,c=e.child,s=c.sibling;var v={mode:"hidden",children:i.children};return!(m&1)&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=su(c,v),i.subtreeFlags=c.subtreeFlags&14680064),s!==null?f=su(s,f):(f=Wh(f,m,n,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,m=e.child.memoizedState,m=m===null?t2(n):{baseLanes:m.baseLanes|n,cachePool:null,transitions:m.transitions},f.memoizedState=m,f.childLanes=e.childLanes&~n,t.memoizedState=e2,i}return f=e.child,e=f.sibling,i=su(f,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function $S(e,t){return t=yx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $0(e,t,n,i){return i!==null&&PS(i),rp(t,e.child,null,n),e=$S(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function BV(e,t,n,i,c,f,m){if(n)return t.flags&256?(t.flags&=-257,i=mE(Error(Ct(422))),$0(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,c=t.mode,i=yx({mode:"visible",children:i.children},c,0,null),f=Wh(f,c,m,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,t.mode&1&&rp(t,e.child,null,m),t.child.memoizedState=t2(m),t.memoizedState=e2,f);if(!(t.mode&1))return $0(e,t,m,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var s=i.dgst;return i=s,f=Error(Ct(419)),i=mE(f,i,void 0),$0(e,t,m,i)}if(s=(m&e.childLanes)!==0,qo||s){if(i=Bi,i!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(i.suspendedLanes|m)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Xl(e,c),ma(i,e,c,-1))}return XS(),i=mE(Error(Ct(421))),$0(e,t,m,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=QV.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,cs=nu(c.nextSibling),us=t,Vr=!0,ca=null,e!==null&&(Ds[Os++]=Fl,Ds[Os++]=Ul,Ds[Os++]=Qh,Fl=e.id,Ul=e.overflow,Qh=t),t=$S(t,i.children),t.flags|=4096,t)}function nR(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),ZT(e.return,t,n)}function gE(e,t,n,i,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailMode=c)}function x3(e,t,n){var i=t.pendingProps,c=i.revealOrder,f=i.tail;if(To(e,t,i.children,n),i=Hr.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nR(e,n,t);else if(e.tag===19)nR(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Sr(Hr,i),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&g1(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),gE(t,!1,c,n,f);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&g1(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}gE(t,!0,n,null,f);break;case"together":gE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ql(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jh|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ct(153));if(t.child!==null){for(e=t.child,n=su(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=su(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function FV(e,t,n){switch(t.tag){case 3:_3(t),np();break;case 5:HL(t);break;case 1:Zo(t.type)&&u1(t);break;case 4:zS(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;Sr(f1,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Sr(Hr,Hr.current&1),t.flags|=128,null):n&t.child.childLanes?v3(e,t,n):(Sr(Hr,Hr.current&1),e=Ql(e,t,n),e!==null?e.sibling:null);Sr(Hr,Hr.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return x3(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Sr(Hr,Hr.current),i)break;return null;case 22:case 23:return t.lanes=0,g3(e,t,n)}return Ql(e,t,n)}var w3,n2,b3,E3;w3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};n2=function(){};b3=function(e,t,n,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,Nh(sl.current);var f=null;switch(n){case"input":c=TT(e,c),i=TT(e,i),f=[];break;case"select":c=Xr({},c,{value:void 0}),i=Xr({},i,{value:void 0}),f=[];break;case"textarea":c=MT(e,c),i=MT(e,i),f=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=l1)}CT(n,i);var m;n=null;for(E in c)if(!i.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var s=c[E];for(m in s)s.hasOwnProperty(m)&&(n||(n={}),n[m]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Hg.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in i){var v=i[E];if(s=c!=null?c[E]:void 0,i.hasOwnProperty(E)&&v!==s&&(v!=null||s!=null))if(E==="style")if(s){for(m in s)!s.hasOwnProperty(m)||v&&v.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in v)v.hasOwnProperty(m)&&s[m]!==v[m]&&(n||(n={}),n[m]=v[m])}else n||(f||(f=[]),f.push(E,n)),n=v;else E==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,s=s?s.__html:void 0,v!=null&&s!==v&&(f=f||[]).push(E,v)):E==="children"?typeof v!="string"&&typeof v!="number"||(f=f||[]).push(E,""+v):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Hg.hasOwnProperty(E)?(v!=null&&E==="onScroll"&&Rr("scroll",e),f||s===v||(f=[])):(f=f||[]).push(E,v))}n&&(f=f||[]).push("style",n);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};E3=function(e,t,n,i){n!==i&&(t.flags|=4)};function eg(e,t){if(!Vr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function so(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function UV(e,t,n){var i=t.pendingProps;switch(CS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(t),null;case 1:return Zo(t.type)&&c1(),so(t),null;case 3:return i=t.stateNode,ip(),Or(Ho),Or(po),BS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(j0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ca!==null&&(u2(ca),ca=null))),n2(e,t),so(t),null;case 5:NS(t);var c=Nh(oy.current);if(n=t.type,e!==null&&t.stateNode!=null)b3(e,t,n,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ct(166));return so(t),null}if(e=Nh(sl.current),j0(t)){i=t.stateNode,n=t.type;var f=t.memoizedProps;switch(i[Ja]=t,i[ry]=f,e=(t.mode&1)!==0,n){case"dialog":Rr("cancel",i),Rr("close",i);break;case"iframe":case"object":case"embed":Rr("load",i);break;case"video":case"audio":for(c=0;c<gg.length;c++)Rr(gg[c],i);break;case"source":Rr("error",i);break;case"img":case"image":case"link":Rr("error",i),Rr("load",i);break;case"details":Rr("toggle",i);break;case"input":hP(i,f),Rr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},Rr("invalid",i);break;case"textarea":fP(i,f),Rr("invalid",i)}CT(n,f),c=null;for(var m in f)if(f.hasOwnProperty(m)){var s=f[m];m==="children"?typeof s=="string"?i.textContent!==s&&(f.suppressHydrationWarning!==!0&&V0(i.textContent,s,e),c=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(f.suppressHydrationWarning!==!0&&V0(i.textContent,s,e),c=["children",""+s]):Hg.hasOwnProperty(m)&&s!=null&&m==="onScroll"&&Rr("scroll",i)}switch(n){case"input":O0(i),dP(i,f,!0);break;case"textarea":O0(i),pP(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=l1)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(n,{is:i.is}):(e=m.createElement(n),n==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,n),e[Ja]=t,e[ry]=i,w3(e,t,!1,!1),t.stateNode=e;e:{switch(m=PT(n,i),n){case"dialog":Rr("cancel",e),Rr("close",e),c=i;break;case"iframe":case"object":case"embed":Rr("load",e),c=i;break;case"video":case"audio":for(c=0;c<gg.length;c++)Rr(gg[c],e);c=i;break;case"source":Rr("error",e),c=i;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),c=i;break;case"details":Rr("toggle",e),c=i;break;case"input":hP(e,i),c=TT(e,i),Rr("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=Xr({},i,{value:void 0}),Rr("invalid",e);break;case"textarea":fP(e,i),c=MT(e,i),Rr("invalid",e);break;default:c=i}CT(n,c),s=c;for(f in s)if(s.hasOwnProperty(f)){var v=s[f];f==="style"?Jk(e,v):f==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&Qk(e,v)):f==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&Zg(e,v):typeof v=="number"&&Zg(e,""+v):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Hg.hasOwnProperty(f)?v!=null&&f==="onScroll"&&Rr("scroll",e):v!=null&&pS(e,f,v,m))}switch(n){case"input":O0(e),dP(e,i,!1);break;case"textarea":O0(e),pP(e);break;case"option":i.value!=null&&e.setAttribute("value",""+mu(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?Vf(e,!!i.multiple,f,!1):i.defaultValue!=null&&Vf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=l1)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return so(t),null;case 6:if(e&&t.stateNode!=null)E3(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ct(166));if(n=Nh(oy.current),Nh(sl.current),j0(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ja]=t,(f=i.nodeValue!==n)&&(e=us,e!==null))switch(e.tag){case 3:V0(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&V0(i.nodeValue,n,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ja]=t,t.stateNode=i}return so(t),null;case 13:if(Or(Hr),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vr&&cs!==null&&t.mode&1&&!(t.flags&128))UL(),np(),t.flags|=98560,f=!1;else if(f=j0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(Ct(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(Ct(317));f[Ja]=t}else np(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;so(t),f=!1}else ca!==null&&(u2(ca),ca=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Hr.current&1?Ii===0&&(Ii=3):XS())),t.updateQueue!==null&&(t.flags|=4),so(t),null);case 4:return ip(),n2(e,t),e===null&&ty(t.stateNode.containerInfo),so(t),null;case 10:return OS(t.type._context),so(t),null;case 17:return Zo(t.type)&&c1(),so(t),null;case 19:if(Or(Hr),f=t.memoizedState,f===null)return so(t),null;if(i=(t.flags&128)!==0,m=f.rendering,m===null)if(i)eg(f,!1);else{if(Ii!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=g1(e),m!==null){for(t.flags|=128,eg(f,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)f=n,e=i,f.flags&=14680066,m=f.alternate,m===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=m.childLanes,f.lanes=m.lanes,f.child=m.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=m.memoizedProps,f.memoizedState=m.memoizedState,f.updateQueue=m.updateQueue,f.type=m.type,e=m.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sr(Hr,Hr.current&1|2),t.child}e=e.sibling}f.tail!==null&&si()>sp&&(t.flags|=128,i=!0,eg(f,!1),t.lanes=4194304)}else{if(!i)if(e=g1(m),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),eg(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Vr)return so(t),null}else 2*si()-f.renderingStartTime>sp&&n!==1073741824&&(t.flags|=128,i=!0,eg(f,!1),t.lanes=4194304);f.isBackwards?(m.sibling=t.child,t.child=m):(n=f.last,n!==null?n.sibling=m:t.child=m,f.last=m)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=si(),t.sibling=null,n=Hr.current,Sr(Hr,i?n&1|2:n&1),t):(so(t),null);case 22:case 23:return YS(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ss&1073741824&&(so(t),t.subtreeFlags&6&&(t.flags|=8192)):so(t),null;case 24:return null;case 25:return null}throw Error(Ct(156,t.tag))}function VV(e,t){switch(CS(t),t.tag){case 1:return Zo(t.type)&&c1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ip(),Or(Ho),Or(po),BS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NS(t),null;case 13:if(Or(Hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ct(340));np()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Or(Hr),null;case 4:return ip(),null;case 10:return OS(t.type._context),null;case 22:case 23:return YS(),null;case 24:return null;default:return null}}var W0=!1,ho=!1,jV=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Rf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Jr(e,t,i)}else n.current=null}function r2(e,t,n){try{n()}catch(i){Jr(e,t,i)}}var rR=!1;function GV(e,t){if(UT=o1,e=ML(),MS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var m=0,s=-1,v=-1,E=0,I=0,M=e,P=null;t:for(;;){for(var D;M!==n||c!==0&&M.nodeType!==3||(s=m+c),M!==f||i!==0&&M.nodeType!==3||(v=m+i),M.nodeType===3&&(m+=M.nodeValue.length),(D=M.firstChild)!==null;)P=M,M=D;for(;;){if(M===e)break t;if(P===n&&++E===c&&(s=m),P===f&&++I===i&&(v=m),(D=M.nextSibling)!==null)break;M=P,P=M.parentNode}M=D}n=s===-1||v===-1?null:{start:s,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(VT={focusedElem:e,selectionRange:n},o1=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){t=Xt;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var V=k.memoizedProps,H=k.memoizedState,G=t.stateNode,z=G.getSnapshotBeforeUpdate(t.elementType===t.type?V:sa(t.type,V),H);G.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(W){Jr(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}return k=rR,rR=!1,k}function Mg(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&r2(t,n,f)}c=c.next}while(c!==i)}}function mx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function i2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function T3(e){var t=e.alternate;t!==null&&(e.alternate=null,T3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ja],delete t[ry],delete t[$T],delete t[SV],delete t[IV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function S3(e){return e.tag===5||e.tag===3||e.tag===4}function iR(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||S3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function o2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=l1));else if(i!==4&&(e=e.child,e!==null))for(o2(e,t,n),e=e.sibling;e!==null;)o2(e,t,n),e=e.sibling}function s2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(s2(e,t,n),e=e.sibling;e!==null;)s2(e,t,n),e=e.sibling}var qi=null,aa=!1;function zc(e,t,n){for(n=n.child;n!==null;)I3(e,t,n),n=n.sibling}function I3(e,t,n){if(ol&&typeof ol.onCommitFiberUnmount=="function")try{ol.onCommitFiberUnmount(ax,n)}catch{}switch(n.tag){case 5:ho||Rf(n,t);case 6:var i=qi,c=aa;qi=null,zc(e,t,n),qi=i,aa=c,qi!==null&&(aa?(e=qi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qi.removeChild(n.stateNode));break;case 18:qi!==null&&(aa?(e=qi,n=n.stateNode,e.nodeType===8?cE(e.parentNode,n):e.nodeType===1&&cE(e,n),Kg(e)):cE(qi,n.stateNode));break;case 4:i=qi,c=aa,qi=n.stateNode.containerInfo,aa=!0,zc(e,t,n),qi=i,aa=c;break;case 0:case 11:case 14:case 15:if(!ho&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var f=c,m=f.destroy;f=f.tag,m!==void 0&&(f&2||f&4)&&r2(n,t,m),c=c.next}while(c!==i)}zc(e,t,n);break;case 1:if(!ho&&(Rf(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Jr(n,t,s)}zc(e,t,n);break;case 21:zc(e,t,n);break;case 22:n.mode&1?(ho=(i=ho)||n.memoizedState!==null,zc(e,t,n),ho=i):zc(e,t,n);break;default:zc(e,t,n)}}function oR(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new jV),t.forEach(function(i){var c=KV.bind(null,e,i);n.has(i)||(n.add(i),i.then(c,c))})}}function ia(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];try{var f=e,m=t,s=m;e:for(;s!==null;){switch(s.tag){case 5:qi=s.stateNode,aa=!1;break e;case 3:qi=s.stateNode.containerInfo,aa=!0;break e;case 4:qi=s.stateNode.containerInfo,aa=!0;break e}s=s.return}if(qi===null)throw Error(Ct(160));I3(f,m,c),qi=null,aa=!1;var v=c.alternate;v!==null&&(v.return=null),c.return=null}catch(E){Jr(c,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)M3(t,e),t=t.sibling}function M3(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ia(t,e),Ga(e),i&4){try{Mg(3,e,e.return),mx(3,e)}catch(V){Jr(e,e.return,V)}try{Mg(5,e,e.return)}catch(V){Jr(e,e.return,V)}}break;case 1:ia(t,e),Ga(e),i&512&&n!==null&&Rf(n,n.return);break;case 5:if(ia(t,e),Ga(e),i&512&&n!==null&&Rf(n,n.return),e.flags&32){var c=e.stateNode;try{Zg(c,"")}catch(V){Jr(e,e.return,V)}}if(i&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,m=n!==null?n.memoizedProps:f,s=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{s==="input"&&f.type==="radio"&&f.name!=null&&Zk(c,f),PT(s,m);var E=PT(s,f);for(m=0;m<v.length;m+=2){var I=v[m],M=v[m+1];I==="style"?Jk(c,M):I==="dangerouslySetInnerHTML"?Qk(c,M):I==="children"?Zg(c,M):pS(c,I,M,E)}switch(s){case"input":ST(c,f);break;case"textarea":Yk(c,f);break;case"select":var P=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var D=f.value;D!=null?Vf(c,!!f.multiple,D,!1):P!==!!f.multiple&&(f.defaultValue!=null?Vf(c,!!f.multiple,f.defaultValue,!0):Vf(c,!!f.multiple,f.multiple?[]:"",!1))}c[ry]=f}catch(V){Jr(e,e.return,V)}}break;case 6:if(ia(t,e),Ga(e),i&4){if(e.stateNode===null)throw Error(Ct(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(V){Jr(e,e.return,V)}}break;case 3:if(ia(t,e),Ga(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Kg(t.containerInfo)}catch(V){Jr(e,e.return,V)}break;case 4:ia(t,e),Ga(e);break;case 13:ia(t,e),Ga(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(HS=si())),i&4&&oR(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(ho=(E=ho)||I,ia(t,e),ho=E):ia(t,e),Ga(e),i&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!I&&e.mode&1)for(Xt=e,I=e.child;I!==null;){for(M=Xt=I;Xt!==null;){switch(P=Xt,D=P.child,P.tag){case 0:case 11:case 14:case 15:Mg(4,P,P.return);break;case 1:Rf(P,P.return);var k=P.stateNode;if(typeof k.componentWillUnmount=="function"){i=P,n=P.return;try{t=i,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(V){Jr(i,n,V)}}break;case 5:Rf(P,P.return);break;case 22:if(P.memoizedState!==null){aR(M);continue}}D!==null?(D.return=P,Xt=D):aR(M)}I=I.sibling}e:for(I=null,M=e;;){if(M.tag===5){if(I===null){I=M;try{c=M.stateNode,E?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(s=M.stateNode,v=M.memoizedProps.style,m=v!=null&&v.hasOwnProperty("display")?v.display:null,s.style.display=Kk("display",m))}catch(V){Jr(e,e.return,V)}}}else if(M.tag===6){if(I===null)try{M.stateNode.nodeValue=E?"":M.memoizedProps}catch(V){Jr(e,e.return,V)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;I===M&&(I=null),M=M.return}I===M&&(I=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:ia(t,e),Ga(e),i&4&&oR(e);break;case 21:break;default:ia(t,e),Ga(e)}}function Ga(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(S3(n)){var i=n;break e}n=n.return}throw Error(Ct(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(Zg(c,""),i.flags&=-33);var f=iR(e);s2(e,f,c);break;case 3:case 4:var m=i.stateNode.containerInfo,s=iR(e);o2(e,s,m);break;default:throw Error(Ct(161))}}catch(v){Jr(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $V(e,t,n){Xt=e,A3(e)}function A3(e,t,n){for(var i=(e.mode&1)!==0;Xt!==null;){var c=Xt,f=c.child;if(c.tag===22&&i){var m=c.memoizedState!==null||W0;if(!m){var s=c.alternate,v=s!==null&&s.memoizedState!==null||ho;s=W0;var E=ho;if(W0=m,(ho=v)&&!E)for(Xt=c;Xt!==null;)m=Xt,v=m.child,m.tag===22&&m.memoizedState!==null?lR(c):v!==null?(v.return=m,Xt=v):lR(c);for(;f!==null;)Xt=f,A3(f),f=f.sibling;Xt=c,W0=s,ho=E}sR(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,Xt=f):sR(e)}}function sR(e){for(;Xt!==null;){var t=Xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ho||mx(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ho)if(n===null)i.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:sa(t.type,n.memoizedProps);i.componentDidUpdate(c,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&GP(t,f,i);break;case 3:var m=t.updateQueue;if(m!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}GP(t,m,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var I=E.memoizedState;if(I!==null){var M=I.dehydrated;M!==null&&Kg(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ct(163))}ho||t.flags&512&&i2(t)}catch(P){Jr(t,t.return,P)}}if(t===e){Xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Xt=n;break}Xt=t.return}}function aR(e){for(;Xt!==null;){var t=Xt;if(t===e){Xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Xt=n;break}Xt=t.return}}function lR(e){for(;Xt!==null;){var t=Xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mx(4,t)}catch(v){Jr(t,n,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(v){Jr(t,c,v)}}var f=t.return;try{i2(t)}catch(v){Jr(t,f,v)}break;case 5:var m=t.return;try{i2(t)}catch(v){Jr(t,m,v)}}}catch(v){Jr(t,t.return,v)}if(t===e){Xt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Xt=s;break}Xt=t.return}}var WV=Math.ceil,v1=tc.ReactCurrentDispatcher,WS=tc.ReactCurrentOwner,Ns=tc.ReactCurrentBatchConfig,Xn=0,Bi=null,mi=null,Yi=0,ss=0,Df=Eu(0),Ii=0,cy=null,Jh=0,gx=0,qS=0,Ag=null,Wo=null,HS=0,sp=1/0,Ll=null,x1=!1,a2=null,iu=null,q0=!1,Zc=null,w1=0,Cg=0,l2=null,Av=-1,Cv=0;function So(){return Xn&6?si():Av!==-1?Av:Av=si()}function ou(e){return e.mode&1?Xn&2&&Yi!==0?Yi&-Yi:AV.transition!==null?(Cv===0&&(Cv=hL()),Cv):(e=mr,e!==0||(e=window.event,e=e===void 0?16:_L(e.type)),e):1}function ma(e,t,n,i){if(50<Cg)throw Cg=0,l2=null,Error(Ct(185));Ay(e,n,i),(!(Xn&2)||e!==Bi)&&(e===Bi&&(!(Xn&2)&&(gx|=n),Ii===4&&Wc(e,Yi)),Yo(e,i),n===1&&Xn===0&&!(t.mode&1)&&(sp=si()+500,dx&&Tu()))}function Yo(e,t){var n=e.callbackNode;AU(e,t);var i=i1(e,e===Bi?Yi:0);if(i===0)n!==null&&yP(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&yP(n),t===1)e.tag===0?MV(cR.bind(null,e)):NL(cR.bind(null,e)),EV(function(){!(Xn&6)&&Tu()}),n=null;else{switch(dL(i)){case 1:n=vS;break;case 4:n=cL;break;case 16:n=r1;break;case 536870912:n=uL;break;default:n=r1}n=z3(n,C3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function C3(e,t){if(Av=-1,Cv=0,Xn&6)throw Error(Ct(327));var n=e.callbackNode;if(qf()&&e.callbackNode!==n)return null;var i=i1(e,e===Bi?Yi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=b1(e,i);else{t=i;var c=Xn;Xn|=2;var f=R3();(Bi!==e||Yi!==t)&&(Ll=null,sp=si()+500,$h(e,t));do try{ZV();break}catch(s){P3(e,s)}while(1);DS(),v1.current=f,Xn=c,mi!==null?t=0:(Bi=null,Yi=0,t=Ii)}if(t!==0){if(t===2&&(c=LT(e),c!==0&&(i=c,t=c2(e,c))),t===1)throw n=cy,$h(e,0),Wc(e,i),Yo(e,si()),n;if(t===6)Wc(e,i);else{if(c=e.current.alternate,!(i&30)&&!qV(c)&&(t=b1(e,i),t===2&&(f=LT(e),f!==0&&(i=f,t=c2(e,f))),t===1))throw n=cy,$h(e,0),Wc(e,i),Yo(e,si()),n;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(Ct(345));case 2:Ph(e,Wo,Ll);break;case 3:if(Wc(e,i),(i&130023424)===i&&(t=HS+500-si(),10<t)){if(i1(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){So(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=GT(Ph.bind(null,e,Wo,Ll),t);break}Ph(e,Wo,Ll);break;case 4:if(Wc(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var m=31-pa(i);f=1<<m,m=t[m],m>c&&(c=m),i&=~f}if(i=c,i=si()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*WV(i/1960))-i,10<i){e.timeoutHandle=GT(Ph.bind(null,e,Wo,Ll),i);break}Ph(e,Wo,Ll);break;case 5:Ph(e,Wo,Ll);break;default:throw Error(Ct(329))}}}return Yo(e,si()),e.callbackNode===n?C3.bind(null,e):null}function c2(e,t){var n=Ag;return e.current.memoizedState.isDehydrated&&($h(e,t).flags|=256),e=b1(e,t),e!==2&&(t=Wo,Wo=n,t!==null&&u2(t)),e}function u2(e){Wo===null?Wo=e:Wo.push.apply(Wo,e)}function qV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var c=n[i],f=c.getSnapshot;c=c.value;try{if(!ya(f(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wc(e,t){for(t&=~qS,t&=~gx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-pa(t),i=1<<n;e[n]=-1,t&=~i}}function cR(e){if(Xn&6)throw Error(Ct(327));qf();var t=i1(e,0);if(!(t&1))return Yo(e,si()),null;var n=b1(e,t);if(e.tag!==0&&n===2){var i=LT(e);i!==0&&(t=i,n=c2(e,i))}if(n===1)throw n=cy,$h(e,0),Wc(e,t),Yo(e,si()),n;if(n===6)throw Error(Ct(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ph(e,Wo,Ll),Yo(e,si()),null}function ZS(e,t){var n=Xn;Xn|=1;try{return e(t)}finally{Xn=n,Xn===0&&(sp=si()+500,dx&&Tu())}}function ed(e){Zc!==null&&Zc.tag===0&&!(Xn&6)&&qf();var t=Xn;Xn|=1;var n=Ns.transition,i=mr;try{if(Ns.transition=null,mr=1,e)return e()}finally{mr=i,Ns.transition=n,Xn=t,!(Xn&6)&&Tu()}}function YS(){ss=Df.current,Or(Df)}function $h(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bV(n)),mi!==null)for(n=mi.return;n!==null;){var i=n;switch(CS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&c1();break;case 3:ip(),Or(Ho),Or(po),BS();break;case 5:NS(i);break;case 4:ip();break;case 13:Or(Hr);break;case 19:Or(Hr);break;case 10:OS(i.type._context);break;case 22:case 23:YS()}n=n.return}if(Bi=e,mi=e=su(e.current,null),Yi=ss=t,Ii=0,cy=null,qS=gx=Jh=0,Wo=Ag=null,zh!==null){for(t=0;t<zh.length;t++)if(n=zh[t],i=n.interleaved,i!==null){n.interleaved=null;var c=i.next,f=n.pending;if(f!==null){var m=f.next;f.next=c,i.next=m}n.pending=i}zh=null}return e}function P3(e,t){do{var n=mi;try{if(DS(),Sv.current=_1,y1){for(var i=Yr.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}y1=!1}if(Kh=0,zi=Ti=Yr=null,Ig=!1,sy=0,WS.current=null,n===null||n.return===null){Ii=1,cy=t,mi=null;break}e:{var f=e,m=n.return,s=n,v=t;if(t=Yi,s.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var E=v,I=s,M=I.tag;if(!(I.mode&1)&&(M===0||M===11||M===15)){var P=I.alternate;P?(I.updateQueue=P.updateQueue,I.memoizedState=P.memoizedState,I.lanes=P.lanes):(I.updateQueue=null,I.memoizedState=null)}var D=XP(m);if(D!==null){D.flags&=-257,QP(D,m,s,f,t),D.mode&1&&YP(f,E,t),t=D,v=E;var k=t.updateQueue;if(k===null){var V=new Set;V.add(v),t.updateQueue=V}else k.add(v);break e}else{if(!(t&1)){YP(f,E,t),XS();break e}v=Error(Ct(426))}}else if(Vr&&s.mode&1){var H=XP(m);if(H!==null){!(H.flags&65536)&&(H.flags|=256),QP(H,m,s,f,t),PS(op(v,s));break e}}f=v=op(v,s),Ii!==4&&(Ii=2),Ag===null?Ag=[f]:Ag.push(f),f=m;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var G=f3(f,v,t);jP(f,G);break e;case 1:s=v;var z=f.type,N=f.stateNode;if(!(f.flags&128)&&(typeof z.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(iu===null||!iu.has(N)))){f.flags|=65536,t&=-t,f.lanes|=t;var W=p3(f,s,t);jP(f,W);break e}}f=f.return}while(f!==null)}O3(n)}catch($){t=$,mi===n&&n!==null&&(mi=n=n.return);continue}break}while(1)}function R3(){var e=v1.current;return v1.current=_1,e===null?_1:e}function XS(){(Ii===0||Ii===3||Ii===2)&&(Ii=4),Bi===null||!(Jh&268435455)&&!(gx&268435455)||Wc(Bi,Yi)}function b1(e,t){var n=Xn;Xn|=2;var i=R3();(Bi!==e||Yi!==t)&&(Ll=null,$h(e,t));do try{HV();break}catch(c){P3(e,c)}while(1);if(DS(),Xn=n,v1.current=i,mi!==null)throw Error(Ct(261));return Bi=null,Yi=0,Ii}function HV(){for(;mi!==null;)D3(mi)}function ZV(){for(;mi!==null&&!vU();)D3(mi)}function D3(e){var t=L3(e.alternate,e,ss);e.memoizedProps=e.pendingProps,t===null?O3(e):mi=t,WS.current=null}function O3(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=VV(n,t),n!==null){n.flags&=32767,mi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ii=6,mi=null;return}}else if(n=UV(n,t,ss),n!==null){mi=n;return}if(t=t.sibling,t!==null){mi=t;return}mi=t=e}while(t!==null);Ii===0&&(Ii=5)}function Ph(e,t,n){var i=mr,c=Ns.transition;try{Ns.transition=null,mr=1,YV(e,t,n,i)}finally{Ns.transition=c,mr=i}return null}function YV(e,t,n,i){do qf();while(Zc!==null);if(Xn&6)throw Error(Ct(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ct(177));e.callbackNode=null,e.callbackPriority=0;var f=n.lanes|n.childLanes;if(CU(e,f),e===Bi&&(mi=Bi=null,Yi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||q0||(q0=!0,z3(r1,function(){return qf(),null})),f=(n.flags&15990)!==0,n.subtreeFlags&15990||f){f=Ns.transition,Ns.transition=null;var m=mr;mr=1;var s=Xn;Xn|=4,WS.current=null,GV(e,n),M3(n,e),mV(VT),o1=!!UT,VT=UT=null,e.current=n,$V(n),xU(),Xn=s,mr=m,Ns.transition=f}else e.current=n;if(q0&&(q0=!1,Zc=e,w1=c),f=e.pendingLanes,f===0&&(iu=null),EU(n.stateNode),Yo(e,si()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],i(c.value,{componentStack:c.stack,digest:c.digest});if(x1)throw x1=!1,e=a2,a2=null,e;return w1&1&&e.tag!==0&&qf(),f=e.pendingLanes,f&1?e===l2?Cg++:(Cg=0,l2=e):Cg=0,Tu(),null}function qf(){if(Zc!==null){var e=dL(w1),t=Ns.transition,n=mr;try{if(Ns.transition=null,mr=16>e?16:e,Zc===null)var i=!1;else{if(e=Zc,Zc=null,w1=0,Xn&6)throw Error(Ct(331));var c=Xn;for(Xn|=4,Xt=e.current;Xt!==null;){var f=Xt,m=f.child;if(Xt.flags&16){var s=f.deletions;if(s!==null){for(var v=0;v<s.length;v++){var E=s[v];for(Xt=E;Xt!==null;){var I=Xt;switch(I.tag){case 0:case 11:case 15:Mg(8,I,f)}var M=I.child;if(M!==null)M.return=I,Xt=M;else for(;Xt!==null;){I=Xt;var P=I.sibling,D=I.return;if(T3(I),I===E){Xt=null;break}if(P!==null){P.return=D,Xt=P;break}Xt=D}}}var k=f.alternate;if(k!==null){var V=k.child;if(V!==null){k.child=null;do{var H=V.sibling;V.sibling=null,V=H}while(V!==null)}}Xt=f}}if(f.subtreeFlags&2064&&m!==null)m.return=f,Xt=m;else e:for(;Xt!==null;){if(f=Xt,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Mg(9,f,f.return)}var G=f.sibling;if(G!==null){G.return=f.return,Xt=G;break e}Xt=f.return}}var z=e.current;for(Xt=z;Xt!==null;){m=Xt;var N=m.child;if(m.subtreeFlags&2064&&N!==null)N.return=m,Xt=N;else e:for(m=z;Xt!==null;){if(s=Xt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:mx(9,s)}}catch($){Jr(s,s.return,$)}if(s===m){Xt=null;break e}var W=s.sibling;if(W!==null){W.return=s.return,Xt=W;break e}Xt=s.return}}if(Xn=c,Tu(),ol&&typeof ol.onPostCommitFiberRoot=="function")try{ol.onPostCommitFiberRoot(ax,e)}catch{}i=!0}return i}finally{mr=n,Ns.transition=t}}return!1}function uR(e,t,n){t=op(n,t),t=f3(e,t,1),e=ru(e,t,1),t=So(),e!==null&&(Ay(e,1,t),Yo(e,t))}function Jr(e,t,n){if(e.tag===3)uR(e,e,n);else for(;t!==null;){if(t.tag===3){uR(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(iu===null||!iu.has(i))){e=op(n,e),e=p3(t,e,1),t=ru(t,e,1),e=So(),t!==null&&(Ay(t,1,e),Yo(t,e));break}}t=t.return}}function XV(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=So(),e.pingedLanes|=e.suspendedLanes&n,Bi===e&&(Yi&n)===n&&(Ii===4||Ii===3&&(Yi&130023424)===Yi&&500>si()-HS?$h(e,0):qS|=n),Yo(e,t)}function k3(e,t){t===0&&(e.mode&1?(t=z0,z0<<=1,!(z0&130023424)&&(z0=4194304)):t=1);var n=So();e=Xl(e,t),e!==null&&(Ay(e,t,n),Yo(e,n))}function QV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),k3(e,n)}function KV(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ct(314))}i!==null&&i.delete(t),k3(e,n)}var L3;L3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ho.current)qo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return qo=!1,FV(e,t,n);qo=!!(e.flags&131072)}else qo=!1,Vr&&t.flags&1048576&&BL(t,d1,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Mv(e,t),e=t.pendingProps;var c=tp(t,po.current);Wf(t,n),c=US(null,t,i,e,c,n);var f=VS();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zo(i)?(f=!0,u1(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,LS(t),c.updater=fx,t.stateNode=c,c._reactInternals=t,XT(t,i,e,n),t=JT(null,t,i,!0,f,n)):(t.tag=0,Vr&&f&&AS(t),To(null,t,c,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Mv(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=ej(i),e=sa(i,e),c){case 0:t=KT(null,t,i,e,n);break e;case 1:t=eR(null,t,i,e,n);break e;case 11:t=KP(null,t,i,e,n);break e;case 14:t=JP(null,t,i,sa(i.type,e),n);break e}throw Error(Ct(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:sa(i,c),KT(e,t,i,c,n);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:sa(i,c),eR(e,t,i,c,n);case 3:e:{if(_3(t),e===null)throw Error(Ct(387));i=t.pendingProps,f=t.memoizedState,c=f.element,jL(e,t),m1(t,i,null,n);var m=t.memoizedState;if(i=m.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=op(Error(Ct(423)),t),t=tR(e,t,i,n,c);break e}else if(i!==c){c=op(Error(Ct(424)),t),t=tR(e,t,i,n,c);break e}else for(cs=nu(t.stateNode.containerInfo.firstChild),us=t,Vr=!0,ca=null,n=qL(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(np(),i===c){t=Ql(e,t,n);break e}To(e,t,i,n)}t=t.child}return t;case 5:return HL(t),e===null&&HT(t),i=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,m=c.children,jT(i,c)?m=null:f!==null&&jT(i,f)&&(t.flags|=32),y3(e,t),To(e,t,m,n),t.child;case 6:return e===null&&HT(t),null;case 13:return v3(e,t,n);case 4:return zS(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=rp(t,null,i,n):To(e,t,i,n),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:sa(i,c),KP(e,t,i,c,n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:return To(e,t,t.pendingProps.children,n),t.child;case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,f=t.memoizedProps,m=c.value,Sr(f1,i._currentValue),i._currentValue=m,f!==null)if(ya(f.value,m)){if(f.children===c.children&&!Ho.current){t=Ql(e,t,n);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var s=f.dependencies;if(s!==null){m=f.child;for(var v=s.firstContext;v!==null;){if(v.context===i){if(f.tag===1){v=$l(-1,n&-n),v.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var I=E.pending;I===null?v.next=v:(v.next=I.next,I.next=v),E.pending=v}}f.lanes|=n,v=f.alternate,v!==null&&(v.lanes|=n),ZT(f.return,n,t),s.lanes|=n;break}v=v.next}}else if(f.tag===10)m=f.type===t.type?null:f.child;else if(f.tag===18){if(m=f.return,m===null)throw Error(Ct(341));m.lanes|=n,s=m.alternate,s!==null&&(s.lanes|=n),ZT(m,n,t),m=f.sibling}else m=f.child;if(m!==null)m.return=f;else for(m=f;m!==null;){if(m===t){m=null;break}if(f=m.sibling,f!==null){f.return=m.return,m=f;break}m=m.return}f=m}To(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,Wf(t,n),c=Bs(c),i=i(c),t.flags|=1,To(e,t,i,n),t.child;case 14:return i=t.type,c=sa(i,t.pendingProps),c=sa(i.type,c),JP(e,t,i,c,n);case 15:return m3(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:sa(i,c),Mv(e,t),t.tag=1,Zo(i)?(e=!0,u1(t)):e=!1,Wf(t,n),$L(t,i,c),XT(t,i,c,n),JT(null,t,i,!0,e,n);case 19:return x3(e,t,n);case 22:return g3(e,t,n)}throw Error(Ct(156,t.tag))};function z3(e,t){return lL(e,t)}function JV(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(e,t,n,i){return new JV(e,t,n,i)}function QS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ej(e){if(typeof e=="function")return QS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gS)return 11;if(e===yS)return 14}return 2}function su(e,t){var n=e.alternate;return n===null?(n=Ls(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pv(e,t,n,i,c,f){var m=2;if(i=e,typeof e=="function")QS(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case bf:return Wh(n.children,c,f,t);case mS:m=8,c|=8;break;case xT:return e=Ls(12,n,t,c|2),e.elementType=xT,e.lanes=f,e;case wT:return e=Ls(13,n,t,c),e.elementType=wT,e.lanes=f,e;case bT:return e=Ls(19,n,t,c),e.elementType=bT,e.lanes=f,e;case Wk:return yx(n,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gk:m=10;break e;case $k:m=9;break e;case gS:m=11;break e;case yS:m=14;break e;case Vc:m=16,i=null;break e}throw Error(Ct(130,e==null?e:typeof e,""))}return t=Ls(m,n,t,c),t.elementType=e,t.type=i,t.lanes=f,t}function Wh(e,t,n,i){return e=Ls(7,e,i,t),e.lanes=n,e}function yx(e,t,n,i){return e=Ls(22,e,i,t),e.elementType=Wk,e.lanes=n,e.stateNode={isHidden:!1},e}function yE(e,t,n){return e=Ls(6,e,null,t),e.lanes=n,e}function _E(e,t,n){return t=Ls(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tj(e,t,n,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kb(0),this.expirationTimes=Kb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kb(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function KS(e,t,n,i,c,f,m,s,v){return e=new tj(e,t,n,s,v),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Ls(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},LS(f),e}function nj(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wf,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function N3(e){if(!e)return gu;e=e._reactInternals;e:{if(id(e)!==e||e.tag!==1)throw Error(Ct(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ct(171))}if(e.tag===1){var n=e.type;if(Zo(n))return zL(e,n,t)}return t}function B3(e,t,n,i,c,f,m,s,v){return e=KS(n,i,!0,e,c,f,m,s,v),e.context=N3(null),n=e.current,i=So(),c=ou(n),f=$l(i,c),f.callback=t??null,ru(n,f,c),e.current.lanes=c,Ay(e,c,i),Yo(e,i),e}function _x(e,t,n,i){var c=t.current,f=So(),m=ou(c);return n=N3(n),t.context===null?t.context=n:t.pendingContext=n,t=$l(f,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ru(c,t,m),e!==null&&(ma(e,c,m,f),Tv(e,c,m)),m}function E1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hR(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function JS(e,t){hR(e,t),(e=e.alternate)&&hR(e,t)}function rj(){return null}var F3=typeof reportError=="function"?reportError:function(e){console.error(e)};function eI(e){this._internalRoot=e}vx.prototype.render=eI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ct(409));_x(e,t,null,null)};vx.prototype.unmount=eI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ed(function(){_x(null,e,null,null)}),t[Yl]=null}};function vx(e){this._internalRoot=e}vx.prototype.unstable_scheduleHydration=function(e){if(e){var t=mL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$c.length&&t!==0&&t<$c[n].priority;n++);$c.splice(n,0,e),n===0&&yL(e)}};function tI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dR(){}function ij(e,t,n,i,c){if(c){if(typeof i=="function"){var f=i;i=function(){var E=E1(m);f.call(E)}}var m=B3(t,i,e,0,null,!1,!1,"",dR);return e._reactRootContainer=m,e[Yl]=m.current,ty(e.nodeType===8?e.parentNode:e),ed(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var s=i;i=function(){var E=E1(v);s.call(E)}}var v=KS(e,0,!1,null,null,!1,!1,"",dR);return e._reactRootContainer=v,e[Yl]=v.current,ty(e.nodeType===8?e.parentNode:e),ed(function(){_x(t,v,n,i)}),v}function wx(e,t,n,i,c){var f=n._reactRootContainer;if(f){var m=f;if(typeof c=="function"){var s=c;c=function(){var v=E1(m);s.call(v)}}_x(t,m,e,c)}else m=ij(n,t,e,c,i);return E1(m)}fL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mg(t.pendingLanes);n!==0&&(xS(t,n|1),Yo(t,si()),!(Xn&6)&&(sp=si()+500,Tu()))}break;case 13:ed(function(){var i=Xl(e,1);if(i!==null){var c=So();ma(i,e,1,c)}}),JS(e,1)}};wS=function(e){if(e.tag===13){var t=Xl(e,134217728);if(t!==null){var n=So();ma(t,e,134217728,n)}JS(e,134217728)}};pL=function(e){if(e.tag===13){var t=ou(e),n=Xl(e,t);if(n!==null){var i=So();ma(n,e,t,i)}JS(e,t)}};mL=function(){return mr};gL=function(e,t){var n=mr;try{return mr=e,t()}finally{mr=n}};DT=function(e,t,n){switch(t){case"input":if(ST(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=hx(i);if(!c)throw Error(Ct(90));Hk(i),ST(i,c)}}}break;case"textarea":Yk(e,n);break;case"select":t=n.value,t!=null&&Vf(e,!!n.multiple,t,!1)}};nL=ZS;rL=ed;var oj={usingClientEntryPoint:!1,Events:[Py,If,hx,eL,tL,ZS]},tg={findFiberByHostInstance:Lh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sj={bundleType:tg.bundleType,version:tg.version,rendererPackageName:tg.rendererPackageName,rendererConfig:tg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sL(e),e===null?null:e.stateNode},findFiberByHostInstance:tg.findFiberByHostInstance||rj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H0.isDisabled&&H0.supportsFiber)try{ax=H0.inject(sj),ol=H0}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oj;ps.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tI(t))throw Error(Ct(200));return nj(e,t,null,n)};ps.createRoot=function(e,t){if(!tI(e))throw Error(Ct(299));var n=!1,i="",c=F3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=KS(e,1,!1,null,null,n,!1,i,c),e[Yl]=t.current,ty(e.nodeType===8?e.parentNode:e),new eI(t)};ps.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ct(188)):(e=Object.keys(e).join(","),Error(Ct(268,e)));return e=sL(t),e=e===null?null:e.stateNode,e};ps.flushSync=function(e){return ed(e)};ps.hydrate=function(e,t,n){if(!xx(t))throw Error(Ct(200));return wx(null,e,t,!0,n)};ps.hydrateRoot=function(e,t,n){if(!tI(e))throw Error(Ct(405));var i=n!=null&&n.hydratedSources||null,c=!1,f="",m=F3;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),t=B3(t,null,e,1,n??null,c,!1,f,m),e[Yl]=t.current,ty(e),i)for(e=0;e<i.length;e++)n=i[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new vx(t)};ps.render=function(e,t,n){if(!xx(t))throw Error(Ct(200));return wx(null,e,t,!1,n)};ps.unmountComponentAtNode=function(e){if(!xx(e))throw Error(Ct(40));return e._reactRootContainer?(ed(function(){wx(null,null,e,!1,function(){e._reactRootContainer=null,e[Yl]=null})}),!0):!1};ps.unstable_batchedUpdates=ZS;ps.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!xx(n))throw Error(Ct(200));if(e==null||e._reactInternals===void 0)throw Error(Ct(38));return wx(e,t,n,!1,i)};ps.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=ps})(rU);var bx,fR=Jf;bx=yT.createRoot=fR.createRoot,yT.hydrateRoot=fR.hydrateRoot;/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},uy.apply(this,arguments)}var Yc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yc||(Yc={}));const pR="popstate";function aj(e){e===void 0&&(e={});function t(i,c){let{pathname:f,search:m,hash:s}=i.location;return h2("",{pathname:f,search:m,hash:s},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(i,c){return typeof c=="string"?c:T1(c)}return cj(t,n,null,e)}function gi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nI(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lj(){return Math.random().toString(36).substr(2,8)}function mR(e,t){return{usr:e.state,key:e.key,idx:t}}function h2(e,t,n,i){return n===void 0&&(n=null),uy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yp(t):t,{state:n,key:t&&t.key||i||lj()})}function T1(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function yp(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function cj(e,t,n,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:f=!1}=i,m=c.history,s=Yc.Pop,v=null,E=I();E==null&&(E=0,m.replaceState(uy({},m.state,{idx:E}),""));function I(){return(m.state||{idx:null}).idx}function M(){s=Yc.Pop;let H=I(),G=H==null?null:H-E;E=H,v&&v({action:s,location:V.location,delta:G})}function P(H,G){s=Yc.Push;let z=h2(V.location,H,G);n&&n(z,H),E=I()+1;let N=mR(z,E),W=V.createHref(z);try{m.pushState(N,"",W)}catch{c.location.assign(W)}f&&v&&v({action:s,location:V.location,delta:1})}function D(H,G){s=Yc.Replace;let z=h2(V.location,H,G);n&&n(z,H),E=I();let N=mR(z,E),W=V.createHref(z);m.replaceState(N,"",W),f&&v&&v({action:s,location:V.location,delta:0})}function k(H){let G=c.location.origin!=="null"?c.location.origin:c.location.href,z=typeof H=="string"?H:T1(H);return gi(G,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,G)}let V={get action(){return s},get location(){return e(c,m)},listen(H){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(pR,M),v=H,()=>{c.removeEventListener(pR,M),v=null}},createHref(H){return t(c,H)},createURL:k,encodeLocation(H){let G=k(H);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:P,replace:D,go(H){return m.go(H)}};return V}var gR;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gR||(gR={}));function uj(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?yp(t):t,c=rI(i.pathname||"/",n);if(c==null)return null;let f=U3(e);hj(f);let m=null;for(let s=0;m==null&&s<f.length;++s)m=xj(f[s],Ej(c));return m}function U3(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let c=(f,m,s)=>{let v={relativePath:s===void 0?f.path||"":s,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};v.relativePath.startsWith("/")&&(gi(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let E=au([i,v.relativePath]),I=n.concat(v);f.children&&f.children.length>0&&(gi(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),U3(f.children,t,I,E)),!(f.path==null&&!f.index)&&t.push({path:E,score:_j(E,f.index),routesMeta:I})};return e.forEach((f,m)=>{var s;if(f.path===""||!((s=f.path)!=null&&s.includes("?")))c(f,m);else for(let v of V3(f.path))c(f,m,v)}),t}function V3(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,c=n.endsWith("?"),f=n.replace(/\?$/,"");if(i.length===0)return c?[f,""]:[f];let m=V3(i.join("/")),s=[];return s.push(...m.map(v=>v===""?f:[f,v].join("/"))),c&&s.push(...m),s.map(v=>e.startsWith("/")&&v===""?"/":v)}function hj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vj(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const dj=/^:\w+$/,fj=3,pj=2,mj=1,gj=10,yj=-2,yR=e=>e==="*";function _j(e,t){let n=e.split("/"),i=n.length;return n.some(yR)&&(i+=yj),t&&(i+=pj),n.filter(c=>!yR(c)).reduce((c,f)=>c+(dj.test(f)?fj:f===""?mj:gj),i)}function vj(e,t){return e.length===t.length&&e.slice(0,-1).every((i,c)=>i===t[c])?e[e.length-1]-t[t.length-1]:0}function xj(e,t){let{routesMeta:n}=e,i={},c="/",f=[];for(let m=0;m<n.length;++m){let s=n[m],v=m===n.length-1,E=c==="/"?t:t.slice(c.length)||"/",I=wj({path:s.relativePath,caseSensitive:s.caseSensitive,end:v},E);if(!I)return null;Object.assign(i,I.params);let M=s.route;f.push({params:i,pathname:au([c,I.pathname]),pathnameBase:Mj(au([c,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(c=au([c,I.pathnameBase]))}return f}function wj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=bj(e.path,e.caseSensitive,e.end),c=t.match(n);if(!c)return null;let f=c[0],m=f.replace(/(.)\/+$/,"$1"),s=c.slice(1);return{params:i.reduce((E,I,M)=>{if(I==="*"){let P=s[M]||"";m=f.slice(0,f.length-P.length).replace(/(.)\/+$/,"$1")}return E[I]=Tj(s[M]||"",I),E},{}),pathname:f,pathnameBase:m,pattern:e}}function bj(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),nI(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(m,s)=>(i.push(s),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),i]}function Ej(e){try{return decodeURI(e)}catch(t){return nI(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Tj(e,t){try{return decodeURIComponent(e)}catch(n){return nI(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function rI(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function Sj(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:c=""}=typeof e=="string"?yp(e):e;return{pathname:n?n.startsWith("/")?n:Ij(n,t):t,search:Aj(i),hash:Cj(c)}}function Ij(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function vE(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function G3(e,t,n,i){i===void 0&&(i=!1);let c;typeof e=="string"?c=yp(e):(c=uy({},e),gi(!c.pathname||!c.pathname.includes("?"),vE("?","pathname","search",c)),gi(!c.pathname||!c.pathname.includes("#"),vE("#","pathname","hash",c)),gi(!c.search||!c.search.includes("#"),vE("#","search","hash",c)));let f=e===""||c.pathname==="",m=f?"/":c.pathname,s;if(i||m==null)s=n;else{let M=t.length-1;if(m.startsWith("..")){let P=m.split("/");for(;P[0]==="..";)P.shift(),M-=1;c.pathname=P.join("/")}s=M>=0?t[M]:"/"}let v=Sj(c,s),E=m&&m!=="/"&&m.endsWith("/"),I=(f||m===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(E||I)&&(v.pathname+="/"),v}const au=e=>e.join("/").replace(/\/\/+/g,"/"),Mj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Aj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Cj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Pj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Dj=typeof Object.is=="function"?Object.is:Rj,{useState:Oj,useEffect:kj,useLayoutEffect:Lj,useDebugValue:zj}=gT;function Nj(e,t,n){const i=t(),[{inst:c},f]=Oj({inst:{value:i,getSnapshot:t}});return Lj(()=>{c.value=i,c.getSnapshot=t,xE(c)&&f({inst:c})},[e,i,t]),kj(()=>(xE(c)&&f({inst:c}),e(()=>{xE(c)&&f({inst:c})})),[e]),zj(i),i}function xE(e){const t=e.getSnapshot,n=e.value;try{const i=t();return!Dj(n,i)}catch{return!0}}function Bj(e,t,n){return t()}const Fj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uj=!Fj,Vj=Uj?Bj:Nj;"useSyncExternalStore"in gT&&(e=>e.useSyncExternalStore)(gT);const $3=ue.createContext(null),Ex=ue.createContext(null),_p=ue.createContext(null),Tx=ue.createContext(null),Su=ue.createContext({outlet:null,matches:[]}),W3=ue.createContext(null);function d2(){return d2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d2.apply(this,arguments)}function jj(e,t){let{relative:n}=t===void 0?{}:t;vp()||gi(!1);let{basename:i,navigator:c}=ue.useContext(_p),{hash:f,pathname:m,search:s}=iI(e,{relative:n}),v=m;return i!=="/"&&(v=m==="/"?i:au([i,m])),c.createHref({pathname:v,search:s,hash:f})}function vp(){return ue.useContext(Tx)!=null}function Dy(){return vp()||gi(!1),ue.useContext(Tx).location}function Oy(){vp()||gi(!1);let{basename:e,navigator:t}=ue.useContext(_p),{matches:n}=ue.useContext(Su),{pathname:i}=Dy(),c=JSON.stringify(j3(n).map(s=>s.pathnameBase)),f=ue.useRef(!1);return ue.useEffect(()=>{f.current=!0}),ue.useCallback(function(s,v){if(v===void 0&&(v={}),!f.current)return;if(typeof s=="number"){t.go(s);return}let E=G3(s,JSON.parse(c),i,v.relative==="path");e!=="/"&&(E.pathname=E.pathname==="/"?e:au([e,E.pathname])),(v.replace?t.replace:t.push)(E,v.state,v)},[e,t,c,i])}const Gj=ue.createContext(null);function $j(e){let t=ue.useContext(Su).outlet;return t&&ue.createElement(Gj.Provider,{value:e},t)}function Wj(){let{matches:e}=ue.useContext(Su),t=e[e.length-1];return t?t.params:{}}function iI(e,t){let{relative:n}=t===void 0?{}:t,{matches:i}=ue.useContext(Su),{pathname:c}=Dy(),f=JSON.stringify(j3(i).map(m=>m.pathnameBase));return ue.useMemo(()=>G3(e,JSON.parse(f),c,n==="path"),[e,f,c,n])}function qj(e,t){vp()||gi(!1);let{navigator:n}=ue.useContext(_p),i=ue.useContext(Ex),{matches:c}=ue.useContext(Su),f=c[c.length-1],m=f?f.params:{};f&&f.pathname;let s=f?f.pathnameBase:"/";f&&f.route;let v=Dy(),E;if(t){var I;let V=typeof t=="string"?yp(t):t;s==="/"||(I=V.pathname)!=null&&I.startsWith(s)||gi(!1),E=V}else E=v;let M=E.pathname||"/",P=s==="/"?M:M.slice(s.length)||"/",D=uj(e,{pathname:P}),k=Xj(D&&D.map(V=>Object.assign({},V,{params:Object.assign({},m,V.params),pathname:au([s,n.encodeLocation?n.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?s:au([s,n.encodeLocation?n.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),c,i||void 0);return t&&k?ue.createElement(Tx.Provider,{value:{location:d2({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:Yc.Pop}},k):k}function Hj(){let e=eG(),t=Pj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},f=null;return ue.createElement(ue.Fragment,null,ue.createElement("h2",null,"Unexpected Application Error!"),ue.createElement("h3",{style:{fontStyle:"italic"}},t),n?ue.createElement("pre",{style:c},n):null,f)}class Zj extends ue.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?ue.createElement(Su.Provider,{value:this.props.routeContext},ue.createElement(W3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yj(e){let{routeContext:t,match:n,children:i}=e,c=ue.useContext($3);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),ue.createElement(Su.Provider,{value:t},i)}function Xj(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let i=e,c=n==null?void 0:n.errors;if(c!=null){let f=i.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id]));f>=0||gi(!1),i=i.slice(0,Math.min(i.length,f+1))}return i.reduceRight((f,m,s)=>{let v=m.route.id?c==null?void 0:c[m.route.id]:null,E=null;n&&(m.route.ErrorBoundary?E=ue.createElement(m.route.ErrorBoundary,null):m.route.errorElement?E=m.route.errorElement:E=ue.createElement(Hj,null));let I=t.concat(i.slice(0,s+1)),M=()=>{let P=f;return v?P=E:m.route.Component?P=ue.createElement(m.route.Component,null):m.route.element&&(P=m.route.element),ue.createElement(Yj,{match:m,routeContext:{outlet:f,matches:I},children:P})};return n&&(m.route.ErrorBoundary||m.route.errorElement||s===0)?ue.createElement(Zj,{location:n.location,component:E,error:v,children:M(),routeContext:{outlet:null,matches:I}}):M()},null)}var _R;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(_R||(_R={}));var S1;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(S1||(S1={}));function Qj(e){let t=ue.useContext(Ex);return t||gi(!1),t}function Kj(e){let t=ue.useContext(Su);return t||gi(!1),t}function Jj(e){let t=Kj(),n=t.matches[t.matches.length-1];return n.route.id||gi(!1),n.route.id}function eG(){var e;let t=ue.useContext(W3),n=Qj(S1.UseRouteError),i=Jj(S1.UseRouteError);return t||((e=n.errors)==null?void 0:e[i])}function tG(e){let{to:t,replace:n,state:i,relative:c}=e;vp()||gi(!1);let f=ue.useContext(Ex),m=Oy();return ue.useEffect(()=>{f&&f.navigation.state!=="idle"||m(t,{replace:n,state:i,relative:c})}),null}function oI(e){return $j(e.context)}function as(e){gi(!1)}function nG(e){let{basename:t="/",children:n=null,location:i,navigationType:c=Yc.Pop,navigator:f,static:m=!1}=e;vp()&&gi(!1);let s=t.replace(/^\/*/,"/"),v=ue.useMemo(()=>({basename:s,navigator:f,static:m}),[s,f,m]);typeof i=="string"&&(i=yp(i));let{pathname:E="/",search:I="",hash:M="",state:P=null,key:D="default"}=i,k=ue.useMemo(()=>{let V=rI(E,s);return V==null?null:{location:{pathname:V,search:I,hash:M,state:P,key:D},navigationType:c}},[s,E,I,M,P,D,c]);return k==null?null:ue.createElement(_p.Provider,{value:v},ue.createElement(Tx.Provider,{children:n,value:k}))}function q3(e){let{children:t,location:n}=e,i=ue.useContext($3),c=i&&!t?i.router.routes:f2(t);return qj(c,n)}var vR;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(vR||(vR={}));new Promise(()=>{});function f2(e,t){t===void 0&&(t=[]);let n=[];return ue.Children.forEach(e,(i,c)=>{if(!ue.isValidElement(i))return;let f=[...t,c];if(i.type===ue.Fragment){n.push.apply(n,f2(i.props.children,f));return}i.type!==as&&gi(!1),!i.props.index||!i.props.children||gi(!1);let m={id:i.props.id||f.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(m.children=f2(i.props.children,f)),n.push(m)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I1(){return I1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},I1.apply(this,arguments)}function H3(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,f;for(f=0;f<i.length;f++)c=i[f],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function rG(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iG(e,t){return e.button===0&&(!t||t==="_self")&&!rG(e)}const oG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],sG=["aria-current","caseSensitive","className","end","style","to","children"];function aG(e){let{basename:t,children:n,window:i}=e,c=ue.useRef();c.current==null&&(c.current=aj({window:i,v5Compat:!0}));let f=c.current,[m,s]=ue.useState({action:f.action,location:f.location});return ue.useLayoutEffect(()=>f.listen(s),[f]),ue.createElement(nG,{basename:t,children:n,location:m.location,navigationType:m.action,navigator:f})}const lG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sx=ue.forwardRef(function(t,n){let{onClick:i,relative:c,reloadDocument:f,replace:m,state:s,target:v,to:E,preventScrollReset:I}=t,M=H3(t,oG),{basename:P}=ue.useContext(_p),D,k=!1;if(typeof E=="string"&&cG.test(E)&&(D=E,lG)){let z=new URL(window.location.href),N=E.startsWith("//")?new URL(z.protocol+E):new URL(E),W=rI(N.pathname,P);N.origin===z.origin&&W!=null?E=W+N.search+N.hash:k=!0}let V=jj(E,{relative:c}),H=uG(E,{replace:m,state:s,target:v,preventScrollReset:I,relative:c});function G(z){i&&i(z),z.defaultPrevented||H(z)}return ue.createElement("a",I1({},M,{href:D||V,onClick:k||f?i:G,ref:n,target:v}))}),Bl=ue.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:c=!1,className:f="",end:m=!1,style:s,to:v,children:E}=t,I=H3(t,sG),M=iI(v,{relative:I.relative}),P=Dy(),D=ue.useContext(Ex),{navigator:k}=ue.useContext(_p),V=k.encodeLocation?k.encodeLocation(M).pathname:M.pathname,H=P.pathname,G=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;c||(H=H.toLowerCase(),G=G?G.toLowerCase():null,V=V.toLowerCase());let z=H===V||!m&&H.startsWith(V)&&H.charAt(V.length)==="/",N=G!=null&&(G===V||!m&&G.startsWith(V)&&G.charAt(V.length)==="/"),W=z?i:void 0,$;typeof f=="function"?$=f({isActive:z,isPending:N}):$=[f,z?"active":null,N?"pending":null].filter(Boolean).join(" ");let X=typeof s=="function"?s({isActive:z,isPending:N}):s;return ue.createElement(Sx,I1({},I,{"aria-current":W,className:$,ref:n,style:X,to:v}),typeof E=="function"?E({isActive:z,isPending:N}):E)});var xR;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(xR||(xR={}));var wR;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wR||(wR={}));function uG(e,t){let{target:n,replace:i,state:c,preventScrollReset:f,relative:m}=t===void 0?{}:t,s=Oy(),v=Dy(),E=iI(e,{relative:m});return ue.useCallback(I=>{if(iG(I,n)){I.preventDefault();let M=i!==void 0?i:T1(v)===T1(E);s(e,{replace:M,state:c,preventScrollReset:f,relative:m})}},[v,s,E,i,c,n,e,f,m])}const Ix=ue.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Mx=ue.createContext({}),Ax=ue.createContext(null),Cx=typeof document<"u",ap=Cx?ue.useLayoutEffect:ue.useEffect,Z3=ue.createContext({strict:!1});function hG(e,t,n,i){const{visualElement:c}=ue.useContext(Mx),f=ue.useContext(Z3),m=ue.useContext(Ax),s=ue.useContext(Ix).reducedMotion,v=ue.useRef();i=i||f.renderer,!v.current&&i&&(v.current=i(e,{visualState:t,parent:c,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:s}));const E=v.current;return ue.useInsertionEffect(()=>{E&&E.update(n,m)}),ap(()=>{E&&E.render()}),ue.useEffect(()=>{E&&E.updateFeatures()}),(window.HandoffAppearAnimations?ap:ue.useEffect)(()=>{E&&E.animationState&&E.animationState.animateChanges()}),E}function Of(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function dG(e,t,n){return ue.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Of(n)&&(n.current=i))},[t])}function hy(e){return typeof e=="string"||Array.isArray(e)}function Px(e){return typeof e=="object"&&typeof e.start=="function"}const sI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],aI=["initial",...sI];function Rx(e){return Px(e.animate)||aI.some(t=>hy(e[t]))}function Y3(e){return!!(Rx(e)||e.variants)}function fG(e,t){if(Rx(e)){const{initial:n,animate:i}=e;return{initial:n===!1||hy(n)?n:void 0,animate:hy(i)?i:void 0}}return e.inherit!==!1?t:{}}function pG(e){const{initial:t,animate:n}=fG(e,ue.useContext(Mx));return ue.useMemo(()=>({initial:t,animate:n}),[bR(t),bR(n)])}function bR(e){return Array.isArray(e)?e.join(" "):e}const ER={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dy={};for(const e in ER)dy[e]={isEnabled:t=>ER[e].some(n=>!!t[n])};function mG(e){for(const t in e)dy[t]={...dy[t],...e[t]}}function ky(e){const t=ue.useRef(null);return t.current===null&&(t.current=e()),t.current}const Pg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let gG=1;function yG(){return ky(()=>{if(Pg.hasEverUpdated)return gG++})}const lI=ue.createContext({}),X3=ue.createContext({}),_G=Symbol.for("motionComponentSymbol");function vG({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:c}){e&&mG(e);function f(s,v){let E;const I={...ue.useContext(Ix),...s,layoutId:xG(s)},{isStatic:M}=I,P=pG(s),D=M?void 0:yG(),k=i(s,M);if(!M&&Cx){P.visualElement=hG(c,k,I,t);const V=ue.useContext(X3),H=ue.useContext(Z3).strict;P.visualElement&&(E=P.visualElement.loadFeatures(I,H,e,D,V))}return ue.createElement(Mx.Provider,{value:P},E&&P.visualElement?ue.createElement(E,{visualElement:P.visualElement,...I}):null,n(c,s,D,dG(k,P.visualElement,v),k,M,P.visualElement))}const m=ue.forwardRef(f);return m[_G]=c,m}function xG({layoutId:e}){const t=ue.useContext(lI).id;return t&&e!==void 0?t+"-"+e:e}function wG(e){function t(i,c={}){return vG(e(i,c))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,c)=>(n.has(c)||n.set(c,t(c)),n.get(c))})}const bG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cI(e){return typeof e!="string"||e.includes("-")?!1:!!(bG.indexOf(e)>-1||/[A-Z]/.test(e))}const M1={};function EG(e){Object.assign(M1,e)}const Ly=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],od=new Set(Ly);function Q3(e,{layout:t,layoutId:n}){return od.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!M1[e]||e==="opacity")}const mo=e=>!!(e&&e.getVelocity),TG={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SG=Ly.length;function IG(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,c){let f="";for(let m=0;m<SG;m++){const s=Ly[m];if(e[s]!==void 0){const v=TG[s]||s;f+=`${v}(${e[s]}) `}}return t&&!e.z&&(f+="translateZ(0)"),f=f.trim(),c?f=c(e,i?"":f):n&&i&&(f="none"),f}const K3=e=>t=>typeof t=="string"&&t.startsWith(e),J3=K3("--"),p2=K3("var(--"),MG=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,AG=(e,t)=>t&&typeof e=="number"?t.transform(e):e,td=(e,t,n)=>Math.min(Math.max(n,e),t),sd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Rg={...sd,transform:e=>td(0,1,e)},Z0={...sd,default:1},Dg=e=>Math.round(e*1e5)/1e5,Dx=/(-)?([\d]*\.?[\d])+/g,e5=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,CG=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function zy(e){return typeof e=="string"}const Ny=e=>({test:t=>zy(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Fc=Ny("deg"),al=Ny("%"),un=Ny("px"),PG=Ny("vh"),RG=Ny("vw"),TR={...al,parse:e=>al.parse(e)/100,transform:e=>al.transform(e*100)},SR={...sd,transform:Math.round},t5={borderWidth:un,borderTopWidth:un,borderRightWidth:un,borderBottomWidth:un,borderLeftWidth:un,borderRadius:un,radius:un,borderTopLeftRadius:un,borderTopRightRadius:un,borderBottomRightRadius:un,borderBottomLeftRadius:un,width:un,maxWidth:un,height:un,maxHeight:un,size:un,top:un,right:un,bottom:un,left:un,padding:un,paddingTop:un,paddingRight:un,paddingBottom:un,paddingLeft:un,margin:un,marginTop:un,marginRight:un,marginBottom:un,marginLeft:un,rotate:Fc,rotateX:Fc,rotateY:Fc,rotateZ:Fc,scale:Z0,scaleX:Z0,scaleY:Z0,scaleZ:Z0,skew:Fc,skewX:Fc,skewY:Fc,distance:un,translateX:un,translateY:un,translateZ:un,x:un,y:un,z:un,perspective:un,transformPerspective:un,opacity:Rg,originX:TR,originY:TR,originZ:un,zIndex:SR,fillOpacity:Rg,strokeOpacity:Rg,numOctaves:SR};function uI(e,t,n,i){const{style:c,vars:f,transform:m,transformOrigin:s}=e;let v=!1,E=!1,I=!0;for(const M in t){const P=t[M];if(J3(M)){f[M]=P;continue}const D=t5[M],k=AG(P,D);if(od.has(M)){if(v=!0,m[M]=k,!I)continue;P!==(D.default||0)&&(I=!1)}else M.startsWith("origin")?(E=!0,s[M]=k):c[M]=k}if(t.transform||(v||i?c.transform=IG(e.transform,n,I,i):c.transform&&(c.transform="none")),E){const{originX:M="50%",originY:P="50%",originZ:D=0}=s;c.transformOrigin=`${M} ${P} ${D}`}}const hI=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function n5(e,t,n){for(const i in t)!mo(t[i])&&!Q3(i,n)&&(e[i]=t[i])}function DG({transformTemplate:e},t,n){return ue.useMemo(()=>{const i=hI();return uI(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function OG(e,t,n){const i=e.style||{},c={};return n5(c,i,e),Object.assign(c,DG(e,t,n)),e.transformValues?e.transformValues(c):c}function kG(e,t,n){const i={},c=OG(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=c,i}const LG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function A1(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||LG.has(e)}let r5=e=>!A1(e);function zG(e){e&&(r5=t=>t.startsWith("on")?!A1(t):e(t))}try{zG(require("@emotion/is-prop-valid").default)}catch{}function NG(e,t,n){const i={};for(const c in e)c==="values"&&typeof e.values=="object"||(r5(c)||n===!0&&A1(c)||!t&&!A1(c)||e.draggable&&c.startsWith("onDrag"))&&(i[c]=e[c]);return i}function IR(e,t,n){return typeof e=="string"?e:un.transform(t+n*e)}function BG(e,t,n){const i=IR(t,e.x,e.width),c=IR(n,e.y,e.height);return`${i} ${c}`}const FG={offset:"stroke-dashoffset",array:"stroke-dasharray"},UG={offset:"strokeDashoffset",array:"strokeDasharray"};function VG(e,t,n=1,i=0,c=!0){e.pathLength=1;const f=c?FG:UG;e[f.offset]=un.transform(-i);const m=un.transform(t),s=un.transform(n);e[f.array]=`${m} ${s}`}function dI(e,{attrX:t,attrY:n,attrScale:i,originX:c,originY:f,pathLength:m,pathSpacing:s=1,pathOffset:v=0,...E},I,M,P){if(uI(e,E,I,P),M){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:D,style:k,dimensions:V}=e;D.transform&&(V&&(k.transform=D.transform),delete D.transform),V&&(c!==void 0||f!==void 0||k.transform)&&(k.transformOrigin=BG(V,c!==void 0?c:.5,f!==void 0?f:.5)),t!==void 0&&(D.x=t),n!==void 0&&(D.y=n),i!==void 0&&(D.scale=i),m!==void 0&&VG(D,m,s,v,!1)}const i5=()=>({...hI(),attrs:{}}),fI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function jG(e,t,n,i){const c=ue.useMemo(()=>{const f=i5();return dI(f,t,{enableHardwareAcceleration:!1},fI(i),e.transformTemplate),{...f.attrs,style:{...f.style}}},[t]);if(e.style){const f={};n5(f,e.style,e),c.style={...f,...c.style}}return c}function GG(e=!1){return(n,i,c,f,{latestValues:m},s)=>{const E=(cI(n)?jG:kG)(i,m,s,n),M={...NG(i,typeof n=="string",e),...E,ref:f},{children:P}=i,D=ue.useMemo(()=>mo(P)?P.get():P,[P]);return c&&(M["data-projection-id"]=c),ue.createElement(n,{...M,children:D})}}const pI=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function o5(e,{style:t,vars:n},i,c){Object.assign(e.style,t,c&&c.getProjectionStyles(i));for(const f in n)e.style.setProperty(f,n[f])}const s5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function a5(e,t,n,i){o5(e,t,void 0,i);for(const c in t.attrs)e.setAttribute(s5.has(c)?c:pI(c),t.attrs[c])}function mI(e,t){const{style:n}=e,i={};for(const c in n)(mo(n[c])||t.style&&mo(t.style[c])||Q3(c,e))&&(i[c]=n[c]);return i}function l5(e,t){const n=mI(e,t);for(const i in e)if(mo(e[i])||mo(t[i])){const c=Ly.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[c]=e[i]}return n}function gI(e,t,n,i={},c={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,c)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,c)),t}const C1=e=>Array.isArray(e),$G=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),WG=e=>C1(e)?e[e.length-1]||0:e;function Rv(e){const t=mo(e)?e.get():e;return $G(t)?t.toValue():t}function qG({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,c,f){const m={latestValues:HG(i,c,f,e),renderState:t()};return n&&(m.mount=s=>n(i,s,m)),m}const c5=e=>(t,n)=>{const i=ue.useContext(Mx),c=ue.useContext(Ax),f=()=>qG(e,t,i,c);return n?f():ky(f)};function HG(e,t,n,i){const c={},f=i(e,{});for(const P in f)c[P]=Rv(f[P]);let{initial:m,animate:s}=e;const v=Rx(e),E=Y3(e);t&&E&&!v&&e.inherit!==!1&&(m===void 0&&(m=t.initial),s===void 0&&(s=t.animate));let I=n?n.initial===!1:!1;I=I||m===!1;const M=I?s:m;return M&&typeof M!="boolean"&&!Px(M)&&(Array.isArray(M)?M:[M]).forEach(D=>{const k=gI(e,D);if(!k)return;const{transitionEnd:V,transition:H,...G}=k;for(const z in G){let N=G[z];if(Array.isArray(N)){const W=I?N.length-1:0;N=N[W]}N!==null&&(c[z]=N)}for(const z in V)c[z]=V[z]}),c}const ZG={useVisualState:c5({scrapeMotionValuesFromProps:l5,createRenderState:i5,onMount:(e,t,{renderState:n,latestValues:i})=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}dI(n,i,{enableHardwareAcceleration:!1},fI(t.tagName),e.transformTemplate),a5(t,n)}})},YG={useVisualState:c5({scrapeMotionValuesFromProps:mI,createRenderState:hI})};function XG(e,{forwardMotionProps:t=!1},n,i){return{...cI(e)?ZG:YG,preloadedFeatures:n,useRender:GG(t),createVisualElement:i,Component:e}}function Vl(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const u5=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Ox(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const QG=e=>t=>u5(t)&&e(t,Ox(t));function Wl(e,t,n,i){return Vl(e,t,QG(n),i)}const KG=(e,t)=>n=>t(e(n)),lu=(...e)=>e.reduce(KG);function h5(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const MR=h5("dragHorizontal"),AR=h5("dragVertical");function d5(e){let t=!1;if(e==="y")t=AR();else if(e==="x")t=MR();else{const n=MR(),i=AR();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function f5(){const e=d5(!0);return e?(e(),!1):!0}class Iu{constructor(t){this.isMounted=!1,this.node=t}update(){}}function JG(e){let t=[],n=[],i=0,c=!1,f=!1;const m=new WeakSet,s={schedule:(v,E=!1,I=!1)=>{const M=I&&c,P=M?t:n;return E&&m.add(v),P.indexOf(v)===-1&&(P.push(v),M&&c&&(i=t.length)),v},cancel:v=>{const E=n.indexOf(v);E!==-1&&n.splice(E,1),m.delete(v)},process:v=>{if(c){f=!0;return}if(c=!0,[t,n]=[n,t],n.length=0,i=t.length,i)for(let E=0;E<i;E++){const I=t[E];I(v),m.has(I)&&(s.schedule(I),e())}c=!1,f&&(f=!1,s.process(v))}};return s}const ai={delta:0,timestamp:0,isProcessing:!1},e8=40;let m2=!0,fy=!1;const kx=["read","update","preRender","render","postRender"],Hf=kx.reduce((e,t)=>(e[t]=JG(()=>fy=!0),e),{}),t8=e=>Hf[e].process(ai),p5=e=>{fy=!1,ai.delta=m2?1e3/60:Math.max(Math.min(e-ai.timestamp,e8),1),ai.timestamp=e,ai.isProcessing=!0,kx.forEach(t8),ai.isProcessing=!1,fy&&(m2=!1,requestAnimationFrame(p5))},n8=()=>{fy=!0,m2=!0,ai.isProcessing||requestAnimationFrame(p5)},xr=kx.reduce((e,t)=>{const n=Hf[t];return e[t]=(i,c=!1,f=!1)=>(fy||n8(),n.schedule(i,c,f)),e},{});function ul(e){kx.forEach(t=>Hf[t].cancel(e))}function CR(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),c=(f,m)=>{if(f.type==="touch"||f5())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[i]&&xr.update(()=>s[i](f,m))};return Wl(e.current,n,c,{passive:!e.getProps()[i]})}class r8 extends Iu{mount(){this.unmount=lu(CR(this.node,!0),CR(this.node,!1))}unmount(){}}class i8 extends Iu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lu(Vl(this.node.current,"focus",()=>this.onFocus()),Vl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const m5=(e,t)=>t?e===t?!0:m5(e,t.parentElement):!1,Si=e=>e;function wE(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ox(n))}class o8 extends Iu{constructor(){super(...arguments),this.removeStartListeners=Si,this.removeEndListeners=Si,this.removeAccessibleListeners=Si,this.startPointerPress=(t,n)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),f=Wl(window,"pointerup",(s,v)=>{if(!this.checkPressEnd())return;const{onTap:E,onTapCancel:I}=this.node.getProps();xr.update(()=>{m5(this.node.current,s.target)?E&&E(s,v):I&&I(s,v)})},{passive:!(i.onTap||i.onPointerUp)}),m=Wl(window,"pointercancel",(s,v)=>this.cancelPress(s,v),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=lu(f,m),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=f=>{if(f.key!=="Enter"||this.isPressing)return;const m=s=>{s.key!=="Enter"||!this.checkPressEnd()||wE("up",(v,E)=>{const{onTap:I}=this.node.getProps();I&&xr.update(()=>I(v,E))})};this.removeEndListeners(),this.removeEndListeners=Vl(this.node.current,"keyup",m),wE("down",(s,v)=>{this.startPress(s,v)})},n=Vl(this.node.current,"keydown",t),i=()=>{this.isPressing&&wE("cancel",(f,m)=>this.cancelPress(f,m))},c=Vl(this.node.current,"blur",i);this.removeAccessibleListeners=lu(n,c)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&xr.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!f5()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&xr.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=Wl(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=Vl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=lu(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const g2=new WeakMap,bE=new WeakMap,s8=e=>{const t=g2.get(e.target);t&&t(e)},a8=e=>{e.forEach(s8)};function l8({root:e,...t}){const n=e||document;bE.has(n)||bE.set(n,{});const i=bE.get(n),c=JSON.stringify(t);return i[c]||(i[c]=new IntersectionObserver(a8,{root:e,...t})),i[c]}function c8(e,t,n){const i=l8(t);return g2.set(e,n),i.observe(e),()=>{g2.delete(e),i.unobserve(e)}}const u8={some:0,all:1};class h8 extends Iu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:c="some",once:f}=t,m={root:n?n.current:void 0,rootMargin:i,threshold:typeof c=="number"?c:u8[c]},s=v=>{const{isIntersecting:E}=v;if(this.isInView===E||(this.isInView=E,f&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:I,onViewportLeave:M}=this.node.getProps(),P=E?I:M;P&&P(v)};return c8(this.node.current,m,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(d8(t,n))&&this.startObserver()}unmount(){}}function d8({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const f8={inView:{Feature:h8},tap:{Feature:o8},focus:{Feature:i8},hover:{Feature:r8}};function g5(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function p8(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function m8(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function Lx(e,t,n){const i=e.getProps();return gI(i,t,n!==void 0?n:i.custom,p8(e),m8(e))}const g8="framerAppearId",y8="data-"+pI(g8);let y5=Si,zx=Si;const cu=e=>e*1e3,ll=e=>e/1e3,_8={current:!1},_5=e=>Array.isArray(e)&&typeof e[0]=="number";function v5(e){return!!(!e||typeof e=="string"&&x5[e]||_5(e)||Array.isArray(e)&&e.every(v5))}const yg=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,x5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yg([0,.65,.55,1]),circOut:yg([.55,0,1,.45]),backIn:yg([.31,.01,.66,-.59]),backOut:yg([.33,1.53,.69,.99])};function w5(e){if(e)return _5(e)?yg(e):Array.isArray(e)?e.map(w5):x5[e]}function v8(e,t,n,{delay:i=0,duration:c,repeat:f=0,repeatType:m="loop",ease:s,times:v}={}){const E={[t]:n};v&&(E.offset=v);const I=w5(s);return Array.isArray(I)&&(E.easing=I),e.animate(E,{delay:i,duration:c,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:f+1,direction:m==="reverse"?"alternate":"normal"})}const PR={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},EE={},b5={};for(const e in PR)b5[e]=()=>(EE[e]===void 0&&(EE[e]=PR[e]()),EE[e]);function x8(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const E5=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,w8=1e-7,b8=12;function E8(e,t,n,i,c){let f,m,s=0;do m=t+(n-t)/2,f=E5(m,i,c)-e,f>0?n=m:t=m;while(Math.abs(f)>w8&&++s<b8);return m}function By(e,t,n,i){if(e===t&&n===i)return Si;const c=f=>E8(f,0,1,e,n);return f=>f===0||f===1?f:E5(c(f),t,i)}const T8=By(.42,0,1,1),S8=By(0,0,.58,1),T5=By(.42,0,.58,1),I8=e=>Array.isArray(e)&&typeof e[0]!="number",S5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,I5=e=>t=>1-e(1-t),M5=e=>1-Math.sin(Math.acos(e)),yI=I5(M5),M8=S5(yI),A5=By(.33,1.53,.69,.99),_I=I5(A5),A8=S5(_I),C8=e=>(e*=2)<1?.5*_I(e):.5*(2-Math.pow(2,-10*(e-1))),P8={linear:Si,easeIn:T8,easeInOut:T5,easeOut:S8,circIn:M5,circInOut:M8,circOut:yI,backIn:_I,backInOut:A8,backOut:A5,anticipate:C8},RR=e=>{if(Array.isArray(e)){zx(e.length===4);const[t,n,i,c]=e;return By(t,n,i,c)}else if(typeof e=="string")return P8[e];return e},vI=(e,t)=>n=>!!(zy(n)&&CG.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),C5=(e,t,n)=>i=>{if(!zy(i))return i;const[c,f,m,s]=i.match(Dx);return{[e]:parseFloat(c),[t]:parseFloat(f),[n]:parseFloat(m),alpha:s!==void 0?parseFloat(s):1}},R8=e=>td(0,255,e),TE={...sd,transform:e=>Math.round(R8(e))},Bh={test:vI("rgb","red"),parse:C5("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+TE.transform(e)+", "+TE.transform(t)+", "+TE.transform(n)+", "+Dg(Rg.transform(i))+")"};function D8(e){let t="",n="",i="",c="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),c=e.substring(4,5),t+=t,n+=n,i+=i,c+=c),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:c?parseInt(c,16)/255:1}}const y2={test:vI("#"),parse:D8,transform:Bh.transform},kf={test:vI("hsl","hue"),parse:C5("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+al.transform(Dg(t))+", "+al.transform(Dg(n))+", "+Dg(Rg.transform(i))+")"},Eo={test:e=>Bh.test(e)||y2.test(e)||kf.test(e),parse:e=>Bh.test(e)?Bh.parse(e):kf.test(e)?kf.parse(e):y2.parse(e),transform:e=>zy(e)?e:e.hasOwnProperty("red")?Bh.transform(e):kf.transform(e)},Zr=(e,t,n)=>-n*e+n*t+e;function SE(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function O8({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let c=0,f=0,m=0;if(!t)c=f=m=n;else{const s=n<.5?n*(1+t):n+t-n*t,v=2*n-s;c=SE(v,s,e+1/3),f=SE(v,s,e),m=SE(v,s,e-1/3)}return{red:Math.round(c*255),green:Math.round(f*255),blue:Math.round(m*255),alpha:i}}const IE=(e,t,n)=>{const i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},k8=[y2,Bh,kf],L8=e=>k8.find(t=>t.test(e));function DR(e){const t=L8(e);let n=t.parse(e);return t===kf&&(n=O8(n)),n}const P5=(e,t)=>{const n=DR(e),i=DR(t),c={...n};return f=>(c.red=IE(n.red,i.red,f),c.green=IE(n.green,i.green,f),c.blue=IE(n.blue,i.blue,f),c.alpha=Zr(n.alpha,i.alpha,f),Bh.transform(c))};function z8(e){var t,n;return isNaN(e)&&zy(e)&&(((t=e.match(Dx))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(e5))===null||n===void 0?void 0:n.length)||0)>0}const R5={regex:MG,countKey:"Vars",token:"${v}",parse:Si},D5={regex:e5,countKey:"Colors",token:"${c}",parse:Eo.parse},O5={regex:Dx,countKey:"Numbers",token:"${n}",parse:sd.parse};function ME(e,{regex:t,countKey:n,token:i,parse:c}){const f=e.tokenised.match(t);f&&(e["num"+n]=f.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...f.map(c)))}function P1(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ME(n,R5),ME(n,D5),ME(n,O5),n}function k5(e){return P1(e).values}function L5(e){const{values:t,numColors:n,numVars:i,tokenised:c}=P1(e),f=t.length;return m=>{let s=c;for(let v=0;v<f;v++)v<i?s=s.replace(R5.token,m[v]):v<i+n?s=s.replace(D5.token,Eo.transform(m[v])):s=s.replace(O5.token,Dg(m[v]));return s}}const N8=e=>typeof e=="number"?0:e;function B8(e){const t=k5(e);return L5(e)(t.map(N8))}const yu={test:z8,parse:k5,createTransformer:L5,getAnimatableNone:B8},z5=(e,t)=>n=>`${n>0?t:e}`;function N5(e,t){return typeof e=="number"?n=>Zr(e,t,n):Eo.test(e)?P5(e,t):e.startsWith("var(")?z5(e,t):F5(e,t)}const B5=(e,t)=>{const n=[...e],i=n.length,c=e.map((f,m)=>N5(f,t[m]));return f=>{for(let m=0;m<i;m++)n[m]=c[m](f);return n}},F8=(e,t)=>{const n={...e,...t},i={};for(const c in n)e[c]!==void 0&&t[c]!==void 0&&(i[c]=N5(e[c],t[c]));return c=>{for(const f in i)n[f]=i[f](c);return n}},F5=(e,t)=>{const n=yu.createTransformer(t),i=P1(e),c=P1(t);return i.numVars===c.numVars&&i.numColors===c.numColors&&i.numNumbers>=c.numNumbers?lu(B5(i.values,c.values),n):z5(e,t)},lp=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},OR=(e,t)=>n=>Zr(e,t,n);function U8(e){return typeof e=="number"?OR:typeof e=="string"?Eo.test(e)?P5:F5:Array.isArray(e)?B5:typeof e=="object"?F8:OR}function V8(e,t,n){const i=[],c=n||U8(e[0]),f=e.length-1;for(let m=0;m<f;m++){let s=c(e[m],e[m+1]);if(t){const v=Array.isArray(t)?t[m]||Si:t;s=lu(v,s)}i.push(s)}return i}function xI(e,t,{clamp:n=!0,ease:i,mixer:c}={}){const f=e.length;if(zx(f===t.length),f===1)return()=>t[0];e[0]>e[f-1]&&(e=[...e].reverse(),t=[...t].reverse());const m=V8(t,i,c),s=m.length,v=E=>{let I=0;if(s>1)for(;I<e.length-2&&!(E<e[I+1]);I++);const M=lp(e[I],e[I+1],E);return m[I](M)};return n?E=>v(td(e[0],e[f-1],E)):v}function j8(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const c=lp(0,t,i);e.push(Zr(n,1,c))}}function U5(e){const t=[0];return j8(t,e.length-1),t}function G8(e,t){return e.map(n=>n*t)}function $8(e,t){return e.map(()=>t||T5).splice(0,e.length-1)}function R1({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const c=I8(i)?i.map(RR):RR(i),f={done:!1,value:t[0]},m=G8(n&&n.length===t.length?n:U5(t),e),s=xI(m,t,{ease:Array.isArray(c)?c:$8(t,c)});return{calculatedDuration:e,next:v=>(f.value=s(v),f.done=v>=e,f)}}function wI(e,t){return t?e*(1e3/t):0}const W8=5;function V5(e,t,n){const i=Math.max(t-W8,0);return wI(n-e(i),t-i)}const AE=.001,q8=.01,kR=10,H8=.05,Z8=1;function Y8({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let c,f;y5(e<=cu(kR));let m=1-t;m=td(H8,Z8,m),e=td(q8,kR,ll(e)),m<1?(c=E=>{const I=E*m,M=I*e,P=I-n,D=_2(E,m),k=Math.exp(-M);return AE-P/D*k},f=E=>{const M=E*m*e,P=M*n+n,D=Math.pow(m,2)*Math.pow(E,2)*e,k=Math.exp(-M),V=_2(Math.pow(E,2),m);return(-c(E)+AE>0?-1:1)*((P-D)*k)/V}):(c=E=>{const I=Math.exp(-E*e),M=(E-n)*e+1;return-AE+I*M},f=E=>{const I=Math.exp(-E*e),M=(n-E)*(e*e);return I*M});const s=5/e,v=Q8(c,f,s);if(e=cu(e),isNaN(v))return{stiffness:100,damping:10,duration:e};{const E=Math.pow(v,2)*i;return{stiffness:E,damping:m*2*Math.sqrt(i*E),duration:e}}}const X8=12;function Q8(e,t,n){let i=n;for(let c=1;c<X8;c++)i=i-e(i)/t(i);return i}function _2(e,t){return e*Math.sqrt(1-t*t)}const K8=["duration","bounce"],J8=["stiffness","damping","mass"];function LR(e,t){return t.some(n=>e[n]!==void 0)}function e7(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!LR(e,J8)&&LR(e,K8)){const n=Y8(e);t={...t,...n,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function j5({keyframes:e,restDelta:t,restSpeed:n,...i}){const c=e[0],f=e[e.length-1],m={done:!1,value:c},{stiffness:s,damping:v,mass:E,velocity:I,duration:M,isResolvedFromDuration:P}=e7(i),D=I?-ll(I):0,k=v/(2*Math.sqrt(s*E)),V=f-c,H=ll(Math.sqrt(s/E)),G=Math.abs(V)<5;n||(n=G?.01:2),t||(t=G?.005:.5);let z;if(k<1){const N=_2(H,k);z=W=>{const $=Math.exp(-k*H*W);return f-$*((D+k*H*V)/N*Math.sin(N*W)+V*Math.cos(N*W))}}else if(k===1)z=N=>f-Math.exp(-H*N)*(V+(D+H*V)*N);else{const N=H*Math.sqrt(k*k-1);z=W=>{const $=Math.exp(-k*H*W),X=Math.min(N*W,300);return f-$*((D+k*H*V)*Math.sinh(X)+N*V*Math.cosh(X))/N}}return{calculatedDuration:P&&M||null,next:N=>{const W=z(N);if(P)m.done=N>=M;else{let $=D;N!==0&&(k<1?$=V5(z,N,W):$=0);const X=Math.abs($)<=n,te=Math.abs(f-W)<=t;m.done=X&&te}return m.value=m.done?f:W,m}}}function zR({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:c=10,bounceStiffness:f=500,modifyTarget:m,min:s,max:v,restDelta:E=.5,restSpeed:I}){const M=e[0],P={done:!1,value:M},D=J=>s!==void 0&&J<s||v!==void 0&&J>v,k=J=>s===void 0?v:v===void 0||Math.abs(s-J)<Math.abs(v-J)?s:v;let V=n*t;const H=M+V,G=m===void 0?H:m(H);G!==H&&(V=G-M);const z=J=>-V*Math.exp(-J/i),N=J=>G+z(J),W=J=>{const re=z(J),ce=N(J);P.done=Math.abs(re)<=E,P.value=P.done?G:ce};let $,X;const te=J=>{D(P.value)&&($=J,X=j5({keyframes:[P.value,k(P.value)],velocity:V5(N,J,P.value),damping:c,stiffness:f,restDelta:E,restSpeed:I}))};return te(0),{calculatedDuration:null,next:J=>{let re=!1;return!X&&$===void 0&&(re=!0,W(J),te(J)),$!==void 0&&J>$?X.next(J-$):(!re&&W(J),P)}}}const t7=e=>{const t=({timestamp:n})=>e(n);return{start:()=>xr.update(t,!0),stop:()=>ul(t),now:()=>ai.isProcessing?ai.timestamp:performance.now()}},NR=2e4;function BR(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<NR;)t+=n,i=e.next(t);return t>=NR?1/0:t}const n7={decay:zR,inertia:zR,tween:R1,keyframes:R1,spring:j5};function py({autoplay:e=!0,delay:t=0,driver:n=t7,keyframes:i,type:c="keyframes",repeat:f=0,repeatDelay:m=0,repeatType:s="loop",onPlay:v,onStop:E,onComplete:I,onUpdate:M,...P}){let D=1,k=!1,V,H;const G=()=>{V&&V(),H=new Promise(tt=>{V=tt})};G();let z;const N=n7[c]||R1;let W;N!==R1&&typeof i[0]!="number"&&(W=xI([0,100],i,{clamp:!1}),i=[0,100]);const $=N({...P,keyframes:i});let X;s==="mirror"&&(X=N({...P,keyframes:[...i].reverse(),velocity:-(P.velocity||0)}));let te="idle",J=null,re=null,ce=null;$.calculatedDuration===null&&f&&($.calculatedDuration=BR($));const{calculatedDuration:Ee}=$;let Me=1/0,Le=1/0;Ee!==null&&(Me=Ee+m,Le=Me*(f+1)-m);let Ae=0;const Oe=tt=>{if(re===null)return;D>0&&(re=Math.min(re,tt)),J!==null?Ae=J:Ae=(tt-re)*D;const Mt=Ae-t,Dt=Mt<0;Ae=Math.max(Mt,0),te==="finished"&&J===null&&(Ae=Le);let bt=Ae,Nt=$;if(f){const pn=Ae/Me;let Vt=Math.floor(pn),Mn=pn%1;!Mn&&pn>=1&&(Mn=1),Mn===1&&Vt--,Vt=Math.min(Vt,f+1);const Jt=!!(Vt%2);Jt&&(s==="reverse"?(Mn=1-Mn,m&&(Mn-=m/Me)):s==="mirror"&&(Nt=X));let _r=td(0,1,Mn);Ae>Le&&(_r=s==="reverse"&&Jt?1:0),bt=_r*Me}const ft=Dt?{done:!1,value:i[0]}:Nt.next(bt);W&&(ft.value=W(ft.value));let{done:Ot}=ft;!Dt&&Ee!==null&&(Ot=Ae>=Le);const an=J===null&&(te==="finished"||te==="running"&&Ot||D<0&&Ae<=0);return M&&M(ft.value),an&&De(),ft},ke=()=>{z&&z.stop(),z=void 0},je=()=>{te="idle",ke(),G(),re=ce=null},De=()=>{te="finished",I&&I(),ke(),G()},Be=()=>{if(k)return;z||(z=n(Oe));const tt=z.now();v&&v(),J!==null?re=tt-J:(!re||te==="finished")&&(re=tt),ce=re,J=null,te="running",z.start()};e&&Be();const He={then(tt,Mt){return H.then(tt,Mt)},get time(){return ll(Ae)},set time(tt){tt=cu(tt),Ae=tt,J!==null||!z||D===0?J=tt:re=z.now()-tt/D},get duration(){const tt=$.calculatedDuration===null?BR($):$.calculatedDuration;return ll(tt)},get speed(){return D},set speed(tt){tt===D||!z||(D=tt,He.time=ll(Ae))},get state(){return te},play:Be,pause:()=>{te="paused",J=Ae},stop:()=>{k=!0,te!=="idle"&&(te="idle",E&&E(),je())},cancel:()=>{ce!==null&&Oe(ce),je()},complete:()=>{te="finished"},sample:tt=>(re=0,Oe(tt))};return He}const r7=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Y0=10,i7=2e4,o7=(e,t)=>t.type==="spring"||e==="backgroundColor"||!v5(t.ease);function s7(e,t,{onUpdate:n,onComplete:i,...c}){if(!(b5.waapi()&&r7.has(t)&&!c.repeatDelay&&c.repeatType!=="mirror"&&c.damping!==0&&c.type!=="inertia"))return!1;let m=!1,s,v;const E=()=>{v=new Promise(G=>{s=G})};E();let{keyframes:I,duration:M=300,ease:P,times:D}=c;if(o7(t,c)){const G=py({...c,repeat:0,delay:0});let z={done:!1,value:I[0]};const N=[];let W=0;for(;!z.done&&W<i7;)z=G.sample(W),N.push(z.value),W+=Y0;D=void 0,I=N,M=W-Y0,P="linear"}const k=v8(e.owner.current,t,I,{...c,duration:M,ease:P,times:D}),V=()=>k.cancel(),H=()=>{xr.update(V),s(),E()};return k.onfinish=()=>{e.set(x8(I,c)),i&&i(),H()},{then(G,z){return v.then(G,z)},get time(){return ll(k.currentTime||0)},set time(G){k.currentTime=cu(G)},get speed(){return k.playbackRate},set speed(G){k.playbackRate=G},get duration(){return ll(M)},play:()=>{m||(k.play(),ul(V))},pause:()=>k.pause(),stop:()=>{if(m=!0,k.playState==="idle")return;const{currentTime:G}=k;if(G){const z=py({...c,autoplay:!1});e.setWithVelocity(z.sample(G-Y0).value,z.sample(G).value,Y0)}H()},complete:()=>k.finish(),cancel:H}}function a7({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const c=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Si,pause:Si,stop:Si,then:f=>(f(),Promise.resolve()),cancel:Si,complete:Si});return t?py({keyframes:[0,1],duration:0,delay:t,onComplete:c}):c()}const l7={type:"spring",stiffness:500,damping:25,restSpeed:10},c7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),u7={type:"keyframes",duration:.8},h7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},d7=(e,{keyframes:t})=>t.length>2?u7:od.has(e)?e.startsWith("scale")?c7(t[1]):l7:h7,v2=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&yu.test(t)&&!t.startsWith("url(")),f7=new Set(["brightness","contrast","saturate","opacity"]);function p7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(Dx)||[];if(!i)return e;const c=n.replace(i,"");let f=f7.has(t)?1:0;return i!==n&&(f*=100),t+"("+f+c+")"}const m7=/([a-z-]*)\(.*?\)/g,x2={...yu,getAnimatableNone:e=>{const t=e.match(m7);return t?t.map(p7).join(" "):e}},g7={...t5,color:Eo,backgroundColor:Eo,outlineColor:Eo,fill:Eo,stroke:Eo,borderColor:Eo,borderTopColor:Eo,borderRightColor:Eo,borderBottomColor:Eo,borderLeftColor:Eo,filter:x2,WebkitFilter:x2},bI=e=>g7[e];function EI(e,t){let n=bI(e);return n!==x2&&(n=yu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}function y7({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:c,repeat:f,repeatType:m,repeatDelay:s,from:v,elapsed:E,...I}){return!!Object.keys(I).length}function FR(e){return e===0||typeof e=="string"&&parseFloat(e)===0&&e.indexOf(" ")===-1}function UR(e){return typeof e=="number"?0:EI("",e)}function G5(e,t){return e[t]||e.default||e}function _7(e,[...t]){for(let n=0;n<t.length;n++)t[n]===null&&(t[n]=n===0?e:t[n-1]);return t}function v7(e,t,n,i){const c=v2(t,n);let f=i.from!==void 0?i.from:e.get();return f==="none"&&c&&typeof n=="string"?f=EI(t,n):FR(f)&&typeof n=="string"?f=UR(n):!Array.isArray(n)&&FR(n)&&typeof f=="string"&&(n=UR(f)),Array.isArray(n)?_7(f,n):[f,n]}const TI=(e,t,n,i={})=>c=>{const f=G5(i,e)||{},m=f.delay||i.delay||0;let{elapsed:s=0}=i;s=s-cu(m);const v=v7(t,e,n,f),E=v[0],I=v[v.length-1],M=v2(e,E),P=v2(e,I);let D={keyframes:v,velocity:t.getVelocity(),ease:"easeOut",...f,delay:-s,onUpdate:k=>{t.set(k),f.onUpdate&&f.onUpdate(k)},onComplete:()=>{c(),f.onComplete&&f.onComplete()}};if(y7(f)||(D={...D,...d7(e,D)}),D.duration&&(D.duration=cu(D.duration)),D.repeatDelay&&(D.repeatDelay=cu(D.repeatDelay)),!M||!P||_8.current||f.type===!1)return a7(D);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const k=s7(t,e,D);if(k)return k}return py(D)};function D1(e){return!!(mo(e)&&e.add)}const x7=e=>/^\-?\d*\.?\d+$/.test(e),w7=e=>/^0[^.\s]+$/.test(e);function SI(e,t){e.indexOf(t)===-1&&e.push(t)}function II(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class MI{constructor(){this.subscriptions=[]}add(t){return SI(this.subscriptions,t),()=>II(this.subscriptions,t)}notify(t,n,i){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,n,i);else for(let f=0;f<c;f++){const m=this.subscriptions[f];m&&m(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const b7=e=>!isNaN(parseFloat(e));class E7{constructor(t,n={}){this.version="10.12.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,c=!0)=>{this.prev=this.current,this.current=i;const{delta:f,timestamp:m}=ai;this.lastUpdated!==m&&(this.timeDelta=f,this.lastUpdated=m,xr.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>xr.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=b7(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new MI);const i=this.events[t].add(n);return t==="change"?()=>{i(),xr.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?wI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ha(e,t){return new E7(e,t)}const $5=e=>t=>t.test(e),T7={test:e=>e==="auto",parse:e=>e},W5=[sd,un,al,Fc,RG,PG,T7],ng=e=>W5.find($5(e)),S7=[...W5,Eo,yu],I7=e=>S7.find($5(e));function M7(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ha(n))}function A7(e,t){const n=Lx(e,t);let{transitionEnd:i={},transition:c={},...f}=n?e.makeTargetAnimatable(n,!1):{};f={...f,...i};for(const m in f){const s=WG(f[m]);M7(e,m,s)}}function C7(e,t,n){var i,c;const f=Object.keys(t).filter(s=>!e.hasValue(s)),m=f.length;if(m)for(let s=0;s<m;s++){const v=f[s],E=t[v];let I=null;Array.isArray(E)&&(I=E[0]),I===null&&(I=(c=(i=n[v])!==null&&i!==void 0?i:e.readValue(v))!==null&&c!==void 0?c:t[v]),I!=null&&(typeof I=="string"&&(x7(I)||w7(I))?I=parseFloat(I):!I7(I)&&yu.test(E)&&(I=EI(v,E)),e.addValue(v,ha(I,{owner:e})),n[v]===void 0&&(n[v]=I),I!==null&&e.setBaseTarget(v,I))}}function P7(e,t){return t?(t[e]||t.default||t).from:void 0}function R7(e,t,n){const i={};for(const c in e){const f=P7(c,t);if(f!==void 0)i[c]=f;else{const m=n.getValue(c);m&&(i[c]=m.get())}}return i}function D7({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function q5(e,t,{delay:n=0,transitionOverride:i,type:c}={}){let{transition:f=e.getDefaultTransition(),transitionEnd:m,...s}=e.makeTargetAnimatable(t);const v=e.getValue("willChange");i&&(f=i);const E=[],I=c&&e.animationState&&e.animationState.getState()[c];for(const M in s){const P=e.getValue(M),D=s[M];if(!P||D===void 0||I&&D7(I,M))continue;const k={delay:n,elapsed:0,...f};if(window.HandoffAppearAnimations&&!P.hasAnimated){const H=e.getProps()[y8];H&&(k.elapsed=window.HandoffAppearAnimations(H,M,P,xr))}P.start(TI(M,P,D,e.shouldReduceMotion&&od.has(M)?{type:!1}:k));const V=P.animation;D1(v)&&(v.add(M),V.then(()=>v.remove(M))),E.push(V)}return m&&Promise.all(E).then(()=>{m&&A7(e,m)}),E}function w2(e,t,n={}){const i=Lx(e,t,n.custom);let{transition:c=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(c=n.transitionOverride);const f=i?()=>Promise.all(q5(e,i,n)):()=>Promise.resolve(),m=e.variantChildren&&e.variantChildren.size?(v=0)=>{const{delayChildren:E=0,staggerChildren:I,staggerDirection:M}=c;return O7(e,t,E+v,I,M,n)}:()=>Promise.resolve(),{when:s}=c;if(s){const[v,E]=s==="beforeChildren"?[f,m]:[m,f];return v().then(()=>E())}else return Promise.all([f(),m(n.delay)])}function O7(e,t,n=0,i=0,c=1,f){const m=[],s=(e.variantChildren.size-1)*i,v=c===1?(E=0)=>E*i:(E=0)=>s-E*i;return Array.from(e.variantChildren).sort(k7).forEach((E,I)=>{E.notify("AnimationStart",t),m.push(w2(E,t,{...f,delay:n+v(I)}).then(()=>E.notify("AnimationComplete",t)))}),Promise.all(m)}function k7(e,t){return e.sortNodePosition(t)}function L7(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const c=t.map(f=>w2(e,f,n));i=Promise.all(c)}else if(typeof t=="string")i=w2(e,t,n);else{const c=typeof t=="function"?Lx(e,t,n.custom):t;i=Promise.all(q5(e,c,n))}return i.then(()=>e.notify("AnimationComplete",t))}const z7=[...sI].reverse(),N7=sI.length;function B7(e){return t=>Promise.all(t.map(({animation:n,options:i})=>L7(e,n,i)))}function F7(e){let t=B7(e);const n=V7();let i=!0;const c=(v,E)=>{const I=Lx(e,E);if(I){const{transition:M,transitionEnd:P,...D}=I;v={...v,...D,...P}}return v};function f(v){t=v(e)}function m(v,E){const I=e.getProps(),M=e.getVariantContext(!0)||{},P=[],D=new Set;let k={},V=1/0;for(let G=0;G<N7;G++){const z=z7[G],N=n[z],W=I[z]!==void 0?I[z]:M[z],$=hy(W),X=z===E?N.isActive:null;X===!1&&(V=G);let te=W===M[z]&&W!==I[z]&&$;if(te&&i&&e.manuallyAnimateOnMount&&(te=!1),N.protectedKeys={...k},!N.isActive&&X===null||!W&&!N.prevProp||Px(W)||typeof W=="boolean")continue;const J=U7(N.prevProp,W);let re=J||z===E&&N.isActive&&!te&&$||G>V&&$;const ce=Array.isArray(W)?W:[W];let Ee=ce.reduce(c,{});X===!1&&(Ee={});const{prevResolvedValues:Me={}}=N,Le={...Me,...Ee},Ae=Oe=>{re=!0,D.delete(Oe),N.needsAnimating[Oe]=!0};for(const Oe in Le){const ke=Ee[Oe],je=Me[Oe];k.hasOwnProperty(Oe)||(ke!==je?C1(ke)&&C1(je)?!g5(ke,je)||J?Ae(Oe):N.protectedKeys[Oe]=!0:ke!==void 0?Ae(Oe):D.add(Oe):ke!==void 0&&D.has(Oe)?Ae(Oe):N.protectedKeys[Oe]=!0)}N.prevProp=W,N.prevResolvedValues=Ee,N.isActive&&(k={...k,...Ee}),i&&e.blockInitialAnimation&&(re=!1),re&&!te&&P.push(...ce.map(Oe=>({animation:Oe,options:{type:z,...v}})))}if(D.size){const G={};D.forEach(z=>{const N=e.getBaseTarget(z);N!==void 0&&(G[z]=N)}),P.push({animation:G})}let H=!!P.length;return i&&I.initial===!1&&!e.manuallyAnimateOnMount&&(H=!1),i=!1,H?t(P):Promise.resolve()}function s(v,E,I){var M;if(n[v].isActive===E)return Promise.resolve();(M=e.variantChildren)===null||M===void 0||M.forEach(D=>{var k;return(k=D.animationState)===null||k===void 0?void 0:k.setActive(v,E)}),n[v].isActive=E;const P=m(I,v);for(const D in n)n[D].protectedKeys={};return P}return{animateChanges:m,setActive:s,setAnimateFunction:f,getState:()=>n}}function U7(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!g5(t,e):!1}function _h(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function V7(){return{animate:_h(!0),whileInView:_h(),whileHover:_h(),whileTap:_h(),whileDrag:_h(),whileFocus:_h(),exit:_h()}}class j7 extends Iu{constructor(t){super(t),t.animationState||(t.animationState=F7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Px(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let G7=0;class $7 extends Iu{constructor(){super(...arguments),this.id=G7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const f=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&f.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const W7={animation:{Feature:j7},exit:{Feature:$7}},VR=(e,t)=>Math.abs(e-t);function q7(e,t){const n=VR(e.x,t.x),i=VR(e.y,t.y);return Math.sqrt(n**2+i**2)}class H5{constructor(t,n,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=PE(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,M=q7(E.offset,{x:0,y:0})>=3;if(!I&&!M)return;const{point:P}=E,{timestamp:D}=ai;this.history.push({...P,timestamp:D});const{onStart:k,onMove:V}=this.handlers;I||(k&&k(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,E)},this.handlePointerMove=(E,I)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=CE(I,this.transformPagePoint),xr.update(this.updatePoint,!0)},this.handlePointerUp=(E,I)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:M,onSessionEnd:P}=this.handlers,D=PE(E.type==="pointercancel"?this.lastMoveEventInfo:CE(I,this.transformPagePoint),this.history);this.startEvent&&M&&M(E,D),P&&P(E,D)},!u5(t))return;this.handlers=n,this.transformPagePoint=i;const c=Ox(t),f=CE(c,this.transformPagePoint),{point:m}=f,{timestamp:s}=ai;this.history=[{...m,timestamp:s}];const{onSessionStart:v}=n;v&&v(t,PE(f,this.history)),this.removeListeners=lu(Wl(window,"pointermove",this.handlePointerMove),Wl(window,"pointerup",this.handlePointerUp),Wl(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ul(this.updatePoint)}}function CE(e,t){return t?{point:t(e.point)}:e}function jR(e,t){return{x:e.x-t.x,y:e.y-t.y}}function PE({point:e},t){return{point:e,delta:jR(e,Z5(t)),offset:jR(e,H7(t)),velocity:Z7(t,.1)}}function H7(e){return e[0]}function Z5(e){return e[e.length-1]}function Z7(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const c=Z5(e);for(;n>=0&&(i=e[n],!(c.timestamp-i.timestamp>cu(t)));)n--;if(!i)return{x:0,y:0};const f=ll(c.timestamp-i.timestamp);if(f===0)return{x:0,y:0};const m={x:(c.x-i.x)/f,y:(c.y-i.y)/f};return m.x===1/0&&(m.x=0),m.y===1/0&&(m.y=0),m}function ds(e){return e.max-e.min}function b2(e,t=0,n=.01){return Math.abs(e-t)<=n}function GR(e,t,n,i=.5){e.origin=i,e.originPoint=Zr(t.min,t.max,e.origin),e.scale=ds(n)/ds(t),(b2(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Zr(n.min,n.max,e.origin)-e.originPoint,(b2(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Og(e,t,n,i){GR(e.x,t.x,n.x,i?i.originX:void 0),GR(e.y,t.y,n.y,i?i.originY:void 0)}function $R(e,t,n){e.min=n.min+t.min,e.max=e.min+ds(t)}function Y7(e,t,n){$R(e.x,t.x,n.x),$R(e.y,t.y,n.y)}function WR(e,t,n){e.min=t.min-n.min,e.max=e.min+ds(t)}function kg(e,t,n){WR(e.x,t.x,n.x),WR(e.y,t.y,n.y)}function X7(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?Zr(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?Zr(n,e,i.max):Math.min(e,n)),e}function qR(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Q7(e,{top:t,left:n,bottom:i,right:c}){return{x:qR(e.x,n,c),y:qR(e.y,t,i)}}function HR(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function K7(e,t){return{x:HR(e.x,t.x),y:HR(e.y,t.y)}}function J7(e,t){let n=.5;const i=ds(e),c=ds(t);return c>i?n=lp(t.min,t.max-i,e.min):i>c&&(n=lp(e.min,e.max-c,t.min)),td(0,1,n)}function e9(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const E2=.35;function t9(e=E2){return e===!1?e=0:e===!0&&(e=E2),{x:ZR(e,"left","right"),y:ZR(e,"top","bottom")}}function ZR(e,t,n){return{min:YR(e,t),max:YR(e,n)}}function YR(e,t){return typeof e=="number"?e:e[t]||0}const XR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lg=()=>({x:XR(),y:XR()}),QR=()=>({min:0,max:0}),pi=()=>({x:QR(),y:QR()});function Qa(e){return[e("x"),e("y")]}function Y5({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function n9({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function r9(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function RE(e){return e===void 0||e===1}function T2({scale:e,scaleX:t,scaleY:n}){return!RE(e)||!RE(t)||!RE(n)}function Rh(e){return T2(e)||X5(e)||e.z||e.rotate||e.rotateX||e.rotateY}function X5(e){return KR(e.x)||KR(e.y)}function KR(e){return e&&e!=="0%"}function O1(e,t,n){const i=e-n,c=t*i;return n+c}function JR(e,t,n,i,c){return c!==void 0&&(e=O1(e,c,i)),O1(e,n,i)+t}function S2(e,t=0,n=1,i,c){e.min=JR(e.min,t,n,i,c),e.max=JR(e.max,t,n,i,c)}function Q5(e,{x:t,y:n}){S2(e.x,t.translate,t.scale,t.originPoint),S2(e.y,n.translate,n.scale,n.originPoint)}function i9(e,t,n,i=!1){const c=n.length;if(!c)return;t.x=t.y=1;let f,m;for(let s=0;s<c;s++){f=n[s],m=f.projectionDelta;const v=f.instance;v&&v.style&&v.style.display==="contents"||(i&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Lf(e,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),m&&(t.x*=m.x.scale,t.y*=m.y.scale,Q5(e,m)),i&&Rh(f.latestValues)&&Lf(e,f.latestValues))}t.x=eD(t.x),t.y=eD(t.y)}function eD(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Gc(e,t){e.min=e.min+t,e.max=e.max+t}function tD(e,t,[n,i,c]){const f=t[c]!==void 0?t[c]:.5,m=Zr(e.min,e.max,f);S2(e,t[n],t[i],m,t.scale)}const o9=["x","scaleX","originX"],s9=["y","scaleY","originY"];function Lf(e,t){tD(e.x,t,o9),tD(e.y,t,s9)}function K5(e,t){return Y5(r9(e.getBoundingClientRect(),t))}function a9(e,t,n){const i=K5(e,n),{scroll:c}=t;return c&&(Gc(i.x,c.offset.x),Gc(i.y,c.offset.y)),i}const l9=new WeakMap;class c9{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pi(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const c=v=>{this.stopAnimation(),n&&this.snapToCursor(Ox(v,"page").point)},f=(v,E)=>{const{drag:I,dragPropagation:M,onDragStart:P}=this.getProps();if(I&&!M&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=d5(I),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qa(k=>{let V=this.getAxisMotionValue(k).get()||0;if(al.test(V)){const{projection:H}=this.visualElement;if(H&&H.layout){const G=H.layout.layoutBox[k];G&&(V=ds(G)*(parseFloat(V)/100))}}this.originPoint[k]=V}),P&&xr.update(()=>P(v,E),!1,!0);const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},m=(v,E)=>{const{dragPropagation:I,dragDirectionLock:M,onDirectionLock:P,onDrag:D}=this.getProps();if(!I&&!this.openGlobalLock)return;const{offset:k}=E;if(M&&this.currentDirection===null){this.currentDirection=u9(k),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",E.point,k),this.updateAxis("y",E.point,k),this.visualElement.render(),D&&D(v,E)},s=(v,E)=>this.stop(v,E);this.panSession=new H5(t,{onSessionStart:c,onStart:f,onMove:m,onSessionEnd:s},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:c}=n;this.startAnimation(c);const{onDragEnd:f}=this.getProps();f&&xr.update(()=>f(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:c}=this.getProps();if(!i||!X0(t,c,this.currentDirection))return;const f=this.getAxisMotionValue(t);let m=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(m=X7(m,this.constraints[t],this.elastic[t])),f.set(m)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),{layout:i}=this.visualElement.projection||{},c=this.constraints;t&&Of(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Q7(i.layoutBox,t):this.constraints=!1,this.elastic=t9(n),c!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Qa(f=>{this.getAxisMotionValue(f)&&(this.constraints[f]=e9(i.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Of(t))return!1;const i=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const f=a9(i,c.root,this.visualElement.getTransformPagePoint());let m=K7(c.layout.layoutBox,f);if(n){const s=n(n9(m));this.hasMutatedConstraints=!!s,s&&(m=Y5(s))}return m}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:c,dragTransition:f,dragSnapToOrigin:m,onDragTransitionEnd:s}=this.getProps(),v=this.constraints||{},E=Qa(I=>{if(!X0(I,n,this.currentDirection))return;let M=v&&v[I]||{};m&&(M={min:0,max:0});const P=c?200:1e6,D=c?40:1e7,k={type:"inertia",velocity:i?t[I]:0,bounceStiffness:P,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...f,...M};return this.startAxisValueAnimation(I,k)});return Promise.all(E).then(s)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(TI(t,i,0,n))}stopAnimation(){Qa(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),c=i[n];return c||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Qa(n=>{const{drag:i}=this.getProps();if(!X0(n,i,this.currentDirection))return;const{projection:c}=this.visualElement,f=this.getAxisMotionValue(n);if(c&&c.layout){const{min:m,max:s}=c.layout.layoutBox[n];f.set(t[n]-Zr(m,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Of(n)||!i||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};Qa(m=>{const s=this.getAxisMotionValue(m);if(s){const v=s.get();c[m]=J7({min:v,max:v},this.constraints[m])}});const{transformTemplate:f}=this.visualElement.getProps();this.visualElement.current.style.transform=f?f({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Qa(m=>{if(!X0(m,t,null))return;const s=this.getAxisMotionValue(m),{min:v,max:E}=this.constraints[m];s.set(Zr(v,E,c[m]))})}addListeners(){if(!this.visualElement.current)return;l9.set(this.visualElement,this);const t=this.visualElement.current,n=Wl(t,"pointerdown",v=>{const{drag:E,dragListener:I=!0}=this.getProps();E&&I&&this.start(v)}),i=()=>{const{dragConstraints:v}=this.getProps();Of(v)&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,f=c.addEventListener("measure",i);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),i();const m=Vl(window,"resize",()=>this.scalePositionWithinConstraints()),s=c.addEventListener("didUpdate",({delta:v,hasLayoutChanged:E})=>{this.isDragging&&E&&(Qa(I=>{const M=this.getAxisMotionValue(I);M&&(this.originPoint[I]+=v[I].translate,M.set(M.get()+v[I].translate))}),this.visualElement.render())});return()=>{m(),n(),f(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:c=!1,dragConstraints:f=!1,dragElastic:m=E2,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:c,dragConstraints:f,dragElastic:m,dragMomentum:s}}}function X0(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function u9(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class h9 extends Iu{constructor(t){super(t),this.removeGroupControls=Si,this.removeListeners=Si,this.controls=new c9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Si}unmount(){this.removeGroupControls(),this.removeListeners()}}const nD=e=>(t,n)=>{e&&xr.update(()=>e(t,n))};class d9 extends Iu{constructor(){super(...arguments),this.removePointerDownListener=Si}onPointerDown(t){this.session=new H5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:c}=this.node.getProps();return{onSessionStart:nD(t),onStart:nD(n),onMove:i,onEnd:(f,m)=>{delete this.session,c&&xr.update(()=>c(f,m))}}}mount(){this.removePointerDownListener=Wl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function f9(){const e=ue.useContext(Ax);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,c=ue.useId();return ue.useEffect(()=>i(c),[]),!t&&n?[!1,()=>n&&n(c)]:[!0]}function rD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const rg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(un.test(e))e=parseFloat(e);else return e;const n=rD(e,t.target.x),i=rD(e,t.target.y);return`${n}% ${i}%`}},p9={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,c=yu.parse(e);if(c.length>5)return i;const f=yu.createTransformer(e),m=typeof c[0]!="number"?1:0,s=n.x.scale*t.x,v=n.y.scale*t.y;c[0+m]/=s,c[1+m]/=v;const E=Zr(s,v,.5);return typeof c[2+m]=="number"&&(c[2+m]/=E),typeof c[3+m]=="number"&&(c[3+m]/=E),f(c)}};class m9 extends pp.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:c}=this.props,{projection:f}=t;EG(g9),f&&(n.group&&n.group.add(f),i&&i.register&&c&&i.register(f),f.root.didUpdate(),f.addEventListener("animationComplete",()=>{this.safeToRemove()}),f.setOptions({...f.options,onExitComplete:()=>this.safeToRemove()})),Pg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:c,isPresent:f}=this.props,m=i.projection;return m&&(m.isPresent=f,c||t.layoutDependency!==n||n===void 0?m.willUpdate():this.safeToRemove(),t.isPresent!==f&&(f?m.promote():m.relegate()||xr.postRender(()=>{const s=m.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),!t.currentAnimation&&t.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:c}=t;c&&(c.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(c),i&&i.deregister&&i.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function J5(e){const[t,n]=f9(),i=ue.useContext(lI);return pp.createElement(m9,{...e,layoutGroup:i,switchLayoutGroup:ue.useContext(X3),isPresent:t,safeToRemove:n})}const g9={borderRadius:{...rg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rg,borderTopRightRadius:rg,borderBottomLeftRadius:rg,borderBottomRightRadius:rg,boxShadow:p9},ez=["TopLeft","TopRight","BottomLeft","BottomRight"],y9=ez.length,iD=e=>typeof e=="string"?parseFloat(e):e,oD=e=>typeof e=="number"||un.test(e);function _9(e,t,n,i,c,f){c?(e.opacity=Zr(0,n.opacity!==void 0?n.opacity:1,v9(i)),e.opacityExit=Zr(t.opacity!==void 0?t.opacity:1,0,x9(i))):f&&(e.opacity=Zr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let m=0;m<y9;m++){const s=`border${ez[m]}Radius`;let v=sD(t,s),E=sD(n,s);if(v===void 0&&E===void 0)continue;v||(v=0),E||(E=0),v===0||E===0||oD(v)===oD(E)?(e[s]=Math.max(Zr(iD(v),iD(E),i),0),(al.test(E)||al.test(v))&&(e[s]+="%")):e[s]=E}(t.rotate||n.rotate)&&(e.rotate=Zr(t.rotate||0,n.rotate||0,i))}function sD(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const v9=tz(0,.5,yI),x9=tz(.5,.95,Si);function tz(e,t,n){return i=>i<e?0:i>t?1:n(lp(e,t,i))}function aD(e,t){e.min=t.min,e.max=t.max}function Is(e,t){aD(e.x,t.x),aD(e.y,t.y)}function lD(e,t,n,i,c){return e-=t,e=O1(e,1/n,i),c!==void 0&&(e=O1(e,1/c,i)),e}function w9(e,t=0,n=1,i=.5,c,f=e,m=e){if(al.test(t)&&(t=parseFloat(t),t=Zr(m.min,m.max,t/100)-m.min),typeof t!="number")return;let s=Zr(f.min,f.max,i);e===f&&(s-=t),e.min=lD(e.min,t,n,s,c),e.max=lD(e.max,t,n,s,c)}function cD(e,t,[n,i,c],f,m){w9(e,t[n],t[i],t[c],t.scale,f,m)}const b9=["x","scaleX","originX"],E9=["y","scaleY","originY"];function uD(e,t,n,i){cD(e.x,t,b9,n?n.x:void 0,i?i.x:void 0),cD(e.y,t,E9,n?n.y:void 0,i?i.y:void 0)}function hD(e){return e.translate===0&&e.scale===1}function nz(e){return hD(e.x)&&hD(e.y)}function I2(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function dD(e){return ds(e.x)/ds(e.y)}class T9{constructor(){this.members=[]}add(t){SI(this.members,t),t.scheduleRender()}remove(t){if(II(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(c=>t===c);if(n===0)return!1;let i;for(let c=n;c>=0;c--){const f=this.members[c];if(f.isPresent!==!1){i=f;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fD(e,t,n){let i="";const c=e.x.translate/t.x,f=e.y.translate/t.y;if((c||f)&&(i=`translate3d(${c}px, ${f}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:v,rotateX:E,rotateY:I}=n;v&&(i+=`rotate(${v}deg) `),E&&(i+=`rotateX(${E}deg) `),I&&(i+=`rotateY(${I}deg) `)}const m=e.x.scale*t.x,s=e.y.scale*t.y;return(m!==1||s!==1)&&(i+=`scale(${m}, ${s})`),i||"none"}const S9=(e,t)=>e.depth-t.depth;class I9{constructor(){this.children=[],this.isDirty=!1}add(t){SI(this.children,t),this.isDirty=!0}remove(t){II(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(S9),this.isDirty=!1,this.children.forEach(t)}}function M9(e,t){const n=performance.now(),i=({timestamp:c})=>{const f=c-n;f>=t&&(ul(i),e(f-t))};return xr.read(i,!0),()=>ul(i)}function A9(e){window.MotionDebug&&window.MotionDebug.record(e)}function C9(e){return e instanceof SVGElement&&e.tagName!=="svg"}function P9(e,t,n){const i=mo(e)?e:ha(e);return i.start(TI("",i,t,n)),i.animation}const pD=["","X","Y","Z"],mD=1e3;let R9=0;const Dh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function rz({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:c}){return class{constructor(m,s={},v=t==null?void 0:t()){this.id=R9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Dh.totalNodes=Dh.resolvedTargetDeltas=Dh.recalculatedProjection=0,this.nodes.forEach(k9),this.nodes.forEach(B9),this.nodes.forEach(F9),this.nodes.forEach(L9),A9(Dh)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=m,this.latestValues=s,this.root=v?v.root||v:this,this.path=v?[...v.path,v]:[],this.parent=v,this.depth=v?v.depth+1:0,m&&this.root.registerPotentialNode(m,this);for(let E=0;E<this.path.length;E++)this.path[E].shouldResetTransform=!0;this.root===this&&(this.nodes=new I9)}addEventListener(m,s){return this.eventHandlers.has(m)||this.eventHandlers.set(m,new MI),this.eventHandlers.get(m).add(s)}notifyListeners(m,...s){const v=this.eventHandlers.get(m);v&&v.notify(...s)}hasListeners(m){return this.eventHandlers.has(m)}registerPotentialNode(m,s){this.potentialNodes.set(m,s)}mount(m,s=!1){if(this.instance)return;this.isSVG=C9(m),this.instance=m;const{layoutId:v,layout:E,visualElement:I}=this.options;if(I&&!I.current&&I.mount(m),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),s&&(E||v)&&(this.isLayoutDirty=!0),e){let M;const P=()=>this.root.updateBlockedByResize=!1;e(m,()=>{this.root.updateBlockedByResize=!0,M&&M(),M=M9(P,250),Pg.hasAnimatedSinceResize&&(Pg.hasAnimatedSinceResize=!1,this.nodes.forEach(yD))})}v&&this.root.registerSharedNode(v,this),this.options.animate!==!1&&I&&(v||E)&&this.addEventListener("didUpdate",({delta:M,hasLayoutChanged:P,hasRelativeTargetChanged:D,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const V=this.options.transition||I.getDefaultTransition()||$9,{onLayoutAnimationStart:H,onLayoutAnimationComplete:G}=I.getProps(),z=!this.targetLayout||!I2(this.targetLayout,k)||D,N=!P&&D;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||P&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(M,N);const W={...G5(V,"layout"),onPlay:H,onComplete:G};(I.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else!P&&this.animationProgress===0&&yD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const m=this.getStack();m&&m.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ul(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(U9),this.animationId++)}getTransformTemplate(){const{visualElement:m}=this.options;return m&&m.getProps().transformTemplate}willUpdate(m=!0){if(this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let I=0;I<this.path.length;I++){const M=this.path[I];M.shouldResetTransform=!0,M.updateScroll("snapshot"),M.options.layoutRoot&&M.willUpdate(!1)}const{layoutId:s,layout:v}=this.options;if(s===void 0&&!v)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),m&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gD);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(W9),this.potentialNodes.clear()),this.nodes.forEach(N9),this.nodes.forEach(D9),this.nodes.forEach(O9),this.clearAllSnapshots(),Hf.update.process(ai),Hf.preRender.process(ai),Hf.render.process(ai))}clearAllSnapshots(){this.nodes.forEach(z9),this.sharedNodes.forEach(V9)}scheduleUpdateProjection(){xr.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){xr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const m=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,m?m.layoutBox:void 0)}updateScroll(m="measure"){let s=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===m&&(s=!1),s&&(this.scroll={animationId:this.root.animationId,phase:m,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!c)return;const m=this.isLayoutDirty||this.shouldResetTransform,s=this.projectionDelta&&!nz(this.projectionDelta),v=this.getTransformTemplate(),E=v?v(this.latestValues,""):void 0,I=E!==this.prevTransformTemplateValue;m&&(s||Rh(this.latestValues)||I)&&(c(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(m=!0){const s=this.measurePageBox();let v=this.removeElementScroll(s);return m&&(v=this.removeTransform(v)),q9(v),{animationId:this.root.animationId,measuredBox:s,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:m}=this.options;if(!m)return pi();const s=m.measureViewportBox(),{scroll:v}=this.root;return v&&(Gc(s.x,v.offset.x),Gc(s.y,v.offset.y)),s}removeElementScroll(m){const s=pi();Is(s,m);for(let v=0;v<this.path.length;v++){const E=this.path[v],{scroll:I,options:M}=E;if(E!==this.root&&I&&M.layoutScroll){if(I.isRoot){Is(s,m);const{scroll:P}=this.root;P&&(Gc(s.x,-P.offset.x),Gc(s.y,-P.offset.y))}Gc(s.x,I.offset.x),Gc(s.y,I.offset.y)}}return s}applyTransform(m,s=!1){const v=pi();Is(v,m);for(let E=0;E<this.path.length;E++){const I=this.path[E];!s&&I.options.layoutScroll&&I.scroll&&I!==I.root&&Lf(v,{x:-I.scroll.offset.x,y:-I.scroll.offset.y}),Rh(I.latestValues)&&Lf(v,I.latestValues)}return Rh(this.latestValues)&&Lf(v,this.latestValues),v}removeTransform(m){const s=pi();Is(s,m);for(let v=0;v<this.path.length;v++){const E=this.path[v];if(!E.instance||!Rh(E.latestValues))continue;T2(E.latestValues)&&E.updateSnapshot();const I=pi(),M=E.measurePageBox();Is(I,M),uD(s,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,I)}return Rh(this.latestValues)&&uD(s,this.latestValues),s}setTargetDelta(m){this.targetDelta=m,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(m){this.options={...this.options,...m,crossfade:m.crossfade!==void 0?m.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ai.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(m=!1){var s;const v=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=v.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=v.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=v.isSharedProjectionDirty);const E=!!this.resumingFrom||this!==v;if(!(m||E&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:M,layoutId:P}=this.options;if(!(!this.layout||!(M||P))){if(this.resolvedRelativeTargetAt=ai.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pi(),this.relativeTargetOrigin=pi(),kg(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),Is(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pi(),this.targetWithTransforms=pi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Y7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Is(this.target,this.layout.layoutBox),Q5(this.target,this.targetDelta)):Is(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pi(),this.relativeTargetOrigin=pi(),kg(this.relativeTargetOrigin,this.target,D.target),Is(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Dh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||T2(this.parent.latestValues)||X5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const s=this.getLead(),v=!!this.resumingFrom||this!==s;let E=!0;if((this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty)&&(E=!1),v&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(E=!1),this.resolvedRelativeTargetAt===ai.timestamp&&(E=!1),E)return;const{layout:I,layoutId:M}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(I||M))return;Is(this.layoutCorrected,this.layout.layoutBox),i9(this.layoutCorrected,this.treeScale,this.path,v);const{target:P}=s;if(!P)return;this.projectionDelta||(this.projectionDelta=Lg(),this.projectionDeltaWithTransform=Lg());const D=this.treeScale.x,k=this.treeScale.y,V=this.projectionTransform;Og(this.projectionDelta,this.layoutCorrected,P,this.latestValues),this.projectionTransform=fD(this.projectionDelta,this.treeScale),(this.projectionTransform!==V||this.treeScale.x!==D||this.treeScale.y!==k)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",P)),Dh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(m=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),m){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(m,s=!1){const v=this.snapshot,E=v?v.latestValues:{},I={...this.latestValues},M=Lg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const P=pi(),D=v?v.source:void 0,k=this.layout?this.layout.source:void 0,V=D!==k,H=this.getStack(),G=!H||H.members.length<=1,z=!!(V&&!G&&this.options.crossfade===!0&&!this.path.some(G9));this.animationProgress=0;let N;this.mixTargetDelta=W=>{const $=W/1e3;_D(M.x,m.x,$),_D(M.y,m.y,$),this.setTargetDelta(M),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kg(P,this.layout.layoutBox,this.relativeParent.layout.layoutBox),j9(this.relativeTarget,this.relativeTargetOrigin,P,$),N&&I2(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=pi()),Is(N,this.relativeTarget)),V&&(this.animationValues=I,_9(I,E,this.latestValues,$,z,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(m){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ul(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xr.update(()=>{Pg.hasAnimatedSinceResize=!0,this.currentAnimation=P9(0,mD,{...m,onUpdate:s=>{this.mixTargetDelta(s),m.onUpdate&&m.onUpdate(s)},onComplete:()=>{m.onComplete&&m.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const m=this.getStack();m&&m.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const m=this.getLead();let{targetWithTransforms:s,target:v,layout:E,latestValues:I}=m;if(!(!s||!v||!E)){if(this!==m&&this.layout&&E&&iz(this.options.animationType,this.layout.layoutBox,E.layoutBox)){v=this.target||pi();const M=ds(this.layout.layoutBox.x);v.x.min=m.target.x.min,v.x.max=v.x.min+M;const P=ds(this.layout.layoutBox.y);v.y.min=m.target.y.min,v.y.max=v.y.min+P}Is(s,v),Lf(s,I),Og(this.projectionDeltaWithTransform,this.layoutCorrected,s,I)}}registerSharedNode(m,s){this.sharedNodes.has(m)||this.sharedNodes.set(m,new T9),this.sharedNodes.get(m).add(s);const E=s.options.initialPromotionConfig;s.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(s):void 0})}isLead(){const m=this.getStack();return m?m.lead===this:!0}getLead(){var m;const{layoutId:s}=this.options;return s?((m=this.getStack())===null||m===void 0?void 0:m.lead)||this:this}getPrevLead(){var m;const{layoutId:s}=this.options;return s?(m=this.getStack())===null||m===void 0?void 0:m.prevLead:void 0}getStack(){const{layoutId:m}=this.options;if(m)return this.root.sharedNodes.get(m)}promote({needsReset:m,transition:s,preserveFollowOpacity:v}={}){const E=this.getStack();E&&E.promote(this,v),m&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const m=this.getStack();return m?m.relegate(this):!1}resetRotation(){const{visualElement:m}=this.options;if(!m)return;let s=!1;const{latestValues:v}=m;if((v.rotate||v.rotateX||v.rotateY||v.rotateZ)&&(s=!0),!s)return;const E={};for(let I=0;I<pD.length;I++){const M="rotate"+pD[I];v[M]&&(E[M]=v[M],m.setStaticValue(M,0))}m.render();for(const I in E)m.setStaticValue(I,E[I]);m.scheduleRender()}getProjectionStyles(m={}){var s,v;const E={};if(!this.instance||this.isSVG)return E;if(this.isVisible)E.visibility="";else return{visibility:"hidden"};const I=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,E.opacity="",E.pointerEvents=Rv(m.pointerEvents)||"",E.transform=I?I(this.latestValues,""):"none",E;const M=this.getLead();if(!this.projectionDelta||!this.layout||!M.target){const V={};return this.options.layoutId&&(V.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,V.pointerEvents=Rv(m.pointerEvents)||""),this.hasProjected&&!Rh(this.latestValues)&&(V.transform=I?I({},""):"none",this.hasProjected=!1),V}const P=M.animationValues||M.latestValues;this.applyTransformsToTarget(),E.transform=fD(this.projectionDeltaWithTransform,this.treeScale,P),I&&(E.transform=I(P,E.transform));const{x:D,y:k}=this.projectionDelta;E.transformOrigin=`${D.origin*100}% ${k.origin*100}% 0`,M.animationValues?E.opacity=M===this?(v=(s=P.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&v!==void 0?v:1:this.preserveOpacity?this.latestValues.opacity:P.opacityExit:E.opacity=M===this?P.opacity!==void 0?P.opacity:"":P.opacityExit!==void 0?P.opacityExit:0;for(const V in M1){if(P[V]===void 0)continue;const{correct:H,applyTo:G}=M1[V],z=E.transform==="none"?P[V]:H(P[V],M);if(G){const N=G.length;for(let W=0;W<N;W++)E[G[W]]=z}else E[V]=z}return this.options.layoutId&&(E.pointerEvents=M===this?Rv(m.pointerEvents)||"":"none"),E}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(m=>{var s;return(s=m.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(gD),this.root.sharedNodes.clear()}}}function D9(e){e.updateLayout()}function O9(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:c}=e.layout,{animationType:f}=e.options,m=n.source!==e.layout.source;f==="size"?Qa(M=>{const P=m?n.measuredBox[M]:n.layoutBox[M],D=ds(P);P.min=i[M].min,P.max=P.min+D}):iz(f,n.layoutBox,i)&&Qa(M=>{const P=m?n.measuredBox[M]:n.layoutBox[M],D=ds(i[M]);P.max=P.min+D,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[M].max=e.relativeTarget[M].min+D)});const s=Lg();Og(s,i,n.layoutBox);const v=Lg();m?Og(v,e.applyTransform(c,!0),n.measuredBox):Og(v,i,n.layoutBox);const E=!nz(s);let I=!1;if(!e.resumeFrom){const M=e.getClosestProjectingParent();if(M&&!M.resumeFrom){const{snapshot:P,layout:D}=M;if(P&&D){const k=pi();kg(k,n.layoutBox,P.layoutBox);const V=pi();kg(V,i,D.layoutBox),I2(k,V)||(I=!0),M.options.layoutRoot&&(e.relativeTarget=V,e.relativeTargetOrigin=k,e.relativeParent=M)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:v,layoutDelta:s,hasLayoutChanged:E,hasRelativeTargetChanged:I})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function k9(e){Dh.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function L9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function z9(e){e.clearSnapshot()}function gD(e){e.clearMeasurements()}function N9(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function yD(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function B9(e){e.resolveTargetDelta()}function F9(e){e.calcProjection()}function U9(e){e.resetRotation()}function V9(e){e.removeLeadSnapshot()}function _D(e,t,n){e.translate=Zr(t.translate,0,n),e.scale=Zr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function vD(e,t,n,i){e.min=Zr(t.min,n.min,i),e.max=Zr(t.max,n.max,i)}function j9(e,t,n,i){vD(e.x,t.x,n.x,i),vD(e.y,t.y,n.y,i)}function G9(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $9={duration:.45,ease:[.4,0,.1,1]};function W9(e,t){let n=e.root;for(let f=e.path.length-1;f>=0;f--)if(e.path[f].instance){n=e.path[f];break}const c=(n&&n!==e.root?n.instance:document).querySelector(`[data-projection-id="${t}"]`);c&&e.mount(c,!0)}function xD(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function q9(e){xD(e.x),xD(e.y)}function iz(e,t,n){return e==="position"||e==="preserve-aspect"&&!b2(dD(t),dD(n),.2)}const H9=rz({attachResizeListener:(e,t)=>Vl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),DE={current:void 0},oz=rz({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!DE.current){const e=new H9(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),DE.current=e}return DE.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Z9={pan:{Feature:d9},drag:{Feature:h9,ProjectionNode:oz,MeasureLayout:J5}},Y9=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function X9(e){const t=Y9.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function M2(e,t,n=1){const[i,c]=X9(e);if(!i)return;const f=window.getComputedStyle(t).getPropertyValue(i);return f?f.trim():p2(c)?M2(c,t,n+1):c}function Q9(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(c=>{const f=c.get();if(!p2(f))return;const m=M2(f,i);m&&c.set(m)});for(const c in t){const f=t[c];if(!p2(f))continue;const m=M2(f,i);m&&(t[c]=m,n||(n={}),n[c]===void 0&&(n[c]=f))}return{target:t,transitionEnd:n}}const K9=new Set(["width","height","top","left","right","bottom","x","y"]),sz=e=>K9.has(e),J9=e=>Object.keys(e).some(sz),wD=e=>e===sd||e===un,bD=(e,t)=>parseFloat(e.split(", ")[t]),ED=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const c=i.match(/^matrix3d\((.+)\)$/);if(c)return bD(c[1],t);{const f=i.match(/^matrix\((.+)\)$/);return f?bD(f[1],e):0}},e$=new Set(["x","y","z"]),t$=Ly.filter(e=>!e$.has(e));function n$(e){const t=[];return t$.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const TD={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ED(4,13),y:ED(5,14)},r$=(e,t,n)=>{const i=t.measureViewportBox(),c=t.current,f=getComputedStyle(c),{display:m}=f,s={};m==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(E=>{s[E]=TD[E](i,f)}),t.render();const v=t.measureViewportBox();return n.forEach(E=>{const I=t.getValue(E);I&&I.jump(s[E]),e[E]=TD[E](v,f)}),e},i$=(e,t,n={},i={})=>{t={...t},i={...i};const c=Object.keys(t).filter(sz);let f=[],m=!1;const s=[];if(c.forEach(v=>{const E=e.getValue(v);if(!e.hasValue(v))return;let I=n[v],M=ng(I);const P=t[v];let D;if(C1(P)){const k=P.length,V=P[0]===null?1:0;I=P[V],M=ng(I);for(let H=V;H<k&&P[H]!==null;H++)D?zx(ng(P[H])===D):D=ng(P[H])}else D=ng(P);if(M!==D)if(wD(M)&&wD(D)){const k=E.get();typeof k=="string"&&E.set(parseFloat(k)),typeof P=="string"?t[v]=parseFloat(P):Array.isArray(P)&&D===un&&(t[v]=P.map(parseFloat))}else M!=null&&M.transform&&(D!=null&&D.transform)&&(I===0||P===0)?I===0?E.set(D.transform(I)):t[v]=M.transform(P):(m||(f=n$(e),m=!0),s.push(v),i[v]=i[v]!==void 0?i[v]:t[v],E.jump(P))}),s.length){const v=s.indexOf("height")>=0?window.pageYOffset:null,E=r$(t,e,s);return f.length&&f.forEach(([I,M])=>{e.getValue(I).set(M)}),e.render(),Cx&&v!==null&&window.scrollTo({top:v}),{target:E,transitionEnd:i}}else return{target:t,transitionEnd:i}};function o$(e,t,n,i){return J9(t)?i$(e,t,n,i):{target:t,transitionEnd:i}}const s$=(e,t,n,i)=>{const c=Q9(e,t,i);return t=c.target,i=c.transitionEnd,o$(e,t,n,i)},A2={current:null},az={current:!1};function a$(){if(az.current=!0,!!Cx)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>A2.current=e.matches;e.addListener(t),t()}else A2.current=!1}function l$(e,t,n){const{willChange:i}=t;for(const c in t){const f=t[c],m=n[c];if(mo(f))e.addValue(c,f),D1(i)&&i.add(c);else if(mo(m))e.addValue(c,ha(f,{owner:e})),D1(i)&&i.remove(c);else if(m!==f)if(e.hasValue(c)){const s=e.getValue(c);!s.hasAnimated&&s.set(f)}else{const s=e.getStaticValue(c);e.addValue(c,ha(s!==void 0?s:f,{owner:e}))}}for(const c in n)t[c]===void 0&&e.removeValue(c);return t}const SD=new WeakMap,lz=Object.keys(dy),c$=lz.length,ID=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],u$=aI.length;class h${constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:c,visualState:f},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>xr.render(this.render,!1,!0);const{latestValues:s,renderState:v}=f;this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=v,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=m,this.isControllingVariants=Rx(n),this.isVariantNode=Y3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:E,...I}=this.scrapeMotionValuesFromProps(n,{});for(const M in I){const P=I[M];s[M]!==void 0&&mo(P)&&(P.set(s[M],!1),D1(E)&&E.add(M))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,SD.set(t,this),this.projection&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),az.current||a$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:A2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){SD.delete(this.current),this.projection&&this.projection.unmount(),ul(this.notifyUpdate),ul(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=od.has(t),c=n.on("change",m=>{this.latestValues[t]=m,this.props.onUpdate&&xr.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),f=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{c(),f()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,c,f,m){let s,v;for(let E=0;E<c$;E++){const I=lz[E],{isEnabled:M,Feature:P,ProjectionNode:D,MeasureLayout:k}=dy[I];D&&(s=D),M(n)&&(!this.features[I]&&P&&(this.features[I]=new P(this)),k&&(v=k))}if(!this.projection&&s){this.projection=new s(f,this.latestValues,this.parent&&this.parent.projection);const{layoutId:E,layout:I,drag:M,dragConstraints:P,layoutScroll:D,layoutRoot:k}=n;this.projection.setOptions({layoutId:E,layout:I,alwaysMeasureLayout:!!M||P&&Of(P),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof I=="string"?I:"both",initialPromotionConfig:m,layoutScroll:D,layoutRoot:k})}return v}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update(this.props,this.prevProps):(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<ID.length;i++){const c=ID[i];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const f=t["on"+c];f&&(this.propEventSubscriptions[c]=this.on(c,f))}this.prevMotionValues=l$(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<u$;i++){const c=aI[i],f=this.props[c];(hy(f)||f===!1)&&(n[c]=f)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=ha(n,{owner:this}),this.addValue(t,i)),i}readValue(t){return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,c=typeof i=="string"||typeof i=="object"?(n=gI(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&c!==void 0)return c;const f=this.getBaseTargetFromProps(this.props,t);return f!==void 0&&!mo(f)?f:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new MI),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class cz extends h${sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},{transformValues:c},f){let m=R7(i,t||{},this);if(c&&(n&&(n=c(n)),i&&(i=c(i)),m&&(m=c(m))),f){C7(this,i,m);const s=s$(this,i,m,n);n=s.transitionEnd,i=s.target}return{transition:t,transitionEnd:n,...i}}}function d$(e){return window.getComputedStyle(e)}class f$ extends cz{readValueFromInstance(t,n){if(od.has(n)){const i=bI(n);return i&&i.default||0}else{const i=d$(t),c=(J3(n)?i.getPropertyValue(n):i[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:n}){return K5(t,n)}build(t,n,i,c){uI(t,n,i,c.transformTemplate)}scrapeMotionValuesFromProps(t,n){return mI(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,c){o5(t,n,i,c)}}class p$ extends cz{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(od.has(n)){const i=bI(n);return i&&i.default||0}return n=s5.has(n)?n:pI(n),t.getAttribute(n)}measureInstanceViewportBox(){return pi()}scrapeMotionValuesFromProps(t,n){return l5(t,n)}build(t,n,i,c){dI(t,n,i,this.isSVGTag,c.transformTemplate)}renderInstance(t,n,i,c){a5(t,n,i,c)}mount(t){this.isSVGTag=fI(t.tagName),super.mount(t)}}const m$=(e,t)=>cI(e)?new p$(t,{enableHardwareAcceleration:!1}):new f$(t,{enableHardwareAcceleration:!0}),g$={layout:{ProjectionNode:oz,MeasureLayout:J5}},y$={...W7,...f8,...Z9,...g$},nd=wG((e,t)=>XG(e,t,y$,m$));function uz(){const e=ue.useRef(!1);return ap(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function _$(){const e=uz(),[t,n]=ue.useState(0),i=ue.useCallback(()=>{e.current&&n(t+1)},[t]);return[ue.useCallback(()=>xr.postRender(i),[i]),t]}class v$ extends ue.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function x$({children:e,isPresent:t}){const n=ue.useId(),i=ue.useRef(null),c=ue.useRef({width:0,height:0,top:0,left:0});return ue.useInsertionEffect(()=>{const{width:f,height:m,top:s,left:v}=c.current;if(t||!i.current||!f||!m)return;i.current.dataset.motionPopId=n;const E=document.createElement("style");return document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${m}px !important;
            top: ${s}px !important;
            left: ${v}px !important;
          }
        `),()=>{document.head.removeChild(E)}},[t]),ue.createElement(v$,{isPresent:t,childRef:i,sizeRef:c},ue.cloneElement(e,{ref:i}))}const OE=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:c,presenceAffectsLayout:f,mode:m})=>{const s=ky(w$),v=ue.useId(),E=ue.useMemo(()=>({id:v,initial:t,isPresent:n,custom:c,onExitComplete:I=>{s.set(I,!0);for(const M of s.values())if(!M)return;i&&i()},register:I=>(s.set(I,!1),()=>s.delete(I))}),f?void 0:[n]);return ue.useMemo(()=>{s.forEach((I,M)=>s.set(M,!1))},[n]),ue.useEffect(()=>{!n&&!s.size&&i&&i()},[n]),m==="popLayout"&&(e=ue.createElement(x$,{isPresent:n},e)),ue.createElement(Ax.Provider,{value:E},e)};function w$(){return new Map}function b$(e){return ue.useEffect(()=>()=>e(),[])}const vf=e=>e.key||"";function E$(e,t){e.forEach(n=>{const i=vf(n);t.set(i,n)})}function T$(e){const t=[];return ue.Children.forEach(e,n=>{ue.isValidElement(n)&&t.push(n)}),t}const MD=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:c,presenceAffectsLayout:f=!0,mode:m="sync"})=>{let[s]=_$();const v=ue.useContext(lI).forceRender;v&&(s=v);const E=uz(),I=T$(e);let M=I;const P=new Set,D=ue.useRef(M),k=ue.useRef(new Map).current,V=ue.useRef(!0);if(ap(()=>{V.current=!1,E$(I,k),D.current=M}),b$(()=>{V.current=!0,k.clear(),P.clear()}),V.current)return ue.createElement(ue.Fragment,null,M.map(N=>ue.createElement(OE,{key:vf(N),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:f,mode:m},N)));M=[...M];const H=D.current.map(vf),G=I.map(vf),z=H.length;for(let N=0;N<z;N++){const W=H[N];G.indexOf(W)===-1&&P.add(W)}return m==="wait"&&P.size&&(M=[]),P.forEach(N=>{if(G.indexOf(N)!==-1)return;const W=k.get(N);if(!W)return;const $=H.indexOf(N),X=()=>{k.delete(N),P.delete(N);const te=D.current.findIndex(J=>J.key===N);if(D.current.splice(te,1),!P.size){if(D.current=I,E.current===!1)return;s(),i&&i()}};M.splice($,0,ue.createElement(OE,{key:vf(W),isPresent:!1,onExitComplete:X,custom:t,presenceAffectsLayout:f,mode:m},W))}),M=M.map(N=>{const W=N.key;return P.has(W)?N:ue.createElement(OE,{key:vf(N),isPresent:!0,presenceAffectsLayout:f,mode:m},N)}),ue.createElement(ue.Fragment,null,P.size?M:M.map(N=>ue.cloneElement(N)))};function S$(e){const t=ky(()=>ha(e)),{isStatic:n}=ue.useContext(Ix);if(n){const[,i]=ue.useState(e);ue.useEffect(()=>t.on("change",i),[])}return t}function hz(e,t={}){const{isStatic:n}=ue.useContext(Ix),i=ue.useRef(null),c=S$(mo(e)?e.get():e),f=()=>{i.current&&i.current.stop()};return ue.useInsertionEffect(()=>c.attach((m,s)=>{if(n)return s(m);if(f(),i.current=py({keyframes:[c.get(),m],velocity:c.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:s}),!ai.isProcessing){const v=performance.now()-ai.timestamp;v<30&&(i.current.time=ll(v))}return c.get()},f),[JSON.stringify(t)]),ap(()=>{if(mo(e))return e.on("change",m=>c.set(parseFloat(m)))},[c]),c}function dz(e,t,n){var i;if(typeof e=="string"){let c=document;t&&(zx(!!t.current),c=t.current),n?((i=n[e])!==null&&i!==void 0||(n[e]=c.querySelectorAll(e)),e=n[e]):e=c.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const Dv=new WeakMap;let Uc;function I$(e,t){if(t){const{inlineSize:n,blockSize:i}=t[0];return{width:n,height:i}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function M$({target:e,contentRect:t,borderBoxSize:n}){var i;(i=Dv.get(e))===null||i===void 0||i.forEach(c=>{c({target:e,contentSize:t,get size(){return I$(e,n)}})})}function A$(e){e.forEach(M$)}function C$(){typeof ResizeObserver>"u"||(Uc=new ResizeObserver(A$))}function P$(e,t){Uc||C$();const n=dz(e);return n.forEach(i=>{let c=Dv.get(i);c||(c=new Set,Dv.set(i,c)),c.add(t),Uc==null||Uc.observe(i)}),()=>{n.forEach(i=>{const c=Dv.get(i);c==null||c.delete(t),c!=null&&c.size||Uc==null||Uc.unobserve(i)})}}const Ov=new Set;let zg;function R$(){zg=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};Ov.forEach(n=>n(t))},window.addEventListener("resize",zg)}function D$(e){return Ov.add(e),zg||R$(),()=>{Ov.delete(e),!Ov.size&&zg&&(zg=void 0)}}function O$(e,t){return typeof e=="function"?D$(e):P$(e,t)}const k$=50,AD=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),L$=()=>({time:0,x:AD(),y:AD()}),z$={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function CD(e,t,n,i){const c=n[t],{length:f,position:m}=z$[t],s=c.current,v=n.time;c.current=e["scroll"+m],c.scrollLength=e["scroll"+f]-e["client"+f],c.offset.length=0,c.offset[0]=0,c.offset[1]=c.scrollLength,c.progress=lp(0,c.scrollLength,c.current);const E=i-v;c.velocity=E>k$?0:wI(c.current-s,E)}function N$(e,t,n){CD(e,"x",t,n),CD(e,"y",t,n),t.time=n}function B$(e,t){let n={x:0,y:0},i=e;for(;i&&i!==t;)if(i instanceof HTMLElement)n.x+=i.offsetLeft,n.y+=i.offsetTop,i=i.offsetParent;else if(i instanceof SVGGraphicsElement&&"getBBox"in i){const{top:c,left:f}=i.getBBox();for(n.x+=f,n.y+=c;i&&i.tagName!=="svg";)i=i.parentNode}return n}const F$={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},C2={start:0,center:.5,end:1};function PD(e,t,n=0){let i=0;if(C2[e]!==void 0&&(e=C2[e]),typeof e=="string"){const c=parseFloat(e);e.endsWith("px")?i=c:e.endsWith("%")?e=c/100:e.endsWith("vw")?i=c/100*document.documentElement.clientWidth:e.endsWith("vh")?i=c/100*document.documentElement.clientHeight:e=c}return typeof e=="number"&&(i=t*e),n+i}const U$=[0,0];function V$(e,t,n,i){let c=Array.isArray(e)?e:U$,f=0,m=0;return typeof e=="number"?c=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?c=e.split(" "):c=[e,C2[e]?e:"0"]),f=PD(c[0],n,i),m=PD(c[1],t),f-m}const j$={x:0,y:0};function G$(e,t,n){let{offset:i=F$.All}=n;const{target:c=e,axis:f="y"}=n,m=f==="y"?"height":"width",s=c!==e?B$(c,e):j$,v=c===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:c.clientWidth,height:c.clientHeight},E={width:e.clientWidth,height:e.clientHeight};t[f].offset.length=0;let I=!t[f].interpolate;const M=i.length;for(let P=0;P<M;P++){const D=V$(i[P],E[m],v[m],s[f]);!I&&D!==t[f].interpolatorOffsets[P]&&(I=!0),t[f].offset[P]=D}I&&(t[f].interpolate=xI(t[f].offset,U5(i)),t[f].interpolatorOffsets=[...t[f].offset]),t[f].progress=t[f].interpolate(t[f].current)}function $$(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let i=t;for(;i&&i!==e;)n.x.targetOffset+=i.offsetLeft,n.y.targetOffset+=i.offsetTop,i=i.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function W$(e,t,n,i={}){return{measure:()=>$$(e,i.target,n),update:c=>{N$(e,n,c),(i.offset||i.target)&&G$(e,n,i)},notify:()=>t(n)}}const ig=new WeakMap,RD=new WeakMap,kE=new WeakMap,DD=e=>e===document.documentElement?window:e;function q$(e,{container:t=document.documentElement,...n}={}){let i=kE.get(t);i||(i=new Set,kE.set(t,i));const c=L$(),f=W$(t,e,c,n);if(i.add(f),!ig.has(t)){const s=()=>{for(const P of i)P.measure()},v=()=>{for(const P of i)P.update(ai.timestamp)},E=()=>{for(const P of i)P.notify()},I=()=>{xr.read(s,!1,!0),xr.update(v,!1,!0),xr.update(E,!1,!0)};ig.set(t,I);const M=DD(t);window.addEventListener("resize",I,{passive:!0}),t!==document.documentElement&&RD.set(t,O$(t,I)),M.addEventListener("scroll",I,{passive:!0})}const m=ig.get(t);return xr.read(m,!1,!0),()=>{var s;ul(m);const v=kE.get(t);if(!v||(v.delete(f),v.size))return;const E=ig.get(t);ig.delete(t),E&&(DD(t).removeEventListener("scroll",E),(s=RD.get(t))===null||s===void 0||s(),window.removeEventListener("resize",E))}}function OD(e,t){y5(!!(!t||t.current))}const H$=()=>({scrollX:ha(0),scrollY:ha(0),scrollXProgress:ha(0),scrollYProgress:ha(0)});function fz({container:e,target:t,layoutEffect:n=!0,...i}={}){const c=ky(H$);return(n?ap:ue.useEffect)(()=>(OD("target",t),OD("container",e),q$(({x:m,y:s})=>{c.scrollX.set(m.current),c.scrollXProgress.set(m.progress),c.scrollY.set(s.current),c.scrollYProgress.set(s.progress)},{...i,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[]),c}const Z$={any:0,all:1};function Y$(e,t,{root:n,margin:i,amount:c="any"}={}){const f=dz(e),m=new WeakMap,s=E=>{E.forEach(I=>{const M=m.get(I.target);if(I.isIntersecting!==!!M)if(I.isIntersecting){const P=t(I);typeof P=="function"?m.set(I.target,P):v.unobserve(I.target)}else M&&(M(I),m.delete(I.target))})},v=new IntersectionObserver(s,{root:n,rootMargin:i,threshold:typeof c=="number"?c:Z$[c]});return f.forEach(E=>v.observe(E)),()=>v.disconnect()}function pz(e,{root:t,margin:n,amount:i,once:c=!1}={}){const[f,m]=ue.useState(!1);return ue.useEffect(()=>{if(!e.current||c&&f)return;const s=()=>(m(!0),c?void 0:()=>m(!1)),v={root:t&&t.current||void 0,margin:n,amount:i==="some"?"any":i};return Y$(e.current,s,v)},[t,e,n,c]),f}function Zi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(c){return"'"+c+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _a(e){return!!e&&!!e[Dr]}function va(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var i=Object.getPrototypeOf(n);if(i===null)return!0;var c=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return c===Object||typeof c=="function"&&Function.toString.call(c)===iW}(e)||Array.isArray(e)||!!e[Ng]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ng])||Nx(e)||Bx(e))}function X$(e){return _a(e)||Zi(23,e),e[Dr].t}function _u(e,t,n){n===void 0&&(n=!1),vu(e)===0?(n?Object.keys:Zf)(e).forEach(function(i){n&&typeof i=="symbol"||t(i,e[i],e)}):e.forEach(function(i,c){return t(c,i,e)})}function vu(e){var t=e[Dr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Nx(e)?2:Bx(e)?3:0}function uu(e,t){return vu(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kv(e,t){return vu(e)===2?e.get(t):e[t]}function mz(e,t,n){var i=vu(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function gz(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Nx(e){return nW&&e instanceof Map}function Bx(e){return rW&&e instanceof Set}function Oh(e){return e.o||e.t}function AI(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=_z(e);delete t[Dr];for(var n=Zf(t),i=0;i<n.length;i++){var c=n[i],f=t[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(t[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[c]})}return Object.create(Object.getPrototypeOf(e),t)}function CI(e,t){return t===void 0&&(t=!1),PI(e)||_a(e)||!va(e)||(vu(e)>1&&(e.set=e.add=e.clear=e.delete=Q$),Object.freeze(e),t&&_u(e,function(n,i){return CI(i,!0)},!0)),e}function Q$(){Zi(2)}function PI(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function cl(e){var t=O2[e];return t||Zi(18,e),t}function yz(e,t){O2[e]||(O2[e]=t)}function P2(){return my}function LE(e,t){t&&(cl("Patches"),e.u=[],e.s=[],e.v=t)}function k1(e){R2(e),e.p.forEach(K$),e.p=null}function R2(e){e===my&&(my=e.l)}function kD(e){return my={p:[],l:my,h:e,m:!0,_:0}}function K$(e){var t=e[Dr];t.i===0||t.i===1?t.j():t.g=!0}function zE(e,t){t._=t.p.length;var n=t.p[0],i=e!==void 0&&e!==n;return t.h.O||cl("ES5").S(t,e,i),i?(n[Dr].P&&(k1(t),Zi(4)),va(e)&&(e=L1(t,e),t.l||z1(t,e)),t.u&&cl("Patches").M(n[Dr].t,e,t.u,t.s)):e=L1(t,n,[]),k1(t),t.u&&t.v(t.u,t.s),e!==DI?e:void 0}function L1(e,t,n){if(PI(t))return t;var i=t[Dr];if(!i)return _u(t,function(s,v){return LD(e,i,t,s,v,n)},!0),t;if(i.A!==e)return t;if(!i.P)return z1(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var c=i.i===4||i.i===5?i.o=AI(i.k):i.o,f=c,m=!1;i.i===3&&(f=new Set(c),c.clear(),m=!0),_u(f,function(s,v){return LD(e,i,c,s,v,n,m)}),z1(e,c,!1),n&&e.u&&cl("Patches").N(i,n,e.u,e.s)}return i.o}function LD(e,t,n,i,c,f,m){if(_a(c)){var s=L1(e,c,f&&t&&t.i!==3&&!uu(t.R,i)?f.concat(i):void 0);if(mz(n,i,s),!_a(s))return;e.m=!1}else m&&n.add(c);if(va(c)&&!PI(c)){if(!e.h.D&&e._<1)return;L1(e,c),t&&t.A.l||z1(e,c)}}function z1(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&CI(t,n)}function NE(e,t){var n=e[Dr];return(n?Oh(n):e)[t]}function zD(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function qc(e){e.P||(e.P=!0,e.l&&qc(e.l))}function BE(e){e.o||(e.o=AI(e.t))}function D2(e,t,n){var i=Nx(t)?cl("MapSet").F(t,n):Bx(t)?cl("MapSet").T(t,n):e.O?function(c,f){var m=Array.isArray(c),s={i:m?1:0,A:f?f.A:P2(),P:!1,I:!1,R:{},l:f,t:c,k:null,o:null,j:null,C:!1},v=s,E=gy;m&&(v=[s],E=_g);var I=Proxy.revocable(v,E),M=I.revoke,P=I.proxy;return s.k=P,s.j=M,P}(t,n):cl("ES5").J(t,n);return(n?n.A:P2()).p.push(i),i}function J$(e){return _a(e)||Zi(22,e),function t(n){if(!va(n))return n;var i,c=n[Dr],f=vu(n);if(c){if(!c.P&&(c.i<4||!cl("ES5").K(c)))return c.t;c.I=!0,i=ND(n,f),c.I=!1}else i=ND(n,f);return _u(i,function(m,s){c&&kv(c.t,m)===s||mz(i,m,t(s))}),f===3?new Set(i):i}(e)}function ND(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return AI(e)}function eW(){function e(f,m){var s=c[f];return s?s.enumerable=m:c[f]=s={configurable:!0,enumerable:m,get:function(){var v=this[Dr];return gy.get(v,f)},set:function(v){var E=this[Dr];gy.set(E,f,v)}},s}function t(f){for(var m=f.length-1;m>=0;m--){var s=f[m][Dr];if(!s.P)switch(s.i){case 5:i(s)&&qc(s);break;case 4:n(s)&&qc(s)}}}function n(f){for(var m=f.t,s=f.k,v=Zf(s),E=v.length-1;E>=0;E--){var I=v[E];if(I!==Dr){var M=m[I];if(M===void 0&&!uu(m,I))return!0;var P=s[I],D=P&&P[Dr];if(D?D.t!==M:!gz(P,M))return!0}}var k=!!m[Dr];return v.length!==Zf(m).length+(k?0:1)}function i(f){var m=f.k;if(m.length!==f.t.length)return!0;var s=Object.getOwnPropertyDescriptor(m,m.length-1);if(s&&!s.get)return!0;for(var v=0;v<m.length;v++)if(!m.hasOwnProperty(v))return!0;return!1}var c={};yz("ES5",{J:function(f,m){var s=Array.isArray(f),v=function(I,M){if(I){for(var P=Array(M.length),D=0;D<M.length;D++)Object.defineProperty(P,""+D,e(D,!0));return P}var k=_z(M);delete k[Dr];for(var V=Zf(k),H=0;H<V.length;H++){var G=V[H];k[G]=e(G,I||!!k[G].enumerable)}return Object.create(Object.getPrototypeOf(M),k)}(s,f),E={i:s?5:4,A:m?m.A:P2(),P:!1,I:!1,R:{},l:m,t:f,k:v,o:null,g:!1,C:!1};return Object.defineProperty(v,Dr,{value:E,writable:!0}),v},S:function(f,m,s){s?_a(m)&&m[Dr].A===f&&t(f.p):(f.u&&function v(E){if(E&&typeof E=="object"){var I=E[Dr];if(I){var M=I.t,P=I.k,D=I.R,k=I.i;if(k===4)_u(P,function(N){N!==Dr&&(M[N]!==void 0||uu(M,N)?D[N]||v(P[N]):(D[N]=!0,qc(I)))}),_u(M,function(N){P[N]!==void 0||uu(P,N)||(D[N]=!1,qc(I))});else if(k===5){if(i(I)&&(qc(I),D.length=!0),P.length<M.length)for(var V=P.length;V<M.length;V++)D[V]=!1;else for(var H=M.length;H<P.length;H++)D[H]=!0;for(var G=Math.min(P.length,M.length),z=0;z<G;z++)P.hasOwnProperty(z)||(D[z]=!0),D[z]===void 0&&v(P[z])}}}}(f.p[0]),t(f.p))},K:function(f){return f.i===4?n(f):i(f)}})}function tW(){function e(i){if(!va(i))return i;if(Array.isArray(i))return i.map(e);if(Nx(i))return new Map(Array.from(i.entries()).map(function(m){return[m[0],e(m[1])]}));if(Bx(i))return new Set(Array.from(i).map(e));var c=Object.create(Object.getPrototypeOf(i));for(var f in i)c[f]=e(i[f]);return uu(i,Ng)&&(c[Ng]=i[Ng]),c}function t(i){return _a(i)?e(i):i}var n="add";yz("Patches",{$:function(i,c){return c.forEach(function(f){for(var m=f.path,s=f.op,v=i,E=0;E<m.length-1;E++){var I=vu(v),M=m[E];typeof M!="string"&&typeof M!="number"&&(M=""+M),I!==0&&I!==1||M!=="__proto__"&&M!=="constructor"||Zi(24),typeof v=="function"&&M==="prototype"&&Zi(24),typeof(v=kv(v,M))!="object"&&Zi(15,m.join("/"))}var P=vu(v),D=e(f.value),k=m[m.length-1];switch(s){case"replace":switch(P){case 2:return v.set(k,D);case 3:Zi(16);default:return v[k]=D}case n:switch(P){case 1:return k==="-"?v.push(D):v.splice(k,0,D);case 2:return v.set(k,D);case 3:return v.add(D);default:return v[k]=D}case"remove":switch(P){case 1:return v.splice(k,1);case 2:return v.delete(k);case 3:return v.delete(f.value);default:return delete v[k]}default:Zi(17,s)}}),i},N:function(i,c,f,m){switch(i.i){case 0:case 4:case 2:return function(s,v,E,I){var M=s.t,P=s.o;_u(s.R,function(D,k){var V=kv(M,D),H=kv(P,D),G=k?uu(M,D)?"replace":n:"remove";if(V!==H||G!=="replace"){var z=v.concat(D);E.push(G==="remove"?{op:G,path:z}:{op:G,path:z,value:H}),I.push(G===n?{op:"remove",path:z}:G==="remove"?{op:n,path:z,value:t(V)}:{op:"replace",path:z,value:t(V)})}})}(i,c,f,m);case 5:case 1:return function(s,v,E,I){var M=s.t,P=s.R,D=s.o;if(D.length<M.length){var k=[D,M];M=k[0],D=k[1];var V=[I,E];E=V[0],I=V[1]}for(var H=0;H<M.length;H++)if(P[H]&&D[H]!==M[H]){var G=v.concat([H]);E.push({op:"replace",path:G,value:t(D[H])}),I.push({op:"replace",path:G,value:t(M[H])})}for(var z=M.length;z<D.length;z++){var N=v.concat([z]);E.push({op:n,path:N,value:t(D[z])})}M.length<D.length&&I.push({op:"replace",path:v.concat(["length"]),value:M.length})}(i,c,f,m);case 3:return function(s,v,E,I){var M=s.t,P=s.o,D=0;M.forEach(function(k){if(!P.has(k)){var V=v.concat([D]);E.push({op:"remove",path:V,value:k}),I.unshift({op:n,path:V,value:k})}D++}),D=0,P.forEach(function(k){if(!M.has(k)){var V=v.concat([D]);E.push({op:n,path:V,value:k}),I.unshift({op:"remove",path:V,value:k})}D++})}(i,c,f,m)}},M:function(i,c,f,m){f.push({op:"replace",path:[],value:c===DI?void 0:c}),m.push({op:"replace",path:[],value:i})}})}var BD,my,RI=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",nW=typeof Map<"u",rW=typeof Set<"u",FD=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",DI=RI?Symbol.for("immer-nothing"):((BD={})["immer-nothing"]=!0,BD),Ng=RI?Symbol.for("immer-draftable"):"__$immer_draftable",Dr=RI?Symbol.for("immer-state"):"__$immer_state",iW=""+Object.prototype.constructor,Zf=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,_z=Object.getOwnPropertyDescriptors||function(e){var t={};return Zf(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},O2={},gy={get:function(e,t){if(t===Dr)return e;var n=Oh(e);if(!uu(n,t))return function(c,f,m){var s,v=zD(f,m);return v?"value"in v?v.value:(s=v.get)===null||s===void 0?void 0:s.call(c.k):void 0}(e,n,t);var i=n[t];return e.I||!va(i)?i:i===NE(e.t,t)?(BE(e),e.o[t]=D2(e.A.h,i,e)):i},has:function(e,t){return t in Oh(e)},ownKeys:function(e){return Reflect.ownKeys(Oh(e))},set:function(e,t,n){var i=zD(Oh(e),t);if(i!=null&&i.set)return i.set.call(e.k,n),!0;if(!e.P){var c=NE(Oh(e),t),f=c==null?void 0:c[Dr];if(f&&f.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(gz(n,c)&&(n!==void 0||uu(e.t,t)))return!0;BE(e),qc(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return NE(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,BE(e),qc(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Oh(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty:function(){Zi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Zi(12)}},_g={};_u(gy,function(e,t){_g[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),_g.deleteProperty=function(e,t){return _g.set.call(this,e,t,void 0)},_g.set=function(e,t,n){return gy.set.call(this,e[0],t,n,e[0])};var oW=function(){function e(n){var i=this;this.O=FD,this.D=!0,this.produce=function(c,f,m){if(typeof c=="function"&&typeof f!="function"){var s=f;f=c;var v=i;return function(V){var H=this;V===void 0&&(V=s);for(var G=arguments.length,z=Array(G>1?G-1:0),N=1;N<G;N++)z[N-1]=arguments[N];return v.produce(V,function(W){var $;return($=f).call.apply($,[H,W].concat(z))})}}var E;if(typeof f!="function"&&Zi(6),m!==void 0&&typeof m!="function"&&Zi(7),va(c)){var I=kD(i),M=D2(i,c,void 0),P=!0;try{E=f(M),P=!1}finally{P?k1(I):R2(I)}return typeof Promise<"u"&&E instanceof Promise?E.then(function(V){return LE(I,m),zE(V,I)},function(V){throw k1(I),V}):(LE(I,m),zE(E,I))}if(!c||typeof c!="object"){if((E=f(c))===void 0&&(E=c),E===DI&&(E=void 0),i.D&&CI(E,!0),m){var D=[],k=[];cl("Patches").M(c,E,D,k),m(D,k)}return E}Zi(21,c)},this.produceWithPatches=function(c,f){if(typeof c=="function")return function(E){for(var I=arguments.length,M=Array(I>1?I-1:0),P=1;P<I;P++)M[P-1]=arguments[P];return i.produceWithPatches(E,function(D){return c.apply(void 0,[D].concat(M))})};var m,s,v=i.produce(c,f,function(E,I){m=E,s=I});return typeof Promise<"u"&&v instanceof Promise?v.then(function(E){return[E,m,s]}):[v,m,s]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){va(n)||Zi(8),_a(n)&&(n=J$(n));var i=kD(this),c=D2(this,n,void 0);return c[Dr].C=!0,R2(i),c},t.finishDraft=function(n,i){var c=n&&n[Dr],f=c.A;return LE(f,i),zE(void 0,f)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!FD&&Zi(20),this.O=n},t.applyPatches=function(n,i){var c;for(c=i.length-1;c>=0;c--){var f=i[c];if(f.path.length===0&&f.op==="replace"){n=f.value;break}}c>-1&&(i=i.slice(c+1));var m=cl("Patches").$;return _a(n)?m(n,i):this.produce(n,function(s){return m(s,i)})},e}(),fs=new oW,Fy=fs.produce,vz=fs.produceWithPatches.bind(fs);fs.setAutoFreeze.bind(fs);fs.setUseProxies.bind(fs);var UD=fs.applyPatches.bind(fs);fs.createDraft.bind(fs);fs.finishDraft.bind(fs);function yy(e){return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yy(e)}function sW(e,t){if(yy(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(yy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aW(e){var t=sW(e,"string");return yy(t)==="symbol"?t:String(t)}function lW(e,t,n){return t=aW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),n.push.apply(n,i)}return n}function jD(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VD(Object(n),!0).forEach(function(i){lW(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VD(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function uo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var GD=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),FE=function(){return Math.random().toString(36).substring(7).split("").join(".")},N1={INIT:"@@redux/INIT"+FE(),REPLACE:"@@redux/REPLACE"+FE(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+FE()}};function cW(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xz(e,t,n){var i;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(uo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(uo(1));return n(xz)(e,t)}if(typeof e!="function")throw new Error(uo(2));var c=e,f=t,m=[],s=m,v=!1;function E(){s===m&&(s=m.slice())}function I(){if(v)throw new Error(uo(3));return f}function M(V){if(typeof V!="function")throw new Error(uo(4));if(v)throw new Error(uo(5));var H=!0;return E(),s.push(V),function(){if(H){if(v)throw new Error(uo(6));H=!1,E();var z=s.indexOf(V);s.splice(z,1),m=null}}}function P(V){if(!cW(V))throw new Error(uo(7));if(typeof V.type>"u")throw new Error(uo(8));if(v)throw new Error(uo(9));try{v=!0,f=c(f,V)}finally{v=!1}for(var H=m=s,G=0;G<H.length;G++){var z=H[G];z()}return V}function D(V){if(typeof V!="function")throw new Error(uo(10));c=V,P({type:N1.REPLACE})}function k(){var V,H=M;return V={subscribe:function(z){if(typeof z!="object"||z===null)throw new Error(uo(11));function N(){z.next&&z.next(I())}N();var W=H(N);return{unsubscribe:W}}},V[GD]=function(){return this},V}return P({type:N1.INIT}),i={dispatch:P,subscribe:M,getState:I,replaceReducer:D},i[GD]=k,i}function uW(e){Object.keys(e).forEach(function(t){var n=e[t],i=n(void 0,{type:N1.INIT});if(typeof i>"u")throw new Error(uo(12));if(typeof n(void 0,{type:N1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(uo(13))})}function wz(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var c=t[i];typeof e[c]=="function"&&(n[c]=e[c])}var f=Object.keys(n),m;try{uW(n)}catch(s){m=s}return function(v,E){if(v===void 0&&(v={}),m)throw m;for(var I=!1,M={},P=0;P<f.length;P++){var D=f[P],k=n[D],V=v[D],H=k(V,E);if(typeof H>"u")throw E&&E.type,new Error(uo(14));M[D]=H,I=I||H!==V}return I=I||f.length!==Object.keys(v).length,I?M:v}}function B1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(i){return i}:t.length===1?t[0]:t.reduce(function(i,c){return function(){return i(c.apply(void 0,arguments))}})}function hW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return function(){var c=i.apply(void 0,arguments),f=function(){throw new Error(uo(15))},m={getState:c.getState,dispatch:function(){return f.apply(void 0,arguments)}},s=t.map(function(v){return v(m)});return f=B1.apply(void 0,s)(c.dispatch),jD(jD({},c),{},{dispatch:f})}}}var F1="NOT_FOUND";function dW(e){var t;return{get:function(i){return t&&e(t.key,i)?t.value:F1},put:function(i,c){t={key:i,value:c}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function fW(e,t){var n=[];function i(s){var v=n.findIndex(function(I){return t(s,I.key)});if(v>-1){var E=n[v];return v>0&&(n.splice(v,1),n.unshift(E)),E.value}return F1}function c(s,v){i(s)===F1&&(n.unshift({key:s,value:v}),n.length>e&&n.pop())}function f(){return n}function m(){n=[]}return{get:i,put:c,getEntries:f,clear:m}}var pW=function(t,n){return t===n};function mW(e){return function(n,i){if(n===null||i===null||n.length!==i.length)return!1;for(var c=n.length,f=0;f<c;f++)if(!e(n[f],i[f]))return!1;return!0}}function k2(e,t){var n=typeof t=="object"?t:{equalityCheck:t},i=n.equalityCheck,c=i===void 0?pW:i,f=n.maxSize,m=f===void 0?1:f,s=n.resultEqualityCheck,v=mW(c),E=m===1?dW(v):fW(m,v);function I(){var M=E.get(arguments);if(M===F1){if(M=e.apply(null,arguments),s){var P=E.getEntries(),D=P.find(function(k){return s(k.value,M)});D&&(M=D.value)}E.put(arguments,M)}return M}return I.clearCache=function(){return E.clear()},I}function gW(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(i){return typeof i=="function"})){var n=t.map(function(i){return typeof i=="function"?"function "+(i.name||"unnamed")+"()":typeof i}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function yW(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var c=function(){for(var m=arguments.length,s=new Array(m),v=0;v<m;v++)s[v]=arguments[v];var E=0,I,M={memoizeOptions:void 0},P=s.pop();if(typeof P=="object"&&(M=P,P=s.pop()),typeof P!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof P+"]");var D=M,k=D.memoizeOptions,V=k===void 0?n:k,H=Array.isArray(V)?V:[V],G=gW(s),z=e.apply(void 0,[function(){return E++,P.apply(null,arguments)}].concat(H)),N=e(function(){for(var $=[],X=G.length,te=0;te<X;te++)$.push(G[te].apply(null,arguments));return I=z.apply(null,$),I});return Object.assign(N,{resultFunc:P,memoizedResultFunc:z,dependencies:G,lastResult:function(){return I},recomputations:function(){return E},resetRecomputations:function(){return E=0}}),N};return c}var Bg=yW(k2);function bz(e){var t=function(i){var c=i.dispatch,f=i.getState;return function(m){return function(s){return typeof s=="function"?s(c,f,e):m(s)}}};return t}var Ez=bz();Ez.withExtraArgument=bz;const $D=Ez;var Tz=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(i[f]=c[f])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),_W=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},i,c,f,m;return m={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function s(E){return function(I){return v([E,I])}}function v(E){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,c=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(I){E=[6,I],c=0}finally{i=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},cp=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,i=t.length,c=e.length;n<i;n++,c++)e[c]=t[n];return e},vW=Object.defineProperty,xW=Object.defineProperties,wW=Object.getOwnPropertyDescriptors,WD=Object.getOwnPropertySymbols,bW=Object.prototype.hasOwnProperty,EW=Object.prototype.propertyIsEnumerable,qD=function(e,t,n){return t in e?vW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},hu=function(e,t){for(var n in t||(t={}))bW.call(t,n)&&qD(e,n,t[n]);if(WD)for(var i=0,c=WD(t);i<c.length;i++){var n=c[i];EW.call(t,n)&&qD(e,n,t[n])}return e},UE=function(e,t){return xW(e,wW(t))},TW=function(e,t,n){return new Promise(function(i,c){var f=function(v){try{s(n.next(v))}catch(E){c(E)}},m=function(v){try{s(n.throw(v))}catch(E){c(E)}},s=function(v){return v.done?i(v.value):Promise.resolve(v.value).then(f,m)};s((n=n.apply(e,t)).next())})},SW=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?B1:B1.apply(null,arguments)};function xu(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var IW=function(e){Tz(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var c=e.apply(this,n)||this;return Object.setPrototypeOf(c,t.prototype),c}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,cp([void 0],n[0].concat(this)))):new(t.bind.apply(t,cp([void 0],n.concat(this))))},t}(Array),MW=function(e){Tz(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var c=e.apply(this,n)||this;return Object.setPrototypeOf(c,t.prototype),c}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,cp([void 0],n[0].concat(this)))):new(t.bind.apply(t,cp([void 0],n.concat(this))))},t}(Array);function L2(e){return va(e)?Fy(e,function(){}):e}function AW(e){return typeof e=="boolean"}function CW(){return function(t){return PW(t)}}function PW(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var i=new IW;return n&&(AW(n)?i.push($D):i.push($D.withExtraArgument(n.extraArgument))),i}var RW=!0;function DW(e){var t=CW(),n=e||{},i=n.reducer,c=i===void 0?void 0:i,f=n.middleware,m=f===void 0?t():f,s=n.devTools,v=s===void 0?!0:s,E=n.preloadedState,I=E===void 0?void 0:E,M=n.enhancers,P=M===void 0?void 0:M,D;if(typeof c=="function")D=c;else if(xu(c))D=wz(c);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var k=m;typeof k=="function"&&(k=k(t));var V=hW.apply(void 0,k),H=B1;v&&(H=SW(hu({trace:!RW},typeof v=="object"&&v)));var G=new MW(V),z=G;Array.isArray(P)?z=cp([V],P):typeof P=="function"&&(z=P(G));var N=H.apply(void 0,z);return xz(D,I,N)}function Xo(e,t){function n(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];if(t){var f=t.apply(void 0,i);if(!f)throw new Error("prepareAction did not return an object");return hu(hu({type:e,payload:f.payload},"meta"in f&&{meta:f.meta}),"error"in f&&{error:f.error})}return{type:e,payload:i[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(i){return i.type===e},n}function Sz(e){var t={},n=[],i,c={addCase:function(f,m){var s=typeof f=="string"?f:f.type;if(s in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[s]=m,c},addMatcher:function(f,m){return n.push({matcher:f,reducer:m}),c},addDefaultCase:function(f){return i=f,c}};return e(c),[t,n,i]}function OW(e){return typeof e=="function"}function kW(e,t,n,i){n===void 0&&(n=[]);var c=typeof t=="function"?Sz(t):[t,n,i],f=c[0],m=c[1],s=c[2],v;if(OW(e))v=function(){return L2(e())};else{var E=L2(e);v=function(){return E}}function I(M,P){M===void 0&&(M=v());var D=cp([f[P.type]],m.filter(function(k){var V=k.matcher;return V(P)}).map(function(k){var V=k.reducer;return V}));return D.filter(function(k){return!!k}).length===0&&(D=[s]),D.reduce(function(k,V){if(V)if(_a(k)){var H=k,G=V(H,P);return G===void 0?k:G}else{if(va(k))return Fy(k,function(z){return V(z,P)});var G=V(k,P);if(G===void 0){if(k===null)return k;throw Error("A case reducer on a non-draftable value must not return undefined")}return G}return k},M)}return I.getInitialState=v,I}function LW(e,t){return e+"/"+t}function kh(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:L2(e.initialState),i=e.reducers||{},c=Object.keys(i),f={},m={},s={};c.forEach(function(I){var M=i[I],P=LW(t,I),D,k;"reducer"in M?(D=M.reducer,k=M.prepare):D=M,f[I]=D,m[P]=D,s[I]=k?Xo(P,k):Xo(P)});function v(){var I=typeof e.extraReducers=="function"?Sz(e.extraReducers):[e.extraReducers],M=I[0],P=M===void 0?{}:M,D=I[1],k=D===void 0?[]:D,V=I[2],H=V===void 0?void 0:V,G=hu(hu({},P),m);return kW(n,function(z){for(var N in G)z.addCase(N,G[N]);for(var W=0,$=k;W<$.length;W++){var X=$[W];z.addMatcher(X.matcher,X.reducer)}H&&z.addDefaultCase(H)})}var E;return{name:t,reducer:function(I,M){return E||(E=v()),E(I,M)},actions:s,caseReducers:f,getInitialState:function(){return E||(E=v()),E.getInitialState()}}}var zW="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Iz=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=zW[Math.random()*64|0];return t},NW=["name","message","stack","code"],VE=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),HD=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),BW=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,i=NW;n<i.length;n++){var c=i[n];typeof e[c]=="string"&&(t[c]=e[c])}return t}return{message:String(e)}},ZD=function(){function e(t,n,i){var c=Xo(t+"/fulfilled",function(E,I,M,P){return{payload:E,meta:UE(hu({},P||{}),{arg:M,requestId:I,requestStatus:"fulfilled"})}}),f=Xo(t+"/pending",function(E,I,M){return{payload:void 0,meta:UE(hu({},M||{}),{arg:I,requestId:E,requestStatus:"pending"})}}),m=Xo(t+"/rejected",function(E,I,M,P,D){return{payload:P,error:(i&&i.serializeError||BW)(E||"Rejected"),meta:UE(hu({},D||{}),{arg:M,requestId:I,rejectedWithValue:!!P,requestStatus:"rejected",aborted:(E==null?void 0:E.name)==="AbortError",condition:(E==null?void 0:E.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function E(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return E.prototype.abort=function(){},E}();function v(E){return function(I,M,P){var D=i!=null&&i.idGenerator?i.idGenerator(E):Iz(),k=new s,V;function H(z){V=z,k.abort()}var G=function(){return TW(this,null,function(){var z,N,W,$,X,te,J;return _W(this,function(re){switch(re.label){case 0:return re.trys.push([0,4,,5]),$=(z=i==null?void 0:i.condition)==null?void 0:z.call(i,E,{getState:M,extra:P}),UW($)?[4,$]:[3,2];case 1:$=re.sent(),re.label=2;case 2:if($===!1||k.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return X=new Promise(function(ce,Ee){return k.signal.addEventListener("abort",function(){return Ee({name:"AbortError",message:V||"Aborted"})})}),I(f(D,E,(N=i==null?void 0:i.getPendingMeta)==null?void 0:N.call(i,{requestId:D,arg:E},{getState:M,extra:P}))),[4,Promise.race([X,Promise.resolve(n(E,{dispatch:I,getState:M,extra:P,requestId:D,signal:k.signal,abort:H,rejectWithValue:function(ce,Ee){return new VE(ce,Ee)},fulfillWithValue:function(ce,Ee){return new HD(ce,Ee)}})).then(function(ce){if(ce instanceof VE)throw ce;return ce instanceof HD?c(ce.payload,D,E,ce.meta):c(ce,D,E)})])];case 3:return W=re.sent(),[3,5];case 4:return te=re.sent(),W=te instanceof VE?m(null,D,E,te.payload,te.meta):m(te,D,E),[3,5];case 5:return J=i&&!i.dispatchConditionRejection&&m.match(W)&&W.meta.condition,J||I(W),[2,W]}})})}();return Object.assign(G,{abort:H,requestId:D,arg:E,unwrap:function(){return G.then(FW)}})}}return Object.assign(v,{pending:f,rejected:m,fulfilled:c,typePrefix:t})}return e.withTypes=function(){return e},e}();function FW(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function UW(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var VW=function(e){return e&&typeof e.match=="function"},Mz=function(e,t){return VW(e)?e.match(t):e(t)};function xp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(i){return Mz(i,n)})}}function Fg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.every(function(i){return Mz(i,n)})}}function Fx(e,t){if(!e||!e.meta)return!1;var n=typeof e.meta.requestId=="string",i=t.indexOf(e.meta.requestStatus)>-1;return n&&i}function Uy(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function OI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(n){return Fx(n,["pending"])}:Uy(e)?function(n){var i=e.map(function(f){return f.pending}),c=xp.apply(void 0,i);return c(n)}:OI()(e[0])}function _y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(n){return Fx(n,["rejected"])}:Uy(e)?function(n){var i=e.map(function(f){return f.rejected}),c=xp.apply(void 0,i);return c(n)}:_y()(e[0])}function Ux(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(i){return i&&i.meta&&i.meta.rejectedWithValue};return e.length===0?function(i){var c=Fg(_y.apply(void 0,e),n);return c(i)}:Uy(e)?function(i){var c=Fg(_y.apply(void 0,e),n);return c(i)}:Ux()(e[0])}function ad(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(n){return Fx(n,["fulfilled"])}:Uy(e)?function(n){var i=e.map(function(f){return f.fulfilled}),c=xp.apply(void 0,i);return c(n)}:ad()(e[0])}function z2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?function(n){return Fx(n,["pending","fulfilled","rejected"])}:Uy(e)?function(n){for(var i=[],c=0,f=e;c<f.length;c++){var m=f[c];i.push(m.pending,m.rejected,m.fulfilled)}var s=xp.apply(void 0,i);return s(n)}:z2()(e[0])}var kI="listenerMiddleware";Xo(kI+"/add");Xo(kI+"/removeAll");Xo(kI+"/remove");var vg="RTK_autoBatch",jE=function(){return function(e){var t;return{payload:e,meta:(t={},t[vg]=!0,t)}}},YD;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);eW();var U1=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},i,c,f,m;return m={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function s(E){return function(I){return v([E,I])}}function v(E){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,c=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=t.call(e,n)}catch(I){E=[6,I],c=0}finally{i=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},V1=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,i=t.length,c=e.length;n<i;n++,c++)e[c]=t[n];return e},jW=Object.defineProperty,GW=Object.defineProperties,$W=Object.getOwnPropertyDescriptors,j1=Object.getOwnPropertySymbols,Az=Object.prototype.hasOwnProperty,Cz=Object.prototype.propertyIsEnumerable,XD=function(e,t,n){return t in e?jW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},oi=function(e,t){for(var n in t||(t={}))Az.call(t,n)&&XD(e,n,t[n]);if(j1)for(var i=0,c=j1(t);i<c.length;i++){var n=c[i];Cz.call(t,n)&&XD(e,n,t[n])}return e},tl=function(e,t){return GW(e,$W(t))},QD=function(e,t){var n={};for(var i in e)Az.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&j1)for(var c=0,f=j1(e);c<f.length;c++){var i=f[c];t.indexOf(i)<0&&Cz.call(e,i)&&(n[i]=e[i])}return n},G1=function(e,t,n){return new Promise(function(i,c){var f=function(v){try{s(n.next(v))}catch(E){c(E)}},m=function(v){try{s(n.throw(v))}catch(E){c(E)}},s=function(v){return v.done?i(v.value):Promise.resolve(v.value).then(f,m)};s((n=n.apply(e,t)).next())})},Ur;(function(e){e.uninitialized="uninitialized",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected"})(Ur||(Ur={}));function WW(e){return{status:e,isUninitialized:e===Ur.uninitialized,isLoading:e===Ur.pending,isSuccess:e===Ur.fulfilled,isError:e===Ur.rejected}}function qW(e){return new RegExp("(^|:)//").test(e)}var HW=function(e){return e.replace(/\/$/,"")},ZW=function(e){return e.replace(/^\//,"")};function YW(e,t){if(!e)return t;if(!t)return e;if(qW(t))return t;var n=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=HW(e),t=ZW(t),""+e+n+t}var KD=function(e){return[].concat.apply([],e)};function XW(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function QW(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var JD=xu;function Pz(e,t){if(e===t||!(JD(e)&&JD(t)||Array.isArray(e)&&Array.isArray(t)))return t;for(var n=Object.keys(t),i=Object.keys(e),c=n.length===i.length,f=Array.isArray(t)?[]:{},m=0,s=n;m<s.length;m++){var v=s[m];f[v]=Pz(e[v],t[v]),c&&(c=e[v]===f[v])}return c?e:f}var eO=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fetch.apply(void 0,e)},KW=function(e){return e.status>=200&&e.status<=299},JW=function(e){return/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"")};function tO(e){if(!xu(e))return e;for(var t=oi({},e),n=0,i=Object.entries(t);n<i.length;n++){var c=i[n],f=c[0],m=c[1];m===void 0&&delete t[f]}return t}function eq(e){var t=this;e===void 0&&(e={});var n=e,i=n.baseUrl,c=n.prepareHeaders,f=c===void 0?function(N){return N}:c,m=n.fetchFn,s=m===void 0?eO:m,v=n.paramsSerializer,E=n.isJsonContentType,I=E===void 0?JW:E,M=n.jsonContentType,P=M===void 0?"application/json":M,D=n.jsonReplacer,k=n.timeout,V=n.responseHandler,H=n.validateStatus,G=QD(n,["baseUrl","prepareHeaders","fetchFn","paramsSerializer","isJsonContentType","jsonContentType","jsonReplacer","timeout","responseHandler","validateStatus"]);return typeof fetch>"u"&&s===eO&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),function(N,W){return G1(t,null,function(){var $,X,te,J,re,ce,Ee,Me,Le,Ae,Oe,ke,je,De,Be,He,tt,Mt,Dt,bt,Nt,ft,Ot,an,pn,Vt,Mn,Jt,_r,yn,ui,Ui,_o,Vi,Po,vo;return U1(this,function(ti){switch(ti.label){case 0:return $=W.signal,X=W.getState,te=W.extra,J=W.endpoint,re=W.forced,ce=W.type,Me=typeof N=="string"?{url:N}:N,Le=Me.url,Ae=Me.headers,Oe=Ae===void 0?new Headers(G.headers):Ae,ke=Me.params,je=ke===void 0?void 0:ke,De=Me.responseHandler,Be=De===void 0?V??"json":De,He=Me.validateStatus,tt=He===void 0?H??KW:He,Mt=Me.timeout,Dt=Mt===void 0?k:Mt,bt=QD(Me,["url","headers","params","responseHandler","validateStatus","timeout"]),Nt=oi(tl(oi({},G),{signal:$}),bt),Oe=new Headers(tO(Oe)),ft=Nt,[4,f(Oe,{getState:X,extra:te,endpoint:J,forced:re,type:ce})];case 1:ft.headers=ti.sent()||Oe,Ot=function(vr){return typeof vr=="object"&&(xu(vr)||Array.isArray(vr)||typeof vr.toJSON=="function")},!Nt.headers.has("content-type")&&Ot(Nt.body)&&Nt.headers.set("content-type",P),Ot(Nt.body)&&I(Nt.headers)&&(Nt.body=JSON.stringify(Nt.body,D)),je&&(an=~Le.indexOf("?")?"&":"?",pn=v?v(je):new URLSearchParams(tO(je)),Le+=an+pn),Le=YW(i,Le),Vt=new Request(Le,Nt),Mn=Vt.clone(),Ee={request:Mn},_r=!1,yn=Dt&&setTimeout(function(){_r=!0,W.abort()},Dt),ti.label=2;case 2:return ti.trys.push([2,4,5,6]),[4,s(Vt)];case 3:return Jt=ti.sent(),[3,6];case 4:return ui=ti.sent(),[2,{error:{status:_r?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(ui)},meta:Ee}];case 5:return yn&&clearTimeout(yn),[7];case 6:Ui=Jt.clone(),Ee.response=Ui,Vi="",ti.label=7;case 7:return ti.trys.push([7,9,,10]),[4,Promise.all([z(Jt,Be).then(function(vr){return _o=vr},function(vr){return Po=vr}),Ui.text().then(function(vr){return Vi=vr},function(){})])];case 8:if(ti.sent(),Po)throw Po;return[3,10];case 9:return vo=ti.sent(),[2,{error:{status:"PARSING_ERROR",originalStatus:Jt.status,data:Vi,error:String(vo)},meta:Ee}];case 10:return[2,tt(Jt,_o)?{data:_o,meta:Ee}:{error:{status:Jt.status,data:_o},meta:Ee}]}})})};function z(N,W){return G1(this,null,function(){var $;return U1(this,function(X){switch(X.label){case 0:return typeof W=="function"?[2,W(N)]:(W==="content-type"&&(W=I(N.headers)?"json":"text"),W!=="json"?[3,2]:[4,N.text()]);case 1:return $=X.sent(),[2,$.length?JSON.parse($):null];case 2:return[2,N.text()]}})})}}var nO=function(){function e(t,n){n===void 0&&(n=void 0),this.value=t,this.meta=n}return e}(),LI=Xo("__rtkq/focused"),Rz=Xo("__rtkq/unfocused"),zI=Xo("__rtkq/online"),Dz=Xo("__rtkq/offline"),hl;(function(e){e.query="query",e.mutation="mutation"})(hl||(hl={}));function Oz(e){return e.type===hl.query}function tq(e){return e.type===hl.mutation}function kz(e,t,n,i,c,f){return nq(e)?e(t,n,i,c).map(N2).map(f):Array.isArray(e)?e.map(N2).map(f):[]}function nq(e){return typeof e=="function"}function N2(e){return typeof e=="string"?{type:e}:e}function GE(e){return e!=null}var vy=Symbol("forceQueryFn"),B2=function(e){return typeof e[vy]=="function"};function rq(e){var t=e.serializeQueryArgs,n=e.queryThunk,i=e.mutationThunk,c=e.api,f=e.context,m=new Map,s=new Map,v=c.internalActions,E=v.unsubscribeQueryResult,I=v.removeMutationResult,M=v.updateSubscriptionOptions;return{buildInitiateQuery:z,buildInitiateMutation:N,getRunningQueryThunk:k,getRunningMutationThunk:V,getRunningQueriesThunk:H,getRunningMutationsThunk:G,getRunningOperationPromises:D,removalWarning:P};function P(){throw new Error(`This method had to be removed due to a conceptual bug in RTK.
       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.
       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.`)}function D(){typeof process<"u";var W=function($){return Array.from($.values()).flatMap(function(X){return X?Object.values(X):[]})};return V1(V1([],W(m)),W(s)).filter(GE)}function k(W,$){return function(X){var te,J=f.endpointDefinitions[W],re=t({queryArgs:$,endpointDefinition:J,endpointName:W});return(te=m.get(X))==null?void 0:te[re]}}function V(W,$){return function(X){var te;return(te=s.get(X))==null?void 0:te[$]}}function H(){return function(W){return Object.values(m.get(W)||{}).filter(GE)}}function G(){return function(W){return Object.values(s.get(W)||{}).filter(GE)}}function z(W,$){var X=function(te,J){var re=J===void 0?{}:J,ce=re.subscribe,Ee=ce===void 0?!0:ce,Me=re.forceRefetch,Le=re.subscriptionOptions,Ae=vy,Oe=re[Ae];return function(ke,je){var De,Be,He=t({queryArgs:te,endpointDefinition:$,endpointName:W}),tt=n((De={type:"query",subscribe:Ee,forceRefetch:Me,subscriptionOptions:Le,endpointName:W,originalArgs:te,queryCacheKey:He},De[vy]=Oe,De)),Mt=c.endpoints[W].select(te),Dt=ke(tt),bt=Mt(je()),Nt=Dt.requestId,ft=Dt.abort,Ot=bt.requestId!==Nt,an=(Be=m.get(ke))==null?void 0:Be[He],pn=function(){return Mt(je())},Vt=Object.assign(Oe?Dt.then(pn):Ot&&!an?Promise.resolve(bt):Promise.all([an,Dt]).then(pn),{arg:te,requestId:Nt,subscriptionOptions:Le,queryCacheKey:He,abort:ft,unwrap:function(){return G1(this,null,function(){var Jt;return U1(this,function(_r){switch(_r.label){case 0:return[4,Vt];case 1:if(Jt=_r.sent(),Jt.isError)throw Jt.error;return[2,Jt.data]}})})},refetch:function(){return ke(X(te,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){Ee&&ke(E({queryCacheKey:He,requestId:Nt}))},updateSubscriptionOptions:function(Jt){Vt.subscriptionOptions=Jt,ke(M({endpointName:W,requestId:Nt,queryCacheKey:He,options:Jt}))}});if(!an&&!Ot&&!Oe){var Mn=m.get(ke)||{};Mn[He]=Vt,m.set(ke,Mn),Vt.then(function(){delete Mn[He],Object.keys(Mn).length||m.delete(ke)})}return Vt}};return X}function N(W){return function($,X){var te=X===void 0?{}:X,J=te.track,re=J===void 0?!0:J,ce=te.fixedCacheKey;return function(Ee,Me){var Le=i({type:"mutation",endpointName:W,originalArgs:$,track:re,fixedCacheKey:ce}),Ae=Ee(Le),Oe=Ae.requestId,ke=Ae.abort,je=Ae.unwrap,De=Ae.unwrap().then(function(Mt){return{data:Mt}}).catch(function(Mt){return{error:Mt}}),Be=function(){Ee(I({requestId:Oe,fixedCacheKey:ce}))},He=Object.assign(De,{arg:Ae.arg,requestId:Oe,abort:ke,unwrap:je,unsubscribe:Be,reset:Be}),tt=s.get(Ee)||{};return s.set(Ee,tt),tt[Oe]=He,He.then(function(){delete tt[Oe],Object.keys(tt).length||s.delete(Ee)}),ce&&(tt[ce]=He,He.then(function(){tt[ce]===He&&(delete tt[ce],Object.keys(tt).length||s.delete(Ee))})),He}}}}function rO(e){return e}function iq(e){var t=this,n=e.reducerPath,i=e.baseQuery,c=e.context.endpointDefinitions,f=e.serializeQueryArgs,m=e.api,s=function(N,W,$){return function(X){var te=c[N];X(m.internalActions.queryResultPatched({queryCacheKey:f({queryArgs:W,endpointDefinition:te,endpointName:N}),patches:$}))}},v=function(N,W,$){return function(X,te){var J,re,ce=m.endpoints[N].select(W)(te()),Ee={patches:[],inversePatches:[],undo:function(){return X(m.util.patchQueryData(N,W,Ee.inversePatches))}};if(ce.status===Ur.uninitialized)return Ee;if("data"in ce)if(va(ce.data)){var Me=vz(ce.data,$),Le=Me[1],Ae=Me[2];(J=Ee.patches).push.apply(J,Le),(re=Ee.inversePatches).push.apply(re,Ae)}else{var Oe=$(ce.data);Ee.patches.push({op:"replace",path:[],value:Oe}),Ee.inversePatches.push({op:"replace",path:[],value:ce.data})}return X(m.util.patchQueryData(N,W,Ee.patches)),Ee}},E=function(N,W,$){return function(X){var te;return X(m.endpoints[N].initiate(W,(te={subscribe:!1,forceRefetch:!0},te[vy]=function(){return{data:$}},te)))}},I=function(N,W){return G1(t,[N,W],function($,X){var te,J,re,ce,Ee,Me,Le,Ae,Oe,ke,je,De,Be,He,tt,Mt,Dt,bt,Nt=X.signal,ft=X.abort,Ot=X.rejectWithValue,an=X.fulfillWithValue,pn=X.dispatch,Vt=X.getState,Mn=X.extra;return U1(this,function(Jt){switch(Jt.label){case 0:te=c[$.endpointName],Jt.label=1;case 1:return Jt.trys.push([1,8,,13]),J=rO,re=void 0,ce={signal:Nt,abort:ft,dispatch:pn,getState:Vt,extra:Mn,endpoint:$.endpointName,type:$.type,forced:$.type==="query"?M($,Vt()):void 0},Ee=$.type==="query"?$[vy]:void 0,Ee?(re=Ee(),[3,6]):[3,2];case 2:return te.query?[4,i(te.query($.originalArgs),ce,te.extraOptions)]:[3,4];case 3:return re=Jt.sent(),te.transformResponse&&(J=te.transformResponse),[3,6];case 4:return[4,te.queryFn($.originalArgs,ce,te.extraOptions,function(_r){return i(_r,ce,te.extraOptions)})];case 5:re=Jt.sent(),Jt.label=6;case 6:if(typeof process<"u",re.error)throw new nO(re.error,re.meta);return je=an,[4,J(re.data,re.meta,$.originalArgs)];case 7:return[2,je.apply(void 0,[Jt.sent(),(Dt={fulfilledTimeStamp:Date.now(),baseQueryMeta:re.meta},Dt[vg]=!0,Dt)])];case 8:if(De=Jt.sent(),Be=De,!(Be instanceof nO))return[3,12];He=rO,te.query&&te.transformErrorResponse&&(He=te.transformErrorResponse),Jt.label=9;case 9:return Jt.trys.push([9,11,,12]),tt=Ot,[4,He(Be.value,Be.meta,$.originalArgs)];case 10:return[2,tt.apply(void 0,[Jt.sent(),(bt={baseQueryMeta:Be.meta},bt[vg]=!0,bt)])];case 11:return Mt=Jt.sent(),Be=Mt,[3,12];case 12:throw typeof process<"u",console.error(Be),Be;case 13:return[2]}})})};function M(N,W){var $,X,te,J,re=(X=($=W[n])==null?void 0:$.queries)==null?void 0:X[N.queryCacheKey],ce=(te=W[n])==null?void 0:te.config.refetchOnMountOrArgChange,Ee=re==null?void 0:re.fulfilledTimeStamp,Me=(J=N.forceRefetch)!=null?J:N.subscribe&&ce;return Me?Me===!0||(Number(new Date)-Number(Ee))/1e3>=Me:!1}var P=ZD(n+"/executeQuery",I,{getPendingMeta:function(){var N;return N={startedTimeStamp:Date.now()},N[vg]=!0,N},condition:function(N,W){var $=W.getState,X,te,J,re=$(),ce=(te=(X=re[n])==null?void 0:X.queries)==null?void 0:te[N.queryCacheKey],Ee=ce==null?void 0:ce.fulfilledTimeStamp,Me=N.originalArgs,Le=ce==null?void 0:ce.originalArgs,Ae=c[N.endpointName];return B2(N)?!0:(ce==null?void 0:ce.status)==="pending"?!1:M(N,re)||Oz(Ae)&&((J=Ae==null?void 0:Ae.forceRefetch)!=null&&J.call(Ae,{currentArg:Me,previousArg:Le,endpointState:ce,state:re}))?!0:!Ee},dispatchConditionRejection:!0}),D=ZD(n+"/executeMutation",I,{getPendingMeta:function(){var N;return N={startedTimeStamp:Date.now()},N[vg]=!0,N}}),k=function(N){return"force"in N},V=function(N){return"ifOlderThan"in N},H=function(N,W,$){return function(X,te){var J=k($)&&$.force,re=V($)&&$.ifOlderThan,ce=function(Ae){return Ae===void 0&&(Ae=!0),m.endpoints[N].initiate(W,{forceRefetch:Ae})},Ee=m.endpoints[N].select(W)(te());if(J)X(ce());else if(re){var Me=Ee==null?void 0:Ee.fulfilledTimeStamp;if(!Me){X(ce());return}var Le=(Number(new Date)-Number(new Date(Me)))/1e3>=re;Le&&X(ce())}else X(ce(!1))}};function G(N){return function(W){var $,X;return((X=($=W==null?void 0:W.meta)==null?void 0:$.arg)==null?void 0:X.endpointName)===N}}function z(N,W){return{matchPending:Fg(OI(N),G(W)),matchFulfilled:Fg(ad(N),G(W)),matchRejected:Fg(_y(N),G(W))}}return{queryThunk:P,mutationThunk:D,prefetch:H,updateQueryData:v,upsertQueryData:E,patchQueryData:s,buildMatchThunkActions:z}}function Lz(e,t,n,i){return kz(n[e.meta.arg.endpointName][t],ad(e)?e.payload:void 0,Ux(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,i)}function Q0(e,t,n){var i=e[t];i&&n(i)}function xy(e){var t;return(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)!=null?t:e.requestId}function iO(e,t,n){var i=e[xy(t)];i&&n(i)}var og={};function oq(e){var t=e.reducerPath,n=e.queryThunk,i=e.mutationThunk,c=e.context,f=c.endpointDefinitions,m=c.apiUid,s=c.extractRehydrationInfo,v=c.hasRehydrationInfo,E=e.assertTagType,I=e.config,M=Xo(t+"/resetApiState"),P=kh({name:t+"/queries",initialState:og,reducers:{removeQueryResult:{reducer:function($,X){var te=X.payload.queryCacheKey;delete $[te]},prepare:jE()},queryResultPatched:function($,X){var te=X.payload,J=te.queryCacheKey,re=te.patches;Q0($,J,function(ce){ce.data=UD(ce.data,re.concat())})}},extraReducers:function($){$.addCase(n.pending,function(X,te){var J=te.meta,re=te.meta.arg,ce,Ee,Me=B2(re);(re.subscribe||Me)&&((Ee=X[ce=re.queryCacheKey])!=null||(X[ce]={status:Ur.uninitialized,endpointName:re.endpointName})),Q0(X,re.queryCacheKey,function(Le){Le.status=Ur.pending,Le.requestId=Me&&Le.requestId?Le.requestId:J.requestId,re.originalArgs!==void 0&&(Le.originalArgs=re.originalArgs),Le.startedTimeStamp=J.startedTimeStamp})}).addCase(n.fulfilled,function(X,te){var J=te.meta,re=te.payload;Q0(X,J.arg.queryCacheKey,function(ce){var Ee;if(!(ce.requestId!==J.requestId&&!B2(J.arg))){var Me=f[J.arg.endpointName].merge;if(ce.status=Ur.fulfilled,Me)if(ce.data!==void 0){var Le=J.fulfilledTimeStamp,Ae=J.arg,Oe=J.baseQueryMeta,ke=J.requestId,je=Fy(ce.data,function(De){return Me(De,re,{arg:Ae.originalArgs,baseQueryMeta:Oe,fulfilledTimeStamp:Le,requestId:ke})});ce.data=je}else ce.data=re;else ce.data=(Ee=f[J.arg.endpointName].structuralSharing)==null||Ee?Pz(_a(ce.data)?X$(ce.data):ce.data,re):re;delete ce.error,ce.fulfilledTimeStamp=J.fulfilledTimeStamp}})}).addCase(n.rejected,function(X,te){var J=te.meta,re=J.condition,ce=J.arg,Ee=J.requestId,Me=te.error,Le=te.payload;Q0(X,ce.queryCacheKey,function(Ae){if(!re){if(Ae.requestId!==Ee)return;Ae.status=Ur.rejected,Ae.error=Le??Me}})}).addMatcher(v,function(X,te){for(var J=s(te).queries,re=0,ce=Object.entries(J);re<ce.length;re++){var Ee=ce[re],Me=Ee[0],Le=Ee[1];((Le==null?void 0:Le.status)===Ur.fulfilled||(Le==null?void 0:Le.status)===Ur.rejected)&&(X[Me]=Le)}})}}),D=kh({name:t+"/mutations",initialState:og,reducers:{removeMutationResult:{reducer:function($,X){var te=X.payload,J=xy(te);J in $&&delete $[J]},prepare:jE()}},extraReducers:function($){$.addCase(i.pending,function(X,te){var J=te.meta,re=te.meta,ce=re.requestId,Ee=re.arg,Me=re.startedTimeStamp;Ee.track&&(X[xy(J)]={requestId:ce,status:Ur.pending,endpointName:Ee.endpointName,startedTimeStamp:Me})}).addCase(i.fulfilled,function(X,te){var J=te.payload,re=te.meta;re.arg.track&&iO(X,re,function(ce){ce.requestId===re.requestId&&(ce.status=Ur.fulfilled,ce.data=J,ce.fulfilledTimeStamp=re.fulfilledTimeStamp)})}).addCase(i.rejected,function(X,te){var J=te.payload,re=te.error,ce=te.meta;ce.arg.track&&iO(X,ce,function(Ee){Ee.requestId===ce.requestId&&(Ee.status=Ur.rejected,Ee.error=J??re)})}).addMatcher(v,function(X,te){for(var J=s(te).mutations,re=0,ce=Object.entries(J);re<ce.length;re++){var Ee=ce[re],Me=Ee[0],Le=Ee[1];((Le==null?void 0:Le.status)===Ur.fulfilled||(Le==null?void 0:Le.status)===Ur.rejected)&&Me!==(Le==null?void 0:Le.requestId)&&(X[Me]=Le)}})}}),k=kh({name:t+"/invalidation",initialState:og,reducers:{},extraReducers:function($){$.addCase(P.actions.removeQueryResult,function(X,te){for(var J=te.payload.queryCacheKey,re=0,ce=Object.values(X);re<ce.length;re++)for(var Ee=ce[re],Me=0,Le=Object.values(Ee);Me<Le.length;Me++){var Ae=Le[Me],Oe=Ae.indexOf(J);Oe!==-1&&Ae.splice(Oe,1)}}).addMatcher(v,function(X,te){for(var J,re,ce,Ee,Me=s(te).provided,Le=0,Ae=Object.entries(Me);Le<Ae.length;Le++)for(var Oe=Ae[Le],ke=Oe[0],je=Oe[1],De=0,Be=Object.entries(je);De<Be.length;De++)for(var He=Be[De],tt=He[0],Mt=He[1],Dt=(Ee=(re=(J=X[ke])!=null?J:X[ke]={})[ce=tt||"__internal_without_id"])!=null?Ee:re[ce]=[],bt=0,Nt=Mt;bt<Nt.length;bt++){var ft=Nt[bt],Ot=Dt.includes(ft);Ot||Dt.push(ft)}}).addMatcher(xp(ad(n),Ux(n)),function(X,te){for(var J,re,ce,Ee,Me=Lz(te,"providesTags",f,E),Le=te.meta.arg.queryCacheKey,Ae=0,Oe=Object.values(X);Ae<Oe.length;Ae++)for(var ke=Oe[Ae],je=0,De=Object.values(ke);je<De.length;je++){var Be=De[je],He=Be.indexOf(Le);He!==-1&&Be.splice(He,1)}for(var tt=0,Mt=Me;tt<Mt.length;tt++){var Dt=Mt[tt],bt=Dt.type,Nt=Dt.id,ft=(Ee=(re=(J=X[bt])!=null?J:X[bt]={})[ce=Nt||"__internal_without_id"])!=null?Ee:re[ce]=[],Ot=ft.includes(Le);Ot||ft.push(Le)}})}}),V=kh({name:t+"/subscriptions",initialState:og,reducers:{updateSubscriptionOptions:function($,X){},unsubscribeQueryResult:function($,X){},internal_probeSubscription:function($,X){}}}),H=kh({name:t+"/internalSubscriptions",initialState:og,reducers:{subscriptionsUpdated:{reducer:function($,X){return UD($,X.payload)},prepare:jE()}}}),G=kh({name:t+"/config",initialState:oi({online:XW(),focused:QW(),middlewareRegistered:!1},I),reducers:{middlewareRegistered:function($,X){var te=X.payload;$.middlewareRegistered=$.middlewareRegistered==="conflict"||m!==te?"conflict":!0}},extraReducers:function($){$.addCase(zI,function(X){X.online=!0}).addCase(Dz,function(X){X.online=!1}).addCase(LI,function(X){X.focused=!0}).addCase(Rz,function(X){X.focused=!1}).addMatcher(v,function(X){return oi({},X)})}}),z=wz({queries:P.reducer,mutations:D.reducer,provided:k.reducer,subscriptions:H.reducer,config:G.reducer}),N=function($,X){return z(M.match(X)?void 0:$,X)},W=tl(oi(oi(oi(oi(oi({},G.actions),P.actions),V.actions),H.actions),D.actions),{unsubscribeMutationResult:D.actions.removeMutationResult,resetApiState:M});return{reducer:N,actions:W}}var Fh=Symbol.for("RTKQ/skipToken"),zz={status:Ur.uninitialized},oO=Fy(zz,function(){}),sO=Fy(zz,function(){});function sq(e){var t=e.serializeQueryArgs,n=e.reducerPath,i=function(I){return oO},c=function(I){return sO};return{buildQuerySelector:s,buildMutationSelector:v,selectInvalidatedBy:E};function f(I){return oi(oi({},I),WW(I.status))}function m(I){var M=I[n];return M}function s(I,M){return function(P){var D=t({queryArgs:P,endpointDefinition:M,endpointName:I}),k=function(H){var G,z,N;return(N=(z=(G=m(H))==null?void 0:G.queries)==null?void 0:z[D])!=null?N:oO},V=P===Fh?i:k;return Bg(V,f)}}function v(){return function(I){var M,P;typeof I=="object"?P=(M=xy(I))!=null?M:Fh:P=I;var D=function(V){var H,G,z;return(z=(G=(H=m(V))==null?void 0:H.mutations)==null?void 0:G[P])!=null?z:sO},k=P===Fh?c:D;return Bg(k,f)}}function E(I,M){for(var P,D=I[n],k=new Set,V=0,H=M.map(N2);V<H.length;V++){var G=H[V],z=D.provided[G.type];if(z)for(var N=(P=G.id!==void 0?z[G.id]:KD(Object.values(z)))!=null?P:[],W=0,$=N;W<$.length;W++){var X=$[W];k.add(X)}}return KD(Array.from(k.values()).map(function(te){var J=D.queries[te];return J?[{queryCacheKey:te,endpointName:J.endpointName,originalArgs:J.originalArgs}]:[]}))}}var K0=WeakMap?new WeakMap:void 0,aO=function(e){var t=e.endpointName,n=e.queryArgs,i="",c=K0==null?void 0:K0.get(n);if(typeof c=="string")i=c;else{var f=JSON.stringify(n,function(m,s){return xu(s)?Object.keys(s).sort().reduce(function(v,E){return v[E]=s[E],v},{}):s});xu(n)&&(K0==null||K0.set(n,f)),i=f}return t+"("+i+")"};function aq(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(i){var c=k2(function(I){var M,P;return(P=i.extractRehydrationInfo)==null?void 0:P.call(i,I,{reducerPath:(M=i.reducerPath)!=null?M:"api"})}),f=tl(oi({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},i),{extractRehydrationInfo:c,serializeQueryArgs:function(I){var M=aO;if("serializeQueryArgs"in I.endpointDefinition){var P=I.endpointDefinition.serializeQueryArgs;M=function(D){var k=P(D);return typeof k=="string"?k:aO(tl(oi({},D),{queryArgs:k}))}}else i.serializeQueryArgs&&(M=i.serializeQueryArgs);return M(I)},tagTypes:V1([],i.tagTypes||[])}),m={endpointDefinitions:{},batch:function(I){I()},apiUid:Iz(),extractRehydrationInfo:c,hasRehydrationInfo:k2(function(I){return c(I)!=null})},s={injectEndpoints:E,enhanceEndpoints:function(I){var M=I.addTagTypes,P=I.endpoints;if(M)for(var D=0,k=M;D<k.length;D++){var V=k[D];f.tagTypes.includes(V)||f.tagTypes.push(V)}if(P)for(var H=0,G=Object.entries(P);H<G.length;H++){var z=G[H],N=z[0],W=z[1];typeof W=="function"?W(m.endpointDefinitions[N]):Object.assign(m.endpointDefinitions[N]||{},W)}return s}},v=e.map(function(I){return I.init(s,f,m)});function E(I){for(var M=I.endpoints({query:function(W){return tl(oi({},W),{type:hl.query})},mutation:function(W){return tl(oi({},W),{type:hl.mutation})}}),P=0,D=Object.entries(M);P<D.length;P++){var k=D[P],V=k[0],H=k[1];if(!I.overrideExisting&&V in m.endpointDefinitions){typeof process<"u";continue}m.endpointDefinitions[V]=H;for(var G=0,z=v;G<z.length;G++){var N=z[G];N.injectEndpoint(V,H)}}return s}return s.injectEndpoints({endpoints:i.endpoints})}}function lq(e){for(var t in e)return!1;return!0}var cq=2147483647/1e3-1,uq=function(e){var t=e.reducerPath,n=e.api,i=e.context,c=e.internalState,f=n.internalActions,m=f.removeQueryResult,s=f.unsubscribeQueryResult;function v(P){var D=c.currentSubscriptions[P];return!!D&&!lq(D)}var E={},I=function(P,D,k){var V;if(s.match(P)){var H=D.getState()[t],G=P.payload.queryCacheKey;M(G,(V=H.queries[G])==null?void 0:V.endpointName,D,H.config)}if(n.util.resetApiState.match(P))for(var z=0,N=Object.entries(E);z<N.length;z++){var W=N[z],$=W[0],X=W[1];X&&clearTimeout(X),delete E[$]}if(i.hasRehydrationInfo(P))for(var H=D.getState()[t],te=i.extractRehydrationInfo(P).queries,J=0,re=Object.entries(te);J<re.length;J++){var ce=re[J],G=ce[0],Ee=ce[1];M(G,Ee==null?void 0:Ee.endpointName,D,H.config)}};function M(P,D,k,V){var H,G=i.endpointDefinitions[D],z=(H=G==null?void 0:G.keepUnusedDataFor)!=null?H:V.keepUnusedDataFor;if(z!==1/0){var N=Math.max(0,Math.min(z,cq));if(!v(P)){var W=E[P];W&&clearTimeout(W),E[P]=setTimeout(function(){v(P)||k.dispatch(m({queryCacheKey:P})),delete E[P]},N*1e3)}}}return I},hq=function(e){var t=e.reducerPath,n=e.context,i=e.context.endpointDefinitions,c=e.mutationThunk,f=e.api,m=e.assertTagType,s=e.refetchQuery,v=f.internalActions.removeQueryResult,E=xp(ad(c),Ux(c)),I=function(P,D){E(P)&&M(Lz(P,"invalidatesTags",i,m),D),f.util.invalidateTags.match(P)&&M(kz(P.payload,void 0,void 0,void 0,void 0,m),D)};function M(P,D){var k=D.getState(),V=k[t],H=f.util.selectInvalidatedBy(k,P);n.batch(function(){for(var G,z=Array.from(H.values()),N=0,W=z;N<W.length;N++){var $=W[N].queryCacheKey,X=V.queries[$],te=(G=V.subscriptions[$])!=null?G:{};X&&(Object.keys(te).length===0?D.dispatch(v({queryCacheKey:$})):X.status!==Ur.uninitialized&&D.dispatch(s(X,$)))}})}return I},dq=function(e){var t=e.reducerPath,n=e.queryThunk,i=e.api,c=e.refetchQuery,f=e.internalState,m={},s=function(D,k){(i.internalActions.updateSubscriptionOptions.match(D)||i.internalActions.unsubscribeQueryResult.match(D))&&E(D.payload,k),(n.pending.match(D)||n.rejected.match(D)&&D.meta.condition)&&E(D.meta.arg,k),(n.fulfilled.match(D)||n.rejected.match(D)&&!D.meta.condition)&&v(D.meta.arg,k),i.util.resetApiState.match(D)&&M()};function v(D,k){var V=D.queryCacheKey,H=k.getState()[t],G=H.queries[V],z=f.currentSubscriptions[V];if(!(!G||G.status===Ur.uninitialized)){var N=P(z);if(Number.isFinite(N)){var W=m[V];W!=null&&W.timeout&&(clearTimeout(W.timeout),W.timeout=void 0);var $=Date.now()+N,X=m[V]={nextPollTimestamp:$,pollingInterval:N,timeout:setTimeout(function(){X.timeout=void 0,k.dispatch(c(G,V))},N)}}}}function E(D,k){var V=D.queryCacheKey,H=k.getState()[t],G=H.queries[V],z=f.currentSubscriptions[V];if(!(!G||G.status===Ur.uninitialized)){var N=P(z);if(!Number.isFinite(N)){I(V);return}var W=m[V],$=Date.now()+N;(!W||$<W.nextPollTimestamp)&&v({queryCacheKey:V},k)}}function I(D){var k=m[D];k!=null&&k.timeout&&clearTimeout(k.timeout),delete m[D]}function M(){for(var D=0,k=Object.keys(m);D<k.length;D++){var V=k[D];I(V)}}function P(D){D===void 0&&(D={});var k=Number.POSITIVE_INFINITY;for(var V in D)D[V].pollingInterval&&(k=Math.min(D[V].pollingInterval,k));return k}return s},fq=function(e){var t=e.reducerPath,n=e.context,i=e.api,c=e.refetchQuery,f=e.internalState,m=i.internalActions.removeQueryResult,s=function(E,I){LI.match(E)&&v(I,"refetchOnFocus"),zI.match(E)&&v(I,"refetchOnReconnect")};function v(E,I){var M=E.getState()[t],P=M.queries,D=f.currentSubscriptions;n.batch(function(){for(var k=0,V=Object.keys(D);k<V.length;k++){var H=V[k],G=P[H],z=D[H];if(!(!z||!G)){var N=Object.values(z).some(function(W){return W[I]===!0})||Object.values(z).every(function(W){return W[I]===void 0})&&M.config[I];N&&(Object.keys(z).length===0?E.dispatch(m({queryCacheKey:H})):G.status!==Ur.uninitialized&&E.dispatch(c(G,H)))}}})}return s},lO=new Error("Promise never resolved before cacheEntryRemoved."),pq=function(e){var t=e.api,n=e.reducerPath,i=e.context,c=e.queryThunk,f=e.mutationThunk;e.internalState;var m=z2(c),s=z2(f),v=ad(c,f),E={},I=function(D,k,V){var H=M(D);if(c.pending.match(D)){var G=V[n].queries[H],z=k.getState()[n].queries[H];!G&&z&&P(D.meta.arg.endpointName,D.meta.arg.originalArgs,H,k,D.meta.requestId)}else if(f.pending.match(D)){var z=k.getState()[n].mutations[H];z&&P(D.meta.arg.endpointName,D.meta.arg.originalArgs,H,k,D.meta.requestId)}else if(v(D)){var N=E[H];N!=null&&N.valueResolved&&(N.valueResolved({data:D.payload,meta:D.meta.baseQueryMeta}),delete N.valueResolved)}else if(t.internalActions.removeQueryResult.match(D)||t.internalActions.removeMutationResult.match(D)){var N=E[H];N&&(delete E[H],N.cacheEntryRemoved())}else if(t.util.resetApiState.match(D))for(var W=0,$=Object.entries(E);W<$.length;W++){var X=$[W],te=X[0],N=X[1];delete E[te],N.cacheEntryRemoved()}};function M(D){return m(D)?D.meta.arg.queryCacheKey:s(D)?D.meta.requestId:t.internalActions.removeQueryResult.match(D)?D.payload.queryCacheKey:t.internalActions.removeMutationResult.match(D)?xy(D.payload):""}function P(D,k,V,H,G){var z=i.endpointDefinitions[D],N=z==null?void 0:z.onCacheEntryAdded;if(N){var W={},$=new Promise(function(Ee){W.cacheEntryRemoved=Ee}),X=Promise.race([new Promise(function(Ee){W.valueResolved=Ee}),$.then(function(){throw lO})]);X.catch(function(){}),E[V]=W;var te=t.endpoints[D].select(z.type===hl.query?k:V),J=H.dispatch(function(Ee,Me,Le){return Le}),re=tl(oi({},H),{getCacheEntry:function(){return te(H.getState())},requestId:G,extra:J,updateCachedData:z.type===hl.query?function(Ee){return H.dispatch(t.util.updateQueryData(D,k,Ee))}:void 0,cacheDataLoaded:X,cacheEntryRemoved:$}),ce=N(k,re);Promise.resolve(ce).catch(function(Ee){if(Ee!==lO)throw Ee})}}return I},mq=function(e){var t=e.api,n=e.context,i=e.queryThunk,c=e.mutationThunk,f=OI(i,c),m=_y(i,c),s=ad(i,c),v={},E=function(I,M){var P,D,k;if(f(I)){var V=I.meta,H=V.requestId,G=V.arg,z=G.endpointName,N=G.originalArgs,W=n.endpointDefinitions[z],$=W==null?void 0:W.onQueryStarted;if($){var X={},te=new Promise(function(Oe,ke){X.resolve=Oe,X.reject=ke});te.catch(function(){}),v[H]=X;var J=t.endpoints[z].select(W.type===hl.query?N:H),re=M.dispatch(function(Oe,ke,je){return je}),ce=tl(oi({},M),{getCacheEntry:function(){return J(M.getState())},requestId:H,extra:re,updateCachedData:W.type===hl.query?function(Oe){return M.dispatch(t.util.updateQueryData(z,N,Oe))}:void 0,queryFulfilled:te});$(N,ce)}}else if(s(I)){var Ee=I.meta,H=Ee.requestId,Me=Ee.baseQueryMeta;(P=v[H])==null||P.resolve({data:I.payload,meta:Me}),delete v[H]}else if(m(I)){var Le=I.meta,H=Le.requestId,Ae=Le.rejectedWithValue,Me=Le.baseQueryMeta;(k=v[H])==null||k.reject({error:(D=I.payload)!=null?D:I.error,isUnhandledError:!Ae,meta:Me}),delete v[H]}};return E},gq=function(e){var t=e.api,n=e.context.apiUid,i=e.reducerPath;return function(c,f){var m,s;t.util.resetApiState.match(c)&&f.dispatch(t.internalActions.middlewareRegistered(n)),typeof process<"u"}},cO,yq=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis):function(e){return(cO||(cO=Promise.resolve())).then(e).catch(function(t){return setTimeout(function(){throw t},0)})},_q=function(e){var t=e.api,n=e.queryThunk,i=e.internalState,c=t.reducerPath+"/subscriptions",f=null,m=!1,s=t.internalActions,v=s.updateSubscriptionOptions,E=s.unsubscribeQueryResult,I=function(M,P){var D,k,V,H,G,z,N,W,$;if(v.match(P)){var X=P.payload,te=X.queryCacheKey,J=X.requestId,re=X.options;return(D=M==null?void 0:M[te])!=null&&D[J]&&(M[te][J]=re),!0}if(E.match(P)){var ce=P.payload,te=ce.queryCacheKey,J=ce.requestId;return M[te]&&delete M[te][J],!0}if(t.internalActions.removeQueryResult.match(P))return delete M[P.payload.queryCacheKey],!0;if(n.pending.match(P)){var Ee=P.meta,Me=Ee.arg,J=Ee.requestId;if(Me.subscribe){var Le=(V=M[k=Me.queryCacheKey])!=null?V:M[k]={};return Le[J]=(G=(H=Me.subscriptionOptions)!=null?H:Le[J])!=null?G:{},!0}}if(n.rejected.match(P)){var Ae=P.meta,Oe=Ae.condition,Me=Ae.arg,J=Ae.requestId;if(Oe&&Me.subscribe){var Le=(N=M[z=Me.queryCacheKey])!=null?N:M[z]={};return Le[J]=($=(W=Me.subscriptionOptions)!=null?W:Le[J])!=null?$:{},!0}}return!1};return function(M,P){var D,k;if(f||(f=JSON.parse(JSON.stringify(i.currentSubscriptions))),t.util.resetApiState.match(M))return f=i.currentSubscriptions={},[!0,!1];if(t.internalActions.internal_probeSubscription.match(M)){var V=M.payload,H=V.queryCacheKey,G=V.requestId,z=!!((D=i.currentSubscriptions[H])!=null&&D[G]);return[!1,z]}var N=I(i.currentSubscriptions,M);if(N){m||(yq(function(){var te=JSON.parse(JSON.stringify(i.currentSubscriptions)),J=vz(f,function(){return te}),re=J[1];P.next(t.internalActions.subscriptionsUpdated(re)),f=te,m=!1}),m=!0);var W=!!((k=M.type)!=null&&k.startsWith(c)),$=n.rejected.match(M)&&M.meta.condition&&!!M.meta.arg.subscribe,X=!W&&!$;return[X,!1]}return[!0,!1]}};function vq(e){var t=e.reducerPath,n=e.queryThunk,i=e.api,c=e.context,f=c.apiUid,m={invalidateTags:Xo(t+"/invalidateTags")},s=function(M){return!!M&&typeof M.type=="string"&&M.type.startsWith(t+"/")},v=[gq,uq,hq,dq,pq,mq],E=function(M){var P=!1,D={currentSubscriptions:{}},k=tl(oi({},e),{internalState:D,refetchQuery:I}),V=v.map(function(z){return z(k)}),H=_q(k),G=fq(k);return function(z){return function(N){P||(P=!0,M.dispatch(i.internalActions.middlewareRegistered(f)));var W=tl(oi({},M),{next:z}),$=M.getState(),X=H(N,W,$),te=X[0],J=X[1],re;if(te?re=z(N):re=J,M.getState()[t]&&(G(N,W,$),s(N)||c.hasRehydrationInfo(N)))for(var ce=0,Ee=V;ce<Ee.length;ce++){var Me=Ee[ce];Me(N,W,$)}return re}}};return{middleware:E,actions:m};function I(M,P,D){return D===void 0&&(D={}),n(oi({type:"query",endpointName:M.endpointName,originalArgs:M.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:P},D))}}function Nc(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.assign.apply(Object,V1([e],t))}var uO=Symbol(),xq=function(){return{name:uO,init:function(e,t,n){var i=t.baseQuery,c=t.tagTypes,f=t.reducerPath,m=t.serializeQueryArgs,s=t.keepUnusedDataFor,v=t.refetchOnMountOrArgChange,E=t.refetchOnFocus,I=t.refetchOnReconnect;tW();var M=function(Dt){return typeof process<"u",Dt};Object.assign(e,{reducerPath:f,endpoints:{},internalActions:{onOnline:zI,onOffline:Dz,onFocus:LI,onFocusLost:Rz},util:{}});var P=iq({baseQuery:i,reducerPath:f,context:n,api:e,serializeQueryArgs:m}),D=P.queryThunk,k=P.mutationThunk,V=P.patchQueryData,H=P.updateQueryData,G=P.upsertQueryData,z=P.prefetch,N=P.buildMatchThunkActions,W=oq({context:n,queryThunk:D,mutationThunk:k,reducerPath:f,assertTagType:M,config:{refetchOnFocus:E,refetchOnReconnect:I,refetchOnMountOrArgChange:v,keepUnusedDataFor:s,reducerPath:f}}),$=W.reducer,X=W.actions;Nc(e.util,{patchQueryData:V,updateQueryData:H,upsertQueryData:G,prefetch:z,resetApiState:X.resetApiState}),Nc(e.internalActions,X);var te=vq({reducerPath:f,context:n,queryThunk:D,mutationThunk:k,api:e,assertTagType:M}),J=te.middleware,re=te.actions;Nc(e.util,re),Nc(e,{reducer:$,middleware:J});var ce=sq({serializeQueryArgs:m,reducerPath:f}),Ee=ce.buildQuerySelector,Me=ce.buildMutationSelector,Le=ce.selectInvalidatedBy;Nc(e.util,{selectInvalidatedBy:Le});var Ae=rq({queryThunk:D,mutationThunk:k,api:e,serializeQueryArgs:m,context:n}),Oe=Ae.buildInitiateQuery,ke=Ae.buildInitiateMutation,je=Ae.getRunningMutationThunk,De=Ae.getRunningMutationsThunk,Be=Ae.getRunningQueriesThunk,He=Ae.getRunningQueryThunk,tt=Ae.getRunningOperationPromises,Mt=Ae.removalWarning;return Nc(e.util,{getRunningOperationPromises:tt,getRunningOperationPromise:Mt,getRunningMutationThunk:je,getRunningMutationsThunk:De,getRunningQueryThunk:He,getRunningQueriesThunk:Be}),{name:uO,injectEndpoint:function(Dt,bt){var Nt,ft,Ot=e;(ft=(Nt=Ot.endpoints)[Dt])!=null||(Nt[Dt]={}),Oz(bt)?Nc(Ot.endpoints[Dt],{name:Dt,select:Ee(Dt,bt),initiate:Oe(Dt,bt)},N(D,Dt)):tq(bt)&&Nc(Ot.endpoints[Dt],{name:Dt,select:Me(),initiate:ke(Dt)},N(k,Dt))}}}}},F2={},wq={get exports(){return F2},set exports(e){F2=e}},Nz={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var up=ue;function bq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Eq=typeof Object.is=="function"?Object.is:bq,Tq=up.useState,Sq=up.useEffect,Iq=up.useLayoutEffect,Mq=up.useDebugValue;function Aq(e,t){var n=t(),i=Tq({inst:{value:n,getSnapshot:t}}),c=i[0].inst,f=i[1];return Iq(function(){c.value=n,c.getSnapshot=t,$E(c)&&f({inst:c})},[e,n,t]),Sq(function(){return $E(c)&&f({inst:c}),e(function(){$E(c)&&f({inst:c})})},[e]),Mq(n),n}function $E(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Eq(e,n)}catch{return!0}}function Cq(e,t){return t()}var Pq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cq:Aq;Nz.useSyncExternalStore=up.useSyncExternalStore!==void 0?up.useSyncExternalStore:Pq;(function(e){e.exports=Nz})(wq);var U2={},Rq={get exports(){return U2},set exports(e){U2=e}},Bz={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=ue,Dq=F2;function Oq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kq=typeof Object.is=="function"?Object.is:Oq,Lq=Dq.useSyncExternalStore,zq=Vx.useRef,Nq=Vx.useEffect,Bq=Vx.useMemo,Fq=Vx.useDebugValue;Bz.useSyncExternalStoreWithSelector=function(e,t,n,i,c){var f=zq(null);if(f.current===null){var m={hasValue:!1,value:null};f.current=m}else m=f.current;f=Bq(function(){function v(D){if(!E){if(E=!0,I=D,D=i(D),c!==void 0&&m.hasValue){var k=m.value;if(c(k,D))return M=k}return M=D}if(k=M,kq(I,D))return k;var V=i(D);return c!==void 0&&c(k,V)?k:(I=D,M=V)}var E=!1,I,M,P=n===void 0?null:n;return[function(){return v(t())},P===null?void 0:function(){return v(P())}]},[t,n,i,c]);var s=Lq(e,f[0],f[1]);return Nq(function(){m.hasValue=!0,m.value=s},[s]),Fq(s),s};(function(e){e.exports=Bz})(Rq);function Uq(e){e()}let Fz=Uq;const Vq=e=>Fz=e,jq=()=>Fz,wu=ue.createContext(null);function Uz(){return ue.useContext(wu)}const Gq=()=>{throw new Error("uSES not initialized!")};let Vz=Gq;const $q=e=>{Vz=e},Wq=(e,t)=>e===t;function qq(e=wu){const t=e===wu?Uz:()=>ue.useContext(e);return function(i,c=Wq){const{store:f,subscription:m,getServerState:s}=t(),v=Vz(m.addNestedSub,f.getState,s||f.getState,i,c);return ue.useDebugValue(v),v}}const Vy=qq();function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},V2.apply(this,arguments)}function Hq(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,f;for(f=0;f<i.length;f++)c=i[f],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}var j2={},Zq={get exports(){return j2},set exports(e){j2=e}},gr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fi=typeof Symbol=="function"&&Symbol.for,NI=Fi?Symbol.for("react.element"):60103,BI=Fi?Symbol.for("react.portal"):60106,jx=Fi?Symbol.for("react.fragment"):60107,Gx=Fi?Symbol.for("react.strict_mode"):60108,$x=Fi?Symbol.for("react.profiler"):60114,Wx=Fi?Symbol.for("react.provider"):60109,qx=Fi?Symbol.for("react.context"):60110,FI=Fi?Symbol.for("react.async_mode"):60111,Hx=Fi?Symbol.for("react.concurrent_mode"):60111,Zx=Fi?Symbol.for("react.forward_ref"):60112,Yx=Fi?Symbol.for("react.suspense"):60113,Yq=Fi?Symbol.for("react.suspense_list"):60120,Xx=Fi?Symbol.for("react.memo"):60115,Qx=Fi?Symbol.for("react.lazy"):60116,Xq=Fi?Symbol.for("react.block"):60121,Qq=Fi?Symbol.for("react.fundamental"):60117,Kq=Fi?Symbol.for("react.responder"):60118,Jq=Fi?Symbol.for("react.scope"):60119;function gs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case NI:switch(e=e.type,e){case FI:case Hx:case jx:case $x:case Gx:case Yx:return e;default:switch(e=e&&e.$$typeof,e){case qx:case Zx:case Qx:case Xx:case Wx:return e;default:return t}}case BI:return t}}}function jz(e){return gs(e)===Hx}gr.AsyncMode=FI;gr.ConcurrentMode=Hx;gr.ContextConsumer=qx;gr.ContextProvider=Wx;gr.Element=NI;gr.ForwardRef=Zx;gr.Fragment=jx;gr.Lazy=Qx;gr.Memo=Xx;gr.Portal=BI;gr.Profiler=$x;gr.StrictMode=Gx;gr.Suspense=Yx;gr.isAsyncMode=function(e){return jz(e)||gs(e)===FI};gr.isConcurrentMode=jz;gr.isContextConsumer=function(e){return gs(e)===qx};gr.isContextProvider=function(e){return gs(e)===Wx};gr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===NI};gr.isForwardRef=function(e){return gs(e)===Zx};gr.isFragment=function(e){return gs(e)===jx};gr.isLazy=function(e){return gs(e)===Qx};gr.isMemo=function(e){return gs(e)===Xx};gr.isPortal=function(e){return gs(e)===BI};gr.isProfiler=function(e){return gs(e)===$x};gr.isStrictMode=function(e){return gs(e)===Gx};gr.isSuspense=function(e){return gs(e)===Yx};gr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jx||e===Hx||e===$x||e===Gx||e===Yx||e===Yq||typeof e=="object"&&e!==null&&(e.$$typeof===Qx||e.$$typeof===Xx||e.$$typeof===Wx||e.$$typeof===qx||e.$$typeof===Zx||e.$$typeof===Qq||e.$$typeof===Kq||e.$$typeof===Jq||e.$$typeof===Xq)};gr.typeOf=gs;(function(e){e.exports=gr})(Zq);var Gz=j2,eH={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$z={};$z[Gz.ForwardRef]=eH;$z[Gz.Memo]=tH;var hO={},nH={get exports(){return hO},set exports(e){hO=e}},yr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI=Symbol.for("react.element"),VI=Symbol.for("react.portal"),Kx=Symbol.for("react.fragment"),Jx=Symbol.for("react.strict_mode"),ew=Symbol.for("react.profiler"),tw=Symbol.for("react.provider"),nw=Symbol.for("react.context"),rH=Symbol.for("react.server_context"),rw=Symbol.for("react.forward_ref"),iw=Symbol.for("react.suspense"),ow=Symbol.for("react.suspense_list"),sw=Symbol.for("react.memo"),aw=Symbol.for("react.lazy"),iH=Symbol.for("react.offscreen"),Wz;Wz=Symbol.for("react.module.reference");function Us(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case UI:switch(e=e.type,e){case Kx:case ew:case Jx:case iw:case ow:return e;default:switch(e=e&&e.$$typeof,e){case rH:case nw:case rw:case aw:case sw:case tw:return e;default:return t}}case VI:return t}}}yr.ContextConsumer=nw;yr.ContextProvider=tw;yr.Element=UI;yr.ForwardRef=rw;yr.Fragment=Kx;yr.Lazy=aw;yr.Memo=sw;yr.Portal=VI;yr.Profiler=ew;yr.StrictMode=Jx;yr.Suspense=iw;yr.SuspenseList=ow;yr.isAsyncMode=function(){return!1};yr.isConcurrentMode=function(){return!1};yr.isContextConsumer=function(e){return Us(e)===nw};yr.isContextProvider=function(e){return Us(e)===tw};yr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===UI};yr.isForwardRef=function(e){return Us(e)===rw};yr.isFragment=function(e){return Us(e)===Kx};yr.isLazy=function(e){return Us(e)===aw};yr.isMemo=function(e){return Us(e)===sw};yr.isPortal=function(e){return Us(e)===VI};yr.isProfiler=function(e){return Us(e)===ew};yr.isStrictMode=function(e){return Us(e)===Jx};yr.isSuspense=function(e){return Us(e)===iw};yr.isSuspenseList=function(e){return Us(e)===ow};yr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Kx||e===ew||e===Jx||e===iw||e===ow||e===iH||typeof e=="object"&&e!==null&&(e.$$typeof===aw||e.$$typeof===sw||e.$$typeof===tw||e.$$typeof===nw||e.$$typeof===rw||e.$$typeof===Wz||e.getModuleId!==void 0)};yr.typeOf=Us;(function(e){e.exports=yr})(nH);function oH(){const e=jq();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let i=t;for(;i;)i.callback(),i=i.next})},get(){let i=[],c=t;for(;c;)i.push(c),c=c.next;return i},subscribe(i){let c=!0,f=n={callback:i,next:null,prev:n};return f.prev?f.prev.next=f:t=f,function(){!c||t===null||(c=!1,f.next?f.next.prev=f.prev:n=f.prev,f.prev?f.prev.next=f.next:t=f.next)}}}}const dO={notify(){},get:()=>[]};function sH(e,t){let n,i=dO;function c(M){return v(),i.subscribe(M)}function f(){i.notify()}function m(){I.onStateChange&&I.onStateChange()}function s(){return!!n}function v(){n||(n=t?t.addNestedSub(m):e.subscribe(m),i=oH())}function E(){n&&(n(),n=void 0,i.clear(),i=dO)}const I={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:s,trySubscribe:v,tryUnsubscribe:E,getListeners:()=>i};return I}const aH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lH=aH?ue.useLayoutEffect:ue.useEffect;function fO(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function $1(e,t){if(fO(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let c=0;c<n.length;c++)if(!Object.prototype.hasOwnProperty.call(t,n[c])||!fO(e[n[c]],t[n[c]]))return!1;return!0}function cH({store:e,context:t,children:n,serverState:i}){const c=ue.useMemo(()=>{const s=sH(e);return{store:e,subscription:s,getServerState:i?()=>i:void 0}},[e,i]),f=ue.useMemo(()=>e.getState(),[e]);lH(()=>{const{subscription:s}=c;return s.onStateChange=s.notifyNestedSubs,s.trySubscribe(),f!==e.getState()&&s.notifyNestedSubs(),()=>{s.tryUnsubscribe(),s.onStateChange=void 0}},[c,f]);const m=t||wu;return pp.createElement(m.Provider,{value:c},n)}function qz(e=wu){const t=e===wu?Uz:()=>ue.useContext(e);return function(){const{store:i}=t();return i}}const Hz=qz();function uH(e=wu){const t=e===wu?Hz:qz(e);return function(){return t().dispatch}}const jy=uH();$q(U2.useSyncExternalStoreWithSelector);Vq(Jf.unstable_batchedUpdates);var hH=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,i=t.length,c=e.length;n<i;n++,c++)e[c]=t[n];return e},dH=Object.defineProperty,fH=Object.defineProperties,pH=Object.getOwnPropertyDescriptors,pO=Object.getOwnPropertySymbols,mH=Object.prototype.hasOwnProperty,gH=Object.prototype.propertyIsEnumerable,mO=function(e,t,n){return t in e?dH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},kl=function(e,t){for(var n in t||(t={}))mH.call(t,n)&&mO(e,n,t[n]);if(pO)for(var i=0,c=pO(t);i<c.length;i++){var n=c[i];gH.call(t,n)&&mO(e,n,t[n])}return e},Lv=function(e,t){return fH(e,pH(t))};function gO(e,t,n,i){var c=ue.useMemo(function(){return{queryArgs:e,serialized:typeof e=="object"?t({queryArgs:e,endpointDefinition:n,endpointName:i}):e}},[e,t,n,i]),f=ue.useRef(c);return ue.useEffect(function(){f.current.serialized!==c.serialized&&(f.current=c)},[c]),f.current.serialized===c.serialized?f.current.queryArgs:e}var WE=Symbol();function qE(e){var t=ue.useRef(e);return ue.useEffect(function(){$1(t.current,e)||(t.current=e)},[e]),$1(t.current,e)?t.current:e}var J0=WeakMap?new WeakMap:void 0,yH=function(e){var t=e.endpointName,n=e.queryArgs,i="",c=J0==null?void 0:J0.get(n);if(typeof c=="string")i=c;else{var f=JSON.stringify(n,function(m,s){return xu(s)?Object.keys(s).sort().reduce(function(v,E){return v[E]=s[E],v},{}):s});xu(n)&&(J0==null||J0.set(n,f)),i=f}return t+"("+i+")"},_H=typeof window<"u"&&window.document&&window.document.createElement?ue.useLayoutEffect:ue.useEffect,vH=function(e){return e},xH=function(e){return e.isUninitialized?Lv(kl({},e),{isUninitialized:!1,isFetching:!0,isLoading:e.data===void 0,status:Ur.pending}):e};function wH(e){var t=e.api,n=e.moduleOptions,i=n.batch,c=n.useDispatch,f=n.useSelector,m=n.useStore,s=n.unstable__sideEffectsInRender,v=e.serializeQueryArgs,E=e.context,I=s?function(V){return V()}:ue.useEffect;return{buildQueryHooks:D,buildMutationHook:k,usePrefetch:P};function M(V,H,G){if(H!=null&&H.endpointName&&V.isUninitialized){var z=H.endpointName,N=E.endpointDefinitions[z];v({queryArgs:H.originalArgs,endpointDefinition:N,endpointName:z})===v({queryArgs:G,endpointDefinition:N,endpointName:z})&&(H=void 0)}var W=V.isSuccess?V.data:H==null?void 0:H.data;W===void 0&&(W=V.data);var $=W!==void 0,X=V.isLoading,te=!$&&X,J=V.isSuccess||X&&$;return Lv(kl({},V),{data:W,currentData:V.data,isFetching:X,isLoading:te,isSuccess:J})}function P(V,H){var G=c(),z=qE(H);return ue.useCallback(function(N,W){return G(t.util.prefetch(V,N,kl(kl({},z),W)))},[V,G,z])}function D(V){var H=function(N,W){var $=W===void 0?{}:W,X=$.refetchOnReconnect,te=$.refetchOnFocus,J=$.refetchOnMountOrArgChange,re=$.skip,ce=re===void 0?!1:re,Ee=$.pollingInterval,Me=Ee===void 0?0:Ee,Le=t.endpoints[V].initiate,Ae=c(),Oe=gO(ce?Fh:N,yH,E.endpointDefinitions[V],V),ke=qE({refetchOnReconnect:X,refetchOnFocus:te,pollingInterval:Me}),je=ue.useRef(!1),De=ue.useRef(),Be=De.current||{},He=Be.queryCacheKey,tt=Be.requestId,Mt=!1;if(He&&tt){var Dt=Ae(t.internalActions.internal_probeSubscription({queryCacheKey:He,requestId:tt}));Mt=!!Dt}var bt=!Mt&&je.current;return I(function(){je.current=Mt}),I(function(){bt&&(De.current=void 0)},[bt]),I(function(){var Nt,ft=De.current;if(typeof process<"u",Oe===Fh){ft==null||ft.unsubscribe(),De.current=void 0;return}var Ot=(Nt=De.current)==null?void 0:Nt.subscriptionOptions;if(!ft||ft.arg!==Oe){ft==null||ft.unsubscribe();var an=Ae(Le(Oe,{subscriptionOptions:ke,forceRefetch:J}));De.current=an}else ke!==Ot&&ft.updateSubscriptionOptions(ke)},[Ae,Le,J,Oe,ke,bt]),ue.useEffect(function(){return function(){var Nt;(Nt=De.current)==null||Nt.unsubscribe(),De.current=void 0}},[]),ue.useMemo(function(){return{refetch:function(){var Nt;if(!De.current)throw new Error("Cannot refetch a query that has not been started yet.");return(Nt=De.current)==null?void 0:Nt.refetch()}}},[])},G=function(N){var W=N===void 0?{}:N,$=W.refetchOnReconnect,X=W.refetchOnFocus,te=W.pollingInterval,J=te===void 0?0:te,re=t.endpoints[V].initiate,ce=c(),Ee=ue.useState(WE),Me=Ee[0],Le=Ee[1],Ae=ue.useRef(),Oe=qE({refetchOnReconnect:$,refetchOnFocus:X,pollingInterval:J});I(function(){var De,Be,He=(De=Ae.current)==null?void 0:De.subscriptionOptions;Oe!==He&&((Be=Ae.current)==null||Be.updateSubscriptionOptions(Oe))},[Oe]);var ke=ue.useRef(Oe);I(function(){ke.current=Oe},[Oe]);var je=ue.useCallback(function(De,Be){Be===void 0&&(Be=!1);var He;return i(function(){var tt;(tt=Ae.current)==null||tt.unsubscribe(),Ae.current=He=ce(re(De,{subscriptionOptions:ke.current,forceRefetch:!Be})),Le(De)}),He},[ce,re]);return ue.useEffect(function(){return function(){var De;(De=Ae==null?void 0:Ae.current)==null||De.unsubscribe()}},[]),ue.useEffect(function(){Me!==WE&&!Ae.current&&je(Me,!0)},[Me,je]),ue.useMemo(function(){return[je,Me]},[je,Me])},z=function(N,W){var $=W===void 0?{}:W,X=$.skip,te=X===void 0?!1:X,J=$.selectFromResult,re=t.endpoints[V].select,ce=gO(te?Fh:N,v,E.endpointDefinitions[V],V),Ee=ue.useRef(),Me=ue.useMemo(function(){return Bg([re(ce),function(je,De){return De},function(je){return ce}],M)},[re,ce]),Le=ue.useMemo(function(){return J?Bg([Me],J):Me},[Me,J]),Ae=f(function(je){return Le(je,Ee.current)},$1),Oe=m(),ke=Me(Oe.getState(),Ee.current);return _H(function(){Ee.current=ke},[ke]),Ae};return{useQueryState:z,useQuerySubscription:H,useLazyQuerySubscription:G,useLazyQuery:function(N){var W=G(N),$=W[0],X=W[1],te=z(X,Lv(kl({},N),{skip:X===WE})),J=ue.useMemo(function(){return{lastArg:X}},[X]);return ue.useMemo(function(){return[$,te,J]},[$,te,J])},useQuery:function(N,W){var $=H(N,W),X=z(N,kl({selectFromResult:N===Fh||W!=null&&W.skip?void 0:xH},W)),te=X.data,J=X.status,re=X.isLoading,ce=X.isSuccess,Ee=X.isError,Me=X.error;return ue.useDebugValue({data:te,status:J,isLoading:re,isSuccess:ce,isError:Ee,error:Me}),ue.useMemo(function(){return kl(kl({},X),$)},[X,$])}}}function k(V){return function(H){var G=H===void 0?{}:H,z=G.selectFromResult,N=z===void 0?vH:z,W=G.fixedCacheKey,$=t.endpoints[V],X=$.select,te=$.initiate,J=c(),re=ue.useState(),ce=re[0],Ee=re[1];ue.useEffect(function(){return function(){ce!=null&&ce.arg.fixedCacheKey||ce==null||ce.reset()}},[ce]);var Me=ue.useCallback(function(ft){var Ot=J(te(ft,{fixedCacheKey:W}));return Ee(Ot),Ot},[J,te,W]),Le=(ce||{}).requestId,Ae=ue.useMemo(function(){return Bg([X({fixedCacheKey:W,requestId:ce==null?void 0:ce.requestId})],N)},[X,ce,N,W]),Oe=f(Ae,$1),ke=W==null?ce==null?void 0:ce.arg.originalArgs:void 0,je=ue.useCallback(function(){i(function(){ce&&Ee(void 0),W&&J(t.internalActions.removeMutationResult({requestId:Le,fixedCacheKey:W}))})},[J,W,ce,Le]),De=Oe.endpointName,Be=Oe.data,He=Oe.status,tt=Oe.isLoading,Mt=Oe.isSuccess,Dt=Oe.isError,bt=Oe.error;ue.useDebugValue({endpointName:De,data:Be,status:He,isLoading:tt,isSuccess:Mt,isError:Dt,error:bt});var Nt=ue.useMemo(function(){return Lv(kl({},Oe),{originalArgs:ke,reset:je})},[Oe,ke,je]);return ue.useMemo(function(){return[Me,Nt]},[Me,Nt])}}}var W1;(function(e){e.query="query",e.mutation="mutation"})(W1||(W1={}));function bH(e){return e.type===W1.query}function EH(e){return e.type===W1.mutation}function HE(e){return e.replace(e[0],e[0].toUpperCase())}function ev(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.assign.apply(Object,hH([e],t))}var TH=Symbol(),SH=function(e){var t=e===void 0?{}:e,n=t.batch,i=n===void 0?Jf.unstable_batchedUpdates:n,c=t.useDispatch,f=c===void 0?jy:c,m=t.useSelector,s=m===void 0?Vy:m,v=t.useStore,E=v===void 0?Hz:v,I=t.unstable__sideEffectsInRender,M=I===void 0?!1:I;return{name:TH,init:function(P,D,k){var V=D.serializeQueryArgs,H=P,G=wH({api:P,moduleOptions:{batch:i,useDispatch:f,useSelector:s,useStore:E,unstable__sideEffectsInRender:M},serializeQueryArgs:V,context:k}),z=G.buildQueryHooks,N=G.buildMutationHook,W=G.usePrefetch;return ev(H,{usePrefetch:W}),ev(k,{batch:i}),{injectEndpoint:function($,X){if(bH(X)){var te=z($),J=te.useQuery,re=te.useLazyQuery,ce=te.useLazyQuerySubscription,Ee=te.useQueryState,Me=te.useQuerySubscription;ev(H.endpoints[$],{useQuery:J,useLazyQuery:re,useLazyQuerySubscription:ce,useQueryState:Ee,useQuerySubscription:Me}),P["use"+HE($)+"Query"]=J,P["useLazy"+HE($)+"Query"]=re}else if(EH(X)){var Le=N($);ev(H.endpoints[$],{useMutation:Le}),P["use"+HE($)+"Mutation"]=Le}}}}}},IH=aq(xq(),SH());const Ug=IH({reducerPath:"api",baseQuery:eq({baseUrl:"https://us-central1-world-wander.cloudfunctions.net/server/",prepareHeaders:e=>{const t=localStorage.getItem("Bearer");return t&&e.set("authorization",t),e}}),endpoints:e=>({}),tagTypes:["Posts","Auth"]}),MH=Ug.injectEndpoints({endpoints:e=>({authUser:e.query({query:()=>({url:"/auth/authorize",method:"GET"})}),registerUser:e.mutation({query:t=>({url:"/auth/register",method:"POST",body:t})}),loginUser:e.mutation({query:t=>({url:"/auth/login",method:"POST",body:t})}),updateUser:e.mutation({query:t=>({url:"/auth/updateuser",method:"PATCH",body:t})}),fetchAllusers:e.query({query:()=>({url:"/auth/userlist",method:"GET"})}),fetchPubUserInfo:e.query({query:t=>({url:`/auth/userinfo/${t}`,method:"GET"})})})}),{useAuthUserQuery:Mu,useRegisterUserMutation:AH,useLoginUserMutation:CH,useFetchAllusersQuery:PH,useUpdateUserMutation:RH,useFetchPubUserInfoQuery:DH}=MH,OH="/assets/WW-LOGO-GRAY-4efb7ba0.png",zv=ue;function kH({title:e,titleId:t,...n},i){return zv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?zv.createElement("title",{id:t},e):null,zv.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const LH=zv.forwardRef(kH);var zH=LH;const Nv=ue;function NH({title:e,titleId:t,...n},i){return Nv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?Nv.createElement("title",{id:t},e):null,Nv.createElement("path",{fillRule:"evenodd",d:"M12.97 3.97a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 11-1.06-1.06l6.22-6.22H3a.75.75 0 010-1.5h16.19l-6.22-6.22a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const BH=Nv.forwardRef(NH);var FH=BH;const Bv=ue;function UH({title:e,titleId:t,...n},i){return Bv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?Bv.createElement("title",{id:t},e):null,Bv.createElement("path",{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 011.06 0l4.5 4.5a.75.75 0 01-1.06 1.06l-3.22-3.22V16.5a.75.75 0 01-1.5 0V4.81L8.03 8.03a.75.75 0 01-1.06-1.06l4.5-4.5zM3 15.75a.75.75 0 01.75.75v2.25a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5V16.5a.75.75 0 011.5 0v2.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V16.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const VH=Bv.forwardRef(UH);var jH=VH;const Fv=ue;function GH({title:e,titleId:t,...n},i){return Fv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?Fv.createElement("title",{id:t},e):null,Fv.createElement("path",{fillRule:"evenodd",d:"M3.22 3.22a.75.75 0 011.06 0l3.97 3.97V4.5a.75.75 0 011.5 0V9a.75.75 0 01-.75.75H4.5a.75.75 0 010-1.5h2.69L3.22 4.28a.75.75 0 010-1.06zm17.56 0a.75.75 0 010 1.06l-3.97 3.97h2.69a.75.75 0 010 1.5H15a.75.75 0 01-.75-.75V4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0zM3.75 15a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-2.69l-3.97 3.97a.75.75 0 01-1.06-1.06l3.97-3.97H4.5a.75.75 0 01-.75-.75zm10.5 0a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-2.69l3.97 3.97a.75.75 0 11-1.06 1.06l-3.97-3.97v2.69a.75.75 0 01-1.5 0V15z",clipRule:"evenodd"}))}const $H=Fv.forwardRef(GH);var WH=$H;const Uv=ue;function qH({title:e,titleId:t,...n},i){return Uv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?Uv.createElement("title",{id:t},e):null,Uv.createElement("path",{fillRule:"evenodd",d:"M15 3.75a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0V5.56l-3.97 3.97a.75.75 0 11-1.06-1.06l3.97-3.97h-2.69a.75.75 0 01-.75-.75zm-12 0A.75.75 0 013.75 3h4.5a.75.75 0 010 1.5H5.56l3.97 3.97a.75.75 0 01-1.06 1.06L4.5 5.56v2.69a.75.75 0 01-1.5 0v-4.5zm11.47 11.78a.75.75 0 111.06-1.06l3.97 3.97v-2.69a.75.75 0 011.5 0v4.5a.75.75 0 01-.75.75h-4.5a.75.75 0 010-1.5h2.69l-3.97-3.97zm-4.94-1.06a.75.75 0 010 1.06L5.56 19.5h2.69a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75v-4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0z",clipRule:"evenodd"}))}const HH=Uv.forwardRef(qH);var ZH=HH;const Vv=ue;function YH({title:e,titleId:t,...n},i){return Vv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?Vv.createElement("title",{id:t},e):null,Vv.createElement("path",{fillRule:"evenodd",d:"M4.5 12a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm6 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm6 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z",clipRule:"evenodd"}))}const XH=Vv.forwardRef(YH);var QH=XH;const jv=ue;function KH({title:e,titleId:t,...n},i){return jv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?jv.createElement("title",{id:t},e):null,jv.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"}))}const JH=jv.forwardRef(KH);var eZ=JH;const xg=ue;function tZ({title:e,titleId:t,...n},i){return xg.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?xg.createElement("title",{id:t},e):null,xg.createElement("path",{d:"M15.75 8.25a.75.75 0 01.75.75c0 1.12-.492 2.126-1.27 2.812a.75.75 0 11-.992-1.124A2.243 2.243 0 0015 9a.75.75 0 01.75-.75z"}),xg.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM4.575 15.6a8.25 8.25 0 009.348 4.425 1.966 1.966 0 00-1.84-1.275.983.983 0 01-.97-.822l-.073-.437c-.094-.565.25-1.11.8-1.267l.99-.282c.427-.123.783-.418.982-.816l.036-.073a1.453 1.453 0 012.328-.377L16.5 15h.628a2.25 2.25 0 011.983 1.186 8.25 8.25 0 00-6.345-12.4c.044.262.18.503.389.676l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 01-1.161.886l-.143.048a1.107 1.107 0 00-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 01-1.652.928l-.679-.906a1.125 1.125 0 00-1.906.172L4.575 15.6z",clipRule:"evenodd"}))}const nZ=xg.forwardRef(tZ);var rZ=nZ;const Gv=ue;function iZ({title:e,titleId:t,...n},i){return Gv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?Gv.createElement("title",{id:t},e):null,Gv.createElement("path",{d:"M7.493 18.75c-.425 0-.82-.236-.975-.632A7.48 7.48 0 016 15.375c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75 2.25 2.25 0 012.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23h-.777zM2.331 10.977a11.969 11.969 0 00-.831 4.398 12 12 0 00.52 3.507c.26.85 1.084 1.368 1.973 1.368H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 01-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227z"}))}const oZ=Gv.forwardRef(iZ);var sZ=oZ;const $v=ue;function aZ({title:e,titleId:t,...n},i){return $v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?$v.createElement("title",{id:t},e):null,$v.createElement("path",{fillRule:"evenodd",d:"M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}const lZ=$v.forwardRef(aZ);var cZ=lZ;const Wv=ue;function uZ({title:e,titleId:t,...n},i){return Wv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?Wv.createElement("title",{id:t},e):null,Wv.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const hZ=Wv.forwardRef(uZ);var dZ=hZ;const qv=ue;function fZ({title:e,titleId:t,...n},i){return qv.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},n),e?qv.createElement("title",{id:t},e):null,qv.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z",clipRule:"evenodd"}))}const pZ=qv.forwardRef(fZ);var mZ=pZ,gZ=zH,Zz=FH,yZ=jH,_Z=WH,vZ=ZH,xZ=QH,Yz=eZ,Xz=rZ,Qz=sZ,Kz=cZ,wZ=dZ,Jz=mZ;const bZ=()=>{var E,I,M;const[e,t]=ue.useState(!1),[n,i]=ue.useState(!1),{data:c,isSuccess:f,isLoading:m}=Mu(),s=Oy();let v;return m?v=Pe("div",{className:"animate-pulse w-10 h-10 rounded-full bg-zinc-300"}):v=Pe("img",{src:"data:image/png;base64,"+((E=c==null?void 0:c.user)==null?void 0:E.profileImg),className:"w-8 h-8 lg:w-11 lg:h-11 text-zinc-800 rounded-full"}),At(il,{children:[Pe("div",{className:"z-50 w-screen max-w-full h-20 absolute pt-3 lg:pt-5",children:Pe("nav",{children:At("div",{className:"w-full px-4 lg:px-8 flex flex-wrap items-center justify-between",children:[Pe(Bl,{to:"/",children:Pe("img",{src:OH,className:"transition active:scale-95 h-10 w-10 lg:w-14 lg:h-14"})}),Pe("div",{className:" w-auto",children:At("ul",{className:" flex md:text-sm md:font-medium items-center",children:[!localStorage.getItem("Bearer")&&At(il,{children:[Pe("li",{className:"transition hover:scale-105",children:Pe(Bl,{to:"auth/login",className:"text-zinc-800 font-roboto font-normal text-md lg:text-xl md:hover:text-purple-700 mr-5",children:"Log In"})}),Pe("li",{children:Pe(Bl,{to:"auth/register",className:"px-4 py-2.5 text-zinc-800 font-roboto font-normal border-2 border-zinc-300 rounded-lg text-md lg:text-xl hover:text-purple-700 hover:shadow-lg pointer-events-auto transition active:translate-x-4 ",children:"Sign Up"})})]}),localStorage.getItem("Bearer")&&At(il,{children:[Pe("li",{children:Pe("div",{onClick:()=>i(P=>!0),className:"w-10 h-10 rounded-full flex items-center justify-center mr-1 lg:mr-4 cursor-pointer",children:Pe(yZ,{className:"h-5 w-5 lg:w-6 lg:h-6 text-zinc-500 font-bold transition hover:scale-110 hover:text-zinc-800 active:-translate-y-1"})})}),At("li",{children:[At("div",{className:"flex items-center",children:[Pe("p",{className:"mr-2 lg:mr-4 text- lg:text-xl font-roboto font-medium",children:(I=c==null?void 0:c.user)==null?void 0:I.firstName}),Pe("button",{onClick:()=>t(P=>!P),onMouseEnter:()=>t(P=>!0),className:"flex items-center",children:v})]}),At("div",{onMouseLeave:()=>t(P=>!1),className:e?"visible w-72 bg-white shadow-lg rounded-lg absolute top-24 right-5 -z-10 p-2":"hidden",children:[Pe(Bl,{to:"/mywanders",className:({isActive:P})=>P?"underline decoration-zinc-800":"",children:({isActive:P})=>Pe("div",{className:P?"transition text-xl pl-5 w-full h-fit text-zinc-800 py-3 rounded-md hover:bg-purple-700 hover:text-white hover:decoration-white underline":"transition text-xl pl-5 w-full h-fit text-zinc-800 py-3 rounded-md hover:bg-purple-700 hover:text-white decoration-white",children:"My Wanders"})}),Pe(Bl,{to:"/account",children:({isActive:P})=>Pe("div",{className:P?"transition text-xl pl-5 w-full h-fit text-zinc-800 py-3 rounded-md hover:bg-purple-700 hover:text-white hover:decoration-white underline":"transition text-xl pl-5 w-full h-fit text-zinc-800 py-3 rounded-md hover:bg-purple-700 hover:text-white decoration-white",children:"Account"})}),Pe("div",{onClick:()=>{localStorage.removeItem("Bearer"),s("/")},className:"transition text-xl pl-5 w-full h-fit text-zinc-800 py-3 rounded-md hover:bg-purple-700 hover:text-white decoration-white",children:"Logout"})]}),Pe(Bl,{to:"/"})]})]})]})})]})})}),n?At(nd.div,{initial:{opacity:0,y:-200,x:"-50%"},animate:{opacity:1,y:-100,x:"-50%"},className:" z-40 bg-white rounded-lg shadow-lg pb-8 px-3 pt-3 absolute top-1/2 left-1/2 transform",children:[Pe(Jz,{onClick:()=>i(!1),className:"text-zinc-500 h-8 w-8 transition hover:text-zinc-800 active:scale-75"}),Pe("h2",{className:"mt-6 mx-4 mb-3 font-inter text-2xl font-medium text-zinc-800",children:"Share your Wanders using this link."}),Pe("div",{className:"py-0.5 px-1 mx-4 border-gray-200 border-2 rounded-md",children:At("h1",{className:"text-xl font-inter font-normal text-zinc-500 p-4",children:["http://worldwander.justinm.dev/user/",(M=c==null?void 0:c.user)==null?void 0:M.username]})})]}):null]})};var du={},jI={},G2={},EZ={get exports(){return G2},set exports(e){G2=e}},TZ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SZ=TZ,IZ=SZ;function eN(){}function tN(){}tN.resetWarningCache=eN;var MZ=function(){function e(i,c,f,m,s,v){if(v!==IZ){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tN,resetWarningCache:eN};return n.PropTypes=n,n};EZ.exports=MZ();var AZ="Expected a function",yO=0/0,CZ="[object Symbol]",PZ=/^\s+|\s+$/g,RZ=/^[-+]0x[0-9a-f]+$/i,DZ=/^0b[01]+$/i,OZ=/^0o[0-7]+$/i,kZ=parseInt,LZ=typeof dg=="object"&&dg&&dg.Object===Object&&dg,zZ=typeof self=="object"&&self&&self.Object===Object&&self,NZ=LZ||zZ||Function("return this")(),BZ=Object.prototype,FZ=BZ.toString,UZ=Math.max,VZ=Math.min,ZE=function(){return NZ.Date.now()};function jZ(e,t,n){var i,c,f,m,s,v,E=0,I=!1,M=!1,P=!0;if(typeof e!="function")throw new TypeError(AZ);t=_O(t)||0,$2(n)&&(I=!!n.leading,M="maxWait"in n,f=M?UZ(_O(n.maxWait)||0,t):f,P="trailing"in n?!!n.trailing:P);function D(X){var te=i,J=c;return i=c=void 0,E=X,m=e.apply(J,te),m}function k(X){return E=X,s=setTimeout(G,t),I?D(X):m}function V(X){var te=X-v,J=X-E,re=t-te;return M?VZ(re,f-J):re}function H(X){var te=X-v,J=X-E;return v===void 0||te>=t||te<0||M&&J>=f}function G(){var X=ZE();if(H(X))return z(X);s=setTimeout(G,V(X))}function z(X){return s=void 0,P&&i?D(X):(i=c=void 0,m)}function N(){s!==void 0&&clearTimeout(s),E=0,i=v=c=s=void 0}function W(){return s===void 0?m:z(ZE())}function $(){var X=ZE(),te=H(X);if(i=arguments,c=this,v=X,te){if(s===void 0)return k(v);if(M)return s=setTimeout(G,t),D(v)}return s===void 0&&(s=setTimeout(G,t)),m}return $.cancel=N,$.flush=W,$}function $2(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function GZ(e){return!!e&&typeof e=="object"}function $Z(e){return typeof e=="symbol"||GZ(e)&&FZ.call(e)==CZ}function _O(e){if(typeof e=="number")return e;if($Z(e))return yO;if($2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(PZ,"");var n=DZ.test(e);return n||OZ.test(e)?kZ(e.slice(2),n?2:8):RZ.test(e)?yO:+e}var WZ=jZ,lw={};Object.defineProperty(lw,"__esModule",{value:!0});lw.compose=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return function(){for(var c=arguments.length,f=Array(c),m=0;m<c;m++)f[m]=arguments[m];n.forEach(function(s){return s&&s.apply(void 0,f)})}};lw.pick=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),c=1;c<n;c++)i[c-1]=arguments[c];return i.reduce(function(f,m){return t&&t.hasOwnProperty(m)&&(f[m]=t[m]),f},{})};Object.defineProperty(jI,"__esModule",{value:!0});var mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qZ=function(){function e(t,n){for(var i=0;i<n.length;i++){var c=n[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),HZ=ue,ZZ=GI(HZ),YZ=G2,fi=GI(YZ),XZ=WZ,QZ=GI(XZ),Rl=lw;function GI(e){return e&&e.__esModule?e:{default:e}}function KZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JZ(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function eY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var tY=function(t){return{mainText:t.main_text,secondaryText:t.secondary_text}},$I=function(e){eY(t,e);function t(n){KZ(this,t);var i=JZ(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");i.autocompleteService=new window.google.maps.places.AutocompleteService,i.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,i.setState(function(c){return c.ready?null:{ready:!0}})},i.autocompleteCallback=function(c,f){if(i.setState({loading:!1}),f!==i.autocompleteOK){i.props.onError(f,i.clearSuggestions);return}var m=i.props.highlightFirstSuggestion;i.setState({suggestions:c.map(function(s,v){return{id:s.id,description:s.description,placeId:s.place_id,active:!!(m&&v===0),index:v,formattedSuggestion:tY(s.structured_formatting),matchedSubstrings:s.matched_substrings,terms:s.terms,types:s.types}})})},i.fetchPredictions=function(){var c=i.props.value;c.length&&(i.setState({loading:!0}),i.autocompleteService.getPlacePredictions(mf({},i.props.searchOptions,{input:c}),i.autocompleteCallback))},i.clearSuggestions=function(){i.setState({suggestions:[]})},i.clearActive=function(){i.setState({suggestions:i.state.suggestions.map(function(c){return mf({},c,{active:!1})})})},i.handleSelect=function(c,f,m){i.clearSuggestions(),i.props.onSelect?i.props.onSelect(c,f,m):i.props.onChange(c)},i.getActiveSuggestion=function(){return i.state.suggestions.find(function(c){return c.active})},i.selectActiveAtIndex=function(c){var f=i.state.suggestions.find(function(m){return m.index===c}).description;i.setActiveAtIndex(c),i.props.onChange(f)},i.selectUserInputValue=function(){i.clearActive(),i.props.onChange(i.state.userInputValue)},i.handleEnterKey=function(){var c=i.getActiveSuggestion();c===void 0?i.handleSelect(i.props.value,null,null):i.handleSelect(c.description,c.placeId,c)},i.handleDownKey=function(){if(i.state.suggestions.length!==0){var c=i.getActiveSuggestion();c===void 0?i.selectActiveAtIndex(0):c.index===i.state.suggestions.length-1?i.selectUserInputValue():i.selectActiveAtIndex(c.index+1)}},i.handleUpKey=function(){if(i.state.suggestions.length!==0){var c=i.getActiveSuggestion();c===void 0?i.selectActiveAtIndex(i.state.suggestions.length-1):c.index===0?i.selectUserInputValue():i.selectActiveAtIndex(c.index-1)}},i.handleInputKeyDown=function(c){switch(c.key){case"Enter":c.preventDefault(),i.handleEnterKey();break;case"ArrowDown":c.preventDefault(),i.handleDownKey();break;case"ArrowUp":c.preventDefault(),i.handleUpKey();break;case"Escape":i.clearSuggestions();break}},i.setActiveAtIndex=function(c){i.setState({suggestions:i.state.suggestions.map(function(f,m){return m===c?mf({},f,{active:!0}):mf({},f,{active:!1})})})},i.handleInputChange=function(c){var f=c.target.value;if(i.props.onChange(f),i.setState({userInputValue:f}),!f){i.clearSuggestions();return}i.props.shouldFetchSuggestions&&i.debouncedFetchPredictions()},i.handleInputOnBlur=function(){i.mousedownOnSuggestion||i.clearSuggestions()},i.getActiveSuggestionId=function(){var c=i.getActiveSuggestion();return c?"PlacesAutocomplete__suggestion-"+c.placeId:void 0},i.getIsExpanded=function(){return i.state.suggestions.length>0},i.getInputProps=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(c.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(c.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var f={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":i.getIsExpanded(),"aria-activedescendant":i.getActiveSuggestionId(),disabled:!i.state.ready};return mf({},f,c,{onKeyDown:(0,Rl.compose)(i.handleInputKeyDown,c.onKeyDown),onBlur:(0,Rl.compose)(i.handleInputOnBlur,c.onBlur),value:i.props.value,onChange:function(s){i.handleInputChange(s)}})},i.getSuggestionItemProps=function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=i.handleSuggestionMouseEnter.bind(i,c.index),s=i.handleSuggestionClick.bind(i,c);return mf({},f,{key:c.id,id:i.getActiveSuggestionId(),role:"option",onMouseEnter:(0,Rl.compose)(m,f.onMouseEnter),onMouseLeave:(0,Rl.compose)(i.handleSuggestionMouseLeave,f.onMouseLeave),onMouseDown:(0,Rl.compose)(i.handleSuggestionMouseDown,f.onMouseDown),onMouseUp:(0,Rl.compose)(i.handleSuggestionMouseUp,f.onMouseUp),onTouchStart:(0,Rl.compose)(i.handleSuggestionTouchStart,f.onTouchStart),onTouchEnd:(0,Rl.compose)(i.handleSuggestionMouseUp,f.onTouchEnd),onClick:(0,Rl.compose)(s,f.onClick)})},i.handleSuggestionMouseEnter=function(c){i.setActiveAtIndex(c)},i.handleSuggestionMouseLeave=function(){i.mousedownOnSuggestion=!1,i.clearActive()},i.handleSuggestionMouseDown=function(c){c.preventDefault(),i.mousedownOnSuggestion=!0},i.handleSuggestionTouchStart=function(){i.mousedownOnSuggestion=!0},i.handleSuggestionMouseUp=function(){i.mousedownOnSuggestion=!1},i.handleSuggestionClick=function(c,f){f&&f.preventDefault&&f.preventDefault();var m=c.description,s=c.placeId;i.handleSelect(m,s,c),setTimeout(function(){i.mousedownOnSuggestion=!1})},i.state={loading:!1,suggestions:[],userInputValue:n.value,ready:!n.googleCallbackName},i.debouncedFetchPredictions=(0,QZ.default)(i.fetchPredictions,n.debounce),i}return qZ(t,[{key:"componentDidMount",value:function(){var i=this.props.googleCallbackName;if(i){var c=window.google&&window.google.maps&&window.google.maps.places;c?this.init():window[i]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var i=this.props.googleCallbackName;i&&window[i]&&delete window[i]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),t}(ZZ.default.Component);$I.propTypes={onChange:fi.default.func.isRequired,value:fi.default.string.isRequired,children:fi.default.func.isRequired,onError:fi.default.func,onSelect:fi.default.func,searchOptions:fi.default.shape({bounds:fi.default.object,componentRestrictions:fi.default.object,location:fi.default.object,offset:fi.default.oneOfType([fi.default.number,fi.default.string]),radius:fi.default.oneOfType([fi.default.number,fi.default.string]),types:fi.default.array}),debounce:fi.default.number,highlightFirstSuggestion:fi.default.bool,shouldFetchSuggestions:fi.default.bool,googleCallbackName:fi.default.string};$I.defaultProps={onError:function(t,n){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,t)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};jI.default=$I;var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.geocodeByAddress=function(t){var n=new window.google.maps.Geocoder,i=window.google.maps.GeocoderStatus.OK;return new Promise(function(c,f){n.geocode({address:t},function(m,s){s!==i&&f(s),c(m)})})};Gy.getLatLng=function(t){return new Promise(function(n,i){try{var c={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()};n(c)}catch(f){i(f)}})};Gy.geocodeByPlaceId=function(t){var n=new window.google.maps.Geocoder,i=window.google.maps.GeocoderStatus.OK;return new Promise(function(c,f){n.geocode({placeId:t},function(m,s){s!==i&&f(s),c(m)})})};Object.defineProperty(du,"__esModule",{value:!0});var WI=du.getLatLng=du.geocodeByPlaceId=HI=du.geocodeByAddress=void 0,nY=jI,rY=iY(nY),qI=Gy;function iY(e){return e&&e.__esModule?e:{default:e}}var HI=du.geocodeByAddress=qI.geocodeByAddress;du.geocodeByPlaceId=qI.geocodeByPlaceId;WI=du.getLatLng=qI.getLatLng;var nN=du.default=rY.default;const oY=Ug.injectEndpoints({endpoints:e=>({addNewPost:e.mutation({query:t=>({url:"/posts",method:"POST",body:t}),invalidatesTags:["Posts"]}),fetchUserPosts:e.query({query:t=>`/posts/userposts/${t}`,providesTags:["Posts"]}),fetchAllPosts:e.query({query:()=>"/posts"}),deletePost:e.mutation({query:t=>({url:`/posts/${t}`,method:"DELETE"}),invalidatesTags:["Posts"]}),deletePhoto:e.mutation({query:t=>({url:`/photos/removePhoto/${t}`,method:"DELETE"})}),likePost:e.mutation({query:({postId:t,userId:n})=>({url:`/posts/like/${t}/${n}`,method:"PATCH"}),invalidatesTags:["Posts"]})})}),{useAddNewPostMutation:sY,useFetchAllPostsQuery:Mae,useDeletePostMutation:aY,useDeletePhotoMutation:lY,useFetchUserPostsQuery:cw,useLikePostMutation:cY}=oY;/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const uY=e=>e instanceof HTMLElement,hY=(e,t=[],n=[])=>{const i={...e},c=[],f=[],m=()=>({...i}),s=()=>{const k=[...c];return c.length=0,k},v=()=>{const k=[...f];f.length=0,k.forEach(({type:V,data:H})=>{E(V,H)})},E=(k,V,H)=>{if(H&&!document.hidden){f.push({type:k,data:V});return}D[k]&&D[k](V),c.push({type:k,data:V})},I=(k,...V)=>P[k]?P[k](...V):null,M={getState:m,processActionQueue:s,processDispatchQueue:v,dispatch:E,query:I};let P={};t.forEach(k=>{P={...k(i),...P}});let D={};return n.forEach(k=>{D={...k(E,I,i),...D}}),M},dY=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},ei=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},fu=e=>{const t={};return ei(e,n=>{dY(t,n,e[n])}),t},yi=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},fY="http://www.w3.org/2000/svg",pY=["svg","path"],vO=e=>pY.includes(e),q1=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const i=vO(e)?document.createElementNS(fY,e):document.createElement(e);return t&&(vO(e)?yi(i,"class",t):i.className=t),ei(n,(c,f)=>{yi(i,c,f)}),i},mY=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},gY=(e,t)=>(n,i)=>(typeof i<"u"?t.splice(i,0,n):t.push(n),n),yY=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),_Y=(()=>typeof window<"u"&&typeof window.document<"u")(),rN=()=>_Y,vY=rN()?q1("svg"):{},xY="children"in vY?e=>e.children.length:e=>e.childNodes.length,iN=(e,t,n,i)=>{const c=n[0]||e.left,f=n[1]||e.top,m=c+e.width,s=f+e.height*(i[1]||1),v={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:c,top:f,right:m,bottom:s}};return t.filter(E=>!E.isRectIgnored()).map(E=>E.rect).forEach(E=>{xO(v.inner,{...E.inner}),xO(v.outer,{...E.outer})}),wO(v.inner),v.outer.bottom+=v.element.marginBottom,v.outer.right+=v.element.marginRight,wO(v.outer),v},xO=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},wO=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Uh=e=>typeof e=="number",wY=(e,t,n,i=.001)=>Math.abs(e-t)<i&&Math.abs(n)<i,bY=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let i=null,c=null,f=0,m=!1;const E=fu({interpolate:(I,M)=>{if(m)return;if(!(Uh(i)&&Uh(c))){m=!0,f=0;return}const P=-(c-i)*e;f+=P/n,c+=f,f*=t,wY(c,i,f)||M?(c=i,f=0,m=!0,E.onupdate(c),E.oncomplete(c)):E.onupdate(c)},target:{set:I=>{if(Uh(I)&&!Uh(c)&&(c=I),i===null&&(i=I,c=I),i=I,c===i||typeof i>"u"){m=!0,f=0,E.onupdate(c),E.oncomplete(c);return}m=!1},get:()=>i},resting:{get:()=>m},onupdate:I=>{},oncomplete:I=>{}});return E},EY=e=>e<.5?2*e*e:-1+(4-2*e)*e,TY=({duration:e=500,easing:t=EY,delay:n=0}={})=>{let i=null,c,f,m=!0,s=!1,v=null;const I=fu({interpolate:(M,P)=>{m||v===null||(i===null&&(i=M),!(M-i<n)&&(c=M-i-n,c>=e||P?(c=1,f=s?0:1,I.onupdate(f*v),I.oncomplete(f*v),m=!0):(f=c/e,I.onupdate((c>=0?t(s?1-f:f):0)*v))))},target:{get:()=>s?0:v,set:M=>{if(v===null){v=M,I.onupdate(M),I.oncomplete(M);return}M<v?(v=1,s=!0):(s=!1,v=M),m=!1,i=null}},resting:{get:()=>m},onupdate:M=>{},oncomplete:M=>{}});return I},bO={spring:bY,tween:TY},SY=(e,t,n)=>{const i=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,c=typeof i=="string"?i:i.type,f=typeof i=="object"?{...i}:{};return bO[c]?bO[c](f):null},ZI=(e,t,n,i=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(c=>{e.forEach(f=>{let m=f,s=()=>n[f],v=E=>n[f]=E;typeof f=="object"&&(m=f.key,s=f.getter||s,v=f.setter||v),!(c[m]&&!i)&&(c[m]={get:s,set:v})})})},IY=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i})=>{const c={...t},f=[];return ei(e,(m,s)=>{const v=SY(s);if(!v)return;v.onupdate=I=>{t[m]=I},v.target=c[m],ZI([{key:m,setter:I=>{v.target!==I&&(v.target=I)},getter:()=>t[m]}],[n,i],t,!0),f.push(v)}),{write:m=>{let s=document.hidden,v=!0;return f.forEach(E=>{E.resting||(v=!1),E.interpolate(m,s)}),v},destroy:()=>{}}},MY=e=>(t,n)=>{e.addEventListener(t,n)},AY=e=>(t,n)=>{e.removeEventListener(t,n)},CY=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i,viewState:c,view:f})=>{const m=[],s=MY(f.element),v=AY(f.element);return i.on=(E,I)=>{m.push({type:E,fn:I}),s(E,I)},i.off=(E,I)=>{m.splice(m.findIndex(M=>M.type===E&&M.fn===I),1),v(E,I)},{write:()=>!0,destroy:()=>{m.forEach(E=>{v(E.type,E.fn)})}}},PY=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{ZI(e,n,t)},wo=e=>e!=null,RY={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},DY=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:i,view:c})=>{const f={...t},m={};ZI(e,[n,i],t);const s=()=>[t.translateX||0,t.translateY||0],v=()=>[t.scaleX||0,t.scaleY||0],E=()=>c.rect?iN(c.rect,c.childViews,s(),v()):null;return n.rect={get:E},i.rect={get:E},e.forEach(I=>{t[I]=typeof f[I]>"u"?RY[I]:f[I]}),{write:()=>{if(OY(m,t))return kY(c.element,t),Object.assign(m,{...t}),!0},destroy:()=>{}}},OY=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},kY=(e,{opacity:t,perspective:n,translateX:i,translateY:c,scaleX:f,scaleY:m,rotateX:s,rotateY:v,rotateZ:E,originX:I,originY:M,width:P,height:D})=>{let k="",V="";(wo(I)||wo(M))&&(V+=`transform-origin: ${I||0}px ${M||0}px;`),wo(n)&&(k+=`perspective(${n}px) `),(wo(i)||wo(c))&&(k+=`translate3d(${i||0}px, ${c||0}px, 0) `),(wo(f)||wo(m))&&(k+=`scale3d(${wo(f)?f:1}, ${wo(m)?m:1}, 1) `),wo(E)&&(k+=`rotateZ(${E}rad) `),wo(s)&&(k+=`rotateX(${s}rad) `),wo(v)&&(k+=`rotateY(${v}rad) `),k.length&&(V+=`transform:${k};`),wo(t)&&(V+=`opacity:${t};`,t===0&&(V+="visibility:hidden;"),t<1&&(V+="pointer-events:none;")),wo(D)&&(V+=`height:${D}px;`),wo(P)&&(V+=`width:${P}px;`);const H=e.elementCurrentStyle||"";(V.length!==H.length||V!==H)&&(e.style.cssText=V,e.elementCurrentStyle=V)},LY={styles:DY,listeners:CY,animations:IY,apis:PY},EO=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),_i=({tag:e="div",name:t=null,attributes:n={},read:i=()=>{},write:c=()=>{},create:f=()=>{},destroy:m=()=>{},filterFrameActionsForChild:s=(D,k)=>k,didCreateView:v=()=>{},didWriteView:E=()=>{},ignoreRect:I=!1,ignoreRectUpdate:M=!1,mixins:P=[]}={})=>(D,k={})=>{const V=q1(e,`filepond--${t}`,n),H=window.getComputedStyle(V,null),G=EO();let z=null,N=!1;const W=[],$=[],X={},te={},J=[c],re=[i],ce=[m],Ee=()=>V,Me=()=>W.concat(),Le=()=>X,Ae=ft=>(Ot,an)=>Ot(ft,an),Oe=()=>z||(z=iN(G,W,[0,0],[1,1]),z),ke=()=>H,je=()=>{z=null,W.forEach(an=>an._read()),!(M&&G.width&&G.height)&&EO(G,V,H);const Ot={root:bt,props:k,rect:G};re.forEach(an=>an(Ot))},De=(ft,Ot,an)=>{let pn=Ot.length===0;return J.forEach(Vt=>{Vt({props:k,root:bt,actions:Ot,timestamp:ft,shouldOptimize:an})===!1&&(pn=!1)}),$.forEach(Vt=>{Vt.write(ft)===!1&&(pn=!1)}),W.filter(Vt=>!!Vt.element.parentNode).forEach(Vt=>{Vt._write(ft,s(Vt,Ot),an)||(pn=!1)}),W.forEach((Vt,Mn)=>{Vt.element.parentNode||(bt.appendChild(Vt.element,Mn),Vt._read(),Vt._write(ft,s(Vt,Ot),an),pn=!1)}),N=pn,E({props:k,root:bt,actions:Ot,timestamp:ft}),pn},Be=()=>{$.forEach(ft=>ft.destroy()),ce.forEach(ft=>{ft({root:bt,props:k})}),W.forEach(ft=>ft._destroy())},He={element:{get:Ee},style:{get:ke},childViews:{get:Me}},tt={...He,rect:{get:Oe},ref:{get:Le},is:ft=>t===ft,appendChild:mY(V),createChildView:Ae(D),linkView:ft=>(W.push(ft),ft),unlinkView:ft=>{W.splice(W.indexOf(ft),1)},appendChildView:gY(V,W),removeChildView:yY(V,W),registerWriter:ft=>J.push(ft),registerReader:ft=>re.push(ft),registerDestroyer:ft=>ce.push(ft),invalidateLayout:()=>V.layoutCalculated=!1,dispatch:D.dispatch,query:D.query},Mt={element:{get:Ee},childViews:{get:Me},rect:{get:Oe},resting:{get:()=>N},isRectIgnored:()=>I,_read:je,_write:De,_destroy:Be},Dt={...He,rect:{get:()=>G}};Object.keys(P).sort((ft,Ot)=>ft==="styles"?1:Ot==="styles"?-1:0).forEach(ft=>{const Ot=LY[ft]({mixinConfig:P[ft],viewProps:k,viewState:te,viewInternalAPI:tt,viewExternalAPI:Mt,view:fu(Dt)});Ot&&$.push(Ot)});const bt=fu(tt);f({root:bt,props:k});const Nt=xY(V);return W.forEach((ft,Ot)=>{bt.appendChild(ft.element,Nt+Ot)}),v(bt),fu(Mt)},zY=(e,t,n=60)=>{const i="__framePainter";if(window[i]){window[i].readers.push(e),window[i].writers.push(t);return}window[i]={readers:[e],writers:[t]};const c=window[i],f=1e3/n;let m=null,s=null,v=null,E=null;const I=()=>{document.hidden?(v=()=>window.setTimeout(()=>M(performance.now()),f),E=()=>window.clearTimeout(s)):(v=()=>window.requestAnimationFrame(M),E=()=>window.cancelAnimationFrame(s))};document.addEventListener("visibilitychange",()=>{E&&E(),I(),M(performance.now())});const M=P=>{s=v(M),m||(m=P);const D=P-m;D<=f||(m=P-D%f,c.readers.forEach(k=>k()),c.writers.forEach(k=>k(P)))};return I(),M(performance.now()),{pause:()=>{E(s)}}},Co=(e,t)=>({root:n,props:i,actions:c=[],timestamp:f,shouldOptimize:m})=>{c.filter(s=>e[s.type]).forEach(s=>e[s.type]({root:n,props:i,action:s.data,timestamp:f,shouldOptimize:m})),t&&t({root:n,props:i,actions:c,timestamp:f,shouldOptimize:m})},TO=(e,t)=>t.parentNode.insertBefore(e,t),SO=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),uw=e=>Array.isArray(e),Kl=e=>e==null,NY=e=>e.trim(),hw=e=>""+e,BY=(e,t=",")=>Kl(e)?[]:uw(e)?e:hw(e).split(t).map(NY).filter(n=>n.length),oN=e=>typeof e=="boolean",sN=e=>oN(e)?e:e==="true",Io=e=>typeof e=="string",aN=e=>Uh(e)?e:Io(e)?hw(e).replace(/[a-z]+/gi,""):0,Hv=e=>parseInt(aN(e),10),IO=e=>parseFloat(aN(e)),wp=e=>Uh(e)&&isFinite(e)&&Math.floor(e)===e,MO=(e,t=1e3)=>{if(wp(e))return e;let n=hw(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),Hv(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),Hv(n)*t):Hv(n)},Vh=e=>typeof e=="function",FY=e=>{let t=self,n=e.split("."),i=null;for(;i=n.shift();)if(t=t[i],!t)return null;return t},AO={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},UY=e=>{const t={};return t.url=Io(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},ei(AO,n=>{t[n]=VY(n,e[n],AO[n],t.timeout,t.headers)}),t.process=e.process||Io(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},VY=(e,t,n,i,c)=>{if(t===null)return null;if(typeof t=="function")return t;const f={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:c,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(Io(t))return f.url=t,f;if(Object.assign(f,t),Io(f.headers)){const m=f.headers.split(/:(.+)/);f.headers={header:m[0],value:m[1]}}return f.withCredentials=sN(f.withCredentials),f},jY=e=>UY(e),GY=e=>e===null,Ni=e=>typeof e=="object"&&e!==null,$Y=e=>Ni(e)&&Io(e.url)&&Ni(e.process)&&Ni(e.revert)&&Ni(e.restore)&&Ni(e.fetch),W2=e=>uw(e)?"array":GY(e)?"null":wp(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":$Y(e)?"api":typeof e,WY=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),qY={array:BY,boolean:sN,int:e=>W2(e)==="bytes"?MO(e):Hv(e),number:IO,float:IO,bytes:MO,string:e=>Vh(e)?e:hw(e),function:e=>FY(e),serverapi:jY,object:e=>{try{return JSON.parse(WY(e))}catch{return null}}},HY=(e,t)=>qY[t](e),lN=(e,t,n)=>{if(e===t)return e;let i=W2(e);if(i!==n){const c=HY(e,n);if(i=W2(c),c===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=c}return e},ZY=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:i=>{n=lN(i,e,t)}}},YY=e=>{const t={};return ei(e,n=>{const i=e[n];t[n]=ZY(i[0],i[1])}),fu(t)},XY=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:YY(e)}),dw=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),QY=(e,t)=>{const n={};return ei(t,i=>{n[i]={get:()=>e.getState().options[i],set:c=>{e.dispatch(`SET_${dw(i,"_").toUpperCase()}`,{value:c})}}}),n},KY=e=>(t,n,i)=>{const c={};return ei(e,f=>{const m=dw(f,"_").toUpperCase();c[`SET_${m}`]=s=>{try{i.options[f]=s.value}catch{}t(`DID_SET_${m}`,{value:i.options[f]})}}),c},JY=e=>t=>{const n={};return ei(e,i=>{n[`GET_${dw(i,"_").toUpperCase()}`]=c=>t.options[i]}),n},zs={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},YI=()=>Math.random().toString(36).substring(2,11),XI=(e,t)=>e.splice(t,1),eX=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},fw=()=>{const e=[],t=(i,c)=>{XI(e,e.findIndex(f=>f.event===i&&(f.cb===c||!c)))},n=(i,c,f)=>{e.filter(m=>m.event===i).map(m=>m.cb).forEach(m=>eX(()=>m(...c),f))};return{fireSync:(i,...c)=>{n(i,c,!0)},fire:(i,...c)=>{n(i,c,!1)},on:(i,c)=>{e.push({event:i,cb:c})},onOnce:(i,c)=>{e.push({event:i,cb:(...f)=>{t(i,c),c(...f)}})},off:t}},cN=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(i=>!n.includes(i)).forEach(i=>Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i)))},tX=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Go=e=>{const t={};return cN(e,t,tX),t},nX=e=>{e.forEach((t,n)=>{t.released&&XI(e,n)})},In={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Li={INPUT:1,LIMBO:2,LOCAL:3},uN=e=>/[^0-9]+/.exec(e),hN=()=>uN(1.1.toLocaleString())[0],rX=()=>{const e=hN(),t=1e3.toLocaleString(),n=1e3.toString();return t!==n?uN(t)[0]:e==="."?",":"."},xt={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},QI=[],la=(e,t,n)=>new Promise((i,c)=>{const f=QI.filter(s=>s.key===e).map(s=>s.cb);if(f.length===0){i(t);return}const m=f.shift();f.reduce((s,v)=>s.then(E=>v(E,n)),m(t,n)).then(s=>i(s)).catch(s=>c(s))}),ld=(e,t,n)=>QI.filter(i=>i.key===e).map(i=>i.cb(t,n)),iX=(e,t)=>QI.push({key:e,cb:t}),oX=e=>Object.assign(zf,e),H1=()=>({...zf}),sX=e=>{ei(e,(t,n)=>{zf[t]&&(zf[t][0]=lN(n,zf[t][0],zf[t][1]))})},zf={id:[null,xt.STRING],name:["filepond",xt.STRING],disabled:[!1,xt.BOOLEAN],className:[null,xt.STRING],required:[!1,xt.BOOLEAN],captureMethod:[null,xt.STRING],allowSyncAcceptAttribute:[!0,xt.BOOLEAN],allowDrop:[!0,xt.BOOLEAN],allowBrowse:[!0,xt.BOOLEAN],allowPaste:[!0,xt.BOOLEAN],allowMultiple:[!1,xt.BOOLEAN],allowReplace:[!0,xt.BOOLEAN],allowRevert:[!0,xt.BOOLEAN],allowRemove:[!0,xt.BOOLEAN],allowProcess:[!0,xt.BOOLEAN],allowReorder:[!1,xt.BOOLEAN],allowDirectoriesOnly:[!1,xt.BOOLEAN],storeAsFile:[!1,xt.BOOLEAN],forceRevert:[!1,xt.BOOLEAN],maxFiles:[null,xt.INT],checkValidity:[!1,xt.BOOLEAN],itemInsertLocationFreedom:[!0,xt.BOOLEAN],itemInsertLocation:["before",xt.STRING],itemInsertInterval:[75,xt.INT],dropOnPage:[!1,xt.BOOLEAN],dropOnElement:[!0,xt.BOOLEAN],dropValidation:[!1,xt.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],xt.ARRAY],instantUpload:[!0,xt.BOOLEAN],maxParallelUploads:[2,xt.INT],allowMinimumUploadDuration:[!0,xt.BOOLEAN],chunkUploads:[!1,xt.BOOLEAN],chunkForce:[!1,xt.BOOLEAN],chunkSize:[5e6,xt.INT],chunkRetryDelays:[[500,1e3,3e3],xt.ARRAY],server:[null,xt.SERVER_API],fileSizeBase:[1e3,xt.INT],labelFileSizeBytes:["bytes",xt.STRING],labelFileSizeKilobytes:["KB",xt.STRING],labelFileSizeMegabytes:["MB",xt.STRING],labelFileSizeGigabytes:["GB",xt.STRING],labelDecimalSeparator:[hN(),xt.STRING],labelThousandsSeparator:[rX(),xt.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',xt.STRING],labelInvalidField:["Field contains invalid files",xt.STRING],labelFileWaitingForSize:["Waiting for size",xt.STRING],labelFileSizeNotAvailable:["Size not available",xt.STRING],labelFileCountSingular:["file in list",xt.STRING],labelFileCountPlural:["files in list",xt.STRING],labelFileLoading:["Loading",xt.STRING],labelFileAdded:["Added",xt.STRING],labelFileLoadError:["Error during load",xt.STRING],labelFileRemoved:["Removed",xt.STRING],labelFileRemoveError:["Error during remove",xt.STRING],labelFileProcessing:["Uploading",xt.STRING],labelFileProcessingComplete:["Upload complete",xt.STRING],labelFileProcessingAborted:["Upload cancelled",xt.STRING],labelFileProcessingError:["Error during upload",xt.STRING],labelFileProcessingRevertError:["Error during revert",xt.STRING],labelTapToCancel:["tap to cancel",xt.STRING],labelTapToRetry:["tap to retry",xt.STRING],labelTapToUndo:["tap to undo",xt.STRING],labelButtonRemoveItem:["Remove",xt.STRING],labelButtonAbortItemLoad:["Abort",xt.STRING],labelButtonRetryItemLoad:["Retry",xt.STRING],labelButtonAbortItemProcessing:["Cancel",xt.STRING],labelButtonUndoItemProcessing:["Undo",xt.STRING],labelButtonRetryItemProcessing:["Retry",xt.STRING],labelButtonProcessItem:["Upload",xt.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',xt.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',xt.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',xt.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',xt.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',xt.STRING],oninit:[null,xt.FUNCTION],onwarning:[null,xt.FUNCTION],onerror:[null,xt.FUNCTION],onactivatefile:[null,xt.FUNCTION],oninitfile:[null,xt.FUNCTION],onaddfilestart:[null,xt.FUNCTION],onaddfileprogress:[null,xt.FUNCTION],onaddfile:[null,xt.FUNCTION],onprocessfilestart:[null,xt.FUNCTION],onprocessfileprogress:[null,xt.FUNCTION],onprocessfileabort:[null,xt.FUNCTION],onprocessfilerevert:[null,xt.FUNCTION],onprocessfile:[null,xt.FUNCTION],onprocessfiles:[null,xt.FUNCTION],onremovefile:[null,xt.FUNCTION],onpreparefile:[null,xt.FUNCTION],onupdatefiles:[null,xt.FUNCTION],onreorderfiles:[null,xt.FUNCTION],beforeDropFile:[null,xt.FUNCTION],beforeAddFile:[null,xt.FUNCTION],beforeRemoveFile:[null,xt.FUNCTION],beforePrepareFile:[null,xt.FUNCTION],stylePanelLayout:[null,xt.STRING],stylePanelAspectRatio:[null,xt.STRING],styleItemPanelAspectRatio:[null,xt.STRING],styleButtonRemoveItemPosition:["left",xt.STRING],styleButtonProcessItemPosition:["right",xt.STRING],styleLoadIndicatorPosition:["right",xt.STRING],styleProgressIndicatorPosition:["right",xt.STRING],styleButtonRemoveItemAlign:[!1,xt.BOOLEAN],files:[[],xt.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],xt.ARRAY]},jh=(e,t)=>Kl(t)?e[0]||null:wp(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),dN=e=>{if(Kl(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},ua=e=>e.filter(t=>!t.archived),aX={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let tv=null;const lX=()=>{if(tv===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,tv=t.files.length===1}catch{tv=!1}return tv},cX=[In.LOAD_ERROR,In.PROCESSING_ERROR,In.PROCESSING_REVERT_ERROR],uX=[In.LOADING,In.PROCESSING,In.PROCESSING_QUEUED,In.INIT],hX=[In.PROCESSING_COMPLETE],dX=e=>cX.includes(e.status),fX=e=>uX.includes(e.status),pX=e=>hX.includes(e.status),CO=e=>Ni(e.options.server)&&(Ni(e.options.server.process)||Vh(e.options.server.process)),mX=e=>({GET_STATUS:()=>{const t=ua(e.items),{EMPTY:n,ERROR:i,BUSY:c,IDLE:f,READY:m}=aX;return t.length===0?n:t.some(dX)?i:t.some(fX)?c:t.some(pX)?m:f},GET_ITEM:t=>jh(e.items,t),GET_ACTIVE_ITEM:t=>jh(ua(e.items),t),GET_ACTIVE_ITEMS:()=>ua(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=jh(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=jh(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:dN(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>ua(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>ua(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&lX()&&!CO(e),IS_ASYNC:()=>CO(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),gX=e=>{const t=ua(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},fN=(e,t,n)=>Math.max(Math.min(n,e),t),yX=(e,t,n)=>e.splice(t,0,n),_X=(e,t,n)=>Kl(t)?null:typeof n>"u"?(e.push(t),t):(n=fN(n,0,e.length),yX(e,n,t),t),q2=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),$y=e=>e.split("/").pop().split("?").shift(),pw=e=>e.split(".").pop(),vX=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},sg=(e,t="")=>(t+e).slice(-t.length),pN=(e=new Date)=>`${e.getFullYear()}-${sg(e.getMonth()+1,"00")}-${sg(e.getDate(),"00")}_${sg(e.getHours(),"00")}-${sg(e.getMinutes(),"00")}-${sg(e.getSeconds(),"00")}`,hp=(e,t,n=null,i=null)=>{const c=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return c.lastModifiedDate=new Date,e._relativePath&&(c._relativePath=e._relativePath),Io(t)||(t=pN()),t&&i===null&&pw(t)?c.name=t:(i=i||vX(c.type),c.name=t+(i?"."+i:"")),c},xX=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,mN=(e,t)=>{const n=xX();if(n){const i=new n;return i.append(e),i.getBlob(t)}return new Blob([e],{type:t})},wX=(e,t)=>{const n=new ArrayBuffer(e.length),i=new Uint8Array(n);for(let c=0;c<e.length;c++)i[c]=e.charCodeAt(c);return mN(n,t)},gN=e=>(/^data:(.+);/.exec(e)||[])[1]||null,bX=e=>e.split(",")[1].replace(/\s/g,""),EX=e=>atob(bX(e)),TX=e=>{const t=gN(e),n=EX(e);return wX(n,t)},SX=(e,t,n)=>hp(TX(e),t,null,n),IX=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},MX=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},AX=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,KI=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let i of n){const c=IX(i);if(c){t.name=c;continue}const f=MX(i);if(f){t.size=f;continue}const m=AX(i);if(m){t.source=m;continue}}return t},CX=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,i=()=>{t.request&&t.request.abort&&t.request.abort()},c=()=>{const s=t.source;m.fire("init",s),s instanceof File?m.fire("load",s):s instanceof Blob?m.fire("load",hp(s,s.name)):q2(s)?m.fire("load",SX(s)):f(s)},f=s=>{if(!e){m.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(s,v=>{t.duration=Date.now()-t.timestamp,t.complete=!0,v instanceof Blob&&(v=hp(v,v.name||$y(s))),m.fire("load",v instanceof Blob?v:v?v.body:null)},v=>{m.fire("error",typeof v=="string"?{type:"error",code:0,body:v}:v)},(v,E,I)=>{if(I&&(t.size=I),t.duration=Date.now()-t.timestamp,!v){t.progress=null;return}t.progress=E/I,m.fire("progress",t.progress)},()=>{m.fire("abort")},v=>{const E=KI(typeof v=="string"?v:v.headers);m.fire("meta",{size:t.size||E.size,filename:E.name,source:E.source})})},m={...fw(),setSource:s=>t.source=s,getProgress:n,abort:i,load:c};return m},PO=e=>/GET|HEAD/.test(e),qh=(e,t,n)=>{const i={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{c=!0,m.abort()}};let c=!1,f=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),PO(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const m=new XMLHttpRequest,s=PO(n.method)?m:m.upload;return s.onprogress=v=>{c||i.onprogress(v.lengthComputable,v.loaded,v.total)},m.onreadystatechange=()=>{m.readyState<2||m.readyState===4&&m.status===0||f||(f=!0,i.onheaders(m))},m.onload=()=>{m.status>=200&&m.status<300?i.onload(m):i.onerror(m)},m.onerror=()=>i.onerror(m),m.onabort=()=>{c=!0,i.onabort()},m.ontimeout=()=>i.ontimeout(m),m.open(n.method,t,!0),wp(n.timeout)&&(m.timeout=n.timeout),Object.keys(n.headers).forEach(v=>{const E=unescape(encodeURIComponent(n.headers[v]));m.setRequestHeader(v,E)}),n.responseType&&(m.responseType=n.responseType),n.withCredentials&&(m.withCredentials=!0),m.send(e),i},li=(e,t,n,i)=>({type:e,code:t,body:n,headers:i}),Hh=e=>t=>{e(li("error",0,"Timeout",t.getAllResponseHeaders()))},RO=e=>/\?/.test(e),Vg=(...e)=>{let t="";return e.forEach(n=>{t+=RO(t)&&RO(n)?n.replace(/\?/,"&"):n}),t},YE=(e="",t)=>{if(typeof t=="function")return t;if(!t||!Io(t.url))return null;const n=t.onload||(c=>c),i=t.onerror||(c=>null);return(c,f,m,s,v,E)=>{const I=qh(c,Vg(e,t.url),{...t,responseType:"blob"});return I.onload=M=>{const P=M.getAllResponseHeaders(),D=KI(P).name||$y(c);f(li("load",M.status,t.method==="HEAD"?null:hp(n(M.response),D),P))},I.onerror=M=>{m(li("error",M.status,i(M.response)||M.statusText,M.getAllResponseHeaders()))},I.onheaders=M=>{E(li("headers",M.status,null,M.getAllResponseHeaders()))},I.ontimeout=Hh(m),I.onprogress=s,I.onabort=v,I}},Ms={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},PX=(e,t,n,i,c,f,m,s,v,E,I)=>{const M=[],{chunkTransferId:P,chunkServer:D,chunkSize:k,chunkRetryDelays:V}=I,H={serverId:P,aborted:!1},G=t.ondata||(Ae=>Ae),z=t.onload||((Ae,Oe)=>Oe==="HEAD"?Ae.getResponseHeader("Upload-Offset"):Ae.response),N=t.onerror||(Ae=>null),W=Ae=>{const Oe=new FormData;Ni(c)&&Oe.append(n,JSON.stringify(c));const ke=typeof t.headers=="function"?t.headers(i,c):{...t.headers,"Upload-Length":i.size},je={...t,headers:ke},De=qh(G(Oe),Vg(e,t.url),je);De.onload=Be=>Ae(z(Be,je.method)),De.onerror=Be=>m(li("error",Be.status,N(Be.response)||Be.statusText,Be.getAllResponseHeaders())),De.ontimeout=Hh(m)},$=Ae=>{const Oe=Vg(e,D.url,H.serverId),je={headers:typeof t.headers=="function"?t.headers(H.serverId):{...t.headers},method:"HEAD"},De=qh(null,Oe,je);De.onload=Be=>Ae(z(Be,je.method)),De.onerror=Be=>m(li("error",Be.status,N(Be.response)||Be.statusText,Be.getAllResponseHeaders())),De.ontimeout=Hh(m)},X=Math.floor(i.size/k);for(let Ae=0;Ae<=X;Ae++){const Oe=Ae*k,ke=i.slice(Oe,Oe+k,"application/offset+octet-stream");M[Ae]={index:Ae,size:ke.size,offset:Oe,data:ke,file:i,progress:0,retries:[...V],status:Ms.QUEUED,error:null,request:null,timeout:null}}const te=()=>f(H.serverId),J=Ae=>Ae.status===Ms.QUEUED||Ae.status===Ms.ERROR,re=Ae=>{if(H.aborted)return;if(Ae=Ae||M.find(J),!Ae){M.every(He=>He.status===Ms.COMPLETE)&&te();return}Ae.status=Ms.PROCESSING,Ae.progress=null;const Oe=D.ondata||(He=>He),ke=D.onerror||(He=>null),je=Vg(e,D.url,H.serverId),De=typeof D.headers=="function"?D.headers(Ae):{...D.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":Ae.offset,"Upload-Length":i.size,"Upload-Name":i.name},Be=Ae.request=qh(Oe(Ae.data),je,{...D,headers:De});Be.onload=()=>{Ae.status=Ms.COMPLETE,Ae.request=null,Me()},Be.onprogress=(He,tt,Mt)=>{Ae.progress=He?tt:null,Ee()},Be.onerror=He=>{Ae.status=Ms.ERROR,Ae.request=null,Ae.error=ke(He.response)||He.statusText,ce(Ae)||m(li("error",He.status,ke(He.response)||He.statusText,He.getAllResponseHeaders()))},Be.ontimeout=He=>{Ae.status=Ms.ERROR,Ae.request=null,ce(Ae)||Hh(m)(He)},Be.onabort=()=>{Ae.status=Ms.QUEUED,Ae.request=null,v()}},ce=Ae=>Ae.retries.length===0?!1:(Ae.status=Ms.WAITING,clearTimeout(Ae.timeout),Ae.timeout=setTimeout(()=>{re(Ae)},Ae.retries.shift()),!0),Ee=()=>{const Ae=M.reduce((ke,je)=>ke===null||je.progress===null?null:ke+je.progress,0);if(Ae===null)return s(!1,0,0);const Oe=M.reduce((ke,je)=>ke+je.size,0);s(!0,Ae,Oe)},Me=()=>{M.filter(Oe=>Oe.status===Ms.PROCESSING).length>=1||re()},Le=()=>{M.forEach(Ae=>{clearTimeout(Ae.timeout),Ae.request&&Ae.request.abort()})};return H.serverId?$(Ae=>{H.aborted||(M.filter(Oe=>Oe.offset<Ae).forEach(Oe=>{Oe.status=Ms.COMPLETE,Oe.progress=Oe.size}),Me())}):W(Ae=>{H.aborted||(E(Ae),H.serverId=Ae,Me())}),{abort:()=>{H.aborted=!0,Le()}}},RX=(e,t,n,i)=>(c,f,m,s,v,E,I)=>{if(!c)return;const M=i.chunkUploads,P=M&&c.size>i.chunkSize,D=M&&(P||i.chunkForce);if(c instanceof Blob&&D)return PX(e,t,n,c,f,m,s,v,E,I,i);const k=t.ondata||($=>$),V=t.onload||($=>$),H=t.onerror||($=>null),G=typeof t.headers=="function"?t.headers(c,f)||{}:{...t.headers},z={...t,headers:G};var N=new FormData;Ni(f)&&N.append(n,JSON.stringify(f)),(c instanceof Blob?[{name:null,file:c}]:c).forEach($=>{N.append(n,$.file,$.name===null?$.file.name:`${$.name}${$.file.name}`)});const W=qh(k(N),Vg(e,t.url),z);return W.onload=$=>{m(li("load",$.status,V($.response),$.getAllResponseHeaders()))},W.onerror=$=>{s(li("error",$.status,H($.response)||$.statusText,$.getAllResponseHeaders()))},W.ontimeout=Hh(s),W.onprogress=v,W.onabort=E,W},DX=(e="",t,n,i)=>typeof t=="function"?(...c)=>t(n,...c,i):!t||!Io(t.url)?null:RX(e,t,n,i),ag=(e="",t)=>{if(typeof t=="function")return t;if(!t||!Io(t.url))return(c,f)=>f();const n=t.onload||(c=>c),i=t.onerror||(c=>null);return(c,f,m)=>{const s=qh(c,e+t.url,t);return s.onload=v=>{f(li("load",v.status,n(v.response),v.getAllResponseHeaders()))},s.onerror=v=>{m(li("error",v.status,i(v.response)||v.statusText,v.getAllResponseHeaders()))},s.ontimeout=Hh(m),s}},yN=(e=0,t=1)=>e+Math.random()*(t-e),OX=(e,t=1e3,n=0,i=25,c=250)=>{let f=null;const m=Date.now(),s=()=>{let v=Date.now()-m,E=yN(i,c);v+E>t&&(E=v+E-t);let I=v/t;if(I>=1||document.hidden){e(1);return}e(I),f=setTimeout(s,E)};return t>0&&s(),{clear:()=>{clearTimeout(f)}}},kX=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:i}=t,c=(I,M)=>{const P=()=>{n.duration===0||n.progress===null||E.fire("progress",E.getProgress())},D=()=>{n.complete=!0,E.fire("load-perceived",n.response.body)};E.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=OX(k=>{n.perceivedProgress=k,n.perceivedDuration=Date.now()-n.timestamp,P(),n.response&&n.perceivedProgress===1&&!n.complete&&D()},i?yN(750,1500):0),n.request=e(I,M,k=>{n.response=Ni(k)?k:{type:"load",code:200,body:`${k}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,E.fire("load",n.response.body),(!i||i&&n.perceivedProgress===1)&&D()},k=>{n.perceivedPerformanceUpdater.clear(),E.fire("error",Ni(k)?k:{type:"error",code:0,body:`${k}`})},(k,V,H)=>{n.duration=Date.now()-n.timestamp,n.progress=k?V/H:null,P()},()=>{n.perceivedPerformanceUpdater.clear(),E.fire("abort",n.response?n.response.body:null)},k=>{E.fire("transfer",k)})},f=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},m=()=>{f(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},s=i?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,v=i?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,E={...fw(),process:c,abort:f,getProgress:s,getDuration:v,reset:m};return E},_N=e=>e.substring(0,e.lastIndexOf("."))||e,LX=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||q2(e)?t[0]=e.name||pN():q2(e)?(t[1]=e.length,t[2]=gN(e)):Io(e)&&(t[0]=$y(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},dp=e=>!!(e instanceof File||e instanceof Blob&&e.name),vN=e=>{if(!Ni(e))return e;const t=uw(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n];t[n]=i&&Ni(i)?vN(i):i}return t},zX=(e=null,t=null,n=null)=>{const i=YI(),c={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?In.PROCESSING_COMPLETE:In.INIT,activeLoader:null,activeProcessor:null};let f=null;const m={},s=J=>c.status=J,v=(J,...re)=>{c.released||c.frozen||X.fire(J,...re)},E=()=>pw(c.file.name),I=()=>c.file.type,M=()=>c.file.size,P=()=>c.file,D=(J,re,ce)=>{if(c.source=J,X.fireSync("init"),c.file){X.fireSync("load-skip");return}c.file=LX(J),re.on("init",()=>{v("load-init")}),re.on("meta",Ee=>{c.file.size=Ee.size,c.file.filename=Ee.filename,Ee.source&&(e=Li.LIMBO,c.serverFileReference=Ee.source,c.status=In.PROCESSING_COMPLETE),v("load-meta")}),re.on("progress",Ee=>{s(In.LOADING),v("load-progress",Ee)}),re.on("error",Ee=>{s(In.LOAD_ERROR),v("load-request-error",Ee)}),re.on("abort",()=>{s(In.INIT),v("load-abort")}),re.on("load",Ee=>{c.activeLoader=null;const Me=Ae=>{c.file=dp(Ae)?Ae:c.file,e===Li.LIMBO&&c.serverFileReference?s(In.PROCESSING_COMPLETE):s(In.IDLE),v("load")},Le=Ae=>{c.file=Ee,v("load-meta"),s(In.LOAD_ERROR),v("load-file-error",Ae)};if(c.serverFileReference){Me(Ee);return}ce(Ee,Me,Le)}),re.setSource(J),c.activeLoader=re,re.load()},k=()=>{c.activeLoader&&c.activeLoader.load()},V=()=>{if(c.activeLoader){c.activeLoader.abort();return}s(In.INIT),v("load-abort")},H=(J,re)=>{if(c.processingAborted){c.processingAborted=!1;return}if(s(In.PROCESSING),f=null,!(c.file instanceof Blob)){X.on("load",()=>{H(J,re)});return}J.on("load",Me=>{c.transferId=null,c.serverFileReference=Me}),J.on("transfer",Me=>{c.transferId=Me}),J.on("load-perceived",Me=>{c.activeProcessor=null,c.transferId=null,c.serverFileReference=Me,s(In.PROCESSING_COMPLETE),v("process-complete",Me)}),J.on("start",()=>{v("process-start")}),J.on("error",Me=>{c.activeProcessor=null,s(In.PROCESSING_ERROR),v("process-error",Me)}),J.on("abort",Me=>{c.activeProcessor=null,c.serverFileReference=Me,s(In.IDLE),v("process-abort"),f&&f()}),J.on("progress",Me=>{v("process-progress",Me)});const ce=Me=>{c.archived||J.process(Me,{...m})},Ee=console.error;re(c.file,ce,Ee),c.activeProcessor=J},G=()=>{c.processingAborted=!1,s(In.PROCESSING_QUEUED)},z=()=>new Promise(J=>{if(!c.activeProcessor){c.processingAborted=!0,s(In.IDLE),v("process-abort"),J();return}f=()=>{J()},c.activeProcessor.abort()}),N=(J,re)=>new Promise((ce,Ee)=>{const Me=c.serverFileReference!==null?c.serverFileReference:c.transferId;if(Me===null){ce();return}J(Me,()=>{c.serverFileReference=null,c.transferId=null,ce()},Le=>{if(!re){ce();return}s(In.PROCESSING_REVERT_ERROR),v("process-revert-error"),Ee(Le)}),s(In.IDLE),v("process-revert")}),W=(J,re,ce)=>{const Ee=J.split("."),Me=Ee[0],Le=Ee.pop();let Ae=m;Ee.forEach(Oe=>Ae=Ae[Oe]),JSON.stringify(Ae[Le])!==JSON.stringify(re)&&(Ae[Le]=re,v("metadata-update",{key:Me,value:m[Me],silent:ce}))},X={id:{get:()=>i},origin:{get:()=>e,set:J=>e=J},serverId:{get:()=>c.serverFileReference},transferId:{get:()=>c.transferId},status:{get:()=>c.status},filename:{get:()=>c.file.name},filenameWithoutExtension:{get:()=>_N(c.file.name)},fileExtension:{get:E},fileType:{get:I},fileSize:{get:M},file:{get:P},relativePath:{get:()=>c.file._relativePath},source:{get:()=>c.source},getMetadata:J=>vN(J?m[J]:m),setMetadata:(J,re,ce)=>{if(Ni(J)){const Ee=J;return Object.keys(Ee).forEach(Me=>{W(Me,Ee[Me],re)}),J}return W(J,re,ce),re},extend:(J,re)=>te[J]=re,abortLoad:V,retryLoad:k,requestProcessing:G,abortProcessing:z,load:D,process:H,revert:N,...fw(),freeze:()=>c.frozen=!0,release:()=>c.released=!0,released:{get:()=>c.released},archive:()=>c.archived=!0,archived:{get:()=>c.archived}},te=fu(X);return te},NX=(e,t)=>Kl(t)?0:Io(t)?e.findIndex(n=>n.id===t):-1,DO=(e,t)=>{const n=NX(e,t);if(!(n<0))return e[n]||null},OO=(e,t,n,i,c,f)=>{const m=qh(null,e,{method:"GET",responseType:"blob"});return m.onload=s=>{const v=s.getAllResponseHeaders(),E=KI(v).name||$y(e);t(li("load",s.status,hp(s.response,E),v))},m.onerror=s=>{n(li("error",s.status,s.statusText,s.getAllResponseHeaders()))},m.onheaders=s=>{f(li("headers",s.status,null,s.getAllResponseHeaders()))},m.ontimeout=Hh(n),m.onprogress=i,m.onabort=c,m},kO=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),BX=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&kO(location.href)!==kO(e),nv=e=>(...t)=>Vh(e)?e(...t):e,FX=e=>!dp(e.file),XE=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:ua(t.items)})},0)},LO=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const i=e(...t);if(i==null)return n(!0);if(typeof i=="boolean")return n(i);typeof i.then=="function"&&i.then(n)}),QE=(e,t)=>{e.items.sort((n,i)=>t(Go(n),Go(i)))},As=(e,t)=>({query:n,success:i=()=>{},failure:c=()=>{},...f}={})=>{const m=jh(e.items,n);if(!m){c({error:li("error",0,"Item not found"),file:null});return}t(m,i,c,f||{})},UX=(e,t,n)=>({ABORT_ALL:()=>{ua(n.items).forEach(i=>{i.freeze(),i.abortLoad(),i.abortProcessing()})},DID_SET_FILES:({value:i=[]})=>{const c=i.map(m=>({source:m.source?m.source:m,options:m.options}));let f=ua(n.items);f.forEach(m=>{c.find(s=>s.source===m.source||s.source===m.file)||e("REMOVE_ITEM",{query:m,remove:!1})}),f=ua(n.items),c.forEach((m,s)=>{f.find(v=>v.source===m.source||v.file===m.source)||e("ADD_ITEM",{...m,interactionMethod:zs.NONE,index:s})})},DID_UPDATE_ITEM_METADATA:({id:i,action:c,change:f})=>{f.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const m=DO(n.items,i);if(!t("IS_ASYNC")){la("SHOULD_PREPARE_OUTPUT",!1,{item:m,query:t,action:c,change:f}).then(I=>{const M=t("GET_BEFORE_PREPARE_FILE");M&&(I=M(m,I)),I&&e("REQUEST_PREPARE_OUTPUT",{query:i,item:m,success:P=>{e("DID_PREPARE_OUTPUT",{id:i,file:P})}},!0)});return}m.origin===Li.LOCAL&&e("DID_LOAD_ITEM",{id:m.id,error:null,serverFileReference:m.source});const s=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:i})},32)},v=I=>{m.revert(ag(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(I?s:()=>{}).catch(()=>{})},E=I=>{m.abortProcessing().then(I?s:()=>{})};if(m.status===In.PROCESSING_COMPLETE)return v(n.options.instantUpload);if(m.status===In.PROCESSING)return E(n.options.instantUpload);n.options.instantUpload&&s()},0))},MOVE_ITEM:({query:i,index:c})=>{const f=jh(n.items,i);if(!f)return;const m=n.items.indexOf(f);c=fN(c,0,n.items.length-1),m!==c&&n.items.splice(c,0,n.items.splice(m,1)[0])},SORT:({compare:i})=>{QE(n,i),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:c,interactionMethod:f,success:m=()=>{},failure:s=()=>{}})=>{let v=c;if(c===-1||typeof c>"u"){const D=t("GET_ITEM_INSERT_LOCATION"),k=t("GET_TOTAL_ITEMS");v=D==="before"?0:k}const E=t("GET_IGNORED_FILES"),I=D=>dp(D)?!E.includes(D.name.toLowerCase()):!Kl(D),P=i.filter(I).map(D=>new Promise((k,V)=>{e("ADD_ITEM",{interactionMethod:f,source:D.source||D,success:k,failure:V,index:v++,options:D.options||{}})}));Promise.all(P).then(m).catch(s)},ADD_ITEM:({source:i,index:c=-1,interactionMethod:f,success:m=()=>{},failure:s=()=>{},options:v={}})=>{if(Kl(i)){s({error:li("error",0,"No source"),file:null});return}if(dp(i)&&n.options.ignoredFiles.includes(i.name.toLowerCase()))return;if(!gX(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const z=li("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:i,error:z}),s({error:z,file:null});return}const G=ua(n.items)[0];if(G.status===In.PROCESSING_COMPLETE||G.status===In.PROCESSING_REVERT_ERROR){const z=t("GET_FORCE_REVERT");if(G.revert(ag(n.options.server.url,n.options.server.revert),z).then(()=>{z&&e("ADD_ITEM",{source:i,index:c,interactionMethod:f,success:m,failure:s,options:v})}).catch(()=>{}),z)return}e("REMOVE_ITEM",{query:G.id})}const E=v.type==="local"?Li.LOCAL:v.type==="limbo"?Li.LIMBO:Li.INPUT,I=zX(E,E===Li.INPUT?null:i,v.file);Object.keys(v.metadata||{}).forEach(G=>{I.setMetadata(G,v.metadata[G])}),ld("DID_CREATE_ITEM",I,{query:t,dispatch:e});const M=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(c=M==="before"?-1:n.items.length),_X(n.items,I,c),Vh(M)&&i&&QE(n,M);const P=I.id;I.on("init",()=>{e("DID_INIT_ITEM",{id:P})}),I.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:P})}),I.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:P})}),I.on("load-progress",G=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:P,progress:G})}),I.on("load-request-error",G=>{const z=nv(n.options.labelFileLoadError)(G);if(G.code>=400&&G.code<500){e("DID_THROW_ITEM_INVALID",{id:P,error:G,status:{main:z,sub:`${G.code} (${G.body})`}}),s({error:G,file:Go(I)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:P,error:G,status:{main:z,sub:n.options.labelTapToRetry}})}),I.on("load-file-error",G=>{e("DID_THROW_ITEM_INVALID",{id:P,error:G.status,status:G.status}),s({error:G.status,file:Go(I)})}),I.on("load-abort",()=>{e("REMOVE_ITEM",{query:P})}),I.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:P,item:I,data:{source:i,success:m}})}),I.on("load",()=>{const G=z=>{if(!z){e("REMOVE_ITEM",{query:P});return}I.on("metadata-update",N=>{e("DID_UPDATE_ITEM_METADATA",{id:P,change:N})}),la("SHOULD_PREPARE_OUTPUT",!1,{item:I,query:t}).then(N=>{const W=t("GET_BEFORE_PREPARE_FILE");W&&(N=W(I,N));const $=()=>{e("COMPLETE_LOAD_ITEM",{query:P,item:I,data:{source:i,success:m}}),XE(e,n)};if(N){e("REQUEST_PREPARE_OUTPUT",{query:P,item:I,success:X=>{e("DID_PREPARE_OUTPUT",{id:P,file:X}),$()}},!0);return}$()})};la("DID_LOAD_ITEM",I,{query:t,dispatch:e}).then(()=>{LO(t("GET_BEFORE_ADD_FILE"),Go(I)).then(G)}).catch(z=>{if(!z||!z.error||!z.status)return G(!1);e("DID_THROW_ITEM_INVALID",{id:P,error:z.error,status:z.status})})}),I.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:P})}),I.on("process-progress",G=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:P,progress:G})}),I.on("process-error",G=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:P,error:G,status:{main:nv(n.options.labelFileProcessingError)(G),sub:n.options.labelTapToRetry}})}),I.on("process-revert-error",G=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:P,error:G,status:{main:nv(n.options.labelFileProcessingRevertError)(G),sub:n.options.labelTapToRetry}})}),I.on("process-complete",G=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:P,error:null,serverFileReference:G}),e("DID_DEFINE_VALUE",{id:P,value:G})}),I.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:P})}),I.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:P}),e("DID_DEFINE_VALUE",{id:P,value:null})}),e("DID_ADD_ITEM",{id:P,index:c,interactionMethod:f}),XE(e,n);const{url:D,load:k,restore:V,fetch:H}=n.options.server||{};I.load(i,CX(E===Li.INPUT?Io(i)&&BX(i)&&H?YE(D,H):OO:E===Li.LIMBO?YE(D,V):YE(D,k)),(G,z,N)=>{la("LOAD_FILE",G,{query:t}).then(z).catch(N)})},REQUEST_PREPARE_OUTPUT:({item:i,success:c,failure:f=()=>{}})=>{const m={error:li("error",0,"Item not found"),file:null};if(i.archived)return f(m);la("PREPARE_OUTPUT",i.file,{query:t,item:i}).then(s=>{la("COMPLETE_PREPARE_OUTPUT",s,{query:t,item:i}).then(v=>{if(i.archived)return f(m);c(v)})})},COMPLETE_LOAD_ITEM:({item:i,data:c})=>{const{success:f,source:m}=c,s=t("GET_ITEM_INSERT_LOCATION");if(Vh(s)&&m&&QE(n,s),e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.origin===Li.INPUT?null:m}),f(Go(i)),i.origin===Li.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:i.id});return}if(i.origin===Li.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:i.id,error:null,serverFileReference:m}),e("DID_DEFINE_VALUE",{id:i.id,value:i.serverId||m});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:i.id})},RETRY_ITEM_LOAD:As(n,i=>{i.retryLoad()}),REQUEST_ITEM_PREPARE:As(n,(i,c,f)=>{e("REQUEST_PREPARE_OUTPUT",{query:i.id,item:i,success:m=>{e("DID_PREPARE_OUTPUT",{id:i.id,file:m}),c({file:i,output:m})},failure:f},!0)}),REQUEST_ITEM_PROCESSING:As(n,(i,c,f)=>{if(!(i.status===In.IDLE||i.status===In.PROCESSING_ERROR)){const s=()=>e("REQUEST_ITEM_PROCESSING",{query:i,success:c,failure:f}),v=()=>document.hidden?s():setTimeout(s,32);i.status===In.PROCESSING_COMPLETE||i.status===In.PROCESSING_REVERT_ERROR?i.revert(ag(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(v).catch(()=>{}):i.status===In.PROCESSING&&i.abortProcessing().then(v);return}i.status!==In.PROCESSING_QUEUED&&(i.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),e("PROCESS_ITEM",{query:i,success:c,failure:f},!0))}),PROCESS_ITEM:As(n,(i,c,f)=>{const m=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",In.PROCESSING).length===m){n.processingQueue.push({id:i.id,success:c,failure:f});return}if(i.status===In.PROCESSING)return;const v=()=>{const I=n.processingQueue.shift();if(!I)return;const{id:M,success:P,failure:D}=I,k=jh(n.items,M);if(!k||k.archived){v();return}e("PROCESS_ITEM",{query:M,success:P,failure:D},!0)};i.onOnce("process-complete",()=>{c(Go(i)),v();const I=n.options.server;if(n.options.instantUpload&&i.origin===Li.LOCAL&&Vh(I.remove)){const D=()=>{};i.origin=Li.LIMBO,n.options.server.remove(i.source,D,D)}t("GET_ITEMS_BY_STATUS",In.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),i.onOnce("process-error",I=>{f({error:I,file:Go(i)}),v()});const E=n.options;i.process(kX(DX(E.server.url,E.server.process,E.name,{chunkTransferId:i.transferId,chunkServer:E.server.patch,chunkUploads:E.chunkUploads,chunkForce:E.chunkForce,chunkSize:E.chunkSize,chunkRetryDelays:E.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(I,M,P)=>{la("PREPARE_OUTPUT",I,{query:t,item:i}).then(D=>{e("DID_PREPARE_OUTPUT",{id:i.id,file:D}),M(D)}).catch(P)})}),RETRY_ITEM_PROCESSING:As(n,i=>{e("REQUEST_ITEM_PROCESSING",{query:i})}),REQUEST_REMOVE_ITEM:As(n,i=>{LO(t("GET_BEFORE_REMOVE_FILE"),Go(i)).then(c=>{c&&e("REMOVE_ITEM",{query:i})})}),RELEASE_ITEM:As(n,i=>{i.release()}),REMOVE_ITEM:As(n,(i,c,f,m)=>{const s=()=>{const E=i.id;DO(n.items,E).archive(),e("DID_REMOVE_ITEM",{error:null,id:E,item:i}),XE(e,n),c(Go(i))},v=n.options.server;i.origin===Li.LOCAL&&v&&Vh(v.remove)&&m.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:i.id}),v.remove(i.source,()=>s(),E=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:li("error",0,E,null),status:{main:nv(n.options.labelFileRemoveError)(E),sub:n.options.labelTapToRetry}})})):((m.revert&&i.origin!==Li.LOCAL&&i.serverId!==null||n.options.chunkUploads&&i.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&i.revert(ag(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),s())}),ABORT_ITEM_LOAD:As(n,i=>{i.abortLoad()}),ABORT_ITEM_PROCESSING:As(n,i=>{if(i.serverId){e("REVERT_ITEM_PROCESSING",{id:i.id});return}i.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:i.id})})}),REQUEST_REVERT_ITEM_PROCESSING:As(n,i=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:i});return}const c=s=>{s&&e("REVERT_ITEM_PROCESSING",{query:i})},f=t("GET_BEFORE_REMOVE_FILE");if(!f)return c(!0);const m=f(Go(i));if(m==null)return c(!0);if(typeof m=="boolean")return c(m);typeof m.then=="function"&&m.then(c)}),REVERT_ITEM_PROCESSING:As(n,i=>{i.revert(ag(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||FX(i))&&e("REMOVE_ITEM",{query:i.id})}).catch(()=>{})}),SET_OPTIONS:({options:i})=>{const c=Object.keys(i),f=VX.filter(s=>c.includes(s));[...f,...Object.keys(i).filter(s=>!f.includes(s))].forEach(s=>{e(`SET_${dw(s,"_").toUpperCase()}`,{value:i[s]})})}}),VX=["server"],JI=e=>e,Jl=e=>document.createElement(e),ci=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},zO=(e,t,n,i)=>{const c=(i%360-90)*Math.PI/180;return{x:e+n*Math.cos(c),y:t+n*Math.sin(c)}},jX=(e,t,n,i,c,f)=>{const m=zO(e,t,n,c),s=zO(e,t,n,i);return["M",m.x,m.y,"A",n,n,0,f,0,s.x,s.y].join(" ")},GX=(e,t,n,i,c)=>{let f=1;return c>i&&c-i<=.5&&(f=0),i>c&&i-c>=.5&&(f=0),jX(e,t,n,Math.min(.9999,i)*360,Math.min(.9999,c)*360,f)},$X=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=q1("svg");e.ref.path=q1("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},WX=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(yi(e.ref.path,"stroke-width"),10),i=e.rect.element.width*.5;let c=0,f=0;t.spin?(c=0,f=.5):(c=0,f=t.progress);const m=GX(i,i,i-n,c,f);yi(e.ref.path,"d",m),yi(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},NO=_i({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:$X,write:WX,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),qX=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},HX=({root:e,props:t})=>{const{isDisabled:n}=t,i=e.query("GET_DISABLED")||t.opacity===0;i&&!n?(t.isDisabled=!0,yi(e.element,"disabled","disabled")):!i&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},xN=_i({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:qX,write:HX}),wN=(e,t=".",n=1e3,i={})=>{const{labelBytes:c="bytes",labelKilobytes:f="KB",labelMegabytes:m="MB",labelGigabytes:s="GB"}=i;e=Math.round(Math.abs(e));const v=n,E=n*n,I=n*n*n;return e<v?`${e} ${c}`:e<E?`${Math.floor(e/v)} ${f}`:e<I?`${BO(e/E,1,t)} ${m}`:`${BO(e/I,2,t)} ${s}`},BO=(e,t,n)=>e.toFixed(t).split(".").filter(i=>i!=="0").join(n),ZX=({root:e,props:t})=>{const n=Jl("span");n.className="filepond--file-info-main",yi(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const i=Jl("span");i.className="filepond--file-info-sub",e.appendChild(i),e.ref.fileSize=i,ci(i,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),ci(n,JI(e.query("GET_ITEM_NAME",t.id)))},H2=({root:e,props:t})=>{ci(e.ref.fileSize,wN(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),ci(e.ref.fileName,JI(e.query("GET_ITEM_NAME",t.id)))},FO=({root:e,props:t})=>{if(wp(e.query("GET_ITEM_SIZE",t.id))){H2({root:e,props:t});return}ci(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},YX=_i({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Co({DID_LOAD_ITEM:H2,DID_UPDATE_ITEM_META:H2,DID_THROW_ITEM_LOAD_ERROR:FO,DID_THROW_ITEM_INVALID:FO}),didCreateView:e=>{ld("CREATE_VIEW",{...e,view:e})},create:ZX,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),bN=e=>Math.round(e*100),XX=({root:e})=>{const t=Jl("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Jl("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,EN({root:e,action:{progress:null}})},EN=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${bN(t.progress)}%`;ci(e.ref.main,n),ci(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},QX=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${bN(t.progress)}%`;ci(e.ref.main,n),ci(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},KX=({root:e})=>{ci(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),ci(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},JX=({root:e})=>{ci(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),ci(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},eQ=({root:e})=>{ci(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),ci(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},UO=({root:e})=>{ci(e.ref.main,""),ci(e.ref.sub,"")},lg=({root:e,action:t})=>{ci(e.ref.main,t.status.main),ci(e.ref.sub,t.status.sub)},tQ=_i({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Co({DID_LOAD_ITEM:UO,DID_REVERT_ITEM_PROCESSING:UO,DID_REQUEST_ITEM_PROCESSING:KX,DID_ABORT_ITEM_PROCESSING:JX,DID_COMPLETE_ITEM_PROCESSING:eQ,DID_UPDATE_ITEM_PROCESS_PROGRESS:QX,DID_UPDATE_ITEM_LOAD_PROGRESS:EN,DID_THROW_ITEM_LOAD_ERROR:lg,DID_THROW_ITEM_INVALID:lg,DID_THROW_ITEM_PROCESSING_ERROR:lg,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:lg,DID_THROW_ITEM_REMOVE_ERROR:lg}),didCreateView:e=>{ld("CREATE_VIEW",{...e,view:e})},create:XX,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Z2={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Y2=[];ei(Z2,e=>{Y2.push(e)});const os=e=>{if(X2(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},nQ=e=>e.ref.buttonAbortItemLoad.rect.element.width,rv=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),rQ=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),iQ=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),oQ=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),X2=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),sQ={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:iQ},processProgressIndicator:{opacity:0,align:oQ},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},VO={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:os},status:{translateX:os}},KE={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Nf={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:os},status:{translateX:os,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:os},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:X2},info:{translateX:os},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:X2},buttonRemoveItem:{opacity:1},info:{translateX:os},status:{opacity:1,translateX:os}},DID_LOAD_ITEM:VO,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:os},status:{translateX:os}},DID_START_ITEM_PROCESSING:KE,DID_REQUEST_ITEM_PROCESSING:KE,DID_UPDATE_ITEM_PROCESS_PROGRESS:KE,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:os}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:os},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:VO},aQ=_i({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),lQ=({root:e,props:t})=>{const n=Object.keys(Z2).reduce((k,V)=>(k[V]={...Z2[V]},k),{}),{id:i}=t,c=e.query("GET_ALLOW_REVERT"),f=e.query("GET_ALLOW_REMOVE"),m=e.query("GET_ALLOW_PROCESS"),s=e.query("GET_INSTANT_UPLOAD"),v=e.query("IS_ASYNC"),E=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let I;v?m&&!c?I=k=>!/RevertItemProcessing/.test(k):!m&&c?I=k=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(k):!m&&!c&&(I=k=>!/Process/.test(k)):I=k=>!/Process/.test(k);const M=I?Y2.filter(I):Y2.concat();if(s&&c&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),v&&!c){const k=Nf.DID_COMPLETE_ITEM_PROCESSING;k.info.translateX=rQ,k.info.translateY=rv,k.status.translateY=rv,k.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(v&&!m&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(k=>{Nf[k].status.translateY=rv}),Nf.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=nQ),E&&c){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const k=Nf.DID_COMPLETE_ITEM_PROCESSING;k.info.translateX=os,k.status.translateY=rv,k.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}f||(n.RemoveItem.disabled=!0),ei(n,(k,V)=>{const H=e.createChildView(xN,{label:e.query(V.label),icon:e.query(V.icon),opacity:0});M.includes(k)&&e.appendChildView(H),V.disabled&&(H.element.setAttribute("disabled","disabled"),H.element.setAttribute("hidden","hidden")),H.element.dataset.align=e.query(`GET_STYLE_${V.align}`),H.element.classList.add(V.className),H.on("click",G=>{G.stopPropagation(),!V.disabled&&e.dispatch(V.action,{query:i})}),e.ref[`button${k}`]=H}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(aQ)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(YX,{id:i})),e.ref.status=e.appendChildView(e.createChildView(tQ,{id:i}));const P=e.appendChildView(e.createChildView(NO,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));P.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=P;const D=e.appendChildView(e.createChildView(NO,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));D.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=D,e.ref.activeStyles=[]},cQ=({root:e,actions:t,props:n})=>{uQ({root:e,actions:t,props:n});let i=t.concat().filter(c=>/^DID_/.test(c.type)).reverse().find(c=>Nf[c.type]);if(i){e.ref.activeStyles=[];const c=Nf[i.type];ei(sQ,(f,m)=>{const s=e.ref[f];ei(m,(v,E)=>{const I=c[f]&&typeof c[f][v]<"u"?c[f][v]:E;e.ref.activeStyles.push({control:s,key:v,value:I})})})}e.ref.activeStyles.forEach(({control:c,key:f,value:m})=>{c[f]=typeof m=="function"?m(e):m})},uQ=Co({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),hQ=_i({create:lQ,write:cQ,didCreateView:e=>{ld("CREATE_VIEW",{...e,view:e})},name:"file"}),dQ=({root:e,props:t})=>{e.ref.fileName=Jl("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(hQ,{id:t.id})),e.ref.data=!1},fQ=({root:e,props:t})=>{ci(e.ref.fileName,JI(e.query("GET_ITEM_NAME",t.id)))},pQ=_i({create:dQ,ignoreRect:!0,write:Co({DID_LOAD_ITEM:fQ}),didCreateView:e=>{ld("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),jO={type:"spring",damping:.6,mass:7},mQ=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:jO},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:jO},styles:["translateY"]}}].forEach(n=>{gQ(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},gQ=(e,t,n)=>{const i=_i({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),c=e.createChildView(i,t.props);e.ref[t.name]=e.appendChildView(c)},yQ=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=oN(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,i=e.ref.bottom.rect.element,c=Math.max(n.height+i.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(c-n.height-i.height)/100,e.ref.bottom.translateY=c-i.height},TN=_i({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:yQ,create:mQ,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),_Q=e=>{const t=e.map(i=>i.id);let n;return{setIndex:i=>{n=i},getIndex:()=>n,getItemIndex:i=>t.indexOf(i.id)}},GO={type:"spring",stiffness:.75,damping:.45,mass:10},$O="spring",WO={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},vQ=({root:e,props:t})=>{if(e.ref.handleClick=i=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(pQ,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(TN,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=i=>{if(!i.isPrimary)return;let c=!1;const f={x:i.pageX,y:i.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:i.offsetX,y:i.offsetY};const m=_Q(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:m});const s=E=>{if(!E.isPrimary)return;E.stopPropagation(),E.preventDefault(),t.dragOffset={x:E.pageX-f.x,y:E.pageY-f.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!c&&(c=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:m})},v=E=>{E.isPrimary&&(document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",v),t.dragOffset={x:E.pageX-f.x,y:E.pageY-f.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:m}),c&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",s),document.addEventListener("pointerup",v)};e.element.addEventListener("pointerdown",n)},xQ=Co({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),wQ=Co({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:i})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let c=t.concat().filter(m=>/^DID_/.test(m.type)).reverse().find(m=>WO[m.type]);c&&c.type!==n.currentState&&(n.currentState=c.type,e.element.dataset.filepondItemState=WO[n.currentState]||"");const f=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");f?i||(e.height=e.rect.element.width*f):(xQ({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),i&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),bQ=_i({create:vQ,write:wQ,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:$O,scaleY:$O,translateX:GO,translateY:GO,opacity:{type:"tween",duration:150}}}});var eM=(e,t)=>Math.max(1,Math.floor((e+1)/t));const tM=(e,t,n)=>{if(!n)return;const i=e.rect.element.width,c=t.length;let f=null;if(c===0||n.top<t[0].rect.element.top)return-1;const s=t[0].rect.element,v=s.marginLeft+s.marginRight,E=s.width+v,I=eM(i,E);if(I===1){for(let D=0;D<c;D++){const k=t[D],V=k.rect.outer.top+k.rect.element.height*.5;if(n.top<V)return D}return c}const M=s.marginTop+s.marginBottom,P=s.height+M;for(let D=0;D<c;D++){const k=D%I,V=Math.floor(D/I),H=k*E,G=V*P,z=G-s.marginTop,N=H+E,W=G+P+s.marginBottom;if(n.top<W&&n.top>z){if(n.left<N)return D;D!==c-1?f=D:f=null}}return f!==null?f:c},iv={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},EQ=({root:e})=>{yi(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},TQ=({root:e,action:t})=>{const{id:n,index:i,interactionMethod:c}=t;e.ref.addIndex=i;const f=Date.now();let m=f,s=1;if(c!==zs.NONE){s=0;const v=e.query("GET_ITEM_INSERT_INTERVAL"),E=f-e.ref.lastItemSpanwDate;m=E<v?f+(v-E):f}e.ref.lastItemSpanwDate=m,e.appendChildView(e.createChildView(bQ,{spawnDate:m,id:n,opacity:s,interactionMethod:c}),i)},qO=(e,t,n,i=0,c=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&SQ(e,t,n,i,c),e.scaleX=1,e.scaleY=1,e.opacity=1))},SQ=(e,t,n,i,c)=>{e.interactionMethod===zs.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===zs.DROP?(e.translateX=null,e.translateX=t-i*20,e.translateY=null,e.translateY=n-c*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===zs.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===zs.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},IQ=({root:e,action:t})=>{const{id:n}=t,i=e.childViews.find(c=>c.id===n);i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},JE=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,MQ=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,AQ=({root:e,action:t})=>{const{id:n,dragState:i}=t,c=e.query("GET_ITEM",{id:n}),f=e.childViews.find(H=>H.id===n),m=e.childViews.length,s=i.getItemIndex(c);if(!f)return;const v={x:f.dragOrigin.x+f.dragOffset.x+f.dragCenter.x,y:f.dragOrigin.y+f.dragOffset.y+f.dragCenter.y},E=JE(f),I=MQ(f);let M=Math.floor(e.rect.outer.width/I);M>m&&(M=m);const P=Math.floor(m/M+1);iv.setHeight=E*P,iv.setWidth=I*M;var D={y:Math.floor(v.y/E),x:Math.floor(v.x/I),getGridIndex:function(){return v.y>iv.getHeight||v.y<0||v.x>iv.getWidth||v.x<0?s:this.y*M+this.x},getColIndex:function(){const G=e.query("GET_ACTIVE_ITEMS"),z=e.childViews.filter(Ee=>Ee.rect.element.height),N=G.map(Ee=>z.find(Me=>Me.id===Ee.id)),W=N.findIndex(Ee=>Ee===f),$=JE(f),X=N.length;let te=X,J=0,re=0,ce=0;for(let Ee=0;Ee<X;Ee++)if(J=JE(N[Ee]),ce=re,re=ce+J,v.y<re){if(W>Ee){if(v.y<ce+$){te=Ee;break}continue}te=Ee;break}return te}};const k=M>1?D.getGridIndex():D.getColIndex();e.dispatch("MOVE_ITEM",{query:f,index:k});const V=i.getIndex();if(V===void 0||V!==k){if(i.setIndex(k),V===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:s,target:k})}},CQ=Co({DID_ADD_ITEM:TQ,DID_REMOVE_ITEM:IQ,DID_DRAG_ITEM:AQ}),PQ=({root:e,props:t,actions:n,shouldOptimize:i})=>{CQ({root:e,props:t,actions:n});const{dragCoordinates:c}=t,f=e.rect.element.width,m=e.childViews.filter(N=>N.rect.element.height),s=e.query("GET_ACTIVE_ITEMS").map(N=>m.find(W=>W.id===N.id)).filter(N=>N),v=c?tM(e,s,c):null,E=e.ref.addIndex||null;e.ref.addIndex=null;let I=0,M=0,P=0;if(s.length===0)return;const D=s[0].rect.element,k=D.marginTop+D.marginBottom,V=D.marginLeft+D.marginRight,H=D.width+V,G=D.height+k,z=eM(f,H);if(z===1){let N=0,W=0;s.forEach(($,X)=>{if(v){let re=X-v;re===-2?W=-k*.25:re===-1?W=-k*.75:re===0?W=k*.75:re===1?W=k*.25:W=0}i&&($.translateX=null,$.translateY=null),$.markedForRemoval||qO($,0,N+W);let J=($.rect.element.height+k)*($.markedForRemoval?$.opacity:1);N+=J})}else{let N=0,W=0;s.forEach(($,X)=>{X===v&&(I=1),X===E&&(P+=1),$.markedForRemoval&&$.opacity<.5&&(M-=1);const te=X+P+I+M,J=te%z,re=Math.floor(te/z),ce=J*H,Ee=re*G,Me=Math.sign(ce-N),Le=Math.sign(Ee-W);N=ce,W=Ee,!$.markedForRemoval&&(i&&($.translateX=null,$.translateY=null),qO($,ce,Ee,Me,Le))})}},RQ=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),DQ=_i({create:EQ,write:PQ,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:RQ,mixins:{apis:["dragCoordinates"]}}),OQ=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(DQ)),t.dragCoordinates=null,t.overflowing=!1},kQ=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},LQ=({props:e})=>{e.dragCoordinates=null},zQ=Co({DID_DRAG:kQ,DID_END_DRAG:LQ}),NQ=({root:e,props:t,actions:n})=>{if(zQ({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const i=Math.round(t.overflow);i!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=i)}},BQ=_i({create:OQ,write:NQ,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),da=(e,t,n,i="")=>{n?yi(e,t,i):e.removeAttribute(t)},FQ=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Jl("form"),n=e.parentNode,i=e.nextSibling;t.appendChild(e),t.reset(),i?n.insertBefore(e,i):n.appendChild(e)}}},UQ=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,yi(e.element,"name",e.query("GET_NAME")),yi(e.element,"aria-controls",`filepond--assistant-${t.id}`),yi(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),SN({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),IN({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),MN({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Q2({root:e}),AN({root:e,action:{value:e.query("GET_REQUIRED")}}),CN({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const i=Array.from(e.element.files).map(c=>(c._relativePath=c.webkitRelativePath,c));setTimeout(()=>{t.onload(i),FQ(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},SN=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&da(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},IN=({root:e,action:t})=>{da(e.element,"multiple",t.value)},MN=({root:e,action:t})=>{da(e.element,"webkitdirectory",t.value)},Q2=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),i=t||!n;da(e.element,"disabled",i)},AN=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&da(e.element,"required",!0):da(e.element,"required",!1)},CN=({root:e,action:t})=>{da(e.element,"capture",!!t.value,t.value===!0?"":t.value)},HO=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(da(t,"required",!1),da(t,"name",!1)):(da(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&da(t,"required",!0))},VQ=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},jQ=_i({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:UQ,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Co({DID_LOAD_ITEM:HO,DID_REMOVE_ITEM:HO,DID_THROW_ITEM_INVALID:VQ,DID_SET_DISABLED:Q2,DID_SET_ALLOW_BROWSE:Q2,DID_SET_ALLOW_DIRECTORIES_ONLY:MN,DID_SET_ALLOW_MULTIPLE:IN,DID_SET_ACCEPTED_FILE_TYPES:SN,DID_SET_CAPTURE_METHOD:CN,DID_SET_REQUIRED:AN})}),ZO={ENTER:13,SPACE:32},GQ=({root:e,props:t})=>{const n=Jl("label");yi(n,"for",`filepond--browser-${t.id}`),yi(n,"id",`filepond--drop-label-${t.id}`),yi(n,"aria-hidden","true"),e.ref.handleKeyDown=i=>{(i.keyCode===ZO.ENTER||i.keyCode===ZO.SPACE)&&(i.preventDefault(),e.ref.label.click())},e.ref.handleClick=i=>{i.target===n||n.contains(i.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),PN(n,t.caption),e.appendChild(n),e.ref.label=n},PN=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&yi(n,"tabindex","0"),t},$Q=_i({name:"drop-label",ignoreRect:!0,create:GQ,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Co({DID_SET_LABEL_IDLE:({root:e,action:t})=>{PN(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),WQ=_i({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),qQ=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(WQ,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},HQ=({root:e,action:t})=>{if(!e.ref.blob){qQ({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},ZQ=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},YQ=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},XQ=({root:e,props:t,actions:n})=>{QQ({root:e,props:t,actions:n});const{blob:i}=e.ref;n.length===0&&i&&i.opacity===0&&(e.removeChildView(i),e.ref.blob=null)},QQ=Co({DID_DRAG:HQ,DID_DROP:YQ,DID_END_DRAG:ZQ}),KQ=_i({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:XQ}),RN=(e,t)=>{try{const n=new DataTransfer;t.forEach(i=>{i instanceof File?n.items.add(i):n.items.add(new File([i],i.name,{type:i.type}))}),e.files=n.files}catch{return!1}return!0},JQ=({root:e})=>e.ref.fields={},mw=(e,t)=>e.ref.fields[t],nM=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},YO=({root:e})=>nM(e),eK=({root:e,action:t})=>{const c=!(e.query("GET_ITEM",t.id).origin===Li.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),f=Jl("input");f.type=c?"file":"hidden",f.name=e.query("GET_NAME"),f.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=f,nM(e)},tK=({root:e,action:t})=>{const n=mw(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const i=e.query("GET_ITEM",t.id);RN(n,[i.file])},nK=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=mw(e,t.id);n&&RN(n,[t.file])},0)},rK=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},iK=({root:e,action:t})=>{const n=mw(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},oK=({root:e,action:t})=>{const n=mw(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.value=t.value,nM(e))},sK=Co({DID_SET_DISABLED:rK,DID_ADD_ITEM:eK,DID_LOAD_ITEM:tK,DID_REMOVE_ITEM:iK,DID_DEFINE_VALUE:oK,DID_PREPARE_OUTPUT:nK,DID_REORDER_ITEMS:YO,DID_SORT_ITEMS:YO}),aK=_i({tag:"fieldset",name:"data",create:JQ,write:sK,ignoreRect:!0}),lK=e=>"getRootNode"in e?e.getRootNode():document,cK=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],uK=["css","csv","html","txt"],hK={zip:"zip|compressed",epub:"application/epub+zip"},DN=(e="")=>(e=e.toLowerCase(),cK.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):uK.includes(e)?"text/"+e:hK[e]||""),rM=e=>new Promise((t,n)=>{const i=vK(e);if(i.length&&!dK(e))return t(i);fK(e).then(t)}),dK=e=>e.files?e.files.length>0:!1,fK=e=>new Promise((t,n)=>{const i=(e.items?Array.from(e.items):[]).filter(c=>pK(c)).map(c=>mK(c));if(!i.length){t(e.files?Array.from(e.files):[]);return}Promise.all(i).then(c=>{const f=[];c.forEach(m=>{f.push.apply(f,m)}),t(f.filter(m=>m).map(m=>(m._relativePath||(m._relativePath=m.webkitRelativePath),m)))}).catch(console.error)}),pK=e=>{if(ON(e)){const t=iM(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},mK=e=>new Promise((t,n)=>{if(_K(e)){gK(iM(e)).then(t).catch(n);return}t([e.getAsFile()])}),gK=e=>new Promise((t,n)=>{const i=[];let c=0,f=0;const m=()=>{f===0&&c===0&&t(i)},s=v=>{c++;const E=v.createReader(),I=()=>{E.readEntries(M=>{if(M.length===0){c--,m();return}M.forEach(P=>{P.isDirectory?s(P):(f++,P.file(D=>{const k=yK(D);P.fullPath&&(k._relativePath=P.fullPath),i.push(k),f--,m()}))}),I()},n)};I()};s(e)}),yK=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,i=DN(pw(e.name));return i.length&&(e=e.slice(0,e.size,i),e.name=n,e.lastModifiedDate=t),e},_K=e=>ON(e)&&(iM(e)||{}).isDirectory,ON=e=>"webkitGetAsEntry"in e,iM=e=>e.webkitGetAsEntry(),vK=e=>{let t=[];try{if(t=wK(e),t.length)return t;t=xK(e)}catch{}return t},xK=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},wK=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Z1=[],Zh=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),bK=(e,t,n)=>{const i=EK(t),c={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return c.destroy=i.addListener(c),c},EK=e=>{const t=Z1.find(i=>i.element===e);if(t)return t;const n=TK(e);return Z1.push(n),n},TK=e=>{const t=[],n={dragenter:IK,dragover:MK,dragleave:CK,drop:AK},i={};ei(n,(f,m)=>{i[f]=m(e,t),e.addEventListener(f,i[f],!1)});const c={element:e,addListener:f=>(t.push(f),()=>{t.splice(t.indexOf(f),1),t.length===0&&(Z1.splice(Z1.indexOf(c),1),ei(n,m=>{e.removeEventListener(m,i[m],!1)}))})};return c},SK=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),oM=(e,t)=>{const n=lK(t),i=SK(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return i===t||t.contains(i)};let kN=null;const ov=(e,t)=>{try{e.dropEffect=t}catch{}},IK=(e,t)=>n=>{n.preventDefault(),kN=n.target,t.forEach(i=>{const{element:c,onenter:f}=i;oM(n,c)&&(i.state="enter",f(Zh(n)))})},MK=(e,t)=>n=>{n.preventDefault();const i=n.dataTransfer;rM(i).then(c=>{let f=!1;t.some(m=>{const{filterElement:s,element:v,onenter:E,onexit:I,ondrag:M,allowdrop:P}=m;ov(i,"copy");const D=P(c);if(!D){ov(i,"none");return}if(oM(n,v)){if(f=!0,m.state===null){m.state="enter",E(Zh(n));return}if(m.state="over",s&&!D){ov(i,"none");return}M(Zh(n))}else s&&!f&&ov(i,"none"),m.state&&(m.state=null,I(Zh(n)))})})},AK=(e,t)=>n=>{n.preventDefault();const i=n.dataTransfer;rM(i).then(c=>{t.forEach(f=>{const{filterElement:m,element:s,ondrop:v,onexit:E,allowdrop:I}=f;if(f.state=null,!(m&&!oM(n,s))){if(!I(c))return E(Zh(n));v(Zh(n),c)}})})},CK=(e,t)=>n=>{kN===n.target&&t.forEach(i=>{const{onexit:c}=i;i.state=null,c(Zh(n))})},PK=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:i,requiresDropOnElement:c,filterItems:f=I=>I}=n,m=bK(e,i?document.documentElement:e,c);let s="",v="";m.allowdrop=I=>t(f(I)),m.ondrop=(I,M)=>{const P=f(M);if(!t(P)){E.ondragend(I);return}v="drag-drop",E.onload(P,I)},m.ondrag=I=>{E.ondrag(I)},m.onenter=I=>{v="drag-over",E.ondragstart(I)},m.onexit=I=>{v="drag-exit",E.ondragend(I)};const E={updateHopperState:()=>{s!==v&&(e.dataset.hopperState=v,s=v)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{m.destroy()}};return E};let K2=!1;const Yf=[],LN=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,i=t;for(;i!==document.body;){if(i.classList.contains("filepond--root")){n=!0;break}i=i.parentNode}if(!n)return}rM(e.clipboardData).then(n=>{n.length&&Yf.forEach(i=>i(n))})},RK=e=>{Yf.includes(e)||(Yf.push(e),!K2&&(K2=!0,document.addEventListener("paste",LN)))},DK=e=>{XI(Yf,Yf.indexOf(e)),Yf.length===0&&(document.removeEventListener("paste",LN),K2=!1)},OK=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{DK(e)},onload:()=>{}};return RK(e),t},kK=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,yi(e.element,"role","status"),yi(e.element,"aria-live","polite"),yi(e.element,"aria-relevant","additions")};let XO=null,QO=null;const eT=[],gw=(e,t)=>{e.element.textContent=t},LK=e=>{e.element.textContent=""},zN=(e,t,n)=>{const i=e.query("GET_TOTAL_ITEMS");gw(e,`${n} ${t}, ${i} ${i===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(QO),QO=setTimeout(()=>{LK(e)},1500)},NN=e=>e.element.parentNode.contains(document.activeElement),zK=({root:e,action:t})=>{if(!NN(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);eT.push(n.filename),clearTimeout(XO),XO=setTimeout(()=>{zN(e,eT.join(", "),e.query("GET_LABEL_FILE_ADDED")),eT.length=0},750)},NK=({root:e,action:t})=>{if(!NN(e))return;const n=t.item;zN(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},BK=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename,c=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");gw(e,`${i} ${c}`)},KO=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename,c=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");gw(e,`${i} ${c}`)},sv=({root:e,action:t})=>{const i=e.query("GET_ITEM",t.id).filename;gw(e,`${t.status.main} ${i} ${t.status.sub}`)},FK=_i({create:kK,ignoreRect:!0,ignoreRectUpdate:!0,write:Co({DID_LOAD_ITEM:zK,DID_REMOVE_ITEM:NK,DID_COMPLETE_ITEM_PROCESSING:BK,DID_ABORT_ITEM_PROCESSING:KO,DID_REVERT_ITEM_PROCESSING:KO,DID_THROW_ITEM_REMOVE_ERROR:sv,DID_THROW_ITEM_LOAD_ERROR:sv,DID_THROW_ITEM_INVALID:sv,DID_THROW_ITEM_PROCESSING_ERROR:sv}),tag:"span",name:"assistant"}),BN=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),FN=(e,t=16,n=!0)=>{let i=Date.now(),c=null;return(...f)=>{clearTimeout(c);const m=Date.now()-i,s=()=>{i=Date.now(),e(...f)};m<t?n||(c=setTimeout(s,t-m)):s()}},UK=1e6,Y1=e=>e.preventDefault(),VK=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const i=e.query("GET_CLASS_NAME");i&&i.split(" ").filter(v=>v.length).forEach(v=>{e.element.classList.add(v)}),e.ref.label=e.appendChildView(e.createChildView($Q,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(BQ,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(TN,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(FK,{...t})),e.ref.data=e.appendChildView(e.createChildView(aK,{...t})),e.ref.measure=Jl("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(v=>!Kl(v.value)).map(({name:v,value:E})=>{e.element.dataset[v]=E}),e.ref.widthPrevious=null,e.ref.widthUpdated=FN(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const c=window.matchMedia("(pointer: fine) and (hover: hover)").matches,f="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&f&&!c&&(e.element.addEventListener("touchmove",Y1,{passive:!1}),e.element.addEventListener("gesturestart",Y1));const m=e.query("GET_CREDITS");if(m.length===2){const v=document.createElement("a");v.className="filepond--credits",v.setAttribute("aria-hidden","true"),v.href=m[0],v.tabindex=-1,v.target="_blank",v.rel="noopener noreferrer",v.textContent=m[1],e.element.appendChild(v),e.ref.credits=v}},jK=({root:e,props:t,actions:n})=>{if(HK({root:e,props:t,actions:n}),n.filter(X=>/^DID_SET_STYLE_/.test(X.type)).filter(X=>!Kl(X.data.value)).map(({type:X,data:te})=>{const J=BN(X.substring(8).toLowerCase(),"_");e.element.dataset[J]=te.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let i=e.ref.bounds;i||(i=e.ref.bounds=WK(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:c,label:f,list:m,panel:s}=e.ref;c&&c.updateHopperState();const v=e.query("GET_PANEL_ASPECT_RATIO"),E=e.query("GET_ALLOW_MULTIPLE"),I=e.query("GET_TOTAL_ITEMS"),M=E?e.query("GET_MAX_FILES")||UK:1,P=I===M,D=n.find(X=>X.type==="DID_ADD_ITEM");if(P&&D){const X=D.data.interactionMethod;f.opacity=0,E?f.translateY=-40:X===zs.API?f.translateX=40:X===zs.BROWSE?f.translateY=40:f.translateY=30}else P||(f.opacity=1,f.translateX=0,f.translateY=0);const k=GK(e),V=$K(e),H=f.rect.element.height,G=!E||P?0:H,z=P?m.rect.element.marginTop:0,N=I===0?0:m.rect.element.marginBottom,W=G+z+V.visual+N,$=G+z+V.bounds+N;if(m.translateY=Math.max(0,G-m.rect.element.marginTop)-k.top,v){const X=e.rect.element.width,te=X*v;v!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=v,e.ref.updateHistory=[]);const J=e.ref.updateHistory;J.push(X);const re=2;if(J.length>re*2){const Ee=J.length,Me=Ee-10;let Le=0;for(let Ae=Ee;Ae>=Me;Ae--)if(J[Ae]===J[Ae-2]&&Le++,Le>=re)return}s.scalable=!1,s.height=te;const ce=te-G-(N-k.bottom)-(P?z:0);V.visual>ce?m.overflow=ce:m.overflow=null,e.height=te}else if(i.fixedHeight){s.scalable=!1;const X=i.fixedHeight-G-(N-k.bottom)-(P?z:0);V.visual>X?m.overflow=X:m.overflow=null}else if(i.cappedHeight){const X=W>=i.cappedHeight,te=Math.min(i.cappedHeight,W);s.scalable=!0,s.height=X?te:te-k.top-k.bottom;const J=te-G-(N-k.bottom)-(P?z:0);W>i.cappedHeight&&V.visual>J?m.overflow=J:m.overflow=null,e.height=Math.min(i.cappedHeight,$-k.top-k.bottom)}else{const X=I>0?k.top+k.bottom:0;s.scalable=!0,s.height=Math.max(H,W-X),e.height=Math.max(H,$-X)}e.ref.credits&&s.heightCurrent&&(e.ref.credits.style.transform=`translateY(${s.heightCurrent}px)`)},GK=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},$K=e=>{let t=0,n=0;const i=e.ref.list,c=i.childViews[0],f=c.childViews.filter(z=>z.rect.element.height),m=e.query("GET_ACTIVE_ITEMS").map(z=>f.find(N=>N.id===z.id)).filter(z=>z);if(m.length===0)return{visual:t,bounds:n};const s=c.rect.element.width,v=tM(c,m,i.dragCoordinates),E=m[0].rect.element,I=E.marginTop+E.marginBottom,M=E.marginLeft+E.marginRight,P=E.width+M,D=E.height+I,k=typeof v<"u"&&v>=0?1:0,V=m.find(z=>z.markedForRemoval&&z.opacity<.45)?-1:0,H=m.length+k+V,G=eM(s,P);return G===1?m.forEach(z=>{const N=z.rect.element.height+I;n+=N,t+=N*z.opacity}):(n=Math.ceil(H/G)*D,t=n),{visual:t,bounds:n}},WK=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},sM=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),i=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS");let f=e.query("GET_MAX_FILES");const m=t.length;return!i&&m>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:li("warning",0,"Max files")}),!0):(f=i?f:1,!i&&n?!1:wp(f)&&c+m>f?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:li("warning",0,"Max files")}),!0):!1)},qK=(e,t,n)=>{const i=e.childViews[0];return tM(i,t,{left:n.scopeLeft-i.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},JO=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),i=t&&!n;if(i&&!e.ref.hopper){const c=PK(e.element,f=>{const m=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?f.every(v=>ld("ALLOW_HOPPER_ITEM",v,{query:e.query}).every(E=>E===!0)&&m(v)):!0},{filterItems:f=>{const m=e.query("GET_IGNORED_FILES");return f.filter(s=>dp(s)?!m.includes(s.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});c.onload=(f,m)=>{const v=e.ref.list.childViews[0].childViews.filter(I=>I.rect.element.height),E=e.query("GET_ACTIVE_ITEMS").map(I=>v.find(M=>M.id===I.id)).filter(I=>I);la("ADD_ITEMS",f,{dispatch:e.dispatch}).then(I=>{if(sM(e,I))return!1;e.dispatch("ADD_ITEMS",{items:I,index:qK(e.ref.list,E,m),interactionMethod:zs.DROP})}),e.dispatch("DID_DROP",{position:m}),e.dispatch("DID_END_DRAG",{position:m})},c.ondragstart=f=>{e.dispatch("DID_START_DRAG",{position:f})},c.ondrag=FN(f=>{e.dispatch("DID_DRAG",{position:f})}),c.ondragend=f=>{e.dispatch("DID_END_DRAG",{position:f})},e.ref.hopper=c,e.ref.drip=e.appendChildView(e.createChildView(KQ))}else!i&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},ek=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),i=e.query("GET_DISABLED"),c=n&&!i;c&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(jQ,{...t,onload:f=>{la("ADD_ITEMS",f,{dispatch:e.dispatch}).then(m=>{if(sM(e,m))return!1;e.dispatch("ADD_ITEMS",{items:m,index:-1,interactionMethod:zs.BROWSE})})}}),0):!c&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},tk=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),i=t&&!n;i&&!e.ref.paster?(e.ref.paster=OK(),e.ref.paster.onload=c=>{la("ADD_ITEMS",c,{dispatch:e.dispatch}).then(f=>{if(sM(e,f))return!1;e.dispatch("ADD_ITEMS",{items:f,index:-1,interactionMethod:zs.PASTE})})}):!i&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},HK=Co({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{ek(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{JO(e)},DID_SET_ALLOW_PASTE:({root:e})=>{tk(e)},DID_SET_DISABLED:({root:e,props:t})=>{JO(e),tk(e),ek(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),ZK=_i({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:VK,write:jK,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Y1),e.element.removeEventListener("gesturestart",Y1)},mixins:{styles:["height"]}}),YK=(e={})=>{let t=null;const n=H1(),i=hY(XY(n),[mX,JY(n)],[UX,KY(n)]);i.dispatch("SET_OPTIONS",{options:e});const c=()=>{document.hidden||i.dispatch("KICK")};document.addEventListener("visibilitychange",c);let f=null,m=!1,s=!1,v=null,E=null;const I=()=>{m||(m=!0),clearTimeout(f),f=setTimeout(()=>{m=!1,v=null,E=null,s&&(s=!1,i.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",I);const M=ZK(i,{id:YI()});let P=!1,D=!1;const k={_read:()=>{m&&(E=window.innerWidth,v||(v=E),!s&&E!==v&&(i.dispatch("DID_START_RESIZE"),s=!0)),D&&P&&(P=M.element.offsetParent===null),!P&&(M._read(),D=M.rect.element.hidden)},_write:ke=>{const je=i.processActionQueue().filter(De=>!/^SET_/.test(De.type));P&&!je.length||(z(je),P=M._write(ke,je,s),nX(i.query("GET_ITEMS")),P&&i.processDispatchQueue())}},V=ke=>je=>{const De={type:ke};if(!je)return De;if(je.hasOwnProperty("error")&&(De.error=je.error?{...je.error}:null),je.status&&(De.status={...je.status}),je.file&&(De.output=je.file),je.source)De.file=je.source;else if(je.item||je.id){const Be=je.item?je.item:i.query("GET_ITEM",je.id);De.file=Be?Go(Be):null}return je.items&&(De.items=je.items.map(Go)),/progress/.test(ke)&&(De.progress=je.progress),je.hasOwnProperty("origin")&&je.hasOwnProperty("target")&&(De.origin=je.origin,De.target=je.target),De},H={DID_DESTROY:V("destroy"),DID_INIT:V("init"),DID_THROW_MAX_FILES:V("warning"),DID_INIT_ITEM:V("initfile"),DID_START_ITEM_LOAD:V("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:V("addfileprogress"),DID_LOAD_ITEM:V("addfile"),DID_THROW_ITEM_INVALID:[V("error"),V("addfile")],DID_THROW_ITEM_LOAD_ERROR:[V("error"),V("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[V("error"),V("removefile")],DID_PREPARE_OUTPUT:V("preparefile"),DID_START_ITEM_PROCESSING:V("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:V("processfileprogress"),DID_ABORT_ITEM_PROCESSING:V("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:V("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:V("processfiles"),DID_REVERT_ITEM_PROCESSING:V("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[V("error"),V("processfile")],DID_REMOVE_ITEM:V("removefile"),DID_UPDATE_ITEMS:V("updatefiles"),DID_ACTIVATE_ITEM:V("activatefile"),DID_REORDER_ITEMS:V("reorderfiles")},G=ke=>{const je={pond:Oe,...ke};delete je.type,M.element.dispatchEvent(new CustomEvent(`FilePond:${ke.type}`,{detail:je,bubbles:!0,cancelable:!0,composed:!0}));const De=[];ke.hasOwnProperty("error")&&De.push(ke.error),ke.hasOwnProperty("file")&&De.push(ke.file);const Be=["type","error","file"];Object.keys(ke).filter(tt=>!Be.includes(tt)).forEach(tt=>De.push(ke[tt])),Oe.fire(ke.type,...De);const He=i.query(`GET_ON${ke.type.toUpperCase()}`);He&&He(...De)},z=ke=>{ke.length&&ke.filter(je=>H[je.type]).forEach(je=>{const De=H[je.type];(Array.isArray(De)?De:[De]).forEach(Be=>{je.type==="DID_INIT_ITEM"?G(Be(je.data)):setTimeout(()=>{G(Be(je.data))},0)})})},N=ke=>i.dispatch("SET_OPTIONS",{options:ke}),W=ke=>i.query("GET_ACTIVE_ITEM",ke),$=ke=>new Promise((je,De)=>{i.dispatch("REQUEST_ITEM_PREPARE",{query:ke,success:Be=>{je(Be)},failure:Be=>{De(Be)}})}),X=(ke,je={})=>new Promise((De,Be)=>{re([{source:ke,options:je}],{index:je.index}).then(He=>De(He&&He[0])).catch(Be)}),te=ke=>ke.file&&ke.id,J=(ke,je)=>(typeof ke=="object"&&!te(ke)&&!je&&(je=ke,ke=void 0),i.dispatch("REMOVE_ITEM",{...je,query:ke}),i.query("GET_ACTIVE_ITEM",ke)===null),re=(...ke)=>new Promise((je,De)=>{const Be=[],He={};if(uw(ke[0]))Be.push.apply(Be,ke[0]),Object.assign(He,ke[1]||{});else{const tt=ke[ke.length-1];typeof tt=="object"&&!(tt instanceof Blob)&&Object.assign(He,ke.pop()),Be.push(...ke)}i.dispatch("ADD_ITEMS",{items:Be,index:He.index,interactionMethod:zs.API,success:je,failure:De})}),ce=()=>i.query("GET_ACTIVE_ITEMS"),Ee=ke=>new Promise((je,De)=>{i.dispatch("REQUEST_ITEM_PROCESSING",{query:ke,success:Be=>{je(Be)},failure:Be=>{De(Be)}})}),Me=(...ke)=>{const je=Array.isArray(ke[0])?ke[0]:ke,De=je.length?je:ce();return Promise.all(De.map($))},Le=(...ke)=>{const je=Array.isArray(ke[0])?ke[0]:ke;if(!je.length){const De=ce().filter(Be=>!(Be.status===In.IDLE&&Be.origin===Li.LOCAL)&&Be.status!==In.PROCESSING&&Be.status!==In.PROCESSING_COMPLETE&&Be.status!==In.PROCESSING_REVERT_ERROR);return Promise.all(De.map(Ee))}return Promise.all(je.map(Ee))},Ae=(...ke)=>{const je=Array.isArray(ke[0])?ke[0]:ke;let De;typeof je[je.length-1]=="object"?De=je.pop():Array.isArray(ke[0])&&(De=ke[1]);const Be=ce();return je.length?je.map(tt=>Uh(tt)?Be[tt]?Be[tt].id:null:tt).filter(tt=>tt).map(tt=>J(tt,De)):Promise.all(Be.map(tt=>J(tt,De)))},Oe={...fw(),...k,...QY(i,n),setOptions:N,addFile:X,addFiles:re,getFile:W,processFile:Ee,prepareFile:$,removeFile:J,moveFile:(ke,je)=>i.dispatch("MOVE_ITEM",{query:ke,index:je}),getFiles:ce,processFiles:Le,removeFiles:Ae,prepareFiles:Me,sort:ke=>i.dispatch("SORT",{compare:ke}),browse:()=>{var ke=M.element.querySelector("input[type=file]");ke&&ke.click()},destroy:()=>{Oe.fire("destroy",M.element),i.dispatch("ABORT_ALL"),M._destroy(),window.removeEventListener("resize",I),document.removeEventListener("visibilitychange",c),i.dispatch("DID_DESTROY")},insertBefore:ke=>TO(M.element,ke),insertAfter:ke=>SO(M.element,ke),appendTo:ke=>ke.appendChild(M.element),replaceElement:ke=>{TO(M.element,ke),ke.parentNode.removeChild(ke),t=ke},restoreElement:()=>{t&&(SO(t,M.element),M.element.parentNode.removeChild(M.element),t=null)},isAttachedTo:ke=>M.element===ke||t===ke,element:{get:()=>M.element},status:{get:()=>i.query("GET_STATUS")}};return i.dispatch("DID_INIT"),fu(Oe)},UN=(e={})=>{const t={};return ei(H1(),(i,c)=>{t[i]=c[0]}),YK({...t,...e})},XK=e=>e.charAt(0).toLowerCase()+e.slice(1),QK=e=>BN(e.replace(/^data-/,"")),VN=(e,t)=>{ei(t,(n,i)=>{ei(e,(c,f)=>{const m=new RegExp(n);if(!m.test(c)||(delete e[c],i===!1))return;if(Io(i)){e[i]=f;return}const v=i.group;Ni(i)&&!e[v]&&(e[v]={}),e[v][XK(c.replace(m,""))]=f}),i.mapping&&VN(e[i.group],i.mapping)})},KK=(e,t={})=>{const n=[];ei(e.attributes,c=>{n.push(e.attributes[c])});const i=n.filter(c=>c.name).reduce((c,f)=>{const m=yi(e,f.name);return c[QK(f.name)]=m===f.name?!0:m,c},{});return VN(i,t),i},JK=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};ld("SET_ATTRIBUTE_TO_OPTION_MAP",n);const i={...t},c=KK(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(c).forEach(m=>{Ni(c[m])?(Ni(i[m])||(i[m]={}),Object.assign(i[m],c[m])):i[m]=c[m]}),i.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(m=>({source:m.value,options:{type:m.dataset.type}})));const f=UN(i);return e.files&&Array.from(e.files).forEach(m=>{f.addFile(m)}),f.replaceElement(e),f},eJ=(...e)=>uY(e[0])?JK(...e):UN(...e),tJ=["fire","_read","_write"],nk=e=>{const t={};return cN(e,t,tJ),t},nJ=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,i)=>t[i]),rJ=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),i=new Worker(n);return{transfer:(c,f)=>{},post:(c,f,m)=>{const s=YI();i.onmessage=v=>{v.data.id===s&&f(v.data.message)},i.postMessage({id:s,message:c},m)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},iJ=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=c=>{n(c)},i.src=e}),jN=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},oJ=e=>jN(e,e.name),rk=[],sJ=e=>{if(rk.includes(e))return;rk.push(e);const t=e({addFilter:iX,utils:{Type:xt,forin:ei,isString:Io,isFile:dp,toNaturalFileSize:wN,replaceInString:nJ,getExtensionFromFilename:pw,getFilenameWithoutExtension:_N,guesstimateMimeType:DN,getFileFromBlob:hp,getFilenameFromURL:$y,createRoute:Co,createWorker:rJ,createView:_i,createItemAPI:Go,loadImage:iJ,copyFile:oJ,renameFile:jN,createBlob:mN,applyFilterChain:la,text:ci,getNumericAspectRatioFromString:dN},views:{fileActionButton:xN}});oX(t.options)},aJ=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",lJ=()=>"Promise"in window,cJ=()=>"slice"in Blob.prototype,uJ=()=>"URL"in window&&"createObjectURL"in window.URL,hJ=()=>"visibilityState"in document,dJ=()=>"performance"in window,fJ=()=>"supports"in(window.CSS||{}),pJ=()=>/MSIE|Trident/.test(window.navigator.userAgent),J2=(()=>{const e=rN()&&!aJ()&&hJ()&&lJ()&&cJ()&&uJ()&&dJ()&&(fJ()||pJ());return()=>e})(),Bc={apps:[]},mJ="filepond",cd=()=>{};let ik={},Zv=cd,tT=cd,ok=cd,sk=cd,X1=cd,ak=cd,lk=cd;if(J2()){zY(()=>{Bc.apps.forEach(n=>n._read())},n=>{Bc.apps.forEach(i=>i._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:J2,create:Zv,destroy:tT,parse:ok,find:sk,registerPlugin:X1,setOptions:lk}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>ei(H1(),(n,i)=>{ik[n]=i[1]});ik={},t(),Zv=(...n)=>{const i=eJ(...n);return i.on("destroy",tT),Bc.apps.push(i),nk(i)},tT=n=>{const i=Bc.apps.findIndex(c=>c.isAttachedTo(n));return i>=0?(Bc.apps.splice(i,1)[0].restoreElement(),!0):!1},ok=n=>Array.from(n.querySelectorAll(`.${mJ}`)).filter(f=>!Bc.apps.find(m=>m.isAttachedTo(f))).map(f=>Zv(f)),sk=n=>{const i=Bc.apps.find(c=>c.isAttachedTo(n));return i?nk(i):null},X1=(...n)=>{n.forEach(sJ),t()},ak=()=>{const n={};return ei(H1(),(i,c)=>{n[i]=c[0]}),n},lk=n=>(Ni(n)&&(Bc.apps.forEach(i=>{i.setOptions(n)}),sX(n)),ak())}/*!
 * react-filepond v7.1.2
 * A handy FilePond adapter component for React
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const gJ=J2(),yJ=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"];class GN extends pp.Component{constructor(t){super(t),this.allowFilesSync=!0}componentDidMount(){if(this._input=this._element.querySelector('input[type="file"]'),this._inputClone=this._input.cloneNode(),!gJ)return;const t=Object.assign({},this.props);if(t.onupdatefiles){const n=t.onupdatefiles;t.onupdatefiles=i=>{this.allowFilesSync=!1,n(i)}}this._pond=Zv(this._input,t),Object.keys(this._pond).filter(n=>!yJ.includes(n)).forEach(n=>{this[n]=this._pond[n]})}componentWillUnmount(){if(!this._pond)return;const t=document.createElement("div");t.append(this._pond.element),t.id="foo",this._pond.destroy(),this._pond=void 0,this._element.append(this._inputClone)}shouldComponentUpdate(){return this.allowFilesSync?!0:(this.allowFilesSync=!0,!1)}componentDidUpdate(){if(!this._pond)return;const t=Object.assign({},this.props);delete t.onupdatefiles,this._pond.setOptions(t)}render(){const{id:t,name:n,className:i,allowMultiple:c,required:f,captureMethod:m,acceptedFileTypes:s}=this.props;return ue.createElement("div",{className:"filepond--wrapper",ref:v=>this._element=v},ue.createElement("input",{type:"file",name:n,id:t,accept:s,multiple:c,required:f,className:i,capture:m}))}}/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const _J=e=>/^image\/jpeg/.test(e.type),vh={JPEG:65496,APP1:65505,EXIF:1165519206,TIFF:18761,Orientation:274,Unknown:65280},xh=(e,t,n=!1)=>e.getUint16(t,n),ck=(e,t,n=!1)=>e.getUint32(t,n),vJ=e=>new Promise((t,n)=>{const i=new FileReader;i.onload=function(c){const f=new DataView(c.target.result);if(xh(f,0)!==vh.JPEG){t(-1);return}const m=f.byteLength;let s=2;for(;s<m;){const v=xh(f,s);if(s+=2,v===vh.APP1){if(ck(f,s+=2)!==vh.EXIF)break;const E=xh(f,s+=6)===vh.TIFF;s+=ck(f,s+4,E);const I=xh(f,s,E);s+=2;for(let M=0;M<I;M++)if(xh(f,s+M*12,E)===vh.Orientation){t(xh(f,s+M*12+8,E));return}}else{if((v&vh.Unknown)!==vh.Unknown)break;s+=xh(f,s)}}t(-1)},i.readAsArrayBuffer(e.slice(0,64*1024))}),xJ=(()=>typeof window<"u"&&typeof window.document<"u")(),wJ=()=>xJ,bJ="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let $N;const Yv=wJ()?new Image:{};Yv.onload=()=>$N=Yv.naturalWidth>Yv.naturalHeight;Yv.src=bJ;const EJ=()=>$N,aM=({addFilter:e,utils:t})=>{const{Type:n,isFile:i}=t;return e("DID_LOAD_ITEM",(c,{query:f})=>new Promise((m,s)=>{const v=c.file;if(!i(v)||!_J(v)||!f("GET_ALLOW_IMAGE_EXIF_ORIENTATION")||!EJ())return m(c);vJ(v).then(E=>{c.setMetadata("exif",{orientation:E}),m(c)})})),{options:{allowImageExifOrientation:[!0,n.BOOLEAN]}}},TJ=typeof window<"u"&&typeof window.document<"u";TJ&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:aM}));/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const SJ=e=>/^image/.test(e.type),uk=(e,t)=>wy(e.x*t,e.y*t),hk=(e,t)=>wy(e.x+t.x,e.y+t.y),IJ=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:wy(e.x/t,e.y/t)},av=(e,t,n)=>{const i=Math.cos(t),c=Math.sin(t),f=wy(e.x-n.x,e.y-n.y);return wy(n.x+i*f.x-c*f.y,n.y+c*f.x+i*f.y)},wy=(e=0,t=0)=>({x:e,y:t}),$o=(e,t,n=1,i)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(i?t[i]:Math.min(t.width,t.height))},MJ=(e,t,n)=>{const i=e.borderStyle||e.lineStyle||"solid",c=e.backgroundColor||e.fontColor||"transparent",f=e.borderColor||e.lineColor||"transparent",m=$o(e.borderWidth||e.lineWidth,t,n),s=e.lineCap||"round",v=e.lineJoin||"round",E=typeof i=="string"?"":i.map(M=>$o(M,t,n)).join(","),I=e.opacity||1;return{"stroke-linecap":s,"stroke-linejoin":v,"stroke-width":m||0,"stroke-dasharray":E,stroke:f,fill:c,opacity:I}},Cs=e=>e!=null,AJ=(e,t,n=1)=>{let i=$o(e.x,t,n,"width")||$o(e.left,t,n,"width"),c=$o(e.y,t,n,"height")||$o(e.top,t,n,"height"),f=$o(e.width,t,n,"width"),m=$o(e.height,t,n,"height"),s=$o(e.right,t,n,"width"),v=$o(e.bottom,t,n,"height");return Cs(c)||(Cs(m)&&Cs(v)?c=t.height-m-v:c=v),Cs(i)||(Cs(f)&&Cs(s)?i=t.width-f-s:i=s),Cs(f)||(Cs(i)&&Cs(s)?f=t.width-i-s:f=0),Cs(m)||(Cs(c)&&Cs(v)?m=t.height-c-v:m=0),{x:i||0,y:c||0,width:f||0,height:m||0}},CJ=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),nl=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),PJ="http://www.w3.org/2000/svg",Bf=(e,t)=>{const n=document.createElementNS(PJ,e);return t&&nl(n,t),n},RJ=e=>nl(e,{...e.rect,...e.styles}),DJ=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,i=e.rect.width*.5,c=e.rect.height*.5;return nl(e,{cx:t,cy:n,rx:i,ry:c,...e.styles})},OJ={contain:"xMidYMid meet",cover:"xMidYMid slice"},kJ=(e,t)=>{nl(e,{...e.rect,...e.styles,preserveAspectRatio:OJ[t.fit]||"none"})},LJ={left:"start",center:"middle",right:"end"},zJ=(e,t,n,i)=>{const c=$o(t.fontSize,n,i),f=t.fontFamily||"sans-serif",m=t.fontWeight||"normal",s=LJ[t.textAlign]||"start";nl(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":m,"font-size":c,"font-family":f,"text-anchor":s}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},NJ=(e,t,n,i)=>{nl(e,{...e.rect,...e.styles,fill:"none"});const c=e.childNodes[0],f=e.childNodes[1],m=e.childNodes[2],s=e.rect,v={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(nl(c,{x1:s.x,y1:s.y,x2:v.x,y2:v.y}),!t.lineDecoration)return;f.style.display="none",m.style.display="none";const E=IJ({x:v.x-s.x,y:v.y-s.y}),I=$o(.05,n,i);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const M=uk(E,I),P=hk(s,M),D=av(s,2,P),k=av(s,-2,P);nl(f,{style:"display:block;",d:`M${D.x},${D.y} L${s.x},${s.y} L${k.x},${k.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const M=uk(E,-I),P=hk(v,M),D=av(v,2,P),k=av(v,-2,P);nl(m,{style:"display:block;",d:`M${D.x},${D.y} L${v.x},${v.y} L${k.x},${k.y}`})}},BJ=(e,t,n,i)=>{nl(e,{...e.styles,fill:"none",d:CJ(t.points.map(c=>({x:$o(c.x,n,i,"width"),y:$o(c.y,n,i,"height")})))})},lv=e=>t=>Bf(e,{id:t.id}),FJ=e=>{const t=Bf("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},UJ=e=>{const t=Bf("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Bf("line");t.appendChild(n);const i=Bf("path");t.appendChild(i);const c=Bf("path");return t.appendChild(c),t},VJ={image:FJ,rect:lv("rect"),ellipse:lv("ellipse"),text:lv("text"),path:lv("path"),line:UJ},jJ={rect:RJ,ellipse:DJ,image:kJ,text:zJ,path:BJ,line:NJ},GJ=(e,t)=>VJ[e](t),$J=(e,t,n,i,c)=>{t!=="path"&&(e.rect=AJ(n,i,c)),e.styles=MJ(n,i,c),jJ[t](e,n,i,c)},WJ=["x","y","left","top","right","bottom","width","height"],qJ=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,HJ=e=>{const[t,n]=e,i=n.points?{}:WJ.reduce((c,f)=>(c[f]=qJ(n[f]),c),{});return[t,{zIndex:0,...n,...i}]},ZJ=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,YJ=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:i,resize:c,markup:f}=n,m=n.width,s=n.height;let v=i.width,E=i.height;if(c){const{size:D}=c;let k=D&&D.width,V=D&&D.height;const H=c.mode,G=c.upscale;k&&!V&&(V=k),V&&!k&&(k=V);const z=v<k&&E<V;if(!z||z&&G){let N=k/v,W=V/E;if(H==="force")v=k,E=V;else{let $;H==="cover"?$=Math.max(N,W):H==="contain"&&($=Math.min(N,W)),v=v*$,E=E*$}}}const I={width:m,height:s};t.element.setAttribute("width",I.width),t.element.setAttribute("height",I.height);const M=Math.min(m/v,s/E);t.element.innerHTML="";const P=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");f.filter(P).map(HJ).sort(ZJ).forEach(D=>{const[k,V]=D,H=GJ(k,V);$J(H,k,V,I,M),t.element.appendChild(H)})}}),jg=(e,t)=>({x:e,y:t}),XJ=(e,t)=>e.x*t.x+e.y*t.y,dk=(e,t)=>jg(e.x-t.x,e.y-t.y),QJ=(e,t)=>XJ(dk(e,t),dk(e,t)),fk=(e,t)=>Math.sqrt(QJ(e,t)),pk=(e,t)=>{const n=e,i=1.5707963267948966,c=t,f=1.5707963267948966-t,m=Math.sin(i),s=Math.sin(c),v=Math.sin(f),E=Math.cos(f),I=n/m,M=I*s,P=I*v;return jg(E*M,E*P)},KJ=(e,t)=>{const n=e.width,i=e.height,c=pk(n,t),f=pk(i,t),m=jg(e.x+Math.abs(c.x),e.y-Math.abs(c.y)),s=jg(e.x+e.width+Math.abs(f.y),e.y+Math.abs(f.x)),v=jg(e.x-Math.abs(f.y),e.y+e.height-Math.abs(f.x));return{width:fk(m,s),height:fk(m,v)}},JJ=(e,t,n=1)=>{const i=e.height/e.width;let c=1,f=t,m=1,s=i;s>f&&(s=f,m=s/i);const v=Math.max(c/m,f/s),E=e.width/(n*v*m),I=E*t;return{width:E,height:I}},WN=(e,t,n,i)=>{const c=i.x>.5?1-i.x:i.x,f=i.y>.5?1-i.y:i.y,m=c*2*e.width,s=f*2*e.height,v=KJ(t,n);return Math.max(v.width/m,v.height/s)},qN=(e,t)=>{let n=e.width,i=n*t;i>e.height&&(i=e.height,n=i/t);const c=(e.width-n)*.5,f=(e.height-i)*.5;return{x:c,y:f,width:n,height:i}},eee=(e,t={})=>{let{zoom:n,rotation:i,center:c,aspectRatio:f}=t;f||(f=e.height/e.width);const m=JJ(e,f,n),s={x:m.width*.5,y:m.height*.5},v={x:0,y:0,width:m.width,height:m.height,center:s},E=typeof t.scaleToFit>"u"||t.scaleToFit,I=WN(e,qN(v,f),i,E?c:{x:.5,y:.5}),M=n*I;return{widthFloat:m.width/M,heightFloat:m.height/M,width:Math.round(m.width/M),height:Math.round(m.height/M)}},Ka={type:"spring",stiffness:.5,damping:.45,mass:10},tee=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),nee=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Ka,originY:Ka,scaleX:Ka,scaleY:Ka,translateX:Ka,translateY:Ka,rotateZ:Ka}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(tee(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:i}=n.crop,{bitmap:c}=t.ref;c.scaleX=i.horizontal?-1:1,c.scaleY=i.vertical?-1:1}}),ree=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){n.background&&(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(nee(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(YJ(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const i=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");i!==null&&(i==="grid"?t.element.dataset.transparencyIndicator=i:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:i})=>{const{crop:c,markup:f,resize:m,dirty:s,width:v,height:E}=n;t.ref.image.crop=c;const I={x:0,y:0,width:v,height:E,center:{x:v*.5,y:E*.5}},M={width:t.ref.image.width,height:t.ref.image.height},P={x:c.center.x*M.width,y:c.center.y*M.height},D={x:I.center.x-M.width*c.center.x,y:I.center.y-M.height*c.center.y},k=Math.PI*2+c.rotation%(Math.PI*2),V=c.aspectRatio||M.height/M.width,H=typeof c.scaleToFit>"u"||c.scaleToFit,G=WN(M,qN(I,V),k,H?c.center:{x:.5,y:.5}),z=c.zoom*G;f&&f.length?(t.ref.createMarkup(),t.ref.markup.width=v,t.ref.markup.height=E,t.ref.markup.resize=m,t.ref.markup.dirty=s,t.ref.markup.markup=f,t.ref.markup.crop=eee(M,c)):t.ref.markup&&t.ref.destroyMarkup();const N=t.ref.image;if(i){N.originX=null,N.originY=null,N.translateX=null,N.translateY=null,N.rotateZ=null,N.scaleX=null,N.scaleY=null;return}N.originX=P.x,N.originY=P.y,N.translateX=D.x,N.translateY=D.y,N.rotateZ=k,N.scaleX=z,N.scaleY=z}}),iee=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Ka,scaleY:Ka,translateY:Ka,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(ree(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:i})=>{const{clip:c}=t.ref,{image:f,crop:m,markup:s,resize:v,dirty:E}=n;if(c.crop=m,c.markup=s,c.resize=v,c.dirty=E,c.opacity=i?0:1,i||t.rect.element.hidden)return;const I=f.height/f.width;let M=m.aspectRatio||I;const P=t.rect.inner.width,D=t.rect.inner.height;let k=t.query("GET_IMAGE_PREVIEW_HEIGHT");const V=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),H=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),G=t.query("GET_PANEL_ASPECT_RATIO"),z=t.query("GET_ALLOW_MULTIPLE");G&&!z&&(k=P*G,M=G);let N=k!==null?k:Math.max(V,Math.min(P*M,H)),W=N/M;W>P&&(W=P,N=W*M),N>D&&(N=D,W=D/M),c.width=W,c.height=N}});let oee=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,mk=0;const see=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let i=oee;if(document.querySelector("base")){const c=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+c+"#")}mk++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=i.replace(/__UID__/g,mk)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),aee=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},lee=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,i=t.data,c=i.length,f=n[0],m=n[1],s=n[2],v=n[3],E=n[4],I=n[5],M=n[6],P=n[7],D=n[8],k=n[9],V=n[10],H=n[11],G=n[12],z=n[13],N=n[14],W=n[15],$=n[16],X=n[17],te=n[18],J=n[19];let re=0,ce=0,Ee=0,Me=0,Le=0;for(;re<c;re+=4)ce=i[re]/255,Ee=i[re+1]/255,Me=i[re+2]/255,Le=i[re+3]/255,i[re]=Math.max(0,Math.min((ce*f+Ee*m+Me*s+Le*v+E)*255,255)),i[re+1]=Math.max(0,Math.min((ce*I+Ee*M+Me*P+Le*D+k)*255,255)),i[re+2]=Math.max(0,Math.min((ce*V+Ee*H+Me*G+Le*z+N)*255,255)),i[re+3]=Math.max(0,Math.min((ce*W+Ee*$+Me*X+Le*te+J)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},cee=(e,t)=>{let n=new Image;n.onload=()=>{const i=n.naturalWidth,c=n.naturalHeight;n=null,t(i,c)},n.src=e},uee={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},hee=(e,t,n,i)=>{i!==-1&&e.transform.apply(e,uee[i](t,n))},dee=(e,t,n,i)=>{t=Math.round(t),n=Math.round(n);const c=document.createElement("canvas");c.width=t,c.height=n;const f=c.getContext("2d");return i>=5&&i<=8&&([t,n]=[n,t]),hee(f,t,n,i),f.drawImage(e,0,0,t,n),c},HN=e=>/^image/.test(e.type)&&!/svg/.test(e.type),fee=10,pee=10,mee=e=>{const t=Math.min(fee/e.width,pee/e.height),n=document.createElement("canvas"),i=n.getContext("2d"),c=n.width=Math.ceil(e.width*t),f=n.height=Math.ceil(e.height*t);i.drawImage(e,0,0,c,f);let m=null;try{m=i.getImageData(0,0,c,f).data}catch{return null}const s=m.length;let v=0,E=0,I=0,M=0;for(;M<s;M+=4)v+=m[M]*m[M],E+=m[M+1]*m[M+1],I+=m[M+2]*m[M+2];return v=nT(v,s),E=nT(E,s),I=nT(I,s),{r:v,g:E,b:I}},nT=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),gee=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),yee=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},_ee=e=>new Promise((t,n)=>{const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{t(i)},i.onerror=c=>{n(c)},i.src=e}),vee=e=>{const t=see(e),n=iee(e),{createWorker:i}=e.utils,c=(z,N,W)=>new Promise($=>{z.ref.imageData||(z.ref.imageData=W.getContext("2d").getImageData(0,0,W.width,W.height));const X=yee(z.ref.imageData);if(!N||N.length!==20)return W.getContext("2d").putImageData(X,0,0),$();const te=i(lee);te.post({imageData:X,colorMatrix:N},J=>{W.getContext("2d").putImageData(J,0,0),te.terminate(),$()},[X.data.buffer])}),f=(z,N)=>{z.removeChildView(N),N.image.width=1,N.image.height=1,N._destroy()},m=({root:z})=>{const N=z.ref.images.shift();return N.opacity=0,N.translateY=-15,z.ref.imageViewBin.push(N),N},s=({root:z,props:N,image:W})=>{const $=N.id,X=z.query("GET_ITEM",{id:$});if(!X)return;const te=X.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},J=z.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let re,ce,Ee=!1;z.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(re=X.getMetadata("markup")||[],ce=X.getMetadata("resize"),Ee=!0);const Me=z.appendChildView(z.createChildView(n,{id:$,image:W,crop:te,resize:ce,markup:re,dirty:Ee,background:J,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),z.childViews.length);z.ref.images.push(Me),Me.opacity=1,Me.scaleX=1,Me.scaleY=1,Me.translateY=0,setTimeout(()=>{z.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:$})},250)},v=({root:z,props:N})=>{const W=z.query("GET_ITEM",{id:N.id});if(!W)return;const $=z.ref.images[z.ref.images.length-1];$.crop=W.getMetadata("crop"),$.background=z.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),z.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&($.dirty=!0,$.resize=W.getMetadata("resize"),$.markup=W.getMetadata("markup"))},E=({root:z,props:N,action:W})=>{if(!/crop|filter|markup|resize/.test(W.change.key)||!z.ref.images.length)return;const $=z.query("GET_ITEM",{id:N.id});if($){if(/filter/.test(W.change.key)){const X=z.ref.images[z.ref.images.length-1];c(z,W.change.value,X.image);return}if(/crop|markup|resize/.test(W.change.key)){const X=$.getMetadata("crop"),te=z.ref.images[z.ref.images.length-1];if(X&&X.aspectRatio&&te.crop&&te.crop.aspectRatio&&Math.abs(X.aspectRatio-te.crop.aspectRatio)>1e-5){const J=m({root:z});s({root:z,props:N,image:gee(J.image)})}else v({root:z,props:N})}}},I=z=>{const W=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(W?parseInt(W[1]):null)<=58?!1:"createImageBitmap"in window&&HN(z)},M=({root:z,props:N})=>{const{id:W}=N,$=z.query("GET_ITEM",W);if(!$)return;const X=URL.createObjectURL($.file);cee(X,(te,J)=>{z.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:W,width:te,height:J})})},P=({root:z,props:N})=>{const{id:W}=N,$=z.query("GET_ITEM",W);if(!$)return;const X=URL.createObjectURL($.file),te=()=>{_ee(X).then(J)},J=re=>{URL.revokeObjectURL(X);const Ee=($.getMetadata("exif")||{}).orientation||-1;let{width:Me,height:Le}=re;if(!Me||!Le)return;Ee>=5&&Ee<=8&&([Me,Le]=[Le,Me]);const Ae=Math.max(1,window.devicePixelRatio*.75),ke=z.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*Ae,je=Le/Me,De=z.rect.element.width,Be=z.rect.element.height;let He=De,tt=He*je;je>1?(He=Math.min(Me,De*ke),tt=He*je):(tt=Math.min(Le,Be*ke),He=tt/je);const Mt=dee(re,He,tt,Ee),Dt=()=>{const Nt=z.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?mee(data):null;$.setMetadata("color",Nt,!0),"close"in re&&re.close(),z.ref.overlayShadow.opacity=1,s({root:z,props:N,image:Mt})},bt=$.getMetadata("filter");bt?c(z,bt,Mt).then(Dt):Dt()};if(I($.file)){const re=i(aee);re.post({file:$.file},ce=>{if(re.terminate(),!ce){te();return}J(ce)})}else te()},D=({root:z})=>{const N=z.ref.images[z.ref.images.length-1];N.translateY=0,N.scaleX=1,N.scaleY=1,N.opacity=1},k=({root:z})=>{z.ref.overlayShadow.opacity=1,z.ref.overlayError.opacity=0,z.ref.overlaySuccess.opacity=0},V=({root:z})=>{z.ref.overlayShadow.opacity=.25,z.ref.overlayError.opacity=1},H=({root:z})=>{z.ref.overlayShadow.opacity=.25,z.ref.overlaySuccess.opacity=1},G=({root:z})=>{z.ref.images=[],z.ref.imageData=null,z.ref.imageViewBin=[],z.ref.overlayShadow=z.appendChildView(z.createChildView(t,{opacity:0,status:"idle"})),z.ref.overlaySuccess=z.appendChildView(z.createChildView(t,{opacity:0,status:"success"})),z.ref.overlayError=z.appendChildView(z.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:G,styles:["height"],apis:["height"],destroy:({root:z})=>{z.ref.images.forEach(N=>{N.image.width=1,N.image.height=1})},didWriteView:({root:z})=>{z.ref.images.forEach(N=>{N.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:D,DID_IMAGE_PREVIEW_CONTAINER_CREATE:M,DID_FINISH_CALCULATE_PREVIEWSIZE:P,DID_UPDATE_ITEM_METADATA:E,DID_THROW_ITEM_LOAD_ERROR:V,DID_THROW_ITEM_PROCESSING_ERROR:V,DID_THROW_ITEM_INVALID:V,DID_COMPLETE_ITEM_PROCESSING:H,DID_START_ITEM_PROCESSING:k,DID_REVERT_ITEM_PROCESSING:k},({root:z})=>{const N=z.ref.imageViewBin.filter(W=>W.opacity===0);z.ref.imageViewBin=z.ref.imageViewBin.filter(W=>W.opacity>0),N.forEach(W=>f(z,W)),N.length=0})})},lM=e=>{const{addFilter:t,utils:n}=e,{Type:i,createRoute:c,isFile:f}=n,m=vee(e);return t("CREATE_VIEW",s=>{const{is:v,view:E,query:I}=s;if(!v("file")||!I("GET_ALLOW_IMAGE_PREVIEW"))return;const M=({root:H,props:G})=>{const{id:z}=G,N=I("GET_ITEM",z);if(!N||!f(N.file)||N.archived)return;const W=N.file;if(!SJ(W)||!I("GET_IMAGE_PREVIEW_FILTER_ITEM")(N))return;const $="createImageBitmap"in(window||{}),X=I("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!$&&X&&W.size>X)return;H.ref.imagePreview=E.appendChildView(E.createChildView(m,{id:z}));const te=H.query("GET_IMAGE_PREVIEW_HEIGHT");te&&H.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:N.id,height:te});const J=!$&&W.size>I("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");H.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:z},J)},P=(H,G)=>{if(!H.ref.imagePreview)return;let{id:z}=G;const N=H.query("GET_ITEM",{id:z});if(!N)return;const W=H.query("GET_PANEL_ASPECT_RATIO"),$=H.query("GET_ITEM_PANEL_ASPECT_RATIO"),X=H.query("GET_IMAGE_PREVIEW_HEIGHT");if(W||$||X)return;let{imageWidth:te,imageHeight:J}=H.ref;if(!te||!J)return;const re=H.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),ce=H.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),Me=(N.getMetadata("exif")||{}).orientation||-1;if(Me>=5&&Me<=8&&([te,J]=[J,te]),!HN(N.file)||H.query("GET_IMAGE_PREVIEW_UPSCALE")){const De=2048/te;te*=De,J*=De}const Le=J/te,Ae=(N.getMetadata("crop")||{}).aspectRatio||Le;let Oe=Math.max(re,Math.min(J,ce));const ke=H.rect.element.width,je=Math.min(ke*Ae,Oe);H.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:N.id,height:je})},D=({root:H})=>{H.ref.shouldRescale=!0},k=({root:H,action:G})=>{G.change.key==="crop"&&(H.ref.shouldRescale=!0)},V=({root:H,action:G})=>{H.ref.imageWidth=G.width,H.ref.imageHeight=G.height,H.ref.shouldRescale=!0,H.ref.shouldDrawPreview=!0,H.dispatch("KICK")};E.registerWriter(c({DID_RESIZE_ROOT:D,DID_STOP_RESIZE:D,DID_LOAD_ITEM:M,DID_IMAGE_PREVIEW_CALCULATE_SIZE:V,DID_UPDATE_ITEM_METADATA:k},({root:H,props:G})=>{H.ref.imagePreview&&(H.rect.element.hidden||(H.ref.shouldRescale&&(P(H,G),H.ref.shouldRescale=!1),H.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{H.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:G.id})})}),H.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[()=>!0,i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,i.FUNCTION]}}},xee=typeof window<"u"&&typeof window.document<"u";xee&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:lM}));var wee=ue.useLayoutEffect,bee=function(t){var n=ue.useRef(t);return wee(function(){n.current=t}),n},gk=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Eee=function(t,n){var i=ue.useRef();return ue.useCallback(function(c){t.current=c,i.current&&gk(i.current,null),i.current=n,n&&gk(n,c)},[n])},yk={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},_k=function(t){Object.keys(yk).forEach(function(n){t.style.setProperty(n,yk[n],"important")})},bo=null,vk=function(t,n){var i=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?i+n.borderSize:i-n.paddingSize};function Tee(e,t,n,i){n===void 0&&(n=1),i===void 0&&(i=1/0),bo||(bo=document.createElement("textarea"),bo.setAttribute("tabindex","-1"),bo.setAttribute("aria-hidden","true"),_k(bo)),bo.parentNode===null&&document.body.appendChild(bo);var c=e.paddingSize,f=e.borderSize,m=e.sizingStyle,s=m.boxSizing;Object.keys(m).forEach(function(P){var D=P;bo.style[D]=m[D]}),_k(bo),bo.value=t;var v=vk(bo,e);bo.value=t,v=vk(bo,e),bo.value="x";var E=bo.scrollHeight-c,I=E*n;s==="border-box"&&(I=I+c+f),v=Math.max(I,v);var M=E*i;return s==="border-box"&&(M=M+c+f),v=Math.min(M,v),[v,E]}var xk=function(){},See=function(t,n){return t.reduce(function(i,c){return i[c]=n[c],i},{})},Iee=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Mee=!!document.documentElement.currentStyle,Aee=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var i=See(Iee,n),c=i.boxSizing;if(c==="")return null;Mee&&c==="border-box"&&(i.width=parseFloat(i.width)+parseFloat(i.borderRightWidth)+parseFloat(i.borderLeftWidth)+parseFloat(i.paddingRight)+parseFloat(i.paddingLeft)+"px");var f=parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),m=parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth);return{sizingStyle:i,paddingSize:f,borderSize:m}};function ZN(e,t,n){var i=bee(n);ue.useLayoutEffect(function(){var c=function(m){return i.current(m)};return e.addEventListener(t,c),function(){return e.removeEventListener(t,c)}},[])}var Cee=function(t){ZN(window,"resize",t)},Pee=function(t){ZN(document.fonts,"loadingdone",t)},Ree=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Dee=function(t,n){var i=t.cacheMeasurements,c=t.maxRows,f=t.minRows,m=t.onChange,s=m===void 0?xk:m,v=t.onHeightChange,E=v===void 0?xk:v,I=Hq(t,Ree),M=I.value!==void 0,P=ue.useRef(null),D=Eee(P,n),k=ue.useRef(0),V=ue.useRef(),H=function(){var N=P.current,W=i&&V.current?V.current:Aee(N);if(W){V.current=W;var $=Tee(W,N.value||N.placeholder||"x",f,c),X=$[0],te=$[1];k.current!==X&&(k.current=X,N.style.setProperty("height",X+"px","important"),E(X,{rowHeight:te}))}},G=function(N){M||H(),s(N)};return ue.useLayoutEffect(H),Cee(H),Pee(H),ue.createElement("textarea",V2({},I,{onChange:G,ref:D}))},Oee=ue.forwardRef(Dee);const kee=Oee,Lee=({setDisplayedComponent:e})=>{X1(aM,lM);const[t,n]=lY(),[i,c]=ue.useState({dateTraveled:"",tripLength:"",description:""}),[f,m]=ue.useState(""),[s,v]=ue.useState([]),E=()=>{c({dateTraveled:"",tripLength:"",description:""}),m(""),v([])},I=X=>{let te=X.target.value;c({...i,[X.target.id]:te})},M=X=>{m(X)},P=async X=>{try{let te=await HI(X);return await WI(te[0])}catch(te){console.log(te)}},{data:D,isSuccess:k}=Mu(),[V,{isLoading:H,error:G}]=sY(),[z,N]=ue.useState(""),W=async X=>{var te,J,re,ce,Ee,Me;X.preventDefault();try{const Le=await P(f),Ae=s.map(ke=>ke==null?void 0:ke.serverId);console.log(Ae),console.log(s);const Oe={...i,destination:f,destCoordinates:{...Le},photos:Ae,creator:D.user._id};await V(Oe).unwrap(),E(),N("")}catch(Le){switch(console.log(Object.keys((J=(te=Le==null?void 0:Le.data)==null?void 0:te.message)==null?void 0:J.errors).toString()),Object.keys((ce=(re=Le==null?void 0:Le.data)==null?void 0:re.message)==null?void 0:ce.errors).toString()){case"tripLength":N("You forget to enter the length of this trip!");break;case"destination":N("You forget to enter the destination of this trip!");break;case"dateTraveled":N("You forget to enter the date you left for this trip!");break;case"destCoordinates":N("Hmmm... We cant seem to find the destinatin you entered. Try again.");break;default:N((Me=(Ee=Le==null?void 0:Le.data)==null?void 0:Ee.message)==null?void 0:Me._message);break}}},$=ue.useCallback(({getInputProps:X,getSuggestionItemProps:te,suggestions:J,loading:re})=>At("div",{className:"autocomplete-root",children:[Pe("input",{className:"block p-3 w-full font-roboto font-semibold text-lg text-zinc-800 border-2 border-gray-500 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg",...X(),placeholder:"e.g. Rome, Italy"}),At("div",{className:"absolute bg-white rounded-xl  shadow-lg",children:[re&&Pe("div",{className:"text-xl font-roboto text-zinc-800",children:"Loading..."}),J.map(ce=>Pe("div",{className:"transition text-3xl font-roboto font-medium px-10 py-2 text-zinc-800 hover:text-purple-700 hover:scale-105 max-w-lg truncate",...te(ce),children:Pe("span",{children:ce.description})},ce.description))]})]}),[f]);return At("div",{className:"flex flex-col bg-white shadow-xl rounded-3xl p-6 w-11/12 md:w-11/12 lg:w-11/12 xl:w-1/2 z-10",children:[Pe("div",{className:"flex justify-between w-full h-full",children:Pe("button",{onClick:()=>e(X=>!X),children:Pe(Jz,{className:"h-10 w-10 text-zinc-800 mb-5"})})}),At("form",{onSubmit:W,className:"flex flex-row flex-wrap gap-5 w-full",children:[Pe("div",{className:" flex-grow w-1/3",children:At("label",{className:"font-roboto text-xl font-medium flex flex-col",children:["Photos",Pe(GN,{files:s,onupdatefiles:X=>v(X),instantUpload:!0,allowReorder:!0,allowMultiple:!0,allowFileEncode:!0,maxFiles:4,server:{url:"http://localhost:3500/photos",process:"/addPhoto",revert:async(X,te,J)=>{console.log("removing: "+X);try{await t(X),te()}catch(re){console.log(re)}J("oops")}},name:"images",labelIdle:'Add some pics! <span class="filepond--label-action">Browse</span>'})]})}),At("div",{className:" flex-grow  space-y-3",children:[At("label",{className:"font-roboto text-xl font-medium flex flex-col",children:["Destination",Pe(nN,{value:f,onChange:M,children:$})]}),At("div",{className:"flex flex-wrap gap-3",children:[At("label",{className:"font-roboto text-xl font-medium flex flex-col basis-1/3 flex-grow",children:["Date Travled",Pe("input",{id:"dateTraveled",onChange:I,value:i.dateTraveled,type:"date",className:"block p-3 w-full  font-roboto font-semibold text-lg text-zinc-800 border-2 border-gray-500 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg"})]}),At("label",{className:"font-roboto text-xl font-medium flex flex-col basis-1/3 flex-grow",children:["Trip Length",Pe("input",{id:"tripLength",onChange:I,value:i.tripLength,type:"number",className:"block p-3 w-full font-roboto font-semibold text-lg text-zinc-800 border-2 border-gray-500 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg"})]})]}),At("label",{className:"font-roboto text-xl font-medium flex flex-col",children:["Date Travled",Pe(kee,{placeholder:"Beautiful architecture and amazing food!...",id:"description",onChange:X=>I(X),value:i.description,className:"block p-2 w-full font-roboto font-semibold text-lg text-zinc-800 border-2 border-gray-500 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg",minRows:2,spellCheck:"false"})]}),At("p",{className:"text-red-700 font-sans font-medium text-2xl text-center pt-2",children:[" ",z]}),Pe("button",{className:"w-full bg-zinc-800 text-white rounded-md h-14 text-xl mt-10 active:scale-95 transition",children:"Post"})]})]})]})};//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var YN;function Gt(){return YN.apply(null,arguments)}function zee(e){YN=e}function xa(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Yh(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function tr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cM(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(tr(e,t))return!1;return!0}function jo(e){return e===void 0}function ec(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Wy(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function XN(e,t){var n=[],i,c=e.length;for(i=0;i<c;++i)n.push(t(e[i],i));return n}function Xc(e,t){for(var n in t)tr(t,n)&&(e[n]=t[n]);return tr(t,"toString")&&(e.toString=t.toString),tr(t,"valueOf")&&(e.valueOf=t.valueOf),e}function fl(e,t,n,i){return x4(e,t,n,i,!0).utc()}function Nee(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Pn(e){return e._pf==null&&(e._pf=Nee()),e._pf}var eS;Array.prototype.some?eS=Array.prototype.some:eS=function(e){var t=Object(this),n=t.length>>>0,i;for(i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};function uM(e){if(e._isValid==null){var t=Pn(e),n=eS.call(t.parsedDateParts,function(c){return c!=null}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=i;else return i}return e._isValid}function yw(e){var t=fl(NaN);return e!=null?Xc(Pn(t),e):Pn(t).userInvalidated=!0,t}var wk=Gt.momentProperties=[],rT=!1;function hM(e,t){var n,i,c,f=wk.length;if(jo(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),jo(t._i)||(e._i=t._i),jo(t._f)||(e._f=t._f),jo(t._l)||(e._l=t._l),jo(t._strict)||(e._strict=t._strict),jo(t._tzm)||(e._tzm=t._tzm),jo(t._isUTC)||(e._isUTC=t._isUTC),jo(t._offset)||(e._offset=t._offset),jo(t._pf)||(e._pf=Pn(t)),jo(t._locale)||(e._locale=t._locale),f>0)for(n=0;n<f;n++)i=wk[n],c=t[i],jo(c)||(e[i]=c);return e}function qy(e){hM(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),rT===!1&&(rT=!0,Gt.updateOffset(this),rT=!1)}function wa(e){return e instanceof qy||e!=null&&e._isAMomentObject!=null}function QN(e){Gt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Vs(e,t){var n=!0;return Xc(function(){if(Gt.deprecationHandler!=null&&Gt.deprecationHandler(null,e),n){var i=[],c,f,m,s=arguments.length;for(f=0;f<s;f++){if(c="",typeof arguments[f]=="object"){c+=`
[`+f+"] ";for(m in arguments[0])tr(arguments[0],m)&&(c+=m+": "+arguments[0][m]+", ");c=c.slice(0,-2)}else c=arguments[f];i.push(c)}QN(e+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var bk={};function KN(e,t){Gt.deprecationHandler!=null&&Gt.deprecationHandler(e,t),bk[e]||(QN(t),bk[e]=!0)}Gt.suppressDeprecationWarnings=!1;Gt.deprecationHandler=null;function pl(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Bee(e){var t,n;for(n in e)tr(e,n)&&(t=e[n],pl(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function tS(e,t){var n=Xc({},e),i;for(i in t)tr(t,i)&&(Yh(e[i])&&Yh(t[i])?(n[i]={},Xc(n[i],e[i]),Xc(n[i],t[i])):t[i]!=null?n[i]=t[i]:delete n[i]);for(i in e)tr(e,i)&&!tr(t,i)&&Yh(e[i])&&(n[i]=Xc({},n[i]));return n}function dM(e){e!=null&&this.set(e)}var nS;Object.keys?nS=Object.keys:nS=function(e){var t,n=[];for(t in e)tr(e,t)&&n.push(t);return n};var Fee={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Uee(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return pl(i)?i.call(t,n):i}function dl(e,t,n){var i=""+Math.abs(e),c=t-i.length,f=e>=0;return(f?n?"+":"":"-")+Math.pow(10,Math.max(0,c)).toString().substr(1)+i}var fM=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,cv=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,iT={},Xf={};function ln(e,t,n,i){var c=i;typeof i=="string"&&(c=function(){return this[i]()}),e&&(Xf[e]=c),t&&(Xf[t[0]]=function(){return dl(c.apply(this,arguments),t[1],t[2])}),n&&(Xf[n]=function(){return this.localeData().ordinal(c.apply(this,arguments),e)})}function Vee(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function jee(e){var t=e.match(fM),n,i;for(n=0,i=t.length;n<i;n++)Xf[t[n]]?t[n]=Xf[t[n]]:t[n]=Vee(t[n]);return function(c){var f="",m;for(m=0;m<i;m++)f+=pl(t[m])?t[m].call(c,e):t[m];return f}}function Xv(e,t){return e.isValid()?(t=JN(t,e.localeData()),iT[t]=iT[t]||jee(t),iT[t](e)):e.localeData().invalidDate()}function JN(e,t){var n=5;function i(c){return t.longDateFormat(c)||c}for(cv.lastIndex=0;n>=0&&cv.test(e);)e=e.replace(cv,i),cv.lastIndex=0,n-=1;return e}var Gee={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function $ee(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(fM).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[e])}var Wee="Invalid date";function qee(){return this._invalidDate}var Hee="%d",Zee=/\d{1,2}/;function Yee(e){return this._ordinal.replace("%d",e)}var Xee={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Qee(e,t,n,i){var c=this._relativeTime[n];return pl(c)?c(e,t,n,i):c.replace(/%d/i,e)}function Kee(e,t){var n=this._relativeTime[e>0?"future":"past"];return pl(n)?n(t):n.replace(/%s/i,t)}var Gg={};function go(e,t){var n=e.toLowerCase();Gg[n]=Gg[n+"s"]=Gg[t]=e}function js(e){return typeof e=="string"?Gg[e]||Gg[e.toLowerCase()]:void 0}function pM(e){var t={},n,i;for(i in e)tr(e,i)&&(n=js(i),n&&(t[n]=e[i]));return t}var e4={};function yo(e,t){e4[e]=t}function Jee(e){var t=[],n;for(n in e)tr(e,n)&&t.push({unit:n,priority:e4[n]});return t.sort(function(i,c){return i.priority-c.priority}),t}function _w(e){return e%4===0&&e%100!==0||e%400===0}function ks(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ln(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=ks(t)),n}function bp(e,t){return function(n){return n!=null?(t4(this,e,n),Gt.updateOffset(this,t),this):Q1(this,e)}}function Q1(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function t4(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&_w(e.year())&&e.month()===1&&e.date()===29?(n=Ln(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Tw(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function ete(e){return e=js(e),pl(this[e])?this[e]():this}function tte(e,t){if(typeof e=="object"){e=pM(e);var n=Jee(e),i,c=n.length;for(i=0;i<c;i++)this[n[i].unit](e[n[i].unit])}else if(e=js(e),pl(this[e]))return this[e](t);return this}var n4=/\d/,ys=/\d\d/,r4=/\d{3}/,mM=/\d{4}/,vw=/[+-]?\d{6}/,Lr=/\d\d?/,i4=/\d\d\d\d?/,o4=/\d\d\d\d\d\d?/,xw=/\d{1,3}/,gM=/\d{1,4}/,ww=/[+-]?\d{1,6}/,Ep=/\d+/,bw=/[+-]?\d+/,nte=/Z|[+-]\d\d:?\d\d/gi,Ew=/Z|[+-]\d\d(?::?\d\d)?/gi,rte=/[+-]?\d+(\.\d{1,3})?/,Hy=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,K1;K1={};function Yt(e,t,n){K1[e]=pl(t)?t:function(i,c){return i&&n?n:t}}function ite(e,t){return tr(K1,e)?K1[e](t._strict,t._locale):new RegExp(ote(e))}function ote(e){return ls(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,i,c,f){return n||i||c||f}))}function ls(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var rS={};function wr(e,t){var n,i=t,c;for(typeof e=="string"&&(e=[e]),ec(t)&&(i=function(f,m){m[t]=Ln(f)}),c=e.length,n=0;n<c;n++)rS[e[n]]=i}function Zy(e,t){wr(e,function(n,i,c,f){c._w=c._w||{},t(n,c._w,c,f)})}function ste(e,t,n){t!=null&&tr(rS,e)&&rS[e](t,n._a,n,e)}var fo=0,jl=1,el=2,Mi=3,fa=4,Gl=5,Gh=6,ate=7,lte=8;function cte(e,t){return(e%t+t)%t}var ii;Array.prototype.indexOf?ii=Array.prototype.indexOf:ii=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Tw(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=cte(t,12);return e+=(t-n)/12,n===1?_w(e)?29:28:31-n%7%2}ln("M",["MM",2],"Mo",function(){return this.month()+1});ln("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ln("MMMM",0,0,function(e){return this.localeData().months(this,e)});go("month","M");yo("month",8);Yt("M",Lr);Yt("MM",Lr,ys);Yt("MMM",function(e,t){return t.monthsShortRegex(e)});Yt("MMMM",function(e,t){return t.monthsRegex(e)});wr(["M","MM"],function(e,t){t[jl]=Ln(e)-1});wr(["MMM","MMMM"],function(e,t,n,i){var c=n._locale.monthsParse(e,i,n._strict);c!=null?t[jl]=c:Pn(n).invalidMonth=e});var ute="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),s4="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),a4=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,hte=Hy,dte=Hy;function fte(e,t){return e?xa(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||a4).test(t)?"format":"standalone"][e.month()]:xa(this._months)?this._months:this._months.standalone}function pte(e,t){return e?xa(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[a4.test(t)?"format":"standalone"][e.month()]:xa(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function mte(e,t,n){var i,c,f,m=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)f=fl([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(f,"").toLocaleLowerCase();return n?t==="MMM"?(c=ii.call(this._shortMonthsParse,m),c!==-1?c:null):(c=ii.call(this._longMonthsParse,m),c!==-1?c:null):t==="MMM"?(c=ii.call(this._shortMonthsParse,m),c!==-1?c:(c=ii.call(this._longMonthsParse,m),c!==-1?c:null)):(c=ii.call(this._longMonthsParse,m),c!==-1?c:(c=ii.call(this._shortMonthsParse,m),c!==-1?c:null))}function gte(e,t,n){var i,c,f;if(this._monthsParseExact)return mte.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(c=fl([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(c,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(c,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(f="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[i]=new RegExp(f.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(n&&t==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function l4(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Ln(t);else if(t=e.localeData().monthsParse(t),!ec(t))return e}return n=Math.min(e.date(),Tw(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function c4(e){return e!=null?(l4(this,e),Gt.updateOffset(this,!0),this):Q1(this,"Month")}function yte(){return Tw(this.year(),this.month())}function _te(e){return this._monthsParseExact?(tr(this,"_monthsRegex")||u4.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(tr(this,"_monthsShortRegex")||(this._monthsShortRegex=hte),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function vte(e){return this._monthsParseExact?(tr(this,"_monthsRegex")||u4.call(this),e?this._monthsStrictRegex:this._monthsRegex):(tr(this,"_monthsRegex")||(this._monthsRegex=dte),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function u4(){function e(m,s){return s.length-m.length}var t=[],n=[],i=[],c,f;for(c=0;c<12;c++)f=fl([2e3,c]),t.push(this.monthsShort(f,"")),n.push(this.months(f,"")),i.push(this.months(f,"")),i.push(this.monthsShort(f,""));for(t.sort(e),n.sort(e),i.sort(e),c=0;c<12;c++)t[c]=ls(t[c]),n[c]=ls(n[c]);for(c=0;c<24;c++)i[c]=ls(i[c]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}ln("Y",0,0,function(){var e=this.year();return e<=9999?dl(e,4):"+"+e});ln(0,["YY",2],0,function(){return this.year()%100});ln(0,["YYYY",4],0,"year");ln(0,["YYYYY",5],0,"year");ln(0,["YYYYYY",6,!0],0,"year");go("year","y");yo("year",1);Yt("Y",bw);Yt("YY",Lr,ys);Yt("YYYY",gM,mM);Yt("YYYYY",ww,vw);Yt("YYYYYY",ww,vw);wr(["YYYYY","YYYYYY"],fo);wr("YYYY",function(e,t){t[fo]=e.length===2?Gt.parseTwoDigitYear(e):Ln(e)});wr("YY",function(e,t){t[fo]=Gt.parseTwoDigitYear(e)});wr("Y",function(e,t){t[fo]=parseInt(e,10)});function $g(e){return _w(e)?366:365}Gt.parseTwoDigitYear=function(e){return Ln(e)+(Ln(e)>68?1900:2e3)};var h4=bp("FullYear",!0);function xte(){return _w(this.year())}function wte(e,t,n,i,c,f,m){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,c,f,m),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,c,f,m),s}function by(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function J1(e,t,n){var i=7+t-n,c=(7+by(e,0,i).getUTCDay()-t)%7;return-c+i-1}function d4(e,t,n,i,c){var f=(7+n-i)%7,m=J1(e,i,c),s=1+7*(t-1)+f+m,v,E;return s<=0?(v=e-1,E=$g(v)+s):s>$g(e)?(v=e+1,E=s-$g(e)):(v=e,E=s),{year:v,dayOfYear:E}}function Ey(e,t,n){var i=J1(e.year(),t,n),c=Math.floor((e.dayOfYear()-i-1)/7)+1,f,m;return c<1?(m=e.year()-1,f=c+ql(m,t,n)):c>ql(e.year(),t,n)?(f=c-ql(e.year(),t,n),m=e.year()+1):(m=e.year(),f=c),{week:f,year:m}}function ql(e,t,n){var i=J1(e,t,n),c=J1(e+1,t,n);return($g(e)-i+c)/7}ln("w",["ww",2],"wo","week");ln("W",["WW",2],"Wo","isoWeek");go("week","w");go("isoWeek","W");yo("week",5);yo("isoWeek",5);Yt("w",Lr);Yt("ww",Lr,ys);Yt("W",Lr);Yt("WW",Lr,ys);Zy(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=Ln(e)});function bte(e){return Ey(e,this._week.dow,this._week.doy).week}var Ete={dow:0,doy:6};function Tte(){return this._week.dow}function Ste(){return this._week.doy}function Ite(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Mte(e){var t=Ey(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ln("d",0,"do","day");ln("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ln("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ln("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ln("e",0,0,"weekday");ln("E",0,0,"isoWeekday");go("day","d");go("weekday","e");go("isoWeekday","E");yo("day",11);yo("weekday",11);yo("isoWeekday",11);Yt("d",Lr);Yt("e",Lr);Yt("E",Lr);Yt("dd",function(e,t){return t.weekdaysMinRegex(e)});Yt("ddd",function(e,t){return t.weekdaysShortRegex(e)});Yt("dddd",function(e,t){return t.weekdaysRegex(e)});Zy(["dd","ddd","dddd"],function(e,t,n,i){var c=n._locale.weekdaysParse(e,i,n._strict);c!=null?t.d=c:Pn(n).invalidWeekday=e});Zy(["d","e","E"],function(e,t,n,i){t[i]=Ln(e)});function Ate(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Cte(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function yM(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Pte="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),f4="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rte="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Dte=Hy,Ote=Hy,kte=Hy;function Lte(e,t){var n=xa(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?yM(n,this._week.dow):e?n[e.day()]:n}function zte(e){return e===!0?yM(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Nte(e){return e===!0?yM(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Bte(e,t,n){var i,c,f,m=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)f=fl([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(f,"").toLocaleLowerCase();return n?t==="dddd"?(c=ii.call(this._weekdaysParse,m),c!==-1?c:null):t==="ddd"?(c=ii.call(this._shortWeekdaysParse,m),c!==-1?c:null):(c=ii.call(this._minWeekdaysParse,m),c!==-1?c:null):t==="dddd"?(c=ii.call(this._weekdaysParse,m),c!==-1||(c=ii.call(this._shortWeekdaysParse,m),c!==-1)?c:(c=ii.call(this._minWeekdaysParse,m),c!==-1?c:null)):t==="ddd"?(c=ii.call(this._shortWeekdaysParse,m),c!==-1||(c=ii.call(this._weekdaysParse,m),c!==-1)?c:(c=ii.call(this._minWeekdaysParse,m),c!==-1?c:null)):(c=ii.call(this._minWeekdaysParse,m),c!==-1||(c=ii.call(this._weekdaysParse,m),c!==-1)?c:(c=ii.call(this._shortWeekdaysParse,m),c!==-1?c:null))}function Fte(e,t,n){var i,c,f;if(this._weekdaysParseExact)return Bte.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(c=fl([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(c,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(c,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(c,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(f="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[i]=new RegExp(f.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[i].test(e))return i;if(n&&t==="ddd"&&this._shortWeekdaysParse[i].test(e))return i;if(n&&t==="dd"&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Ute(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Ate(e,this.localeData()),this.add(e-t,"d")):t}function Vte(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function jte(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Cte(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Gte(e){return this._weekdaysParseExact?(tr(this,"_weekdaysRegex")||_M.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(tr(this,"_weekdaysRegex")||(this._weekdaysRegex=Dte),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function $te(e){return this._weekdaysParseExact?(tr(this,"_weekdaysRegex")||_M.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(tr(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ote),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Wte(e){return this._weekdaysParseExact?(tr(this,"_weekdaysRegex")||_M.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(tr(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=kte),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function _M(){function e(I,M){return M.length-I.length}var t=[],n=[],i=[],c=[],f,m,s,v,E;for(f=0;f<7;f++)m=fl([2e3,1]).day(f),s=ls(this.weekdaysMin(m,"")),v=ls(this.weekdaysShort(m,"")),E=ls(this.weekdays(m,"")),t.push(s),n.push(v),i.push(E),c.push(s),c.push(v),c.push(E);t.sort(e),n.sort(e),i.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function vM(){return this.hours()%12||12}function qte(){return this.hours()||24}ln("H",["HH",2],0,"hour");ln("h",["hh",2],0,vM);ln("k",["kk",2],0,qte);ln("hmm",0,0,function(){return""+vM.apply(this)+dl(this.minutes(),2)});ln("hmmss",0,0,function(){return""+vM.apply(this)+dl(this.minutes(),2)+dl(this.seconds(),2)});ln("Hmm",0,0,function(){return""+this.hours()+dl(this.minutes(),2)});ln("Hmmss",0,0,function(){return""+this.hours()+dl(this.minutes(),2)+dl(this.seconds(),2)});function p4(e,t){ln(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}p4("a",!0);p4("A",!1);go("hour","h");yo("hour",13);function m4(e,t){return t._meridiemParse}Yt("a",m4);Yt("A",m4);Yt("H",Lr);Yt("h",Lr);Yt("k",Lr);Yt("HH",Lr,ys);Yt("hh",Lr,ys);Yt("kk",Lr,ys);Yt("hmm",i4);Yt("hmmss",o4);Yt("Hmm",i4);Yt("Hmmss",o4);wr(["H","HH"],Mi);wr(["k","kk"],function(e,t,n){var i=Ln(e);t[Mi]=i===24?0:i});wr(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});wr(["h","hh"],function(e,t,n){t[Mi]=Ln(e),Pn(n).bigHour=!0});wr("hmm",function(e,t,n){var i=e.length-2;t[Mi]=Ln(e.substr(0,i)),t[fa]=Ln(e.substr(i)),Pn(n).bigHour=!0});wr("hmmss",function(e,t,n){var i=e.length-4,c=e.length-2;t[Mi]=Ln(e.substr(0,i)),t[fa]=Ln(e.substr(i,2)),t[Gl]=Ln(e.substr(c)),Pn(n).bigHour=!0});wr("Hmm",function(e,t,n){var i=e.length-2;t[Mi]=Ln(e.substr(0,i)),t[fa]=Ln(e.substr(i))});wr("Hmmss",function(e,t,n){var i=e.length-4,c=e.length-2;t[Mi]=Ln(e.substr(0,i)),t[fa]=Ln(e.substr(i,2)),t[Gl]=Ln(e.substr(c))});function Hte(e){return(e+"").toLowerCase().charAt(0)==="p"}var Zte=/[ap]\.?m?\.?/i,Yte=bp("Hours",!0);function Xte(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var g4={calendar:Fee,longDateFormat:Gee,invalidDate:Wee,ordinal:Hee,dayOfMonthOrdinalParse:Zee,relativeTime:Xee,months:ute,monthsShort:s4,week:Ete,weekdays:Pte,weekdaysMin:Rte,weekdaysShort:f4,meridiemParse:Zte},Fr={},cg={},Ty;function Qte(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function Ek(e){return e&&e.toLowerCase().replace("_","-")}function Kte(e){for(var t=0,n,i,c,f;t<e.length;){for(f=Ek(e[t]).split("-"),n=f.length,i=Ek(e[t+1]),i=i?i.split("-"):null;n>0;){if(c=Sw(f.slice(0,n).join("-")),c)return c;if(i&&i.length>=n&&Qte(f,i)>=n-1)break;n--}t++}return Ty}function Jte(e){return e.match("^[^/\\\\]*$")!=null}function Sw(e){var t=null,n;if(Fr[e]===void 0&&typeof Jv<"u"&&Jv&&Jv.exports&&Jte(e))try{t=Ty._abbr,n=require,n("./locale/"+e),pu(t)}catch{Fr[e]=null}return Fr[e]}function pu(e,t){var n;return e&&(jo(t)?n=nc(e):n=xM(e,t),n?Ty=n:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Ty._abbr}function xM(e,t){if(t!==null){var n,i=g4;if(t.abbr=e,Fr[e]!=null)KN("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Fr[e]._config;else if(t.parentLocale!=null)if(Fr[t.parentLocale]!=null)i=Fr[t.parentLocale]._config;else if(n=Sw(t.parentLocale),n!=null)i=n._config;else return cg[t.parentLocale]||(cg[t.parentLocale]=[]),cg[t.parentLocale].push({name:e,config:t}),null;return Fr[e]=new dM(tS(i,t)),cg[e]&&cg[e].forEach(function(c){xM(c.name,c.config)}),pu(e),Fr[e]}else return delete Fr[e],null}function ene(e,t){if(t!=null){var n,i,c=g4;Fr[e]!=null&&Fr[e].parentLocale!=null?Fr[e].set(tS(Fr[e]._config,t)):(i=Sw(e),i!=null&&(c=i._config),t=tS(c,t),i==null&&(t.abbr=e),n=new dM(t),n.parentLocale=Fr[e],Fr[e]=n),pu(e)}else Fr[e]!=null&&(Fr[e].parentLocale!=null?(Fr[e]=Fr[e].parentLocale,e===pu()&&pu(e)):Fr[e]!=null&&delete Fr[e]);return Fr[e]}function nc(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ty;if(!xa(e)){if(t=Sw(e),t)return t;e=[e]}return Kte(e)}function tne(){return nS(Fr)}function wM(e){var t,n=e._a;return n&&Pn(e).overflow===-2&&(t=n[jl]<0||n[jl]>11?jl:n[el]<1||n[el]>Tw(n[fo],n[jl])?el:n[Mi]<0||n[Mi]>24||n[Mi]===24&&(n[fa]!==0||n[Gl]!==0||n[Gh]!==0)?Mi:n[fa]<0||n[fa]>59?fa:n[Gl]<0||n[Gl]>59?Gl:n[Gh]<0||n[Gh]>999?Gh:-1,Pn(e)._overflowDayOfYear&&(t<fo||t>el)&&(t=el),Pn(e)._overflowWeeks&&t===-1&&(t=ate),Pn(e)._overflowWeekday&&t===-1&&(t=lte),Pn(e).overflow=t),e}var nne=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rne=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ine=/Z|[+-]\d\d(?::?\d\d)?/,uv=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],oT=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],one=/^\/?Date\((-?\d+)/i,sne=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ane={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function y4(e){var t,n,i=e._i,c=nne.exec(i)||rne.exec(i),f,m,s,v,E=uv.length,I=oT.length;if(c){for(Pn(e).iso=!0,t=0,n=E;t<n;t++)if(uv[t][1].exec(c[1])){m=uv[t][0],f=uv[t][2]!==!1;break}if(m==null){e._isValid=!1;return}if(c[3]){for(t=0,n=I;t<n;t++)if(oT[t][1].exec(c[3])){s=(c[2]||" ")+oT[t][0];break}if(s==null){e._isValid=!1;return}}if(!f&&s!=null){e._isValid=!1;return}if(c[4])if(ine.exec(c[4]))v="Z";else{e._isValid=!1;return}e._f=m+(s||"")+(v||""),EM(e)}else e._isValid=!1}function lne(e,t,n,i,c,f){var m=[cne(e),s4.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(c,10)];return f&&m.push(parseInt(f,10)),m}function cne(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function une(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function hne(e,t,n){if(e){var i=f4.indexOf(e),c=new Date(t[0],t[1],t[2]).getDay();if(i!==c)return Pn(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function dne(e,t,n){if(e)return ane[e];if(t)return 0;var i=parseInt(n,10),c=i%100,f=(i-c)/100;return f*60+c}function _4(e){var t=sne.exec(une(e._i)),n;if(t){if(n=lne(t[4],t[3],t[2],t[5],t[6],t[7]),!hne(t[1],n,e))return;e._a=n,e._tzm=dne(t[8],t[9],t[10]),e._d=by.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Pn(e).rfc2822=!0}else e._isValid=!1}function fne(e){var t=one.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(y4(e),e._isValid===!1)delete e._isValid;else return;if(_4(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Gt.createFromInputFallback(e)}Gt.createFromInputFallback=Vs("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function xf(e,t,n){return e??t??n}function pne(e){var t=new Date(Gt.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function bM(e){var t,n,i=[],c,f,m;if(!e._d){for(c=pne(e),e._w&&e._a[el]==null&&e._a[jl]==null&&mne(e),e._dayOfYear!=null&&(m=xf(e._a[fo],c[fo]),(e._dayOfYear>$g(m)||e._dayOfYear===0)&&(Pn(e)._overflowDayOfYear=!0),n=by(m,0,e._dayOfYear),e._a[jl]=n.getUTCMonth(),e._a[el]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=i[t]=c[t];for(;t<7;t++)e._a[t]=i[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Mi]===24&&e._a[fa]===0&&e._a[Gl]===0&&e._a[Gh]===0&&(e._nextDay=!0,e._a[Mi]=0),e._d=(e._useUTC?by:wte).apply(null,i),f=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Mi]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==f&&(Pn(e).weekdayMismatch=!0)}}function mne(e){var t,n,i,c,f,m,s,v,E;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(f=1,m=4,n=xf(t.GG,e._a[fo],Ey(kr(),1,4).year),i=xf(t.W,1),c=xf(t.E,1),(c<1||c>7)&&(v=!0)):(f=e._locale._week.dow,m=e._locale._week.doy,E=Ey(kr(),f,m),n=xf(t.gg,e._a[fo],E.year),i=xf(t.w,E.week),t.d!=null?(c=t.d,(c<0||c>6)&&(v=!0)):t.e!=null?(c=t.e+f,(t.e<0||t.e>6)&&(v=!0)):c=f),i<1||i>ql(n,f,m)?Pn(e)._overflowWeeks=!0:v!=null?Pn(e)._overflowWeekday=!0:(s=d4(n,i,c,f,m),e._a[fo]=s.year,e._dayOfYear=s.dayOfYear)}Gt.ISO_8601=function(){};Gt.RFC_2822=function(){};function EM(e){if(e._f===Gt.ISO_8601){y4(e);return}if(e._f===Gt.RFC_2822){_4(e);return}e._a=[],Pn(e).empty=!0;var t=""+e._i,n,i,c,f,m,s=t.length,v=0,E,I;for(c=JN(e._f,e._locale).match(fM)||[],I=c.length,n=0;n<I;n++)f=c[n],i=(t.match(ite(f,e))||[])[0],i&&(m=t.substr(0,t.indexOf(i)),m.length>0&&Pn(e).unusedInput.push(m),t=t.slice(t.indexOf(i)+i.length),v+=i.length),Xf[f]?(i?Pn(e).empty=!1:Pn(e).unusedTokens.push(f),ste(f,i,e)):e._strict&&!i&&Pn(e).unusedTokens.push(f);Pn(e).charsLeftOver=s-v,t.length>0&&Pn(e).unusedInput.push(t),e._a[Mi]<=12&&Pn(e).bigHour===!0&&e._a[Mi]>0&&(Pn(e).bigHour=void 0),Pn(e).parsedDateParts=e._a.slice(0),Pn(e).meridiem=e._meridiem,e._a[Mi]=gne(e._locale,e._a[Mi],e._meridiem),E=Pn(e).era,E!==null&&(e._a[fo]=e._locale.erasConvertYear(E,e._a[fo])),bM(e),wM(e)}function gne(e,t,n){var i;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(i=e.isPM(n),i&&t<12&&(t+=12),!i&&t===12&&(t=0)),t)}function yne(e){var t,n,i,c,f,m,s=!1,v=e._f.length;if(v===0){Pn(e).invalidFormat=!0,e._d=new Date(NaN);return}for(c=0;c<v;c++)f=0,m=!1,t=hM({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[c],EM(t),uM(t)&&(m=!0),f+=Pn(t).charsLeftOver,f+=Pn(t).unusedTokens.length*10,Pn(t).score=f,s?f<i&&(i=f,n=t):(i==null||f<i||m)&&(i=f,n=t,m&&(s=!0));Xc(e,n||t)}function _ne(e){if(!e._d){var t=pM(e._i),n=t.day===void 0?t.date:t.day;e._a=XN([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(i){return i&&parseInt(i,10)}),bM(e)}}function vne(e){var t=new qy(wM(v4(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function v4(e){var t=e._i,n=e._f;return e._locale=e._locale||nc(e._l),t===null||n===void 0&&t===""?yw({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),wa(t)?new qy(wM(t)):(Wy(t)?e._d=t:xa(n)?yne(e):n?EM(e):xne(e),uM(e)||(e._d=null),e))}function xne(e){var t=e._i;jo(t)?e._d=new Date(Gt.now()):Wy(t)?e._d=new Date(t.valueOf()):typeof t=="string"?fne(e):xa(t)?(e._a=XN(t.slice(0),function(n){return parseInt(n,10)}),bM(e)):Yh(t)?_ne(e):ec(t)?e._d=new Date(t):Gt.createFromInputFallback(e)}function x4(e,t,n,i,c){var f={};return(t===!0||t===!1)&&(i=t,t=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(Yh(e)&&cM(e)||xa(e)&&e.length===0)&&(e=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=c,f._l=n,f._i=e,f._f=t,f._strict=i,vne(f)}function kr(e,t,n,i){return x4(e,t,n,i,!1)}var wne=Vs("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=kr.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:yw()}),bne=Vs("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=kr.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:yw()});function w4(e,t){var n,i;if(t.length===1&&xa(t[0])&&(t=t[0]),!t.length)return kr();for(n=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][e](n))&&(n=t[i]);return n}function Ene(){var e=[].slice.call(arguments,0);return w4("isBefore",e)}function Tne(){var e=[].slice.call(arguments,0);return w4("isAfter",e)}var Sne=function(){return Date.now?Date.now():+new Date},ug=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ine(e){var t,n=!1,i,c=ug.length;for(t in e)if(tr(e,t)&&!(ii.call(ug,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(i=0;i<c;++i)if(e[ug[i]]){if(n)return!1;parseFloat(e[ug[i]])!==Ln(e[ug[i]])&&(n=!0)}return!0}function Mne(){return this._isValid}function Ane(){return ba(NaN)}function Iw(e){var t=pM(e),n=t.year||0,i=t.quarter||0,c=t.month||0,f=t.week||t.isoWeek||0,m=t.day||0,s=t.hour||0,v=t.minute||0,E=t.second||0,I=t.millisecond||0;this._isValid=Ine(t),this._milliseconds=+I+E*1e3+v*6e4+s*1e3*60*60,this._days=+m+f*7,this._months=+c+i*3+n*12,this._data={},this._locale=nc(),this._bubble()}function Qv(e){return e instanceof Iw}function iS(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Cne(e,t,n){var i=Math.min(e.length,t.length),c=Math.abs(e.length-t.length),f=0,m;for(m=0;m<i;m++)(n&&e[m]!==t[m]||!n&&Ln(e[m])!==Ln(t[m]))&&f++;return f+c}function b4(e,t){ln(e,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+dl(~~(n/60),2)+t+dl(~~n%60,2)})}b4("Z",":");b4("ZZ","");Yt("Z",Ew);Yt("ZZ",Ew);wr(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=TM(Ew,e)});var Pne=/([\+\-]|\d\d)/gi;function TM(e,t){var n=(t||"").match(e),i,c,f;return n===null?null:(i=n[n.length-1]||[],c=(i+"").match(Pne)||["-",0,0],f=+(c[1]*60)+Ln(c[2]),f===0?0:c[0]==="+"?f:-f)}function SM(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(wa(e)||Wy(e)?e.valueOf():kr(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),Gt.updateOffset(n,!1),n):kr(e).local()}function oS(e){return-Math.round(e._d.getTimezoneOffset())}Gt.updateOffset=function(){};function Rne(e,t,n){var i=this._offset||0,c;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=TM(Ew,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(c=oS(this)),this._offset=e,this._isUTC=!0,c!=null&&this.add(c,"m"),i!==e&&(!t||this._changeInProgress?S4(this,ba(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Gt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:oS(this)}function Dne(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function One(e){return this.utcOffset(0,e)}function kne(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(oS(this),"m")),this}function Lne(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=TM(nte,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function zne(e){return this.isValid()?(e=e?kr(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Nne(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bne(){if(!jo(this._isDSTShifted))return this._isDSTShifted;var e={},t;return hM(e,this),e=v4(e),e._a?(t=e._isUTC?fl(e._a):kr(e._a),this._isDSTShifted=this.isValid()&&Cne(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Fne(){return this.isValid()?!this._isUTC:!1}function Une(){return this.isValid()?this._isUTC:!1}function E4(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Vne=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,jne=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ba(e,t){var n=e,i=null,c,f,m;return Qv(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:ec(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(i=Vne.exec(e))?(c=i[1]==="-"?-1:1,n={y:0,d:Ln(i[el])*c,h:Ln(i[Mi])*c,m:Ln(i[fa])*c,s:Ln(i[Gl])*c,ms:Ln(iS(i[Gh]*1e3))*c}):(i=jne.exec(e))?(c=i[1]==="-"?-1:1,n={y:wh(i[2],c),M:wh(i[3],c),w:wh(i[4],c),d:wh(i[5],c),h:wh(i[6],c),m:wh(i[7],c),s:wh(i[8],c)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(m=Gne(kr(n.from),kr(n.to)),n={},n.ms=m.milliseconds,n.M=m.months),f=new Iw(n),Qv(e)&&tr(e,"_locale")&&(f._locale=e._locale),Qv(e)&&tr(e,"_isValid")&&(f._isValid=e._isValid),f}ba.fn=Iw.prototype;ba.invalid=Ane;function wh(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Tk(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Gne(e,t){var n;return e.isValid()&&t.isValid()?(t=SM(t,e),e.isBefore(t)?n=Tk(e,t):(n=Tk(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function T4(e,t){return function(n,i){var c,f;return i!==null&&!isNaN(+i)&&(KN(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=n,n=i,i=f),c=ba(n,i),S4(this,c,e),this}}function S4(e,t,n,i){var c=t._milliseconds,f=iS(t._days),m=iS(t._months);e.isValid()&&(i=i??!0,m&&l4(e,Q1(e,"Month")+m*n),f&&t4(e,"Date",Q1(e,"Date")+f*n),c&&e._d.setTime(e._d.valueOf()+c*n),i&&Gt.updateOffset(e,f||m))}var $ne=T4(1,"add"),Wne=T4(-1,"subtract");function I4(e){return typeof e=="string"||e instanceof String}function qne(e){return wa(e)||Wy(e)||I4(e)||ec(e)||Zne(e)||Hne(e)||e===null||e===void 0}function Hne(e){var t=Yh(e)&&!cM(e),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c,f,m=i.length;for(c=0;c<m;c+=1)f=i[c],n=n||tr(e,f);return t&&n}function Zne(e){var t=xa(e),n=!1;return t&&(n=e.filter(function(i){return!ec(i)&&I4(e)}).length===0),t&&n}function Yne(e){var t=Yh(e)&&!cM(e),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],c,f;for(c=0;c<i.length;c+=1)f=i[c],n=n||tr(e,f);return t&&n}function Xne(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Qne(e,t){arguments.length===1&&(arguments[0]?qne(arguments[0])?(e=arguments[0],t=void 0):Yne(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||kr(),i=SM(n,this).startOf("day"),c=Gt.calendarFormat(this,i)||"sameElse",f=t&&(pl(t[c])?t[c].call(this,n):t[c]);return this.format(f||this.localeData().calendar(c,this,kr(n)))}function Kne(){return new qy(this)}function Jne(e,t){var n=wa(e)?e:kr(e);return this.isValid()&&n.isValid()?(t=js(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function ere(e,t){var n=wa(e)?e:kr(e);return this.isValid()&&n.isValid()?(t=js(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function tre(e,t,n,i){var c=wa(e)?e:kr(e),f=wa(t)?t:kr(t);return this.isValid()&&c.isValid()&&f.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(c,n):!this.isBefore(c,n))&&(i[1]===")"?this.isBefore(f,n):!this.isAfter(f,n))):!1}function nre(e,t){var n=wa(e)?e:kr(e),i;return this.isValid()&&n.isValid()?(t=js(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf())):!1}function rre(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function ire(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function ore(e,t,n){var i,c,f;if(!this.isValid())return NaN;if(i=SM(e,this),!i.isValid())return NaN;switch(c=(i.utcOffset()-this.utcOffset())*6e4,t=js(t),t){case"year":f=Kv(this,i)/12;break;case"month":f=Kv(this,i);break;case"quarter":f=Kv(this,i)/3;break;case"second":f=(this-i)/1e3;break;case"minute":f=(this-i)/6e4;break;case"hour":f=(this-i)/36e5;break;case"day":f=(this-i-c)/864e5;break;case"week":f=(this-i-c)/6048e5;break;default:f=this-i}return n?f:ks(f)}function Kv(e,t){if(e.date()<t.date())return-Kv(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(n,"months"),c,f;return t-i<0?(c=e.clone().add(n-1,"months"),f=(t-i)/(i-c)):(c=e.clone().add(n+1,"months"),f=(t-i)/(c-i)),-(n+f)||0}Gt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Gt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function sre(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function are(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Xv(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):pl(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Xv(n,"Z")):Xv(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function lre(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,i,c,f;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",c="-MM-DD[T]HH:mm:ss.SSS",f=t+'[")]',this.format(n+i+c+f)}function cre(e){e||(e=this.isUtc()?Gt.defaultFormatUtc:Gt.defaultFormat);var t=Xv(this,e);return this.localeData().postformat(t)}function ure(e,t){return this.isValid()&&(wa(e)&&e.isValid()||kr(e).isValid())?ba({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hre(e){return this.from(kr(),e)}function dre(e,t){return this.isValid()&&(wa(e)&&e.isValid()||kr(e).isValid())?ba({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fre(e){return this.to(kr(),e)}function M4(e){var t;return e===void 0?this._locale._abbr:(t=nc(e),t!=null&&(this._locale=t),this)}var A4=Vs("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function C4(){return this._locale}var ex=1e3,Qf=60*ex,tx=60*Qf,P4=(365*400+97)*24*tx;function Kf(e,t){return(e%t+t)%t}function R4(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-P4:new Date(e,t,n).valueOf()}function D4(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-P4:Date.UTC(e,t,n)}function pre(e){var t,n;if(e=js(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?D4:R4,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Kf(t+(this._isUTC?0:this.utcOffset()*Qf),tx);break;case"minute":t=this._d.valueOf(),t-=Kf(t,Qf);break;case"second":t=this._d.valueOf(),t-=Kf(t,ex);break}return this._d.setTime(t),Gt.updateOffset(this,!0),this}function mre(e){var t,n;if(e=js(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?D4:R4,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=tx-Kf(t+(this._isUTC?0:this.utcOffset()*Qf),tx)-1;break;case"minute":t=this._d.valueOf(),t+=Qf-Kf(t,Qf)-1;break;case"second":t=this._d.valueOf(),t+=ex-Kf(t,ex)-1;break}return this._d.setTime(t),Gt.updateOffset(this,!0),this}function gre(){return this._d.valueOf()-(this._offset||0)*6e4}function yre(){return Math.floor(this.valueOf()/1e3)}function _re(){return new Date(this.valueOf())}function vre(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function xre(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function wre(){return this.isValid()?this.toISOString():null}function bre(){return uM(this)}function Ere(){return Xc({},Pn(this))}function Tre(){return Pn(this).overflow}function Sre(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ln("N",0,0,"eraAbbr");ln("NN",0,0,"eraAbbr");ln("NNN",0,0,"eraAbbr");ln("NNNN",0,0,"eraName");ln("NNNNN",0,0,"eraNarrow");ln("y",["y",1],"yo","eraYear");ln("y",["yy",2],0,"eraYear");ln("y",["yyy",3],0,"eraYear");ln("y",["yyyy",4],0,"eraYear");Yt("N",IM);Yt("NN",IM);Yt("NNN",IM);Yt("NNNN",zre);Yt("NNNNN",Nre);wr(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var c=n._locale.erasParse(e,i,n._strict);c?Pn(n).era=c:Pn(n).invalidEra=e});Yt("y",Ep);Yt("yy",Ep);Yt("yyy",Ep);Yt("yyyy",Ep);Yt("yo",Bre);wr(["y","yy","yyy","yyyy"],fo);wr(["yo"],function(e,t,n,i){var c;n._locale._eraYearOrdinalRegex&&(c=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[fo]=n._locale.eraYearOrdinalParse(e,c):t[fo]=parseInt(e,10)});function Ire(e,t){var n,i,c,f=this._eras||nc("en")._eras;for(n=0,i=f.length;n<i;++n){switch(typeof f[n].since){case"string":c=Gt(f[n].since).startOf("day"),f[n].since=c.valueOf();break}switch(typeof f[n].until){case"undefined":f[n].until=1/0;break;case"string":c=Gt(f[n].until).startOf("day").valueOf(),f[n].until=c.valueOf();break}}return f}function Mre(e,t,n){var i,c,f=this.eras(),m,s,v;for(e=e.toUpperCase(),i=0,c=f.length;i<c;++i)if(m=f[i].name.toUpperCase(),s=f[i].abbr.toUpperCase(),v=f[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return f[i];break;case"NNNN":if(m===e)return f[i];break;case"NNNNN":if(v===e)return f[i];break}else if([m,s,v].indexOf(e)>=0)return f[i]}function Are(e,t){var n=e.since<=e.until?1:-1;return t===void 0?Gt(e.since).year():Gt(e.since).year()+(t-e.offset)*n}function Cre(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].name;return""}function Pre(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].narrow;return""}function Rre(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until||i[e].until<=n&&n<=i[e].since)return i[e].abbr;return""}function Dre(){var e,t,n,i,c=this.localeData().eras();for(e=0,t=c.length;e<t;++e)if(n=c[e].since<=c[e].until?1:-1,i=this.clone().startOf("day").valueOf(),c[e].since<=i&&i<=c[e].until||c[e].until<=i&&i<=c[e].since)return(this.year()-Gt(c[e].since).year())*n+c[e].offset;return this.year()}function Ore(e){return tr(this,"_erasNameRegex")||MM.call(this),e?this._erasNameRegex:this._erasRegex}function kre(e){return tr(this,"_erasAbbrRegex")||MM.call(this),e?this._erasAbbrRegex:this._erasRegex}function Lre(e){return tr(this,"_erasNarrowRegex")||MM.call(this),e?this._erasNarrowRegex:this._erasRegex}function IM(e,t){return t.erasAbbrRegex(e)}function zre(e,t){return t.erasNameRegex(e)}function Nre(e,t){return t.erasNarrowRegex(e)}function Bre(e,t){return t._eraYearOrdinalRegex||Ep}function MM(){var e=[],t=[],n=[],i=[],c,f,m=this.eras();for(c=0,f=m.length;c<f;++c)t.push(ls(m[c].name)),e.push(ls(m[c].abbr)),n.push(ls(m[c].narrow)),i.push(ls(m[c].name)),i.push(ls(m[c].abbr)),i.push(ls(m[c].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}ln(0,["gg",2],0,function(){return this.weekYear()%100});ln(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Mw(e,t){ln(0,[e,e.length],0,t)}Mw("gggg","weekYear");Mw("ggggg","weekYear");Mw("GGGG","isoWeekYear");Mw("GGGGG","isoWeekYear");go("weekYear","gg");go("isoWeekYear","GG");yo("weekYear",1);yo("isoWeekYear",1);Yt("G",bw);Yt("g",bw);Yt("GG",Lr,ys);Yt("gg",Lr,ys);Yt("GGGG",gM,mM);Yt("gggg",gM,mM);Yt("GGGGG",ww,vw);Yt("ggggg",ww,vw);Zy(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=Ln(e)});Zy(["gg","GG"],function(e,t,n,i){t[i]=Gt.parseTwoDigitYear(e)});function Fre(e){return O4.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ure(e){return O4.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Vre(){return ql(this.year(),1,4)}function jre(){return ql(this.isoWeekYear(),1,4)}function Gre(){var e=this.localeData()._week;return ql(this.year(),e.dow,e.doy)}function $re(){var e=this.localeData()._week;return ql(this.weekYear(),e.dow,e.doy)}function O4(e,t,n,i,c){var f;return e==null?Ey(this,i,c).year:(f=ql(e,i,c),t>f&&(t=f),Wre.call(this,e,t,n,i,c))}function Wre(e,t,n,i,c){var f=d4(e,t,n,i,c),m=by(f.year,0,f.dayOfYear);return this.year(m.getUTCFullYear()),this.month(m.getUTCMonth()),this.date(m.getUTCDate()),this}ln("Q",0,"Qo","quarter");go("quarter","Q");yo("quarter",7);Yt("Q",n4);wr("Q",function(e,t){t[jl]=(Ln(e)-1)*3});function qre(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ln("D",["DD",2],"Do","date");go("date","D");yo("date",9);Yt("D",Lr);Yt("DD",Lr,ys);Yt("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});wr(["D","DD"],el);wr("Do",function(e,t){t[el]=Ln(e.match(Lr)[0])});var k4=bp("Date",!0);ln("DDD",["DDDD",3],"DDDo","dayOfYear");go("dayOfYear","DDD");yo("dayOfYear",4);Yt("DDD",xw);Yt("DDDD",r4);wr(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Ln(e)});function Hre(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ln("m",["mm",2],0,"minute");go("minute","m");yo("minute",14);Yt("m",Lr);Yt("mm",Lr,ys);wr(["m","mm"],fa);var Zre=bp("Minutes",!1);ln("s",["ss",2],0,"second");go("second","s");yo("second",15);Yt("s",Lr);Yt("ss",Lr,ys);wr(["s","ss"],Gl);var Yre=bp("Seconds",!1);ln("S",0,0,function(){return~~(this.millisecond()/100)});ln(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ln(0,["SSS",3],0,"millisecond");ln(0,["SSSS",4],0,function(){return this.millisecond()*10});ln(0,["SSSSS",5],0,function(){return this.millisecond()*100});ln(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ln(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ln(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ln(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});go("millisecond","ms");yo("millisecond",16);Yt("S",xw,n4);Yt("SS",xw,ys);Yt("SSS",xw,r4);var Qc,L4;for(Qc="SSSS";Qc.length<=9;Qc+="S")Yt(Qc,Ep);function Xre(e,t){t[Gh]=Ln(("0."+e)*1e3)}for(Qc="S";Qc.length<=9;Qc+="S")wr(Qc,Xre);L4=bp("Milliseconds",!1);ln("z",0,0,"zoneAbbr");ln("zz",0,0,"zoneName");function Qre(){return this._isUTC?"UTC":""}function Kre(){return this._isUTC?"Coordinated Universal Time":""}var Pt=qy.prototype;Pt.add=$ne;Pt.calendar=Qne;Pt.clone=Kne;Pt.diff=ore;Pt.endOf=mre;Pt.format=cre;Pt.from=ure;Pt.fromNow=hre;Pt.to=dre;Pt.toNow=fre;Pt.get=ete;Pt.invalidAt=Tre;Pt.isAfter=Jne;Pt.isBefore=ere;Pt.isBetween=tre;Pt.isSame=nre;Pt.isSameOrAfter=rre;Pt.isSameOrBefore=ire;Pt.isValid=bre;Pt.lang=A4;Pt.locale=M4;Pt.localeData=C4;Pt.max=bne;Pt.min=wne;Pt.parsingFlags=Ere;Pt.set=tte;Pt.startOf=pre;Pt.subtract=Wne;Pt.toArray=vre;Pt.toObject=xre;Pt.toDate=_re;Pt.toISOString=are;Pt.inspect=lre;typeof Symbol<"u"&&Symbol.for!=null&&(Pt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Pt.toJSON=wre;Pt.toString=sre;Pt.unix=yre;Pt.valueOf=gre;Pt.creationData=Sre;Pt.eraName=Cre;Pt.eraNarrow=Pre;Pt.eraAbbr=Rre;Pt.eraYear=Dre;Pt.year=h4;Pt.isLeapYear=xte;Pt.weekYear=Fre;Pt.isoWeekYear=Ure;Pt.quarter=Pt.quarters=qre;Pt.month=c4;Pt.daysInMonth=yte;Pt.week=Pt.weeks=Ite;Pt.isoWeek=Pt.isoWeeks=Mte;Pt.weeksInYear=Gre;Pt.weeksInWeekYear=$re;Pt.isoWeeksInYear=Vre;Pt.isoWeeksInISOWeekYear=jre;Pt.date=k4;Pt.day=Pt.days=Ute;Pt.weekday=Vte;Pt.isoWeekday=jte;Pt.dayOfYear=Hre;Pt.hour=Pt.hours=Yte;Pt.minute=Pt.minutes=Zre;Pt.second=Pt.seconds=Yre;Pt.millisecond=Pt.milliseconds=L4;Pt.utcOffset=Rne;Pt.utc=One;Pt.local=kne;Pt.parseZone=Lne;Pt.hasAlignedHourOffset=zne;Pt.isDST=Nne;Pt.isLocal=Fne;Pt.isUtcOffset=Une;Pt.isUtc=E4;Pt.isUTC=E4;Pt.zoneAbbr=Qre;Pt.zoneName=Kre;Pt.dates=Vs("dates accessor is deprecated. Use date instead.",k4);Pt.months=Vs("months accessor is deprecated. Use month instead",c4);Pt.years=Vs("years accessor is deprecated. Use year instead",h4);Pt.zone=Vs("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Dne);Pt.isDSTShifted=Vs("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Bne);function Jre(e){return kr(e*1e3)}function eie(){return kr.apply(null,arguments).parseZone()}function z4(e){return e}var nr=dM.prototype;nr.calendar=Uee;nr.longDateFormat=$ee;nr.invalidDate=qee;nr.ordinal=Yee;nr.preparse=z4;nr.postformat=z4;nr.relativeTime=Qee;nr.pastFuture=Kee;nr.set=Bee;nr.eras=Ire;nr.erasParse=Mre;nr.erasConvertYear=Are;nr.erasAbbrRegex=kre;nr.erasNameRegex=Ore;nr.erasNarrowRegex=Lre;nr.months=fte;nr.monthsShort=pte;nr.monthsParse=gte;nr.monthsRegex=vte;nr.monthsShortRegex=_te;nr.week=bte;nr.firstDayOfYear=Ste;nr.firstDayOfWeek=Tte;nr.weekdays=Lte;nr.weekdaysMin=Nte;nr.weekdaysShort=zte;nr.weekdaysParse=Fte;nr.weekdaysRegex=Gte;nr.weekdaysShortRegex=$te;nr.weekdaysMinRegex=Wte;nr.isPM=Hte;nr.meridiem=Xte;function nx(e,t,n,i){var c=nc(),f=fl().set(i,t);return c[n](f,e)}function N4(e,t,n){if(ec(e)&&(t=e,e=void 0),e=e||"",t!=null)return nx(e,t,n,"month");var i,c=[];for(i=0;i<12;i++)c[i]=nx(e,i,n,"month");return c}function AM(e,t,n,i){typeof e=="boolean"?(ec(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,ec(t)&&(n=t,t=void 0),t=t||"");var c=nc(),f=e?c._week.dow:0,m,s=[];if(n!=null)return nx(t,(n+f)%7,i,"day");for(m=0;m<7;m++)s[m]=nx(t,(m+f)%7,i,"day");return s}function tie(e,t){return N4(e,t,"months")}function nie(e,t){return N4(e,t,"monthsShort")}function rie(e,t,n){return AM(e,t,n,"weekdays")}function iie(e,t,n){return AM(e,t,n,"weekdaysShort")}function oie(e,t,n){return AM(e,t,n,"weekdaysMin")}pu("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=Ln(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Gt.lang=Vs("moment.lang is deprecated. Use moment.locale instead.",pu);Gt.langData=Vs("moment.langData is deprecated. Use moment.localeData instead.",nc);var Dl=Math.abs;function sie(){var e=this._data;return this._milliseconds=Dl(this._milliseconds),this._days=Dl(this._days),this._months=Dl(this._months),e.milliseconds=Dl(e.milliseconds),e.seconds=Dl(e.seconds),e.minutes=Dl(e.minutes),e.hours=Dl(e.hours),e.months=Dl(e.months),e.years=Dl(e.years),this}function B4(e,t,n,i){var c=ba(t,n);return e._milliseconds+=i*c._milliseconds,e._days+=i*c._days,e._months+=i*c._months,e._bubble()}function aie(e,t){return B4(this,e,t,1)}function lie(e,t){return B4(this,e,t,-1)}function Sk(e){return e<0?Math.floor(e):Math.ceil(e)}function cie(){var e=this._milliseconds,t=this._days,n=this._months,i=this._data,c,f,m,s,v;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=Sk(sS(n)+t)*864e5,t=0,n=0),i.milliseconds=e%1e3,c=ks(e/1e3),i.seconds=c%60,f=ks(c/60),i.minutes=f%60,m=ks(f/60),i.hours=m%24,t+=ks(m/24),v=ks(F4(t)),n+=v,t-=Sk(sS(v)),s=ks(n/12),n%=12,i.days=t,i.months=n,i.years=s,this}function F4(e){return e*4800/146097}function sS(e){return e*146097/4800}function uie(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if(e=js(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+i/864e5,n=this._months+F4(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(sS(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+e)}}function hie(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Ln(this._months/12)*31536e6:NaN}function rc(e){return function(){return this.as(e)}}var die=rc("ms"),fie=rc("s"),pie=rc("m"),mie=rc("h"),gie=rc("d"),yie=rc("w"),_ie=rc("M"),vie=rc("Q"),xie=rc("y");function wie(){return ba(this)}function bie(e){return e=js(e),this.isValid()?this[e+"s"]():NaN}function ud(e){return function(){return this.isValid()?this._data[e]:NaN}}var Eie=ud("milliseconds"),Tie=ud("seconds"),Sie=ud("minutes"),Iie=ud("hours"),Mie=ud("days"),Aie=ud("months"),Cie=ud("years");function Pie(){return ks(this.days()/7)}var zl=Math.round,Ff={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Rie(e,t,n,i,c){return c.relativeTime(t||1,!!n,e,i)}function Die(e,t,n,i){var c=ba(e).abs(),f=zl(c.as("s")),m=zl(c.as("m")),s=zl(c.as("h")),v=zl(c.as("d")),E=zl(c.as("M")),I=zl(c.as("w")),M=zl(c.as("y")),P=f<=n.ss&&["s",f]||f<n.s&&["ss",f]||m<=1&&["m"]||m<n.m&&["mm",m]||s<=1&&["h"]||s<n.h&&["hh",s]||v<=1&&["d"]||v<n.d&&["dd",v];return n.w!=null&&(P=P||I<=1&&["w"]||I<n.w&&["ww",I]),P=P||E<=1&&["M"]||E<n.M&&["MM",E]||M<=1&&["y"]||["yy",M],P[2]=t,P[3]=+e>0,P[4]=i,Rie.apply(null,P)}function Oie(e){return e===void 0?zl:typeof e=="function"?(zl=e,!0):!1}function kie(e,t){return Ff[e]===void 0?!1:t===void 0?Ff[e]:(Ff[e]=t,e==="s"&&(Ff.ss=t-1),!0)}function Lie(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=Ff,c,f;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(i=Object.assign({},Ff,t),t.s!=null&&t.ss==null&&(i.ss=t.s-1)),c=this.localeData(),f=Die(this,!n,i,c),n&&(f=c.pastFuture(+this,f)),c.postformat(f)}var sT=Math.abs;function gf(e){return(e>0)-(e<0)||+e}function Aw(){if(!this.isValid())return this.localeData().invalidDate();var e=sT(this._milliseconds)/1e3,t=sT(this._days),n=sT(this._months),i,c,f,m,s=this.asSeconds(),v,E,I,M;return s?(i=ks(e/60),c=ks(i/60),e%=60,i%=60,f=ks(n/12),n%=12,m=e?e.toFixed(3).replace(/\.?0+$/,""):"",v=s<0?"-":"",E=gf(this._months)!==gf(s)?"-":"",I=gf(this._days)!==gf(s)?"-":"",M=gf(this._milliseconds)!==gf(s)?"-":"",v+"P"+(f?E+f+"Y":"")+(n?E+n+"M":"")+(t?I+t+"D":"")+(c||i||e?"T":"")+(c?M+c+"H":"")+(i?M+i+"M":"")+(e?M+m+"S":"")):"P0D"}var $n=Iw.prototype;$n.isValid=Mne;$n.abs=sie;$n.add=aie;$n.subtract=lie;$n.as=uie;$n.asMilliseconds=die;$n.asSeconds=fie;$n.asMinutes=pie;$n.asHours=mie;$n.asDays=gie;$n.asWeeks=yie;$n.asMonths=_ie;$n.asQuarters=vie;$n.asYears=xie;$n.valueOf=hie;$n._bubble=cie;$n.clone=wie;$n.get=bie;$n.milliseconds=Eie;$n.seconds=Tie;$n.minutes=Sie;$n.hours=Iie;$n.days=Mie;$n.weeks=Pie;$n.months=Aie;$n.years=Cie;$n.humanize=Lie;$n.toISOString=Aw;$n.toString=Aw;$n.toJSON=Aw;$n.locale=M4;$n.localeData=C4;$n.toIsoString=Vs("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Aw);$n.lang=A4;ln("X",0,0,"unix");ln("x",0,0,"valueOf");Yt("x",bw);Yt("X",rte);wr("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});wr("x",function(e,t,n){n._d=new Date(Ln(e))});//! moment.js
Gt.version="2.29.4";zee(kr);Gt.fn=Pt;Gt.min=Ene;Gt.max=Tne;Gt.now=Sne;Gt.utc=fl;Gt.unix=Jre;Gt.months=tie;Gt.isDate=Wy;Gt.locale=pu;Gt.invalid=yw;Gt.duration=ba;Gt.isMoment=wa;Gt.weekdays=rie;Gt.parseZone=eie;Gt.localeData=nc;Gt.isDuration=Qv;Gt.monthsShort=nie;Gt.weekdaysMin=oie;Gt.defineLocale=xM;Gt.updateLocale=ene;Gt.locales=tne;Gt.weekdaysShort=iie;Gt.normalizeUnits=js;Gt.relativeTimeRounding=Oie;Gt.relativeTimeThreshold=kie;Gt.calendarFormat=Xne;Gt.prototype=Pt;Gt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const zie=kh({name:"displaySlice",initialState:{idCurrent:"ABC123"},reducers:{changeDisplayedPost:(e,t)=>{e.idCurrent=t.payload}}}),{actions:Nie,reducer:Bie}=zie,{changeDisplayedPost:Sy}=Nie,Fie=Bie,Uie=({post:e})=>{var E;const[t]=aY(),[n]=cY(),i=jy(),c=Vy(I=>I==null?void 0:I.displaySlice),{data:f,isSuccess:m}=Mu(),s=ue.useRef(null),v=pz(s);return ue.useEffect(()=>{v&&c!==e._id&&i(Sy(e._id))},[v]),ue.useEffect(()=>{c.idCurrent===e._id&&v===!1&&s.current&&s.current.scrollIntoView({behavior:"smooth"})},[c]),At("div",{ref:s,className:"flex flex-col w-full h-full bg-opacity-60 gap-2 backdrop-blur-sm lg:bg-opacity-100 bg-white px-3 pt-3 snap-always rounded-2xl snap-center relative",children:[Pe("div",{className:"w-full flex overflow-scroll scroll snap-x snap-mandatory scrollbar-hide",children:e.photos.map(I=>{const[M,P]=ue.useState(!1);return Pe("img",{onLoad:()=>P(D=>!D),src:`/images/${I}`,className:"w-full rounded-2xl snap-always snap-center object-cover aspect-square"},I)})}),Pe("h1",{className:"font-roboto text-3xl lg:text-4xl leading-snug tracking-wide font-semibold text-zinc-800 text-center",children:e.destination}),At("p",{className:"font-roboto text-lg lg:text-xl font-normal text-zinc-600 text-center",children:[Gt(e.dateTraveled,"YYYY-MM-DD").format("MMMM Do YYYY"),", For ",e.tripLength," days"]}),Pe("h1",{className:"font-roboto text-md lg:text-lg font-normal text-zinc-800 text-center line-clamp-3 pb-2",children:e.description}),At("div",{className:"flex justify-between items-center mt-auto",children:[At("div",{className:"flex items-center gap-3",children:[At("p",{className:"mt-1 text-lg",children:[e!=null&&e.likes?(E=e==null?void 0:e.likes)==null?void 0:E.length:"0"," Likes"]}),Pe("button",{type:"button",onClick:()=>{var I;return n({postId:e._id,userId:(I=f==null?void 0:f.user)==null?void 0:I._id})},className:"my-5 transition ease-in-out hover:scale-110 self-start",children:Pe(Qz,{className:"select-none mx-auto h-8 w-8 text-zinc-800 "})})]}),Pe("button",{onClick:()=>t(e._id),className:" border border-zinc-500 w-fit h-fit rounded-md hover:border-zinc-800",children:Pe(xZ,{className:"w-12 h-7 text-zinc-500 hover:text-zinc-800"})})]})]})};let hv;const Vie=()=>{var I,M;const{data:e,isSuccess:t}=Mu(),{data:n,error:i,isLoading:c,isError:f,isSuccess:m}=cw((I=e==null?void 0:e.user)==null?void 0:I._id,{skip:!t}),s=ue.useRef(null),{scrollYProgress:v}=fz({container:s}),E=hz(v,{stiffness:100,damping:30,restDelta:.001});return c?hv=Pe("div",{className:"flex w-full h-full justify-center items-center",children:Pe(Xz,{className:"h-12 w-12 text-zinc-800 animate-spin"})}):m?(hv=n.allPosts.map(P=>Pe(Uie,{post:P},P._id)),(M=s==null?void 0:s.current)==null||M.scrollBy({top:500,behavior:"smooth"})):f&&(hv=Pe("h1",{className:"font-roboto text-3xl font-medium text-red-500 w-1/4",children:"Hmmm... Something went wrong, try again."})),At(il,{children:[Pe(nd.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},ref:s,className:"space-y-8 z-20 rounded-2xl shadow-lg  w-11/12 md:w-4/6 lg:w-2/3 xl:w-1/3 overflow-scroll mb-5  snap-mandatory scrollbar-hide snap-y",children:hv},"modal"),Pe("div",{className:"w-11/12 sm:w-11/12 md:w-4/6 lg:w-2/3 xl:w-1/3 overflow-hidden z-40 absolute bottom-0",children:Pe(nd.div,{className:"w-full bg-zinc-300 origin-left h-2 ",style:{scaleX:E}})})]})};var aS={},jie={get exports(){return aS},set exports(e){aS=e}};(function(e,t){(function(n,i){e.exports=i()})(dg,function(){var n,i,c;function f(s,v){if(!n)n=v;else if(!i)i=v;else{var E="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",I={};n(I),c=v(I),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}f(["exports"],function(s){var v=typeof self<"u"?self:{},E="2.14.1";let I;const M={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(I==null){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{I={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):o}catch{I=o}}return I},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!M.API_URL)return null;try{const o=new URL(M.API_URL);return o.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":o.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},P={supported:!1,testSupport:function(o){!V&&k&&(H?G(o):D=o)}};let D,k,V=!1,H=!1;function G(o){const r=o.createTexture();o.bindTexture(o.TEXTURE_2D,r);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,k),o.isContextLost())return;P.supported=!0}catch{}o.deleteTexture(r),V=!0}v.document&&(k=v.document.createElement("img"),k.onload=function(){D&&G(D),D=null,H=!0},k.onerror=function(){V=!0,D=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const z="01";var N=W;function W(o,r,a,u){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=a,this.p2y=u}W.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,u=0;u<8;u++){var d=this.sampleCurveX(a)-o;if(Math.abs(d)<r)return a;var g=this.sampleCurveDerivativeX(a);if(Math.abs(g)<1e-6)break;a-=d/g}var _=0,w=1;for(a=o,u=0;u<20&&(d=this.sampleCurveX(a),!(Math.abs(d-o)<r));u++)o>d?_=a:w=a,a=.5*(w-_)+_;return a},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var $=X;function X(o,r){this.x=o,this.y=r}X.prototype={clone:function(){return new X(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,a=o.y-this.y;return r*r+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),a=Math.sin(o),u=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=u,this},_rotateAround:function(o,r){var a=Math.cos(o),u=Math.sin(o),d=r.y+u*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-u*(this.y-r.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},X.convert=function(o){return o instanceof X?o:Array.isArray(o)?new X(o[0],o[1]):o};const te=Math.PI/180,J=180/Math.PI;function re(o){return o*te}function ce(o){return o*J}const Ee=[[0,0],[1,0],[1,1],[0,1]];function Me(o){if(o<=0)return 0;if(o>=1)return 1;const r=o*o,a=r*o;return 4*(o<.5?a:3*(o-r)+a-.75)}function Le(o,r,a,u){const d=new N(o,r,a,u);return function(g){return d.solve(g)}}const Ae=Le(.25,.1,.25,1);function Oe(o,r,a){return Math.min(a,Math.max(r,o))}function ke(o,r,a){return(a=Oe((a-o)/(r-o),0,1))*a*(3-2*a)}function je(o,r,a){const u=a-r,d=((o-r)%u+u)%u+r;return d===r?a:d}function De(o,r,a){if(!o.length)return a(null,[]);let u=o.length;const d=new Array(o.length);let g=null;o.forEach((_,w)=>{r(_,(T,S)=>{T&&(g=T),d[w]=S,--u==0&&a(g,d)})})}function Be(o){const r=[];for(const a in o)r.push(o[a]);return r}function He(o,...r){for(const a of r)for(const u in a)o[u]=a[u];return o}let tt=1;function Mt(){return tt++}function Dt(){return function o(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function bt(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function Nt(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function ft(o,r){o.forEach(a=>{r[a]&&(r[a]=r[a].bind(r))})}function Ot(o,r){return o.indexOf(r,o.length-r.length)!==-1}function an(o,r,a){const u={};for(const d in o)u[d]=r.call(a||this,o[d],d,o);return u}function pn(o,r,a){const u={};for(const d in o)r.call(a||this,o[d],d,o)&&(u[d]=o[d]);return u}function Vt(o){return Array.isArray(o)?o.map(Vt):typeof o=="object"&&o?an(o,Vt):o}const Mn={};function Jt(o){Mn[o]||(typeof console<"u"&&console.warn(o),Mn[o]=!0)}function _r(o,r,a){return(a.y-o.y)*(r.x-o.x)>(r.y-o.y)*(a.x-o.x)}function yn(o){let r=0;for(let a,u,d=0,g=o.length,_=g-1;d<g;_=d++)a=o[d],u=o[_],r+=(u.x-a.x)*(a.y+u.y);return r}function ui(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ui(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,u,d,g)=>{const _=d||g;return r[u]=!_||_.toLowerCase(),""}),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r}let _o=null;function Vi(o){if(_o==null){const r=o.navigator?o.navigator.userAgent:null;_o=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return _o}function Po(o){try{const r=v[o];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}function vo(o,r){return[o[4*r],o[4*r+1],o[4*r+2],o[4*r+3]]}const ti="mapbox-tiles";let vr,Ro,Gs=500,Ea=50;function $s(){try{return v.caches}catch{}}function Do(){$s()&&!vr&&(vr=v.caches.open(ti))}function Ta(o){const r=o.indexOf("?");if(r<0)return o;const a=function(d){const g=d.indexOf("?");return g>0?d.slice(g+1).split("&"):[]}(o),u=a.filter(d=>{const g=d.split("=");return g[0]==="language"||g[0]==="worldview"});return u.length?`${o.slice(0,r)}?${u.join("&")}`:o.slice(0,r)}let yt=1/0;const Ye={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ye);class wt extends Error{constructor(r,a,u){a===401&&Wn(u)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=a,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const It=ui()?()=>self.worker&&self.worker.referrer:()=>(v.location.protocol==="blob:"?v.parent:v).location.href,dr=function(o,r){if(!(/^file:/.test(a=o.url)||/^file:/.test(It())&&!/^\w+:/.test(a))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(u,d){const g=new v.AbortController,_=new v.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:It(),referrerPolicy:u.referrerPolicy,signal:g.signal});let w=!1,T=!1;const S=(R=_.url).indexOf("sku=")>0&&Wn(R);var R;u.type==="json"&&_.headers.set("Accept","application/json");const L=(j,q,Q)=>{if(T)return;if(j&&j.message!=="SecurityError"&&Jt(j),q&&Q)return B(q);const ie=Date.now();v.fetch(_).then(pe=>{if(pe.ok){const xe=S?pe.clone():null;return B(pe,xe,ie)}return d(new wt(pe.statusText,pe.status,u.url))}).catch(pe=>{pe.name!=="AbortError"&&d(new Error(`${pe.message} ${u.url}`))})},B=(j,q,Q)=>{(u.type==="arrayBuffer"?j.arrayBuffer():u.type==="json"?j.json():j.text()).then(ie=>{T||(q&&Q&&function(pe,xe,he){if(Do(),!vr)return;const ve={status:xe.status,statusText:xe.statusText,headers:new v.Headers};xe.headers.forEach((Ze,$e)=>ve.headers.set($e,Ze));const Te=Ui(xe.headers.get("Cache-Control")||"");if(Te["no-store"])return;Te["max-age"]&&ve.headers.set("Expires",new Date(he+1e3*Te["max-age"]).toUTCString());const we=ve.headers.get("Expires");we&&(new Date(we).getTime()-he<42e4||function(Ze,$e){if(Ro===void 0)try{new Response(new ReadableStream),Ro=!0}catch{Ro=!1}Ro?$e(Ze.body):Ze.blob().then($e)}(xe,Ze=>{const $e=new v.Response(Ze,ve);Do(),vr&&vr.then(rt=>rt.put(Ta(pe.url),$e)).catch(rt=>Jt(rt.message))}))}(_,q,Q),w=!0,d(null,ie,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(ie=>{T||d(new Error(ie.message))})};return S?function(j,q){if(Do(),!vr)return q(null);const Q=Ta(j.url);vr.then(ie=>{ie.match(Q).then(pe=>{const xe=function(he){if(!he)return!1;const ve=new Date(he.headers.get("Expires")||0),Te=Ui(he.headers.get("Cache-Control")||"");return ve>Date.now()&&!Te["no-cache"]}(pe);ie.delete(Q),xe&&ie.put(Q,pe.clone()),q(null,pe,xe)}).catch(q)}).catch(q)}(_,L):L(null,null),{cancel:()=>{T=!0,w||g.abort()}}}(o,r);if(ui()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var a;return function(u,d){const g=new v.XMLHttpRequest;g.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const _ in u.headers)g.setRequestHeader(_,u.headers[_]);return u.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=u.credentials==="include",g.onerror=()=>{d(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let _=g.response;if(u.type==="json")try{_=JSON.parse(g.response)}catch(w){return d(w)}d(null,_,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else d(new wt(g.statusText,g.status,u.url))},g.send(u.body),{cancel:()=>g.abort()}}(o,r)},hi=function(o,r){return dr(He(o,{type:"arrayBuffer"}),r)};function Vn(o){const r=v.document.createElement("a");return r.href=o,r.protocol===v.document.location.protocol&&r.host===v.document.location.host}const ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let _t,Wt;_t=[],Wt=0;const Qt=function(o,r){if(P.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Wt>=M.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:o,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return _t.push(g),g}Wt++;let a=!1;const u=()=>{if(!a)for(a=!0,Wt--;_t.length&&Wt<M.MAX_PARALLEL_IMAGE_REQUESTS;){const g=_t.shift(),{requestParameters:_,callback:w,cancelled:T}=g;T||(g.cancel=Qt(_,w).cancel)}},d=hi(o,(g,_,w,T)=>{u(),g?r(g):_&&(v.createImageBitmap?function(S,R){const L=new v.Blob([new Uint8Array(S)],{type:"image/png"});v.createImageBitmap(L).then(B=>{R(null,B)}).catch(B=>{R(new Error(`Could not load image because of ${B.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(S,R)=>r(S,R,w,T)):function(S,R){const L=new v.Image,B=v.URL;L.onload=()=>{R(null,L),B.revokeObjectURL(L.src),L.onload=null,v.requestAnimationFrame(()=>{L.src=ut})},L.onerror=()=>R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const j=new v.Blob([new Uint8Array(S)],{type:"image/png"});L.src=S.byteLength?B.createObjectURL(j):ut}(_,(S,R)=>r(S,R,w,T)))});return{cancel:()=>{d.cancel(),u()}}},dn="NO_ACCESS_TOKEN";function An(o){return o.indexOf("mapbox:")===0}function Wn(o){return M.API_URL_REGEX.test(o)}function ar(o){return M.API_CDN_URL_REGEX.test(o)}function Qn(o){return M.API_STYLE_REGEX.test(o)&&!Tr(o)}function Tr(o){return M.API_SPRITE_REGEX.test(o)}const lr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Kn(o){const r=o.match(lr);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function ji(o){const r=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${r}`}function Oo(o){if(!o)return null;const r=o.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(r[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ko{constructor(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(r){const a=Oo(M.ACCESS_TOKEN);let u="";return u=a&&a.u?v.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(d,g)=>String.fromCharCode(+("0x"+g)))):M.ACCESS_TOKEN||"",r?`mapbox.eventData.${r}:${u}`:`mapbox.eventData:${u}`}fetchEventData(){const r=Po("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{const d=v.localStorage.getItem(a);d&&(this.eventData=JSON.parse(d));const g=v.localStorage.getItem(u);g&&(this.anonId=g)}catch{Jt("Unable to read from LocalStorage")}}saveEventData(){const r=Po("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{v.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{Jt("Unable to write to LocalStorage")}}processRequests(r){}postEvent(r,a,u,d){if(!M.EVENTS_URL)return;const g=Kn(M.EVENTS_URL);g.params.push(`access_token=${d||M.ACCESS_TOKEN||""}`);const _={event:this.type,created:new Date(r).toISOString()},w=a?He(_,a):_,T={url:ji(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([w])};this.pendingRequest=function(S,R){return dr(He(S,{method:"POST"}),R)}(T,S=>{this.pendingRequest=null,u(S),this.saveEventData(),this.processRequests(d)})}queueRequest(r,a){this.queue.push(r),this.processRequests(a)}}const fe=new class extends ko{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,r){M.EVENTS_URL&&M.ACCESS_TOKEN&&Array.isArray(o)&&o.some(a=>An(a)||Wn(a))&&this.queueRequest(Date.now(),r)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const r=Oo(M.ACCESS_TOKEN),a=r?r.u:M.ACCESS_TOKEN;let u=a!==this.eventData.tokenU;Nt(this.anonId)||(this.anonId=Dt(),u=!0);const d=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),_=new Date(d),w=(d-this.eventData.lastSuccess)/864e5;u=u||w>=1||w<-1||g.getDate()!==_.getDate()}else u=!0;u?this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:z,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=d,this.eventData.tokenU=a)},o):this.processRequests()}},Y=fe.postTurnstileEvent.bind(fe),K=new class extends ko{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,r,a,u){this.skuToken=r,this.errorCb=u,M.EVENTS_URL&&(a||M.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},a):this.errorCb(new Error(dn)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:a}=this.queue.shift();r&&this.success[r]||(this.anonId||this.fetchEventData(),Nt(this.anonId)||(this.anonId=Dt()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:E,skuId:z,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):r&&(this.success[r]=!0)},o))}},de=K.postMapLoadEvent.bind(K),_e=new class extends ko{constructor(){super("gljs.performance")}postPerformanceEvent(o,r){M.EVENTS_URL&&(o||M.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:r},o)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:r,performanceData:a}=this.queue.shift(),u=function(d){const g=v.performance.getEntriesByType("resource"),_=v.performance.getEntriesByType("mark"),w=function(B){const j={};if(B){for(const q in B)if(q!=="other")for(const Q of B[q]){const ie=`${q}ResolveRangeMin`,pe=`${q}ResolveRangeMax`,xe=`${q}RequestCount`,he=`${q}RequestCachedCount`;j[ie]=Math.min(j[ie]||1/0,Q.startTime),j[pe]=Math.max(j[pe]||-1/0,Q.responseEnd);const ve=Te=>{j[Te]===void 0&&(j[Te]=0),++j[Te]};Q.transferSize!==void 0&&Q.transferSize===0&&ve(he),ve(xe)}}return j}(function(B,j){const q={};if(B)for(const Q of B){const ie=j(Q);q[ie]===void 0&&(q[ie]=[]),q[ie].push(Q)}return q}(g,kt)),T=v.devicePixelRatio,S=v.navigator.connection||v.navigator.mozConnection||v.navigator.webkitConnection,R={counters:[],metadata:[],attributes:[]},L=(B,j,q)=>{q!=null&&B.push({name:j,value:q.toString()})};for(const B in w)L(R.counters,B,w[B]);if(d.interactionRange[0]!==1/0&&d.interactionRange[1]!==-1/0&&(L(R.counters,"interactionRangeMin",d.interactionRange[0]),L(R.counters,"interactionRangeMax",d.interactionRange[1])),_)for(const B of Object.keys(Ge)){const j=Ge[B],q=_.find(Q=>Q.name===j);q&&L(R.counters,j,q.startTime)}return L(R.counters,"visibilityHidden",d.visibilityHidden),L(R.attributes,"style",function(B){if(B)for(const j of B){const q=j.name.split("?")[0];if(Qn(q)){const Q=q.split("/").slice(-2);if(Q.length===2)return`mapbox://styles/${Q[0]}/${Q[1]}`}}}(g)),L(R.attributes,"terrainEnabled",d.terrainEnabled?"true":"false"),L(R.attributes,"fogEnabled",d.fogEnabled?"true":"false"),L(R.attributes,"projection",d.projection),L(R.attributes,"zoom",d.zoom),L(R.metadata,"devicePixelRatio",T),L(R.metadata,"connectionEffectiveType",S?S.effectiveType:void 0),L(R.metadata,"navigatorUserAgent",v.navigator.userAgent),L(R.metadata,"screenWidth",v.screen.width),L(R.metadata,"screenHeight",v.screen.height),L(R.metadata,"windowWidth",v.innerWidth),L(R.metadata,"windowHeight",v.innerHeight),L(R.metadata,"mapWidth",d.width/T),L(R.metadata,"mapHeight",d.height/T),L(R.metadata,"webglRenderer",d.renderer),L(R.metadata,"webglVendor",d.vendor),L(R.metadata,"sdkVersion",E),L(R.metadata,"sdkIdentifier","mapbox-gl-js"),R}(a);for(const d of u.metadata);for(const d of u.counters);for(const d of u.attributes);this.postEvent(r,u,()=>{},o)}},Ie=_e.postPerformanceEvent.bind(_e),Ue=new class extends ko{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,r,a,u){if(!M.API_URL||!M.SESSION_PATH)return;const d=Kn(M.API_URL+M.SESSION_PATH);d.params.push(`sku=${r||""}`),d.params.push(`access_token=${u||M.ACCESS_TOKEN||""}`);const g={url:ji(d),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(_,w){return dr(He(_,{method:"GET"}),w)}(g,_=>{this.pendingRequest=null,a(_),this.saveEventData(),this.processRequests(u)})}getSessionAPI(o,r,a,u){this.skuToken=r,this.errorCb=u,M.SESSION_PATH&&M.API_URL&&(a||M.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},a):this.errorCb(new Error(dn)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:a}=this.queue.shift();r&&this.success[r]||this.getSession(a,this.skuToken,u=>{u?this.errorCb(u):r&&(this.success[r]=!0)},o)}},Fe=Ue.getSessionAPI.bind(Ue),Re=new Set,Ge={create:"create",load:"load",fullLoad:"fullLoad"},lt={mark(o){v.performance.mark(o)},measure(o,r,a){v.performance.measure(o,r,a)}};function kt(o){const r=o.name.split("?")[0];return ar(r)&&r.includes("mapbox-gl.js")?"javascript":ar(r)&&r.includes("mapbox-gl.css")?"css":function(a){return M.API_FONTS_REGEX.test(a)}(r)?"fontRange":Tr(r)?"sprite":Qn(r)?"style":function(a){return M.API_TILEJSON_REGEX.test(a)}(r)?"tilejson":"other"}const pt=v.performance;function Kt(o){const r=o?o.url.toString():void 0;return pt.getEntriesByName(r)}let Ht,qt,on,fn;const zn={now:()=>on!==void 0?on:v.performance.now(),setNow(o){on=o},restoreNow(){on=void 0},frame(o){const r=v.requestAnimationFrame(o);return{cancel:()=>v.cancelAnimationFrame(r)}},getImageData(o,r=0){const{width:a,height:u}=o;fn||(fn=v.document.createElement("canvas"));const d=fn.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return(a>fn.width||u>fn.height)&&(fn.width=a,fn.height=u),d.clearRect(-r,-r,a+2*r,u+2*r),d.drawImage(o,0,0,a,u),d.getImageData(-r,-r,a+2*r,u+2*r)},resolveURL:o=>(Ht||(Ht=v.document.createElement("a")),Ht.href=o,Ht.href),get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(qt==null&&(qt=v.matchMedia("(prefers-reduced-motion: reduce)")),qt.matches)}};function tn(o,r,a){a[o]&&a[o].indexOf(r)!==-1||(a[o]=a[o]||[],a[o].push(r))}function qn(o,r,a){if(a&&a[o]){const u=a[o].indexOf(r);u!==-1&&a[o].splice(u,1)}}class Hn{constructor(r,a={}){He(this,a),this.type=r}}class Sa extends Hn{constructor(r,a={}){super("error",He({error:r},a))}}class Ws{on(r,a){return this._listeners=this._listeners||{},tn(r,a,this._listeners),this}off(r,a){return qn(r,a,this._listeners),qn(r,a,this._oneTimeListeners),this}once(r,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},tn(r,a,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,a){typeof r=="string"&&(r=new Hn(r,a||{}));const u=r.type;if(this.listens(u)){r.target=this;const d=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const w of d)w.call(this,r);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const w of g)qn(u,w,this._oneTimeListeners),w.call(this,r);const _=this._eventedParent;_&&(He(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(r))}else r instanceof Sa&&console.error(r.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var nt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function qs(o,...r){for(const a of r)for(const u in a)o[u]=a[u];return o}function jr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ia(o){if(Array.isArray(o))return o.map(Ia);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const a in o)r[a]=Ia(o[a]);return r}return jr(o)}class Yy extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}var _s=Yy;class ic{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[u,d]of a)this.bindings[u]=d}concat(r){return new ic(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}var Xy=ic;const oc={kind:"null"},Et={kind:"number"},Sn={kind:"string"},xn={kind:"boolean"},vs={kind:"color"},ml={kind:"object"},_n={kind:"value"},Au={kind:"collator"},sc={kind:"formatted"},ac={kind:"resolvedImage"};function Gi(o,r){return{kind:"array",itemType:o,N:r}}function rr(o){if(o.kind==="array"){const r=rr(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const Qy=[oc,Et,Sn,xn,vs,sc,ml,Gi(_n),ac];function Qi(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Qi(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const a of Qy)if(!Qi(a,r))return null}}return`Expected ${rr(o)} but found ${rr(r)} instead.`}function Mp(o,r){return r.some(a=>a.kind===o.kind)}function gl(o,r){return r.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var Ap,dd={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Cu(o){return(o=Math.round(o))<0?0:o>255?255:o}function yl(o){return Cu(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function lc(o){return(r=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:r>1?1:r;var r}function Cp(o,r,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(r-o)*a*6:2*a<1?r:3*a<2?o+(r-o)*(2/3-a)*6:o}try{Ap={}.parseCSSColor=function(o){var r,a=o.replace(/ /g,"").toLowerCase();if(a in dd)return dd[a].slice();if(a[0]==="#")return a.length===4?(r=parseInt(a.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:a.length===7&&(r=parseInt(a.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var u=a.indexOf("("),d=a.indexOf(")");if(u!==-1&&d+1===a.length){var g=a.substr(0,u),_=a.substr(u+1,d-(u+1)).split(","),w=1;switch(g){case"rgba":if(_.length!==4)return null;w=lc(_.pop());case"rgb":return _.length!==3?null:[yl(_[0]),yl(_[1]),yl(_[2]),w];case"hsla":if(_.length!==4)return null;w=lc(_.pop());case"hsl":if(_.length!==3)return null;var T=(parseFloat(_[0])%360+360)%360/360,S=lc(_[1]),R=lc(_[2]),L=R<=.5?R*(S+1):R+S-R*S,B=2*R-L;return[Cu(255*Cp(B,L,T+1/3)),Cu(255*Cp(B,L,T)),Cu(255*Cp(B,L,T-1/3)),w];default:return null}}return null}}catch{}class Ki{constructor(r,a,u,d=1){this.r=r,this.g=a,this.b=u,this.a=d}static parse(r){if(!r)return;if(r instanceof Ki)return r;if(typeof r!="string")return;const a=Ap(r);return a?new Ki(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[r,a,u,d]=this.toArray();return`rgba(${Math.round(r)},${Math.round(a)},${Math.round(u)},${d})`}toArray(){const{r,g:a,b:u,a:d}=this;return d===0?[0,0,0,0]:[255*r/d,255*a/d,255*u/d,d]}toArray01(){const{r,g:a,b:u,a:d}=this;return d===0?[0,0,0,0]:[r/d,a/d,u/d,d]}toArray01PremultipliedAlpha(){const{r,g:a,b:u,a:d}=this;return[r,a,u,d]}}Ki.black=new Ki(0,0,0,1),Ki.white=new Ki(1,1,1,1),Ki.transparent=new Ki(0,0,0,0),Ki.red=new Ki(1,0,0,1),Ki.blue=new Ki(0,0,1,1);var zr=Ki;class fd{constructor(r,a,u){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pu{constructor(r,a,u,d,g){this.text=r.normalize?r.normalize():r,this.image=a,this.scale=u,this.fontStack=d,this.textColor=g}}class Ji{constructor(r){this.sections=r}static fromString(r){return new Ji([new Pu(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof Ji?r:Ji.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const a of this.sections){if(a.image){r.push(["image",a.image.name]);continue}r.push(a.text);const u={};a.fontStack&&(u["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(u["font-scale"]=a.scale),a.textColor&&(u["text-color"]=["rgba"].concat(a.textColor.toArray())),r.push(u)}return r}}class $i{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new $i({name:r,available:!1}):null}serialize(){return["image",this.name]}}function Ky(o,r,a,u){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[o,r,a,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[o,r,a,u]:[o,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function pd(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof zr||o instanceof fd||o instanceof Ji||o instanceof $i)return!0;if(Array.isArray(o)){for(const r of o)if(!pd(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!pd(o[r]))return!1;return!0}return!1}function Qr(o){if(o===null)return oc;if(typeof o=="string")return Sn;if(typeof o=="boolean")return xn;if(typeof o=="number")return Et;if(o instanceof zr)return vs;if(o instanceof fd)return Au;if(o instanceof Ji)return sc;if(o instanceof $i)return ac;if(Array.isArray(o)){const r=o.length;let a;for(const u of o){const d=Qr(u);if(a){if(a===d)continue;a=_n;break}a=d}return Gi(a||_n,r)}return ml}function Ru(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof zr||o instanceof Ji||o instanceof $i?o.toString():JSON.stringify(o)}class Pp{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!pd(r[1]))return a.error("invalid value");const u=r[1];let d=Qr(u);const g=a.expectedType;return d.kind!=="array"||d.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(d=g),new Pp(d,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zr?["rgba"].concat(this.value.toArray()):this.value instanceof Ji?this.value.serialize():this.value}}var Du=Pp,vi=class{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}};const md={string:Sn,number:Et,boolean:xn,object:ml};class cc{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let u,d=1;const g=r[0];if(g==="array"){let w,T;if(r.length>2){const S=r[1];if(typeof S!="string"||!(S in md)||S==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=md[S],d++}else w=_n;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);T=r[2],d++}u=Gi(w,T)}else u=md[g];const _=[];for(;d<r.length;d++){const w=a.parse(r[d],d,_n);if(!w)return null;_.push(w)}return new cc(u,_)}evaluate(r){for(let a=0;a<this.args.length;a++){const u=this.args[a].evaluate(r);if(!Qi(this.type,Qr(u)))return u;if(a===this.args.length-1)throw new vi(`Expected value to be of type ${rr(this.type)}, but found ${rr(Qr(u))} instead.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,a=[r.kind];if(r.kind==="array"){const u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){a.push(u.kind);const d=r.N;(typeof d=="number"||this.args.length>1)&&a.push(d)}}return a.concat(this.args.map(u=>u.serialize()))}}var Hs=cc;class Ou{constructor(r){this.type=sc,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return a.error("First argument must be an image or text section.");const d=[];let g=!1;for(let _=1;_<=r.length-1;++_){const w=r[_];if(g&&typeof w=="object"&&!Array.isArray(w)){g=!1;let T=null;if(w["font-scale"]&&(T=a.parse(w["font-scale"],1,Et),!T))return null;let S=null;if(w["text-font"]&&(S=a.parse(w["text-font"],1,Gi(Sn)),!S))return null;let R=null;if(w["text-color"]&&(R=a.parse(w["text-color"],1,vs),!R))return null;const L=d[d.length-1];L.scale=T,L.font=S,L.textColor=R}else{const T=a.parse(r[_],1,_n);if(!T)return null;const S=T.type.kind;if(S!=="string"&&S!=="value"&&S!=="null"&&S!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,d.push({content:T,scale:null,font:null,textColor:null})}}return new Ou(d)}evaluate(r){return new Ji(this.sections.map(a=>{const u=a.content.evaluate(r);return Qr(u)===ac?new Pu("",u,null,null,null):new Pu(Ru(u),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null)}))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const a of this.sections){r.push(a.content.serialize());const u={};a.scale&&(u["font-scale"]=a.scale.serialize()),a.font&&(u["text-font"]=a.font.serialize()),a.textColor&&(u["text-color"]=a.textColor.serialize()),r.push(u)}return r}}class gd{constructor(r){this.type=ac,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const u=a.parse(r[1],1,Sn);return u?new gd(u):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),u=$i.fromString(a);return u&&r.availableImages&&(u.available=r.availableImages.indexOf(a)>-1),u}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Pw={"to-boolean":xn,"to-color":vs,"to-number":Et,"to-string":Sn};class Rp{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const u=r[0];if((u==="to-boolean"||u==="to-string")&&r.length!==2)return a.error("Expected one argument.");const d=Pw[u],g=[];for(let _=1;_<r.length;_++){const w=a.parse(r[_],_,_n);if(!w)return null;g.push(w)}return new Rp(d,g)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let a,u;for(const d of this.args){if(a=d.evaluate(r),u=null,a instanceof zr)return a;if(typeof a=="string"){const g=r.parseColor(a);if(g)return g}else if(Array.isArray(a)&&(u=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Ky(a[0],a[1],a[2],a[3]),!u))return new zr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new vi(u||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const u of this.args){if(a=u.evaluate(r),a===null)return 0;const d=Number(a);if(!isNaN(d))return d}throw new vi(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Ji.fromString(Ru(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?$i.fromString(Ru(this.args[0].evaluate(r))):Ru(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ou([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new gd(this.args[0]).serialize();const r=[`to-${this.type.kind}`];return this.eachChild(a=>{r.push(a.serialize())}),r}}var uc=Rp;const Jy=["Unknown","Point","LineString","Polygon"];var ku=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Jy[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:a,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*r-o[0])+this.featureDistanceData.bearing[1]*(u*r-o[1])}return 0}parseColor(o){let r=this._parseColorCache[o];return r||(r=this._parseColorCache[o]=zr.parse(o)),r}};class hc{constructor(r,a,u,d){this.name=r,this.type=a,this._evaluate=u,this.args=d}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,a){const u=r[0],d=hc.definitions[u];if(!d)return a.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(d)?d[0]:d.type,_=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,w=_.filter(([S])=>!Array.isArray(S)||S.length===r.length-1);let T=null;for(const[S,R]of w){T=new Np(a.registry,a.path,null,a.scope);const L=[];let B=!1;for(let j=1;j<r.length;j++){const q=r[j],Q=Array.isArray(S)?S[j-1]:S.type,ie=T.parse(q,1+L.length,Q);if(!ie){B=!0;break}L.push(ie)}if(!B)if(Array.isArray(S)&&S.length!==L.length)T.error(`Expected ${S.length} arguments, but found ${L.length} instead.`);else{for(let j=0;j<L.length;j++){const q=Array.isArray(S)?S[j]:S.type,Q=L[j];T.concat(j+1).checkSubtype(q,Q.type)}if(T.errors.length===0)return new hc(u,g,R,L)}}if(w.length===1)a.errors.push(...T.errors);else{const S=(w.length?w:_).map(([L])=>{return B=L,Array.isArray(B)?`(${B.map(rr).join(", ")})`:`(${rr(B.type)}...)`;var B}).join(" | "),R=[];for(let L=1;L<r.length;L++){const B=a.parse(r[L],1+R.length);if(!B)return null;R.push(rr(B.type))}a.error(`Expected arguments of type ${S}, but found (${R.join(", ")}) instead.`)}return null}static register(r,a){hc.definitions=a;for(const u in a)r[u]=hc}}var Ma=hc;class yd{constructor(r,a,u){this.type=Au,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return a.error("Collator options argument must be an object.");const d=a.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,xn);if(!d)return null;const g=a.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,xn);if(!g)return null;let _=null;return u.locale&&(_=a.parse(u.locale,1,Sn),!_)?null:new yd(d,g,_)}evaluate(r){return new fd(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}const Aa=8192;function Lo(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Lu(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function e_(o,r){const a=(180+o[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,d=Math.pow(2,r.z);return[Math.round(a*d*Aa),Math.round(u*d*Aa)]}function t_(o,r,a){const u=o[0]-r[0],d=o[1]-r[1],g=o[0]-a[0],_=o[1]-a[1];return u*_-g*d==0&&u*g<=0&&d*_<=0}function _d(o,r){let a=!1;for(let _=0,w=r.length;_<w;_++){const T=r[_];for(let S=0,R=T.length;S<R-1;S++){if(t_(o,T[S],T[S+1]))return!1;(d=T[S])[1]>(u=o)[1]!=(g=T[S+1])[1]>u[1]&&u[0]<(g[0]-d[0])*(u[1]-d[1])/(g[1]-d[1])+d[0]&&(a=!a)}}var u,d,g;return a}function n_(o,r){for(let a=0;a<r.length;a++)if(_d(o,r[a]))return!0;return!1}function Dp(o,r,a,u){const d=u[0]-a[0],g=u[1]-a[1],_=(o[0]-a[0])*g-d*(o[1]-a[1]),w=(r[0]-a[0])*g-d*(r[1]-a[1]);return _>0&&w<0||_<0&&w>0}function Op(o,r,a){for(const S of a)for(let R=0;R<S.length-1;++R)if((w=[(_=S[R+1])[0]-(g=S[R])[0],_[1]-g[1]])[0]*(T=[(d=r)[0]-(u=o)[0],d[1]-u[1]])[1]-w[1]*T[0]!=0&&Dp(u,d,g,_)&&Dp(g,_,u,d))return!0;var u,d,g,_,w,T;return!1}function dc(o,r){for(let a=0;a<o.length;++a)if(!_d(o[a],r))return!1;for(let a=0;a<o.length-1;++a)if(Op(o[a],o[a+1],r))return!1;return!0}function r_(o,r){for(let a=0;a<r.length;a++)if(dc(o,r[a]))return!0;return!1}function vd(o,r,a){const u=[];for(let d=0;d<o.length;d++){const g=[];for(let _=0;_<o[d].length;_++){const w=e_(o[d][_],a);Lo(r,w),g.push(w)}u.push(g)}return u}function xd(o,r,a){const u=[];for(let d=0;d<o.length;d++){const g=vd(o[d],r,a);u.push(g)}return u}function kp(o,r,a,u){if(o[0]<a[0]||o[0]>a[2]){const d=.5*u;let g=o[0]-a[0]>d?-u:a[0]-o[0]>d?u:0;g===0&&(g=o[0]-a[2]>d?-u:a[2]-o[0]>d?u:0),o[0]+=g}Lo(r,o)}function _l(o,r,a,u){const d=Math.pow(2,u.z)*Aa,g=[u.x*Aa,u.y*Aa],_=[];if(!o)return _;for(const w of o)for(const T of w){const S=[T.x+g[0],T.y+g[1]];kp(S,r,a,d),_.push(S)}return _}function Nn(o,r,a,u){const d=Math.pow(2,u.z)*Aa,g=[u.x*Aa,u.y*Aa],_=[];if(!o)return _;for(const T of o){const S=[];for(const R of T){const L=[R.x+g[0],R.y+g[1]];Lo(r,L),S.push(L)}_.push(S)}if(r[2]-r[0]<=d/2){(w=r)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const T of _)for(const S of T)kp(S,r,a,d)}var w;return _}class zu{constructor(r,a){this.type=xn,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(pd(r[1])){const u=r[1];if(u.type==="FeatureCollection")for(let d=0;d<u.features.length;++d){const g=u.features[d].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new zu(u,u.features[d].geometry)}else if(u.type==="Feature"){const d=u.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new zu(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new zu(u,u)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(a,u){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(!_)return!1;if(u.type==="Polygon"){const w=vd(u.coordinates,g,_),T=_l(a.geometry(),d,g,_);if(!Lu(d,g))return!1;for(const S of T)if(!_d(S,w))return!1}if(u.type==="MultiPolygon"){const w=xd(u.coordinates,g,_),T=_l(a.geometry(),d,g,_);if(!Lu(d,g))return!1;for(const S of T)if(!n_(S,w))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(a,u){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(!_)return!1;if(u.type==="Polygon"){const w=vd(u.coordinates,g,_),T=Nn(a.geometry(),d,g,_);if(!Lu(d,g))return!1;for(const S of T)if(!dc(S,w))return!1}if(u.type==="MultiPolygon"){const w=xd(u.coordinates,g,_),T=Nn(a.geometry(),d,g,_);if(!Lu(d,g))return!1;for(const S of T)if(!r_(S,w))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Lp=zu;function Nu(o){if(o instanceof Ma&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Lp)return!1;let r=!0;return o.eachChild(a=>{r&&!Nu(a)&&(r=!1)}),r}function Bu(o){if(o instanceof Ma&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(a=>{r&&!Bu(a)&&(r=!1)}),r}function wd(o,r){if(o instanceof Ma&&r.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(u=>{a&&!wd(u,r)&&(a=!1)}),a}class bd{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const u=r[1];return a.scope.has(u)?new bd(u,a.scope.get(u)):a.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var zp=bd;class Ed{constructor(r,a=[],u,d=new Xy,g=[]){this.registry=r,this.path=a,this.key=a.map(_=>`[${_}]`).join(""),this.scope=d,this.errors=g,this.expectedType=u}parse(r,a,u,d,g={}){return a?this.concat(a,u,d)._parse(r,g):this._parse(r,g)}_parse(r,a){function u(d,g,_){return _==="assert"?new Hs(g,[d]):_==="coerce"?new uc(g,[d]):d}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=r[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[d];if(g){let _=g.parse(r,this);if(!_)return null;if(this.expectedType){const w=this.expectedType,T=_.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||T.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(w,T))return null}else _=u(_,w,a.typeAnnotation||"coerce");else _=u(_,w,a.typeAnnotation||"assert")}if(!(_ instanceof Du)&&_.type.kind!=="resolvedImage"&&Ca(_)){const w=new ku;try{_=new Du(_.type,_.evaluate(w))}catch(T){return this.error(T.message),null}}return _}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,u){const d=typeof r=="number"?this.path.concat(r):this.path,g=u?this.scope.concat(u):this.scope;return new Ed(this.registry,d,a||null,g,this.errors)}error(r,...a){const u=`${this.key}${a.map(d=>`[${d}]`).join("")}`;this.errors.push(new _s(u,r))}checkSubtype(r,a){const u=Qi(r,a);return u&&this.error(u),u}}var Np=Ed;function Ca(o){if(o instanceof zp)return Ca(o.boundExpression);if(o instanceof Ma&&o.name==="error"||o instanceof yd||o instanceof Lp)return!1;const r=o instanceof uc||o instanceof Hs;let a=!0;return o.eachChild(u=>{a=r?a&&Ca(u):a&&u instanceof Du}),!!a&&Nu(o)&&wd(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function vl(o,r){const a=o.length-1;let u,d,g=0,_=a,w=0;for(;g<=_;)if(w=Math.floor((g+_)/2),u=o[w],d=o[w+1],u<=r){if(w===a||r<d)return w;g=w+1}else{if(!(u>r))throw new vi("Input is not a number.");_=w-1}return 0}class Td{constructor(r,a,u){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[d,g]of u)this.labels.push(d),this.outputs.push(g)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const u=a.parse(r[1],1,Et);if(!u)return null;const d=[];let g=null;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);for(let _=1;_<r.length;_+=2){const w=_===1?-1/0:r[_],T=r[_+1],S=_,R=_+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',S);if(d.length&&d[d.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',S);const L=a.parse(T,R,g);if(!L)return null;g=g||L.type,d.push([w,L])}return new Td(g,u,d)}evaluate(r){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(r);const d=this.input.evaluate(r);if(d<=a[0])return u[0].evaluate(r);const g=a.length;return d>=a[g-1]?u[g-1].evaluate(r):u[vl(a,d)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&r.push(this.labels[a]),r.push(this.outputs[a].serialize());return r}}var Bp=Td;function Rn(o,r,a){return o*(1-a)+r*a}var Fu=Object.freeze({__proto__:null,number:Rn,color:function(o,r,a){return new zr(Rn(o.r,r.r,a),Rn(o.g,r.g,a),Rn(o.b,r.b,a),Rn(o.a,r.a,a))},array:function(o,r,a){return o.map((u,d)=>Rn(u,r[d],a))}});const i_=.95047,o_=1.08883,Fp=4/29,Up=6/29,Vp=3*Up*Up,s_=Math.PI/180,Rw=180/Math.PI;function Sd(o){return o>.008856451679035631?Math.pow(o,1/3):o/Vp+Fp}function jp(o){return o>Up?o*o*o:Vp*(o-Fp)}function Id(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function Md(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function a_(o){const r=Md(o.r),a=Md(o.g),u=Md(o.b),d=Sd((.4124564*r+.3575761*a+.1804375*u)/i_),g=Sd((.2126729*r+.7151522*a+.072175*u)/1);return{l:116*g-16,a:500*(d-g),b:200*(g-Sd((.0193339*r+.119192*a+.9503041*u)/o_)),alpha:o.a}}function l_(o){let r=(o.l+16)/116,a=isNaN(o.a)?r:r+o.a/500,u=isNaN(o.b)?r:r-o.b/200;return r=1*jp(r),a=i_*jp(a),u=o_*jp(u),new zr(Id(3.2404542*a-1.5371385*r-.4985314*u),Id(-.969266*a+1.8760108*r+.041556*u),Id(.0556434*a-.2040259*r+1.0572252*u),o.alpha)}function Dw(o,r,a){const u=r-o;return o+a*(u>180||u<-180?u-360*Math.round(u/360):u)}const Uu={forward:a_,reverse:l_,interpolate:function(o,r,a){return{l:Rn(o.l,r.l,a),a:Rn(o.a,r.a,a),b:Rn(o.b,r.b,a),alpha:Rn(o.alpha,r.alpha,a)}}},Vu={forward:function(o){const{l:r,a,b:u}=a_(o),d=Math.atan2(u,a)*Rw;return{h:d<0?d+360:d,c:Math.sqrt(a*a+u*u),l:r,alpha:o.a}},reverse:function(o){const r=o.h*s_,a=o.c;return l_({l:o.l,a:Math.cos(r)*a,b:Math.sin(r)*a,alpha:o.alpha})},interpolate:function(o,r,a){return{h:Dw(o.h,r.h,a),c:Rn(o.c,r.c,a),l:Rn(o.l,r.l,a),alpha:Rn(o.alpha,r.alpha,a)}}};var c_=Object.freeze({__proto__:null,lab:Uu,hcl:Vu});class ju{constructor(r,a,u,d,g){this.type=r,this.operator=a,this.interpolation=u,this.input=d,this.labels=[],this.outputs=[];for(const[_,w]of g)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(r,a,u,d){let g=0;if(r.name==="exponential")g=Gp(a,r.base,u,d);else if(r.name==="linear")g=Gp(a,1,u,d);else if(r.name==="cubic-bezier"){const _=r.controlPoints;g=new N(_[0],_[1],_[2],_[3]).solve(Gp(a,1,u,d))}return g}static parse(r,a){let[u,d,g,..._]=r;if(!Array.isArray(d)||d.length===0)return a.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const S=d[1];if(typeof S!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:S}}else{if(d[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const S=d.slice(1);if(S.length!==4||S.some(R=>typeof R!="number"||R<0||R>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:S}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(g=a.parse(g,2,Et),!g)return null;const w=[];let T=null;u==="interpolate-hcl"||u==="interpolate-lab"?T=vs:a.expectedType&&a.expectedType.kind!=="value"&&(T=a.expectedType);for(let S=0;S<_.length;S+=2){const R=_[S],L=_[S+1],B=S+3,j=S+4;if(typeof R!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(w.length&&w[w.length-1][0]>=R)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const q=a.parse(L,j,T);if(!q)return null;T=T||q.type,w.push([R,q])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new ju(T,u,d,g,w):a.error(`Type ${rr(T)} is not interpolatable.`)}evaluate(r){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(r);const d=this.input.evaluate(r);if(d<=a[0])return u[0].evaluate(r);const g=a.length;if(d>=a[g-1])return u[g-1].evaluate(r);const _=vl(a,d),w=ju.interpolationFactor(this.interpolation,d,a[_],a[_+1]),T=u[_].evaluate(r),S=u[_+1].evaluate(r);return this.operator==="interpolate"?Fu[this.type.kind.toLowerCase()](T,S,w):this.operator==="interpolate-hcl"?Vu.reverse(Vu.interpolate(Vu.forward(T),Vu.forward(S),w)):Uu.reverse(Uu.interpolate(Uu.forward(T),Uu.forward(S),w))}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,r,this.input.serialize()];for(let u=0;u<this.labels.length;u++)a.push(this.labels[u],this.outputs[u].serialize());return a}}function Gp(o,r,a,u){const d=u-a,g=o-a;return d===0?0:r===1?g/d:(Math.pow(r,g)-1)/(Math.pow(r,d)-1)}var xs=ju;class $p{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expectected at least one argument.");let u=null;const d=a.expectedType;d&&d.kind!=="value"&&(u=d);const g=[];for(const w of r.slice(1)){const T=a.parse(w,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!T)return null;u=u||T.type,g.push(T)}const _=d&&g.some(w=>Qi(d,w.type));return new $p(_?_n:u,g)}evaluate(r){let a,u=null,d=0;for(const g of this.args){if(d++,u=g.evaluate(r),u&&u instanceof $i&&!u.available&&(a||(a=u),u=null,d===this.args.length))return a;if(u!==null)break}return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(a=>{r.push(a.serialize())}),r}}var u_=$p;class Ad{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let g=1;g<r.length-1;g+=2){const _=r[g];if(typeof _!="string")return a.error(`Expected string, but found ${typeof _} instead.`,g);if(/[^a-zA-Z0-9_]/.test(_))return a.error("Variable names must contain only alphanumeric characters or '_'.",g);const w=a.parse(r[g+1],g+1);if(!w)return null;u.push([_,w])}const d=a.parse(r[r.length-1],r.length-1,a.expectedType,u);return d?new Ad(u,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[a,u]of this.bindings)r.push(a,u.serialize());return r.push(this.result.serialize()),r}}var Wp=Ad;class Cd{constructor(r,a,u){this.type=r,this.index=a,this.input=u}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,Et),d=a.parse(r[2],2,Gi(a.expectedType||_n));return u&&d?new Cd(d.type.itemType,u,d):null}evaluate(r){const a=this.index.evaluate(r),u=this.input.evaluate(r);if(a<0)throw new vi(`Array index out of bounds: ${a} < 0.`);if(a>=u.length)throw new vi(`Array index out of bounds: ${a} > ${u.length-1}.`);if(a!==Math.floor(a))throw new vi(`Array index must be an integer, but found ${a} instead.`);return u[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Ow=Cd;class qp{constructor(r,a){this.type=xn,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,_n),d=a.parse(r[2],2,_n);return u&&d?Mp(u.type,[xn,Sn,Et,oc,_n])?new qp(u,d):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${rr(u.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(u==null)return!1;if(!gl(a,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${rr(Qr(a))} instead.`);if(!gl(u,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${rr(Qr(u))} instead.`);return u.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var h_=qp;class Gu{constructor(r,a,u){this.type=Et,this.needle=r,this.haystack=a,this.fromIndex=u}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,_n),d=a.parse(r[2],2,_n);if(!u||!d)return null;if(!Mp(u.type,[xn,Sn,Et,oc,_n]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${rr(u.type)} instead`);if(r.length===4){const g=a.parse(r[3],3,Et);return g?new Gu(u,d,g):null}return new Gu(u,d)}evaluate(r){const a=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!gl(a,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${rr(Qr(a))} instead.`);if(!gl(u,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${rr(Qr(u))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(r);return u.indexOf(a,d)}return u.indexOf(a)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var d_=Gu;class Hp{constructor(r,a,u,d,g,_){this.inputType=r,this.type=a,this.input=u,this.cases=d,this.outputs=g,this.otherwise=_}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let u,d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);const g={},_=[];for(let S=2;S<r.length-1;S+=2){let R=r[S];const L=r[S+1];Array.isArray(R)||(R=[R]);const B=a.concat(S);if(R.length===0)return B.error("Expected at least one branch label.");for(const q of R){if(typeof q!="number"&&typeof q!="string")return B.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return B.error("Numeric branch labels must be integer values.");if(u){if(B.checkSubtype(u,Qr(q)))return null}else u=Qr(q);if(g[String(q)]!==void 0)return B.error("Branch labels must be unique.");g[String(q)]=_.length}const j=a.parse(L,S,d);if(!j)return null;d=d||j.type,_.push(j)}const w=a.parse(r[1],1,_n);if(!w)return null;const T=a.parse(r[r.length-1],r.length-1,d);return T?w.type.kind!=="value"&&a.concat(1).checkSubtype(u,w.type)?null:new Hp(u,d,w,g,_,T):null}evaluate(r){const a=this.input.evaluate(r);return(Qr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),u=[],d={};for(const _ of a){const w=d[this.cases[_]];w===void 0?(d[this.cases[_]]=u.length,u.push([this.cases[_],[_]])):u[w][1].push(_)}const g=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,w]of u)r.push(w.length===1?g(w[0]):w.map(g)),r.push(this.outputs[_].serialize());return r.push(this.otherwise.serialize()),r}}var kw=Hp;class Zp{constructor(r,a,u){this.type=r,this.branches=a,this.otherwise=u}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let u;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);const d=[];for(let _=1;_<r.length-1;_+=2){const w=a.parse(r[_],_,xn);if(!w)return null;const T=a.parse(r[_+1],_+1,u);if(!T)return null;d.push([w,T]),u=u||T.type}const g=a.parse(r[r.length-1],r.length-1,u);return g?new Zp(u,d,g):null}evaluate(r){for(const[a,u]of this.branches)if(a.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,u]of this.branches)r(a),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(a=>{r.push(a.serialize())}),r}}var Lw=Zp;class xl{constructor(r,a,u,d){this.type=r,this.input=a,this.beginIndex=u,this.endIndex=d}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,_n),d=a.parse(r[2],2,Et);if(!u||!d)return null;if(!Mp(u.type,[Gi(_n),Sn,_n]))return a.error(`Expected first argument to be of type array or string, but found ${rr(u.type)} instead`);if(r.length===4){const g=a.parse(r[3],3,Et);return g?new xl(u.type,u,d,g):null}return new xl(u.type,u,d)}evaluate(r){const a=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!gl(a,["string","array"]))throw new vi(`Expected first argument to be of type array or string, but found ${rr(Qr(a))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(r);return a.slice(u,d)}return a.slice(u)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var f_=xl;function Yp(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function p_(o,r,a,u){return u.compare(r,a)===0}function fc(o,r,a){const u=o!=="=="&&o!=="!=";return class U4{constructor(g,_,w){this.type=xn,this.lhs=g,this.rhs=_,this.collator=w,this.hasUntypedArgument=g.type.kind==="value"||_.type.kind==="value"}static parse(g,_){if(g.length!==3&&g.length!==4)return _.error("Expected two or three arguments.");const w=g[0];let T=_.parse(g[1],1,_n);if(!T)return null;if(!Yp(w,T.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${rr(T.type)}'.`);let S=_.parse(g[2],2,_n);if(!S)return null;if(!Yp(w,S.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${rr(S.type)}'.`);if(T.type.kind!==S.type.kind&&T.type.kind!=="value"&&S.type.kind!=="value")return _.error(`Cannot compare types '${rr(T.type)}' and '${rr(S.type)}'.`);u&&(T.type.kind==="value"&&S.type.kind!=="value"?T=new Hs(S.type,[T]):T.type.kind!=="value"&&S.type.kind==="value"&&(S=new Hs(T.type,[S])));let R=null;if(g.length===4){if(T.type.kind!=="string"&&S.type.kind!=="string"&&T.type.kind!=="value"&&S.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(R=_.parse(g[3],3,Au),!R)return null}return new U4(T,S,R)}evaluate(g){const _=this.lhs.evaluate(g),w=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const T=Qr(_),S=Qr(w);if(T.kind!==S.kind||T.kind!=="string"&&T.kind!=="number")throw new vi(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${T.kind}, ${S.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const T=Qr(_),S=Qr(w);if(T.kind!=="string"||S.kind!=="string")return r(g,_,w)}return this.collator?a(g,_,w,this.collator.evaluate(g)):r(g,_,w)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[o];return this.eachChild(_=>{g.push(_.serialize())}),g}}}const zw=fc("==",function(o,r,a){return r===a},p_),m_=fc("!=",function(o,r,a){return r!==a},function(o,r,a,u){return!p_(0,r,a,u)}),g_=fc("<",function(o,r,a){return r<a},function(o,r,a,u){return u.compare(r,a)<0}),y_=fc(">",function(o,r,a){return r>a},function(o,r,a,u){return u.compare(r,a)>0}),Xp=fc("<=",function(o,r,a){return r<=a},function(o,r,a,u){return u.compare(r,a)<=0}),Nw=fc(">=",function(o,r,a){return r>=a},function(o,r,a,u){return u.compare(r,a)>=0});class Qp{constructor(r,a,u,d,g,_){this.type=Sn,this.number=r,this.locale=a,this.currency=u,this.unit=d,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const u=a.parse(r[1],1,Et);if(!u)return null;const d=r[2];if(typeof d!="object"||Array.isArray(d))return a.error("NumberFormat options argument must be an object.");let g=null;if(d.locale&&(g=a.parse(d.locale,1,Sn),!g))return null;let _=null;if(d.currency&&(_=a.parse(d.currency,1,Sn),!_))return null;let w=null;if(d.unit&&(w=a.parse(d.unit,1,Sn),!w))return null;let T=null;if(d["min-fraction-digits"]&&(T=a.parse(d["min-fraction-digits"],1,Et),!T))return null;let S=null;return d["max-fraction-digits"]&&(S=a.parse(d["max-fraction-digits"],1,Et),!S)?null:new Qp(u,g,_,w,T,S)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Kp{constructor(r){this.type=Et,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=a.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${rr(u.type)} instead.`):new Kp(u):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string"||Array.isArray(a))return a.length;throw new vi(`Expected value to be of type string or array, but found ${rr(Qr(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(a=>{r.push(a.serialize())}),r}}const __={"==":zw,"!=":m_,">":y_,"<":g_,">=":Nw,"<=":Xp,array:Hs,at:Ow,boolean:Hs,case:Lw,coalesce:u_,collator:yd,format:Ou,image:gd,in:h_,"index-of":d_,interpolate:xs,"interpolate-hcl":xs,"interpolate-lab":xs,length:Kp,let:Wp,literal:Du,match:kw,number:Hs,"number-format":Qp,object:Hs,slice:f_,step:Bp,string:Hs,"to-boolean":uc,"to-color":uc,"to-number":uc,"to-string":uc,var:zp,within:Lp};function v_(o,[r,a,u,d]){r=r.evaluate(o),a=a.evaluate(o),u=u.evaluate(o);const g=d?d.evaluate(o):1,_=Ky(r,a,u,g);if(_)throw new vi(_);return new zr(r/255*g,a/255*g,u/255*g,g)}function x_(o,r){return o in r}function Jp(o,r){const a=r[o];return a===void 0?null:a}function Pa(o){return{type:o}}Ma.register(__,{error:[{kind:"error"},[Sn],(o,[r])=>{throw new vi(r.evaluate(o))}],typeof:[Sn,[_n],(o,[r])=>rr(Qr(r.evaluate(o)))],"to-rgba":[Gi(Et,4),[vs],(o,[r])=>r.evaluate(o).toArray()],rgb:[vs,[Et,Et,Et],v_],rgba:[vs,[Et,Et,Et,Et],v_],has:{type:xn,overloads:[[[Sn],(o,[r])=>x_(r.evaluate(o),o.properties())],[[Sn,ml],(o,[r,a])=>x_(r.evaluate(o),a.evaluate(o))]]},get:{type:_n,overloads:[[[Sn],(o,[r])=>Jp(r.evaluate(o),o.properties())],[[Sn,ml],(o,[r,a])=>Jp(r.evaluate(o),a.evaluate(o))]]},"feature-state":[_n,[Sn],(o,[r])=>Jp(r.evaluate(o),o.featureState||{})],properties:[ml,[],o=>o.properties()],"geometry-type":[Sn,[],o=>o.geometryType()],id:[_n,[],o=>o.id()],zoom:[Et,[],o=>o.globals.zoom],pitch:[Et,[],o=>o.globals.pitch||0],"distance-from-center":[Et,[],o=>o.distanceFromCenter()],"heatmap-density":[Et,[],o=>o.globals.heatmapDensity||0],"line-progress":[Et,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[Et,[],o=>o.globals.skyRadialProgress||0],accumulated:[_n,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Et,Pa(Et),(o,r)=>{let a=0;for(const u of r)a+=u.evaluate(o);return a}],"*":[Et,Pa(Et),(o,r)=>{let a=1;for(const u of r)a*=u.evaluate(o);return a}],"-":{type:Et,overloads:[[[Et,Et],(o,[r,a])=>r.evaluate(o)-a.evaluate(o)],[[Et],(o,[r])=>-r.evaluate(o)]]},"/":[Et,[Et,Et],(o,[r,a])=>r.evaluate(o)/a.evaluate(o)],"%":[Et,[Et,Et],(o,[r,a])=>r.evaluate(o)%a.evaluate(o)],ln2:[Et,[],()=>Math.LN2],pi:[Et,[],()=>Math.PI],e:[Et,[],()=>Math.E],"^":[Et,[Et,Et],(o,[r,a])=>Math.pow(r.evaluate(o),a.evaluate(o))],sqrt:[Et,[Et],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Et,[Et],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Et,[Et],(o,[r])=>Math.log(r.evaluate(o))],log2:[Et,[Et],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Et,[Et],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Et,[Et],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Et,[Et],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Et,[Et],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Et,[Et],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Et,[Et],(o,[r])=>Math.atan(r.evaluate(o))],min:[Et,Pa(Et),(o,r)=>Math.min(...r.map(a=>a.evaluate(o)))],max:[Et,Pa(Et),(o,r)=>Math.max(...r.map(a=>a.evaluate(o)))],abs:[Et,[Et],(o,[r])=>Math.abs(r.evaluate(o))],round:[Et,[Et],(o,[r])=>{const a=r.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Et,[Et],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Et,[Et],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[xn,[Sn,_n],(o,[r,a])=>o.properties()[r.value]===a.value],"filter-id-==":[xn,[_n],(o,[r])=>o.id()===r.value],"filter-type-==":[xn,[Sn],(o,[r])=>o.geometryType()===r.value],"filter-<":[xn,[Sn,_n],(o,[r,a])=>{const u=o.properties()[r.value],d=a.value;return typeof u==typeof d&&u<d}],"filter-id-<":[xn,[_n],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a<u}],"filter->":[xn,[Sn,_n],(o,[r,a])=>{const u=o.properties()[r.value],d=a.value;return typeof u==typeof d&&u>d}],"filter-id->":[xn,[_n],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a>u}],"filter-<=":[xn,[Sn,_n],(o,[r,a])=>{const u=o.properties()[r.value],d=a.value;return typeof u==typeof d&&u<=d}],"filter-id-<=":[xn,[_n],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a<=u}],"filter->=":[xn,[Sn,_n],(o,[r,a])=>{const u=o.properties()[r.value],d=a.value;return typeof u==typeof d&&u>=d}],"filter-id->=":[xn,[_n],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a>=u}],"filter-has":[xn,[_n],(o,[r])=>r.value in o.properties()],"filter-has-id":[xn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[xn,[Gi(Sn)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[xn,[Gi(_n)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[xn,[Sn,Gi(_n)],(o,[r,a])=>a.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[xn,[Sn,Gi(_n)],(o,[r,a])=>function(u,d,g,_){for(;g<=_;){const w=g+_>>1;if(d[w]===u)return!0;d[w]>u?_=w-1:g=w+1}return!1}(o.properties()[r.value],a.value,0,a.value.length-1)],all:{type:xn,overloads:[[[xn,xn],(o,[r,a])=>r.evaluate(o)&&a.evaluate(o)],[Pa(xn),(o,r)=>{for(const a of r)if(!a.evaluate(o))return!1;return!0}]]},any:{type:xn,overloads:[[[xn,xn],(o,[r,a])=>r.evaluate(o)||a.evaluate(o)],[Pa(xn),(o,r)=>{for(const a of r)if(a.evaluate(o))return!0;return!1}]]},"!":[xn,[xn],(o,[r])=>!r.evaluate(o)],"is-supported-script":[xn,[Sn],(o,[r])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(r.evaluate(o))}],upcase:[Sn,[Sn],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Sn,[Sn],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Sn,Pa(_n),(o,r)=>r.map(a=>Ru(a.evaluate(o))).join("")],"resolved-locale":[Sn,[Au],(o,[r])=>r.evaluate(o).resolvedLocale()]});var pc=__;function $u(o){return{result:"success",value:o}}function mc(o){return{result:"error",value:o}}function gc(o){return o["property-type"]==="data-driven"}function Zs(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Pd(o){return!!o.expression&&o.expression.interpolated}function Cn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Rd(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Bw(o){return o}function em(o,r){const a=r.type==="color",u=o.stops&&typeof o.stops[0][0]=="object",d=u||!(u||o.property!==void 0),g=o.type||(Pd(r)?"exponential":"interval");if(a&&((o=qs({},o)).stops&&(o.stops=o.stops.map(S=>[S[0],zr.parse(S[1])])),o.default=zr.parse(o.default?o.default:r.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!c_[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let _,w,T;if(g==="exponential")_=Dd;else if(g==="interval")_=w_;else if(g==="categorical"){_=tm,w=Object.create(null);for(const S of o.stops)w[S[0]]=S[1];T=typeof o.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);_=b_}if(u){const S={},R=[];for(let j=0;j<o.stops.length;j++){const q=o.stops[j],Q=q[0].zoom;S[Q]===void 0&&(S[Q]={zoom:Q,type:o.type,property:o.property,default:o.default,stops:[]},R.push(Q)),S[Q].stops.push([q[0].value,q[1]])}const L=[];for(const j of R)L.push([S[j].zoom,em(S[j],r)]);const B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:xs.interpolationFactor.bind(void 0,B),zoomStops:L.map(j=>j[0]),evaluate:({zoom:j},q)=>Dd({stops:L,base:o.base},r,j).evaluate(j,q)}}if(d){const S=g==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:xs.interpolationFactor.bind(void 0,S),zoomStops:o.stops.map(R=>R[0]),evaluate:({zoom:R})=>_(o,r,R,w,T)}}return{kind:"source",evaluate(S,R){const L=R&&R.properties?R.properties[o.property]:void 0;return L===void 0?Wu(o.default,r.default):_(o,r,L,w,T)}}}function Wu(o,r,a){return o!==void 0?o:r!==void 0?r:a!==void 0?a:void 0}function tm(o,r,a,u,d){return Wu(typeof a===d?u[a]:void 0,o.default,r.default)}function w_(o,r,a){if(Cn(a)!=="number")return Wu(o.default,r.default);const u=o.stops.length;if(u===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[u-1][0])return o.stops[u-1][1];const d=vl(o.stops.map(g=>g[0]),a);return o.stops[d][1]}function Dd(o,r,a){const u=o.base!==void 0?o.base:1;if(Cn(a)!=="number")return Wu(o.default,r.default);const d=o.stops.length;if(d===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[d-1][0])return o.stops[d-1][1];const g=vl(o.stops.map(R=>R[0]),a),_=function(R,L,B,j){const q=j-B,Q=R-B;return q===0?0:L===1?Q/q:(Math.pow(L,Q)-1)/(Math.pow(L,q)-1)}(a,u,o.stops[g][0],o.stops[g+1][0]),w=o.stops[g][1],T=o.stops[g+1][1];let S=Fu[r.type]||Bw;if(o.colorSpace&&o.colorSpace!=="rgb"){const R=c_[o.colorSpace];S=(L,B)=>R.reverse(R.interpolate(R.forward(L),R.forward(B),_))}return typeof w.evaluate=="function"?{evaluate(...R){const L=w.evaluate.apply(void 0,R),B=T.evaluate.apply(void 0,R);if(L!==void 0&&B!==void 0)return S(L,B,_)}}:S(w,T,_)}function b_(o,r,a){return r.type==="color"?a=zr.parse(a):r.type==="formatted"?a=Ji.fromString(a.toString()):r.type==="resolvedImage"?a=$i.fromString(a.toString()):Cn(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0),Wu(a,o.default,r.default)}class Od{constructor(r,a){this.expression=r,this._warningHistory={},this._evaluator=new ku,this._defaultValue=a?function(u){return u.type==="color"&&(Rd(u.default)||Array.isArray(u.default))?new zr(0,0,0,0):u.type==="color"?zr.parse(u.default)||null:u.default===void 0?null:u.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(r,a,u,d,g,_,w,T){return this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=u,this._evaluator.canonical=d||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(r,a,u,d,g,_,w,T){this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=u||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=w||null,this._evaluator.featureDistanceData=T||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new vi(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function yc(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in pc}function _c(o,r){const a=new Np(pc,[],r?function(d){const g={color:vs,string:Sn,number:Et,enum:Sn,boolean:xn,formatted:sc,resolvedImage:ac};return d.type==="array"?Gi(g[d.value]||_n,d.length):g[d.type]}(r):void 0),u=a.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?$u(new Od(u,r)):mc(a.errors)}class kd{constructor(r,a){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!Bu(a.expression)}evaluateWithoutErrorHandling(r,a,u,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(r,a,u,d,g,_)}evaluate(r,a,u,d,g,_){return this._styleExpression.evaluate(r,a,u,d,g,_)}}class wl{constructor(r,a,u,d){this.kind=r,this.zoomStops=u,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!Bu(a.expression),this.interpolationType=d}evaluateWithoutErrorHandling(r,a,u,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(r,a,u,d,g,_)}evaluate(r,a,u,d,g,_){return this._styleExpression.evaluate(r,a,u,d,g,_)}interpolationFactor(r,a,u){return this.interpolationType?xs.interpolationFactor(this.interpolationType,r,a,u):0}}function bl(o,r){if((o=_c(o,r)).result==="error")return o;const a=o.value.expression,u=Nu(a);if(!u&&!gc(r))return mc([new _s("","data expressions not supported")]);const d=wd(a,["zoom","pitch","distance-from-center"]);if(!d&&!Zs(r))return mc([new _s("","zoom expressions not supported")]);const g=Hu(a);return g||d?g instanceof _s?mc([g]):g instanceof xs&&!Pd(r)?mc([new _s("",'"interpolate" expressions cannot be used with this property')]):$u(g?new wl(u?"camera":"composite",o.value,g.labels,g instanceof xs?g.interpolation:void 0):new kd(u?"constant":"source",o.value)):mc([new _s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class qu{constructor(r,a){this._parameters=r,this._specification=a,qs(this,em(this._parameters,this._specification))}static deserialize(r){return new qu(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Hu(o){let r=null;if(o instanceof Wp)r=Hu(o.result);else if(o instanceof u_){for(const a of o.args)if(r=Hu(a),r)break}else(o instanceof Bp||o instanceof xs)&&o.input instanceof Ma&&o.input.name==="zoom"&&(r=o);return r instanceof _s||o.eachChild(a=>{const u=Hu(a);u instanceof _s?r=u:!r&&u?r=new _s("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&u&&r!==u&&(r=new _s("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}class Lt{constructor(r,a,u,d){this.message=(r?`${r}: `:"")+u,d&&(this.identifier=d),a!=null&&a.__line__&&(this.line=a.__line__)}}function zo(o){const r=o.key,a=o.value,u=o.valueSpec||{},d=o.objectElementValidators||{},g=o.style,_=o.styleSpec;let w=[];const T=Cn(a);if(T!=="object")return[new Lt(r,a,`object expected, ${T} found`)];for(const S in a){const R=S.split(".")[0],L=u[R]||u["*"];let B;d[R]?B=d[R]:u[R]?B=Ai:d["*"]?B=d["*"]:u["*"]&&(B=Ai),B?w=w.concat(B({key:(r&&`${r}.`)+S,value:a[S],valueSpec:L,style:g,styleSpec:_,object:a,objectKey:S},a)):w.push(new Lt(r,a[S],`unknown property "${S}"`))}for(const S in u)d[S]||u[S].required&&u[S].default===void 0&&a[S]===void 0&&w.push(new Lt(r,a,`missing required property "${S}"`));return w}function E_(o){const r=o.value,a=o.valueSpec,u=o.style,d=o.styleSpec,g=o.key,_=o.arrayElementValidator||Ai;if(Cn(r)!=="array")return[new Lt(g,r,`array expected, ${Cn(r)} found`)];if(a.length&&r.length!==a.length)return[new Lt(g,r,`array length ${a.length} expected, length ${r.length} found`)];if(a["min-length"]&&r.length<a["min-length"])return[new Lt(g,r,`array length at least ${a["min-length"]} expected, length ${r.length} found`)];let w={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};d.$version<7&&(w.function=a.function),Cn(a.value)==="object"&&(w=a.value);let T=[];for(let S=0;S<r.length;S++)T=T.concat(_({array:r,arrayIndex:S,value:r[S],valueSpec:w,style:u,styleSpec:d,key:`${g}[${S}]`}));return T}function nm(o){const r=o.key,a=o.value,u=o.valueSpec;let d=Cn(a);if(d==="number"&&a!=a&&(d="NaN"),d!=="number")return[new Lt(r,a,`number expected, ${d} found`)];if("minimum"in u){let g=u.minimum;if(Cn(u.minimum)==="array"&&(g=u.minimum[o.arrayIndex]),a<g)return[new Lt(r,a,`${a} is less than the minimum value ${g}`)]}if("maximum"in u){let g=u.maximum;if(Cn(u.maximum)==="array"&&(g=u.maximum[o.arrayIndex]),a>g)return[new Lt(r,a,`${a} is greater than the maximum value ${g}`)]}return[]}function Zu(o){const r=o.valueSpec,a=jr(o.value.type);let u,d,g,_={};const w=a!=="categorical"&&o.value.property===void 0,T=!w,S=Cn(o.value.stops)==="array"&&Cn(o.value.stops[0])==="array"&&Cn(o.value.stops[0][0])==="object",R=zo({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(j){if(a==="identity")return[new Lt(j.key,j.value,'identity function may not have a "stops" property')];let q=[];const Q=j.value;return q=q.concat(E_({key:j.key,value:Q,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:L})),Cn(Q)==="array"&&Q.length===0&&q.push(new Lt(j.key,Q,"array must have at least one stop")),q},default:function(j){return Ai({key:j.key,value:j.value,valueSpec:r,style:j.style,styleSpec:j.styleSpec})}}});return a==="identity"&&w&&R.push(new Lt(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||R.push(new Lt(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Pd(o.valueSpec)&&R.push(new Lt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(T&&!gc(o.valueSpec)?R.push(new Lt(o.key,o.value,"property functions not supported")):w&&!Zs(o.valueSpec)&&R.push(new Lt(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!S||o.value.property!==void 0||R.push(new Lt(o.key,o.value,'"property" property is required')),R;function L(j){let q=[];const Q=j.value,ie=j.key;if(Cn(Q)!=="array")return[new Lt(ie,Q,`array expected, ${Cn(Q)} found`)];if(Q.length!==2)return[new Lt(ie,Q,`array length 2 expected, length ${Q.length} found`)];if(S){if(Cn(Q[0])!=="object")return[new Lt(ie,Q,`object expected, ${Cn(Q[0])} found`)];if(Q[0].zoom===void 0)return[new Lt(ie,Q,"object stop key must have zoom")];if(Q[0].value===void 0)return[new Lt(ie,Q,"object stop key must have value")];const pe=jr(Q[0].zoom);if(typeof pe!="number")return[new Lt(ie,Q[0].zoom,"stop zoom values must be numbers")];if(g&&g>pe)return[new Lt(ie,Q[0].zoom,"stop zoom values must appear in ascending order")];pe!==g&&(g=pe,d=void 0,_={}),q=q.concat(zo({key:`${ie}[0]`,value:Q[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:nm,value:B}}))}else q=q.concat(B({key:`${ie}[0]`,value:Q[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},Q));return yc(Ia(Q[1]))?q.concat([new Lt(`${ie}[1]`,Q[1],"expressions are not allowed in function stops.")]):q.concat(Ai({key:`${ie}[1]`,value:Q[1],valueSpec:r,style:j.style,styleSpec:j.styleSpec}))}function B(j,q){const Q=Cn(j.value),ie=jr(j.value),pe=j.value!==null?j.value:q;if(u){if(Q!==u)return[new Lt(j.key,pe,`${Q} stop domain type must match previous stop domain type ${u}`)]}else u=Q;if(Q!=="number"&&Q!=="string"&&Q!=="boolean"&&typeof ie!="number"&&typeof ie!="string"&&typeof ie!="boolean")return[new Lt(j.key,pe,"stop domain value must be a number, string, or boolean")];if(Q!=="number"&&a!=="categorical"){let xe=`number expected, ${Q} found`;return gc(r)&&a===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Lt(j.key,pe,xe)]}return a!=="categorical"||Q!=="number"||typeof ie=="number"&&isFinite(ie)&&Math.floor(ie)===ie?a!=="categorical"&&Q==="number"&&typeof ie=="number"&&typeof d=="number"&&d!==void 0&&ie<d?[new Lt(j.key,pe,"stop domain values must appear in ascending order")]:(d=ie,a==="categorical"&&ie in _?[new Lt(j.key,pe,"stop domain values must be unique")]:(_[ie]=!0,[])):[new Lt(j.key,pe,`integer expected, found ${String(ie)}`)]}}function vc(o){const r=(o.expressionContext==="property"?bl:_c)(Ia(o.value),o.valueSpec);if(r.result==="error")return r.value.map(u=>new Lt(`${o.key}${u.key}`,o.value,u.message));const a=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new Lt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Bu(a))return[new Lt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter")return T_(a,o);if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!wd(a,["zoom","feature-state"]))return[new Lt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Nu(a))return[new Lt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function T_(o,r){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const d of r.valueSpec.expression.parameters)a.delete(d);if(a.size===0)return[];const u=[];return o instanceof Ma&&a.has(o.name)?[new Lt(r.key,r.value,`["${o.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(o.eachChild(d=>{u.push(...T_(d,r))}),u)}function Ld(o){const r=o.key,a=o.value,u=o.valueSpec,d=[];return Array.isArray(u.values)?u.values.indexOf(jr(a))===-1&&d.push(new Lt(r,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(jr(a))===-1&&d.push(new Lt(r,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),d}function rm(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!rm(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function zd(o,r="fill"){if(o==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};rm(o)||(o=Bd(o));const a=o;let u=!0;try{u=function(S){if(!di(S))return S;let R=Ia(S);return Xu(R),R=Yu(R),R}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const d=nt[`filter_${r}`],g=_c(u,d);let _=null;if(g.result==="error")throw new Error(g.value.map(S=>`${S.key}: ${S.message}`).join(", "));_=(S,R,L)=>g.value.evaluate(S,R,{},L);let w=null,T=null;if(u!==a){const S=_c(a,d);if(S.result==="error")throw new Error(S.value.map(R=>`${R.key}: ${R.message}`).join(", "));w=(R,L,B,j,q)=>S.value.evaluate(R,L,{},B,void 0,void 0,j,q),T=!Nu(S.value.expression)}return{filter:_,dynamicFilter:w||void 0,needGeometry:S_(u),needFeature:!!T}}function Yu(o){if(!Array.isArray(o))return o;const r=function(a){if(Nd.has(a[0])){for(let u=1;u<a.length;u++)if(di(a[u]))return!0}return a}(o);return r===!0?r:r.map(a=>Yu(a))}function Xu(o){let r=!1;const a=[];if(o[0]==="case"){for(let u=1;u<o.length-1;u+=2)r=r||di(o[u]),a.push(o[u+1]);a.push(o[o.length-1])}else if(o[0]==="match"){r=r||di(o[1]);for(let u=2;u<o.length-1;u+=2)a.push(o[u+1]);a.push(o[o.length-1])}else if(o[0]==="step"){r=r||di(o[1]);for(let u=1;u<o.length-1;u+=2)a.push(o[u+1])}r&&(o.length=0,o.push("any",...a));for(let u=1;u<o.length;u++)Xu(o[u])}function di(o){if(!Array.isArray(o))return!1;if((r=o[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let a=1;a<o.length;a++)if(di(o[a]))return!0;return!1}const Nd=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Fw(o,r){return o<r?-1:o>r?1:0}function S_(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(S_(o[r]))return!0;return!1}function Bd(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?im(o[1],o[2],"=="):r==="!="?xc(im(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?im(o[1],o[2],r):r==="any"?(a=o.slice(1),["any"].concat(a.map(Bd))):r==="all"?["all"].concat(o.slice(1).map(Bd)):r==="none"?["all"].concat(o.slice(1).map(Bd).map(xc)):r==="in"?Fd(o[1],o.slice(2)):r==="!in"?xc(Fd(o[1],o.slice(2))):r==="has"?I_(o[1]):r==="!has"?xc(I_(o[1])):r!=="within"||o;var a}function im(o,r,a){switch(o){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,o,r]}}function Fd(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(a=>typeof a!=typeof r[0])?["filter-in-large",o,["literal",r.sort(Fw)]]:["filter-in-small",o,["literal",r]]}}function I_(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function xc(o){return["!",o]}function om(o){return rm(Ia(o.value))?vc(qs({},o,{expressionContext:"filter",valueSpec:o.styleSpec[`filter_${o.layerType||"fill"}`]})):M_(o)}function M_(o){const r=o.value,a=o.key;if(Cn(r)!=="array")return[new Lt(a,r,`array expected, ${Cn(r)} found`)];const u=o.styleSpec;let d,g=[];if(r.length<1)return[new Lt(a,r,"filter array must have at least 1 element")];switch(g=g.concat(Ld({key:`${a}[0]`,value:r[0],valueSpec:u.filter_operator,style:o.style,styleSpec:o.styleSpec})),jr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&jr(r[1])==="$type"&&g.push(new Lt(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&g.push(new Lt(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(d=Cn(r[1]),d!=="string"&&g.push(new Lt(`${a}[1]`,r[1],`string expected, ${d} found`)));for(let _=2;_<r.length;_++)d=Cn(r[_]),jr(r[1])==="$type"?g=g.concat(Ld({key:`${a}[${_}]`,value:r[_],valueSpec:u.geometry_type,style:o.style,styleSpec:o.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&g.push(new Lt(`${a}[${_}]`,r[_],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let _=1;_<r.length;_++)g=g.concat(M_({key:`${a}[${_}]`,value:r[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":d=Cn(r[1]),r.length!==2?g.push(new Lt(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):d!=="string"&&g.push(new Lt(`${a}[1]`,r[1],`string expected, ${d} found`));break;case"within":d=Cn(r[1]),r.length!==2?g.push(new Lt(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):d!=="object"&&g.push(new Lt(`${a}[1]`,r[1],`object expected, ${d} found`))}return g}function Ud(o,r){const a=o.key,u=o.style,d=o.styleSpec,g=o.value,_=o.objectKey,w=d[`${r}_${o.layerType}`];if(!w)return[];const T=_.match(/^(.*)-transition$/);if(r==="paint"&&T&&w[T[1]]&&w[T[1]].transition)return Ai({key:a,value:g,valueSpec:d.transition,style:u,styleSpec:d});const S=o.valueSpec||w[_];if(!S)return[new Lt(a,g,`unknown property "${_}"`)];let R;if(Cn(g)==="string"&&gc(S)&&!S.tokens&&(R=/^{([^}]+)}$/.exec(g))){const B=`\`{ "type": "identity", "property": ${R?JSON.stringify(R[1]):'"_"'} }\``;return[new Lt(a,g,`"${_}" does not support interpolation syntax
Use an identity property function instead: ${B}.`)]}const L=[];return o.layerType==="symbol"&&(_==="text-field"&&u&&!u.glyphs&&L.push(new Lt(a,g,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&Rd(Ia(g))&&jr(g.type)==="identity"&&L.push(new Lt(a,g,'"text-font" does not support identity functions'))),L.concat(Ai({key:o.key,value:g,valueSpec:S,style:u,styleSpec:d,expressionContext:"property",propertyType:r,propertyKey:_}))}function A_(o){return Ud(o,"paint")}function sm(o){return Ud(o,"layout")}function am(o){let r=[];const a=o.value,u=o.key,d=o.style,g=o.styleSpec;a.type||a.ref||r.push(new Lt(u,a,'either "type" or "ref" is required'));let _=jr(a.type);const w=jr(a.ref);if(a.id){const T=jr(a.id);for(let S=0;S<o.arrayIndex;S++){const R=d.layers[S];jr(R.id)===T&&r.push(new Lt(u,a.id,`duplicate layer id "${a.id}", previously used at line ${R.id.__line__}`))}}if("ref"in a){let T;["type","source","source-layer","filter","layout"].forEach(S=>{S in a&&r.push(new Lt(u,a[S],`"${S}" is prohibited for ref layers`))}),d.layers.forEach(S=>{jr(S.id)===w&&(T=S)}),T?T.ref?r.push(new Lt(u,a.ref,"ref cannot reference another ref layer")):_=jr(T.type):typeof w=="string"&&r.push(new Lt(u,a.ref,`ref layer "${w}" not found`))}else if(_!=="background"&&_!=="sky")if(a.source){const T=d.sources&&d.sources[a.source],S=T&&jr(T.type);T?S==="vector"&&_==="raster"?r.push(new Lt(u,a.source,`layer "${a.id}" requires a raster source`)):S==="raster"&&_!=="raster"?r.push(new Lt(u,a.source,`layer "${a.id}" requires a vector source`)):S!=="vector"||a["source-layer"]?S==="raster-dem"&&_!=="hillshade"?r.push(new Lt(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||S==="geojson"&&T.lineMetrics||r.push(new Lt(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new Lt(u,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new Lt(u,a.source,`source "${a.source}" not found`))}else r.push(new Lt(u,a,'missing required property "source"'));return r=r.concat(zo({key:u,value:a,valueSpec:g.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ai({key:`${u}.type`,value:a.type,valueSpec:g.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:T=>om(qs({layerType:_},T)),layout:T=>zo({layer:a,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":S=>sm(qs({layerType:_},S))}}),paint:T=>zo({layer:a,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":S=>A_(qs({layerType:_},S))}})}})),r}function wc(o){const r=o.value,a=o.key,u=Cn(r);return u!=="string"?[new Lt(a,r,`string expected, ${u} found`)]:[]}const Vd={promoteId:function({key:o,value:r}){if(Cn(r)==="string")return wc({key:o,value:r});{const a=[];for(const u in r)a.push(...wc({key:`${o}.${u}`,value:r[u]}));return a}}};function Qu(o){const r=o.value,a=o.key,u=o.styleSpec,d=o.style;if(!r.type)return[new Lt(a,r,'"type" is required')];const g=jr(r.type);let _;switch(g){case"vector":case"raster":case"raster-dem":return _=zo({key:a,value:r,valueSpec:u[`source_${g.replace("-","_")}`],style:o.style,styleSpec:u,objectElementValidators:Vd}),_;case"geojson":if(_=zo({key:a,value:r,valueSpec:u.source_geojson,style:d,styleSpec:u,objectElementValidators:Vd}),r.cluster)for(const w in r.clusterProperties){const[T,S]=r.clusterProperties[w],R=typeof T=="string"?[T,["accumulated"],["get",w]]:T;_.push(...vc({key:`${a}.${w}.map`,value:S,expressionContext:"cluster-map"})),_.push(...vc({key:`${a}.${w}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return _;case"video":return zo({key:a,value:r,valueSpec:u.source_video,style:d,styleSpec:u});case"image":return zo({key:a,value:r,valueSpec:u.source_image,style:d,styleSpec:u});case"canvas":return[new Lt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ld({key:`${a}.type`,value:r.type,valueSpec:{values:C_(u)},style:d,styleSpec:u})}}function C_(o){return o.source.reduce((r,a)=>{const u=o[a];return u.type.type==="enum"&&(r=r.concat(Object.keys(u.type.values))),r},[])}function P_(o){const r=o.value,a=o.styleSpec,u=a.light,d=o.style;let g=[];const _=Cn(r);if(r===void 0)return g;if(_!=="object")return g=g.concat([new Lt("light",r,`object expected, ${_} found`)]),g;for(const w in r){const T=w.match(/^(.*)-transition$/);g=g.concat(T&&u[T[1]]&&u[T[1]].transition?Ai({key:w,value:r[w],valueSpec:a.transition,style:d,styleSpec:a}):u[w]?Ai({key:w,value:r[w],valueSpec:u[w],style:d,styleSpec:a}):[new Lt(w,r[w],`unknown property "${w}"`)])}return g}function lm(o){const r=o.value,a=o.key,u=o.style,d=o.styleSpec,g=d.terrain;let _=[];const w=Cn(r);if(r===void 0)return _;if(w!=="object")return _=_.concat([new Lt("terrain",r,`object expected, ${w} found`)]),_;for(const T in r){const S=T.match(/^(.*)-transition$/);_=_.concat(S&&g[S[1]]&&g[S[1]].transition?Ai({key:T,value:r[T],valueSpec:d.transition,style:u,styleSpec:d}):g[T]?Ai({key:T,value:r[T],valueSpec:g[T],style:u,styleSpec:d}):[new Lt(T,r[T],`unknown property "${T}"`)])}if(r.source){const T=u.sources&&u.sources[r.source],S=T&&jr(T.type);T?S!=="raster-dem"&&_.push(new Lt(a,r.source,`terrain cannot be used with a source of type ${String(S)}, it only be used with a "raster-dem" source type`)):_.push(new Lt(a,r.source,`source "${r.source}" not found`))}else _.push(new Lt(a,r,'terrain is missing required property "source"'));return _}function R_(o){const r=o.value,a=o.style,u=o.styleSpec,d=u.fog;let g=[];const _=Cn(r);if(r===void 0)return g;if(_!=="object")return g=g.concat([new Lt("fog",r,`object expected, ${_} found`)]),g;for(const w in r){const T=w.match(/^(.*)-transition$/);g=g.concat(T&&d[T[1]]&&d[T[1]].transition?Ai({key:w,value:r[w],valueSpec:u.transition,style:a,styleSpec:u}):d[w]?Ai({key:w,value:r[w],valueSpec:d[w],style:a,styleSpec:u}):[new Lt(w,r[w],`unknown property "${w}"`)])}return g}const jd={"*":()=>[],array:E_,boolean:function(o){const r=o.value,a=o.key,u=Cn(r);return u!=="boolean"?[new Lt(a,r,`boolean expected, ${u} found`)]:[]},number:nm,color:function(o){const r=o.key,a=o.value,u=Cn(a);return u!=="string"?[new Lt(r,a,`color expected, ${u} found`)]:Ap(a)===null?[new Lt(r,a,`color expected, "${a}" found`)]:[]},enum:Ld,filter:om,function:Zu,layer:am,object:zo,source:Qu,light:P_,terrain:lm,fog:R_,string:wc,formatted:function(o){return wc(o).length===0?[]:vc(o)},resolvedImage:function(o){return wc(o).length===0?[]:vc(o)},projection:function(o){const r=o.value,a=o.styleSpec,u=a.projection,d=o.style;let g=[];const _=Cn(r);if(_==="object")for(const w in r)g=g.concat(Ai({key:w,value:r[w],valueSpec:u[w],style:d,styleSpec:a}));else _!=="string"&&(g=g.concat([new Lt("projection",r,`object or string expected, ${_} found`)]));return g}};function Ai(o){const r=o.value,a=o.valueSpec,u=o.styleSpec;return a.expression&&Rd(jr(r))?Zu(o):a.expression&&yc(Ia(r))?vc(o):a.type&&jd[a.type]?jd[a.type](o):zo(qs({},o,{valueSpec:a.type?u[a.type]:a}))}function Uw(o){const r=o.value,a=o.key,u=wc(o);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new Lt(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new Lt(a,r,'"glyphs" url must include a "{range}" token'))),u}function D_(o,r=nt){return Ys(Ai({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,objectElementValidators:{glyphs:Uw,"*":()=>[]}}))}const Vw=o=>Ys(A_(o)),O_=o=>Ys(sm(o));function Ys(o){return o.slice().sort((r,a)=>r.line&&a.line?r.line-a.line:0)}function k_(o,r){let a=!1;if(r&&r.length)for(const u of r)o.fire(new Sa(new Error(u.message))),a=!0;return a}var bc=ws;function ws(o,r,a){var u=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var d=new Int32Array(this.arrayBuffer);o=d[0],this.d=(r=d[1])+2*(a=d[2]);for(var g=0;g<this.d*this.d;g++){var _=d[3+g],w=d[3+g+1];u.push(_===w?null:d.subarray(_,w))}var T=d[3+u.length+1];this.keys=d.subarray(d[3+u.length],T),this.bboxes=d.subarray(T),this.insert=this._insertReadonly}else{this.d=r+2*a;for(var S=0;S<this.d*this.d;S++)u.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=o,this.padding=a,this.scale=r/o,this.uid=0;var R=a/r*o;this.min=-R,this.max=o+R}ws.prototype.insert=function(o,r,a,u,d){this._forEachCell(r,a,u,d,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(d)},ws.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ws.prototype._insertCell=function(o,r,a,u,d,g){this.cells[d].push(g)},ws.prototype.query=function(o,r,a,u,d){var g=this.min,_=this.max;if(o<=g&&r<=g&&_<=a&&_<=u&&!d)return Array.prototype.slice.call(this.keys);var w=[];return this._forEachCell(o,r,a,u,this._queryCell,w,{},d),w},ws.prototype._queryCell=function(o,r,a,u,d,g,_,w){var T=this.cells[d];if(T!==null)for(var S=this.keys,R=this.bboxes,L=0;L<T.length;L++){var B=T[L];if(_[B]===void 0){var j=4*B;(w?w(R[j+0],R[j+1],R[j+2],R[j+3]):o<=R[j+2]&&r<=R[j+3]&&a>=R[j+0]&&u>=R[j+1])?(_[B]=!0,g.push(S[B])):_[B]=!1}}},ws.prototype._forEachCell=function(o,r,a,u,d,g,_,w){for(var T=this._convertToCellCoord(o),S=this._convertToCellCoord(r),R=this._convertToCellCoord(a),L=this._convertToCellCoord(u),B=T;B<=R;B++)for(var j=S;j<=L;j++){var q=this.d*j+B;if((!w||w(this._convertFromCellCoord(B),this._convertFromCellCoord(j),this._convertFromCellCoord(B+1),this._convertFromCellCoord(j+1)))&&d.call(this,o,r,a,u,q,g,_,w))return}},ws.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},ws.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},ws.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,r=3+this.cells.length+1+1,a=0,u=0;u<this.cells.length;u++)a+=this.cells[u].length;var d=new Int32Array(r+a+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;for(var g=r,_=0;_<o.length;_++){var w=o[_];d[3+_]=g,d.set(w,g),g+=w.length}return d[3+o.length]=g,d.set(this.keys,g),d[3+o.length+1]=g+=this.keys.length,d.set(this.bboxes,g),g+=this.bboxes.length,d.buffer};const Gd={};function Bt(o,r,a={}){Object.defineProperty(o,"_classRegistryKey",{value:r,writeable:!1}),Gd[r]={klass:o,omit:a.omit||[]}}Bt(Object,"Object"),bc.serialize=function(o,r){const a=o.toArrayBuffer();return r&&r.push(a),{buffer:a}},bc.deserialize=function(o){return new bc(o.buffer)},Object.defineProperty(bc,"name",{value:"Grid"}),Bt(bc,"Grid"),Bt(zr,"Color"),Bt(Error,"Error"),Bt(wt,"AJAXError"),Bt($i,"ResolvedImage"),Bt(qu,"StylePropertyFunction"),Bt(Od,"StyleExpression",{omit:["_evaluator"]}),Bt(wl,"ZoomDependentExpression"),Bt(kd,"ZoomConstantExpression"),Bt(Ma,"CompoundExpression",{omit:["_evaluate"]});for(const o in pc)Gd[pc[o]._classRegistryKey]||Bt(pc[o],`Expression${o}`);function L_(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Ku(o){return v.ImageBitmap&&o instanceof v.ImageBitmap}function Ju(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(L_(o)||Ku(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return r&&r.push(a.buffer),a}if(o instanceof v.ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const u of o)a.push(Ju(u,r));return a}if(typeof o=="object"){const a=o.constructor,u=a._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const d=a.serialize?a.serialize(o,r):{};if(!a.serialize){for(const g in o)o.hasOwnProperty(g)&&(Gd[u].omit.indexOf(g)>=0||(d[g]=Ju(o[g],r)));o instanceof Error&&(d.message=o.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(d.$name=u),d}throw new Error("can't serialize object of type "+typeof o)}function eh(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||L_(o)||Ku(o)||ArrayBuffer.isView(o)||o instanceof v.ImageData)return o;if(Array.isArray(o))return o.map(eh);if(typeof o=="object"){const r=o.$name||"Object",{klass:a}=Gd[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(o);const u=Object.create(a.prototype);for(const d of Object.keys(o))d!=="$name"&&(u[d]=eh(o[d]));return u}throw new Error("can't deserialize object of type "+typeof o)}const th=o=>o>=1536&&o<=1791,z_=o=>o>=1872&&o<=1919,cm=o=>o>=2208&&o<=2303,N_=o=>o>=11904&&o<=12031,um=o=>o>=12032&&o<=12255,hm=o=>o>=12272&&o<=12287,nh=o=>o>=12288&&o<=12351,$d=o=>o>=12352&&o<=12447,Ec=o=>o>=12448&&o<=12543,Wd=o=>o>=12544&&o<=12591,B_=o=>o>=12704&&o<=12735,F_=o=>o>=12736&&o<=12783,dm=o=>o>=12784&&o<=12799,U_=o=>o>=12800&&o<=13055,V_=o=>o>=13056&&o<=13311,j_=o=>o>=13312&&o<=19903,fm=o=>o>=19968&&o<=40959,G_=o=>o>=40960&&o<=42127,$_=o=>o>=42128&&o<=42191,W_=o=>o>=44032&&o<=55215,q_=o=>o>=63744&&o<=64255,qd=o=>o>=64336&&o<=65023,rh=o=>o>=65040&&o<=65055,p=o=>o>=65072&&o<=65103,l=o=>o>=65104&&o<=65135,h=o=>o>=65136&&o<=65279,y=o=>o>=65280&&o<=65519;function x(o){for(const r of o)if(C(r.charCodeAt(0)))return!0;return!1}function b(o){for(const r of o)if(!A(r.charCodeAt(0)))return!1;return!0}function A(o){return!(th(o)||z_(o)||cm(o)||qd(o)||h(o))}function C(o){return!(o!==746&&o!==747&&(o<4352||!(B_(o)||Wd(o)||p(o)&&!(o>=65097&&o<=65103)||q_(o)||V_(o)||N_(o)||F_(o)||!(!nh(o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||j_(o)||fm(o)||U_(o)||(r=>r>=12592&&r<=12687)(o)||(r=>r>=43360&&r<=43391)(o)||(r=>r>=55216&&r<=55295)(o)||(r=>r>=4352&&r<=4607)(o)||W_(o)||$d(o)||hm(o)||(r=>r>=12688&&r<=12703)(o)||um(o)||dm(o)||Ec(o)&&o!==12540||!(!y(o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!l(o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||(r=>r>=5120&&r<=5759)(o)||(r=>r>=6320&&r<=6399)(o)||rh(o)||(r=>r>=19904&&r<=19967)(o)||G_(o)||$_(o))))}function O(o){return!(C(o)||function(r){return!!((a=>a>=128&&a<=255)(r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||(a=>a>=8192&&a<=8303)(r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||(a=>a>=8448&&a<=8527)(r)||(a=>a>=8528&&a<=8591)(r)||(a=>a>=8960&&a<=9215)(r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||(a=>a>=9216&&a<=9279)(r)&&r!==9251||(a=>a>=9280&&a<=9311)(r)||(a=>a>=9312&&a<=9471)(r)||(a=>a>=9632&&a<=9727)(r)||(a=>a>=9728&&a<=9983)(r)&&!(r>=9754&&r<=9759)||(a=>a>=11008&&a<=11263)(r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||nh(r)||Ec(r)||(a=>a>=57344&&a<=63743)(r)||p(r)||l(r)||y(r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function U(o){return o>=1424&&o<=2303||qd(o)||h(o)}function F(o,r){return!(!r&&U(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||(a=>a>=6016&&a<=6143)(o))}function Z(o){for(const r of o)if(U(r.charCodeAt(0)))return!0;return!1}const ne="deferred",oe="loading",se="loaded";let ae=null,le="unavailable",ee=null;const ge=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(le="error"),ae&&ae(o)};function me(){ye.fire(new Hn("pluginStateChange",{pluginStatus:le,pluginURL:ee}))}const ye=new Ws,Se=function(){return le},be=function(){if(le!==ne||!ee)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");le=oe,me(),ee&&hi({url:ee},o=>{o?ge(o):(le=se,me())})},Ce={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>le===se||Ce.applyArabicShaping!=null,isLoading:()=>le===oe,setState(o){le=o.pluginStatus,ee=o.pluginURL},isParsed:()=>Ce.applyArabicShaping!=null&&Ce.processBidirectionalText!=null&&Ce.processStyledBidirectionalText!=null,getPluginURL:()=>ee};class Ne{constructor(r,a){this.zoom=r,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(r){return function(a,u){for(const d of a)if(!F(d.charCodeAt(0),u))return!1;return!0}(r,Ce.isLoaded())}}class We{constructor(r,a){this.property=r,this.value=a,this.expression=function(u,d){if(Rd(u))return new qu(u,d);if(yc(u)){const g=bl(u,d);if(g.result==="error")throw new Error(g.value.map(_=>`${_.key}: ${_.message}`).join(", "));return g.value}{let g=u;return typeof u=="string"&&d.type==="color"&&(g=zr.parse(u)),{kind:"constant",evaluate:()=>g}}}(a===void 0?r.specification.default:a,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,a,u){return this.property.possiblyEvaluate(this,r,a,u)}}class Xe{constructor(r){this.property=r,this.value=new We(r,void 0)}transitioned(r,a){return new Ve(this.property,this.value,a,He({},r.transition,this.transition),r.now)}untransitioned(){return new Ve(this.property,this.value,null,{},0)}}class vt{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Vt(this._values[r].value.value)}setValue(r,a){this._values.hasOwnProperty(r)||(this._values[r]=new Xe(this._values[r].property)),this._values[r].value=new We(this._values[r].property,a===null?void 0:Vt(a))}getTransition(r){return Vt(this._values[r].transition)}setTransition(r,a){this._values.hasOwnProperty(r)||(this._values[r]=new Xe(this._values[r].property)),this._values[r].transition=Vt(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(r[a]=u);const d=this.getTransition(a);d!==void 0&&(r[`${a}-transition`]=d)}return r}transitioned(r,a){const u=new ot(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].transitioned(r,a._values[d]);return u}untransitioned(){const r=new ot(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class Ve{constructor(r,a,u,d,g){const _=d.delay||0,w=d.duration||0;g=g||0,this.property=r,this.value=a,this.begin=g+_,this.end=this.begin+w,r.specification.transition&&(d.delay||d.duration)&&(this.prior=u)}possiblyEvaluate(r,a,u){const d=r.now||0,g=this.value.possiblyEvaluate(r,a,u),_=this.prior;if(_){if(d>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(d<this.begin)return _.possiblyEvaluate(r,a,u);{const w=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(r,a,u),g,Me(w))}}return g}}class ot{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,u){const d=new qe(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(r,a,u);return d}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class et{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return Vt(this._values[r].value)}setValue(r,a){this._values[r]=new We(this._values[r].property,a===null?void 0:Vt(a))}serialize(){const r={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(r[a]=u)}return r}possiblyEvaluate(r,a,u){const d=new qe(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(r,a,u);return d}}class ct{constructor(r,a,u){this.property=r,this.value=a,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,u,d){return this.property.evaluate(this.value,this.parameters,r,a,u,d)}}class qe{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class ze{constructor(r){this.specification=r}possiblyEvaluate(r,a){return r.expression.evaluate(a)}interpolate(r,a,u){const d=Fu[this.specification.type];return d?d(r,a,u):r}}class Qe{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,u,d){return new ct(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},u,d)}:r.expression,a)}interpolate(r,a,u){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new ct(this,{kind:"constant",value:void 0},r.parameters);const d=Fu[this.specification.type];return d?new ct(this,{kind:"constant",value:d(r.value.value,a.value.value,u)},r.parameters):r}evaluate(r,a,u,d,g,_){return r.kind==="constant"?r.value:r.evaluate(a,u,d,g,_)}}class at{constructor(r){this.specification=r}possiblyEvaluate(r,a,u,d){return!!r.expression.evaluate(a,null,{},u,d)}interpolate(){return!1}}class dt{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new Ne(0,{});for(const u in r){const d=r[u];d.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new We(d,void 0),_=this.defaultTransitionablePropertyValues[u]=new Xe(d);this.defaultTransitioningPropertyValues[u]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate(a)}}}function jt(o,r){return 256*(o=Oe(Math.floor(o),0,255))+Oe(Math.floor(r),0,255)}Bt(Qe,"DataDrivenProperty"),Bt(ze,"DataConstantProperty"),Bt(at,"ColorRampProperty");const hn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ft{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class zt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function $t(o,r=1){let a=0,u=0;return{members:o.map(d=>{const g=hn[d.type].BYTES_PER_ELEMENT,_=a=wn(a,Math.max(r,g)),w=d.components||1;return u=Math.max(u,g),a+=g*w,{name:d.name,type:d.type,components:w,offset:_}}),size:wn(a,Math.max(u,r)),alignment:r}}function wn(o,r){return Math.ceil(o/r)*r}class Zt extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const u=this.length;return this.resize(u+1),this.emplace(u,r,a)}emplace(r,a,u){const d=2*r;return this.int16[d+0]=a,this.int16[d+1]=u,r}}Zt.prototype.bytesPerElement=4,Bt(Zt,"StructArrayLayout2i4");class Bn extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,r,a,u)}emplace(r,a,u,d){const g=3*r;return this.int16[g+0]=a,this.int16[g+1]=u,this.int16[g+2]=d,r}}Bn.prototype.bytesPerElement=6,Bt(Bn,"StructArrayLayout3i6");class Un extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,d)}emplace(r,a,u,d,g){const _=4*r;return this.int16[_+0]=a,this.int16[_+1]=u,this.int16[_+2]=d,this.int16[_+3]=g,r}}Un.prototype.bytesPerElement=8,Bt(Un,"StructArrayLayout4i8");class ir extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_,w){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,u,d,g,_,w)}emplace(r,a,u,d,g,_,w,T){const S=6*r,R=12*r,L=3*r;return this.int16[S+0]=a,this.int16[S+1]=u,this.uint8[R+4]=d,this.uint8[R+5]=g,this.uint8[R+6]=_,this.uint8[R+7]=w,this.float32[L+2]=T,r}}ir.prototype.bytesPerElement=12,Bt(ir,"StructArrayLayout2i4ub1f12");class Jn extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,d)}emplace(r,a,u,d,g){const _=4*r;return this.float32[_+0]=a,this.float32[_+1]=u,this.float32[_+2]=d,this.float32[_+3]=g,r}}Jn.prototype.bytesPerElement=16,Bt(Jn,"StructArrayLayout4f16");class Gr extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,a,u,d,g)}emplace(r,a,u,d,g,_){const w=6*r,T=3*r;return this.uint16[w+0]=a,this.uint16[w+1]=u,this.uint16[w+2]=d,this.uint16[w+3]=g,this.float32[T+2]=_,r}}Gr.prototype.bytesPerElement=12,Bt(Gr,"StructArrayLayout4ui1f12");class eo extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,d)}emplace(r,a,u,d,g){const _=4*r;return this.uint16[_+0]=a,this.uint16[_+1]=u,this.uint16[_+2]=d,this.uint16[_+3]=g,r}}eo.prototype.bytesPerElement=8,Bt(eo,"StructArrayLayout4ui8");class Qo extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,r,a,u,d,g,_)}emplace(r,a,u,d,g,_,w){const T=6*r;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=d,this.int16[T+3]=g,this.int16[T+4]=_,this.int16[T+5]=w,r}}Qo.prototype.bytesPerElement=12,Bt(Qo,"StructArrayLayout6i12");class Xs extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_,w,T,S,R,L,B){const j=this.length;return this.resize(j+1),this.emplace(j,r,a,u,d,g,_,w,T,S,R,L,B)}emplace(r,a,u,d,g,_,w,T,S,R,L,B,j){const q=12*r;return this.int16[q+0]=a,this.int16[q+1]=u,this.int16[q+2]=d,this.int16[q+3]=g,this.uint16[q+4]=_,this.uint16[q+5]=w,this.uint16[q+6]=T,this.uint16[q+7]=S,this.int16[q+8]=R,this.int16[q+9]=L,this.int16[q+10]=B,this.int16[q+11]=j,r}}Xs.prototype.bytesPerElement=24,Bt(Xs,"StructArrayLayout4i4ui4i24");class fr extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_){const w=this.length;return this.resize(w+1),this.emplace(w,r,a,u,d,g,_)}emplace(r,a,u,d,g,_,w){const T=10*r,S=5*r;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=d,this.float32[S+2]=g,this.float32[S+3]=_,this.float32[S+4]=w,r}}fr.prototype.bytesPerElement=20,Bt(fr,"StructArrayLayout3i3f20");class er extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}er.prototype.bytesPerElement=4,Bt(er,"StructArrayLayout1ul4");class On extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_,w,T,S,R,L,B,j){const q=this.length;return this.resize(q+1),this.emplace(q,r,a,u,d,g,_,w,T,S,R,L,B,j)}emplace(r,a,u,d,g,_,w,T,S,R,L,B,j,q){const Q=20*r,ie=10*r;return this.int16[Q+0]=a,this.int16[Q+1]=u,this.int16[Q+2]=d,this.int16[Q+3]=g,this.int16[Q+4]=_,this.float32[ie+3]=w,this.float32[ie+4]=T,this.float32[ie+5]=S,this.float32[ie+6]=R,this.int16[Q+14]=L,this.uint32[ie+8]=B,this.uint16[Q+18]=j,this.uint16[Q+19]=q,r}}On.prototype.bytesPerElement=40,Bt(On,"StructArrayLayout5i4f1i1ul2ui40");class Ir extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_,w){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,u,d,g,_,w)}emplace(r,a,u,d,g,_,w,T){const S=8*r;return this.int16[S+0]=a,this.int16[S+1]=u,this.int16[S+2]=d,this.int16[S+4]=g,this.int16[S+5]=_,this.int16[S+6]=w,this.int16[S+7]=T,r}}Ir.prototype.bytesPerElement=16,Bt(Ir,"StructArrayLayout3i2i2i16");class Ci extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,a,u,d,g)}emplace(r,a,u,d,g,_){const w=4*r,T=8*r;return this.float32[w+0]=a,this.float32[w+1]=u,this.float32[w+2]=d,this.int16[T+6]=g,this.int16[T+7]=_,r}}Ci.prototype.bytesPerElement=16,Bt(Ci,"StructArrayLayout2f1f2i16");class cr extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,d)}emplace(r,a,u,d,g){const _=12*r,w=3*r;return this.uint8[_+0]=a,this.uint8[_+1]=u,this.float32[w+1]=d,this.float32[w+2]=g,r}}cr.prototype.bytesPerElement=12,Bt(cr,"StructArrayLayout2ub2f12");class Pi extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,r,a,u)}emplace(r,a,u,d){const g=3*r;return this.float32[g+0]=a,this.float32[g+1]=u,this.float32[g+2]=d,r}}Pi.prototype.bytesPerElement=12,Bt(Pi,"StructArrayLayout3f12");class Ri extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u){const d=this.length;return this.resize(d+1),this.emplace(d,r,a,u)}emplace(r,a,u,d){const g=3*r;return this.uint16[g+0]=a,this.uint16[g+1]=u,this.uint16[g+2]=d,r}}Ri.prototype.bytesPerElement=6,Bt(Ri,"StructArrayLayout3ui6");class Ra extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_,w,T,S,R,L,B,j,q,Q,ie,pe,xe,he,ve,Te){const we=this.length;return this.resize(we+1),this.emplace(we,r,a,u,d,g,_,w,T,S,R,L,B,j,q,Q,ie,pe,xe,he,ve,Te)}emplace(r,a,u,d,g,_,w,T,S,R,L,B,j,q,Q,ie,pe,xe,he,ve,Te,we){const Ze=30*r,$e=15*r,rt=60*r;return this.int16[Ze+0]=a,this.int16[Ze+1]=u,this.int16[Ze+2]=d,this.float32[$e+2]=g,this.float32[$e+3]=_,this.uint16[Ze+8]=w,this.uint16[Ze+9]=T,this.uint32[$e+5]=S,this.uint32[$e+6]=R,this.uint32[$e+7]=L,this.uint16[Ze+16]=B,this.uint16[Ze+17]=j,this.uint16[Ze+18]=q,this.float32[$e+10]=Q,this.float32[$e+11]=ie,this.uint8[rt+48]=pe,this.uint8[rt+49]=xe,this.uint8[rt+50]=he,this.uint32[$e+13]=ve,this.int16[Ze+28]=Te,this.uint8[rt+58]=we,r}}Ra.prototype.bytesPerElement=60,Bt(Ra,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Tc extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g,_,w,T,S,R,L,B,j,q,Q,ie,pe,xe,he,ve,Te,we,Ze,$e,rt,mt,Ke,it,st,ht){const gt=this.length;return this.resize(gt+1),this.emplace(gt,r,a,u,d,g,_,w,T,S,R,L,B,j,q,Q,ie,pe,xe,he,ve,Te,we,Ze,$e,rt,mt,Ke,it,st,ht)}emplace(r,a,u,d,g,_,w,T,S,R,L,B,j,q,Q,ie,pe,xe,he,ve,Te,we,Ze,$e,rt,mt,Ke,it,st,ht,gt){const Je=38*r,Tt=19*r;return this.int16[Je+0]=a,this.int16[Je+1]=u,this.int16[Je+2]=d,this.float32[Tt+2]=g,this.float32[Tt+3]=_,this.int16[Je+8]=w,this.int16[Je+9]=T,this.int16[Je+10]=S,this.int16[Je+11]=R,this.int16[Je+12]=L,this.int16[Je+13]=B,this.uint16[Je+14]=j,this.uint16[Je+15]=q,this.uint16[Je+16]=Q,this.uint16[Je+17]=ie,this.uint16[Je+18]=pe,this.uint16[Je+19]=xe,this.uint16[Je+20]=he,this.uint16[Je+21]=ve,this.uint16[Je+22]=Te,this.uint16[Je+23]=we,this.uint16[Je+24]=Ze,this.uint16[Je+25]=$e,this.uint16[Je+26]=rt,this.uint16[Je+27]=mt,this.uint16[Je+28]=Ke,this.uint32[Tt+15]=it,this.float32[Tt+16]=st,this.float32[Tt+17]=ht,this.float32[Tt+18]=gt,r}}Tc.prototype.bytesPerElement=76,Bt(Tc,"StructArrayLayout3i2f6i15ui1ul3f76");class xo extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}xo.prototype.bytesPerElement=4,Bt(xo,"StructArrayLayout1f4");class No extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,r,a,u,d,g)}emplace(r,a,u,d,g,_){const w=5*r;return this.float32[w+0]=a,this.float32[w+1]=u,this.float32[w+2]=d,this.float32[w+3]=g,this.float32[w+4]=_,r}}No.prototype.bytesPerElement=20,Bt(No,"StructArrayLayout5f20");class Qs extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,d){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,d)}emplace(r,a,u,d,g){const _=6*r;return this.uint32[3*r+0]=a,this.uint16[_+2]=u,this.uint16[_+3]=d,this.uint16[_+4]=g,r}}Qs.prototype.bytesPerElement=12,Bt(Qs,"StructArrayLayout1ul3ui12");class Da extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const u=this.length;return this.resize(u+1),this.emplace(u,r,a)}emplace(r,a,u){const d=2*r;return this.uint16[d+0]=a,this.uint16[d+1]=u,r}}Da.prototype.bytesPerElement=4,Bt(Da,"StructArrayLayout2ui4");class Oa extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}Oa.prototype.bytesPerElement=2,Bt(Oa,"StructArrayLayout1ui2");class Sc extends zt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const u=this.length;return this.resize(u+1),this.emplace(u,r,a)}emplace(r,a,u){const d=2*r;return this.float32[d+0]=a,this.float32[d+1]=u,r}}Sc.prototype.bytesPerElement=8,Bt(Sc,"StructArrayLayout2f8");class PM extends Ft{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}PM.prototype.size=40;class jw extends On{get(r){return new PM(this,r)}}Bt(jw,"CollisionBoxArray");class RM extends Ft{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}RM.prototype.size=60;class DM extends Ra{get(r){return new RM(this,r)}}Bt(DM,"PlacedSymbolArray");class OM extends Ft{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(r){this._structArray.uint32[this._pos4+15]=r}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}OM.prototype.size=76;class kM extends Tc{get(r){return new OM(this,r)}}Bt(kM,"SymbolInstanceArray");class LM extends xo{getoffsetX(r){return this.float32[1*r+0]}}Bt(LM,"GlyphOffsetArray");class zM extends Zt{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}Bt(zM,"SymbolLineVertexArray");class NM extends Ft{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}NM.prototype.size=12;class BM extends Qs{get(r){return new NM(this,r)}}Bt(BM,"FeatureIndexArray");class FM extends Da{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}Bt(FM,"FillExtrusionCentroidArray");const tB=$t([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),nB=$t([{name:"a_dash",components:4,type:"Uint16"}]);var ih={},rB={get exports(){return ih},set exports(o){ih=o}},Gw={};({get exports(){return Gw},set exports(o){Gw=o}}).exports=function(o,r){var a,u,d,g,_,w,T,S;for(u=o.length-(a=3&o.length),d=r,_=3432918353,w=461845907,S=0;S<u;)T=255&o.charCodeAt(S)|(255&o.charCodeAt(++S))<<8|(255&o.charCodeAt(++S))<<16|(255&o.charCodeAt(++S))<<24,++S,d=27492+(65535&(g=5*(65535&(d=(d^=T=(65535&(T=(T=(65535&T)*_+(((T>>>16)*_&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(T=0,a){case 3:T^=(255&o.charCodeAt(S+2))<<16;case 2:T^=(255&o.charCodeAt(S+1))<<8;case 1:d^=T=(65535&(T=(T=(65535&(T^=255&o.charCodeAt(S)))*_+(((T>>>16)*_&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295}return d^=o.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var $w={};({get exports(){return $w},set exports(o){$w=o}}).exports=function(o,r){for(var a,u=o.length,d=r^u,g=0;u>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(g)|(255&o.charCodeAt(++g))<<8|(255&o.charCodeAt(++g))<<16|(255&o.charCodeAt(++g))<<24))+((1540483477*(a>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++g;switch(u){case 3:d^=(255&o.charCodeAt(g+2))<<16;case 2:d^=(255&o.charCodeAt(g+1))<<8;case 1:d=1540483477*(65535&(d^=255&o.charCodeAt(g)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var UM=Gw,iB=$w;rB.exports=UM,ih.murmur3=UM,ih.murmur2=iB;class H_{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,u,d){this.ids.push(VM(r)),this.positions.push(a,u,d)}getPositions(r){const a=VM(r);let u=0,d=this.ids.length-1;for(;u<d;){const _=u+d>>1;this.ids[_]>=a?d=_:u=_+1}const g=[];for(;this.ids[u]===a;)g.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return g}static serialize(r,a){const u=new Float64Array(r.ids),d=new Uint32Array(r.positions);return Ww(u,d,0,u.length-1),a&&a.push(u.buffer,d.buffer),{ids:u,positions:d}}static deserialize(r){const a=new H_;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function VM(o){const r=+o;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:ih(String(o))}function Ww(o,r,a,u){for(;a<u;){const d=o[a+u>>1];let g=a-1,_=u+1;for(;;){do g++;while(o[g]<d);do _--;while(o[_]>d);if(g>=_)break;Z_(o,g,_),Z_(r,3*g,3*_),Z_(r,3*g+1,3*_+1),Z_(r,3*g+2,3*_+2)}_-a<u-_?(Ww(o,r,a,_),a=_+1):(Ww(o,r,_+1,u),u=_)}}function Z_(o,r,a){const u=o[r];o[r]=o[a],o[a]=u}Bt(H_,"FeaturePositionMap");class El{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,a),this.initialized=!0),!!this.location}}class Y_ extends El{constructor(r){super(r),this.current=0}set(r,a,u){this.fetchUniformLocation(r,a)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class jM extends El{constructor(r){super(r),this.current=[0,0,0,0]}set(r,a,u){this.fetchUniformLocation(r,a)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class GM extends El{constructor(r){super(r),this.current=zr.transparent}set(r,a,u){this.fetchUniformLocation(r,a)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const oB=new Float32Array(16),sB=new Float32Array(9),aB=new Float32Array(4);function qw(o){return[jt(255*o.r,255*o.g),jt(255*o.b,255*o.a)]}class pm{constructor(r,a,u){this.value=r,this.uniformNames=a.map(d=>`u_${d}`),this.type=u}setUniform(r,a,u,d,g){a.set(r,g,d.constantOr(this.value))}getBinding(r,a){return this.type==="color"?new GM(r):new Y_(r)}}class Hd{constructor(r,a){this.uniformNames=a.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,a,u,d,g){const _=g==="u_pattern"||g==="u_dash"?this.pattern:g==="u_pixel_ratio"?this.pixelRatio:null;_&&a.set(r,g,_)}getBinding(r,a){return a==="u_pattern"||a==="u_dash"?new jM(r):new Y_(r)}}class Tl{constructor(r,a,u,d){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=a.map(g=>({name:`a_${g}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(r,a,u,d,g,_){const w=this.paintVertexArray.length,T=this.expression.evaluate(new Ne(0),a,{},g,d,_);this.paintVertexArray.resize(r),this._setPaintValue(w,r,T)}updatePaintArray(r,a,u,d,g){const _=this.expression.evaluate({zoom:0},u,d,void 0,g);this._setPaintValue(r,a,_)}_setPaintValue(r,a,u){if(this.type==="color"){const d=qw(u);for(let g=r;g<a;g++)this.paintVertexArray.emplace(g,d[0],d[1])}else{for(let d=r;d<a;d++)this.paintVertexArray.emplace(d,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ks{constructor(r,a,u,d,g,_){this.expression=r,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=u,this.useIntegerZoom=d,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(r,a,u,d,g,_){const w=this.expression.evaluate(new Ne(this.zoom),a,{},g,d,_),T=this.expression.evaluate(new Ne(this.zoom+1),a,{},g,d,_),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,w,T)}updatePaintArray(r,a,u,d,g){const _=this.expression.evaluate({zoom:this.zoom},u,d,void 0,g),w=this.expression.evaluate({zoom:this.zoom+1},u,d,void 0,g);this._setPaintValue(r,a,_,w)}_setPaintValue(r,a,u,d){if(this.type==="color"){const g=qw(u),_=qw(d);for(let w=r;w<a;w++)this.paintVertexArray.emplace(w,g[0],g[1],_[0],_[1])}else{for(let g=r;g<a;g++)this.paintVertexArray.emplace(g,u,d);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a,u,d,g){const _=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,w=Oe(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);a.set(r,g,w)}getBinding(r,a){return new Y_(r)}}class Ic{constructor(r,a,u,d,g){this.expression=r,this.layerId=g,this.paintVertexAttributes=(u==="array"?nB:tB).members;for(let _=0;_<a.length;++_);this.paintVertexArray=new d}populatePaintArray(r,a,u){const d=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(d,r,a.patterns&&a.patterns[this.layerId],u)}updatePaintArray(r,a,u,d,g,_){this._setPaintValues(r,a,u.patterns&&u.patterns[this.layerId],_)}_setPaintValues(r,a,u,d){if(!d||!u)return;const g=d[u];if(!g)return;const{tl:_,br:w,pixelRatio:T}=g;for(let S=r;S<a;S++)this.paintVertexArray.emplace(S,_[0],_[1],w[0],w[1],T)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Mc{constructor(r,a,u=()=>!0){this.binders={},this._buffers=[];const d=[];for(const g in r.paint._values){if(!u(g))continue;const _=r.paint.get(g);if(!(_ instanceof ct&&gc(_.property.specification)))continue;const w=cB(g,r.type),T=_.value,S=_.property.specification.type,R=!!_.property.useIntegerZoom,L=g==="line-dasharray"||g.endsWith("pattern"),B=g==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if(T.kind!=="constant"||B)if(T.kind==="source"||B||L){const j=$M(g,S,"source");this.binders[g]=L?new Ic(T,w,S,j,r.id):new Tl(T,w,S,j),d.push(`/a_${g}`)}else{const j=$M(g,S,"composite");this.binders[g]=new Ks(T,w,S,R,a,j),d.push(`/z_${g}`)}else this.binders[g]=L?new Hd(T.value,w):new pm(T.value,w,S),d.push(`/u_${g}`)}this.cacheKey=d.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof Tl||a instanceof Ks?a.maxValue:0}populatePaintArrays(r,a,u,d,g,_){for(const w in this.binders){const T=this.binders[w];(T instanceof Tl||T instanceof Ks||T instanceof Ic)&&T.populatePaintArray(r,a,u,d,g,_)}}setConstantPatternPositions(r){for(const a in this.binders){const u=this.binders[a];u instanceof Hd&&u.setConstantPatternPositions(r)}}updatePaintArrays(r,a,u,d,g,_){let w=!1;for(const T in r){const S=a.getPositions(T);for(const R of S){const L=u.feature(R.index);for(const B in this.binders){const j=this.binders[B];if((j instanceof Tl||j instanceof Ks||j instanceof Ic)&&j.expression.isStateDependent===!0){const q=d.paint.get(B);j.expression=q.value,j.updatePaintArray(R.start,R.end,L,r[T],g,_),w=!0}}}}return w}defines(){const r=[];for(const a in this.binders){const u=this.binders[a];(u instanceof pm||u instanceof Hd)&&r.push(...u.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof Tl||u instanceof Ks||u instanceof Ic)for(let d=0;d<u.paintVertexAttributes.length;d++)r.push(u.paintVertexAttributes[d].name)}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof pm||u instanceof Hd||u instanceof Ks)for(const d of u.uniformNames)r.push(d)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const a=[];for(const u in this.binders){const d=this.binders[u];if(d instanceof pm||d instanceof Hd||d instanceof Ks)for(const g of d.uniformNames)a.push({name:g,property:u,binding:d.getBinding(r,g)})}return a}setUniforms(r,a,u,d,g){for(const{name:_,property:w,binding:T}of u)this.binders[w].setUniform(r,T,g,d.get(w),_)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const a=this.binders[r];(a instanceof Tl||a instanceof Ks||a instanceof Ic)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(r){for(const a in this.binders){const u=this.binders[a];(u instanceof Tl||u instanceof Ks||u instanceof Ic)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof Tl||a instanceof Ks||a instanceof Ic)&&a.destroy()}}}class oh{constructor(r,a,u=()=>!0){this.programConfigurations={};for(const d of r)this.programConfigurations[d.id]=new Mc(d,a,u);this.needsUpload=!1,this._featureMap=new H_,this._bufferOffset=0}populatePaintArrays(r,a,u,d,g,_,w){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(r,a,d,g,_,w);a.id!==void 0&&this._featureMap.add(a.id,u,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,u,d,g){for(const _ of u)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,a,_,d,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const lB={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function cB(o,r){return lB[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}const uB={"line-pattern":{source:Gr,composite:Gr},"fill-pattern":{source:Gr,composite:Gr},"fill-extrusion-pattern":{source:Gr,composite:Gr},"line-dasharray":{source:eo,composite:eo}},hB={color:{source:Sc,composite:Jn},number:{source:xo,composite:Sc}};function $M(o,r,a){const u=uB[o];return u&&u[a]||hB[r][a]}Bt(pm,"ConstantBinder"),Bt(Hd,"PatternConstantBinder"),Bt(Tl,"SourceExpressionBinder"),Bt(Ic,"PatternCompositeBinder"),Bt(Ks,"CompositeExpressionBinder"),Bt(Mc,"ProgramConfiguration",{omit:["_buffers"]}),Bt(oh,"ProgramConfigurationSet");const X_="-transition";class Js extends Ws{constructor(r,a){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&r.type!=="sky"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),a.layout&&(this._unevaluatedLayout=new et(a.layout)),a.paint)){this._transitionablePaint=new vt(a.paint);for(const u in r.paint)this.setPaintProperty(u,r.paint[u],{validate:!1});for(const u in r.layout)this.setLayoutProperty(u,r.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qe(a.paint)}}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,a,u={}){a!=null&&this._validate(O_,`layers.${this.id}.layout.${r}`,r,a,u)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,a):this.visibility=a)}getPaintProperty(r){return Ot(r,X_)?this._transitionablePaint.getTransition(r.slice(0,-X_.length)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,u={}){if(a!=null&&this._validate(Vw,`layers.${this.id}.paint.${r}`,r,a,u))return!1;if(Ot(r,X_))return this._transitionablePaint.setTransition(r.slice(0,-X_.length),a||void 0),!1;{const d=this._transitionablePaint._values[r],g=d.value.isDataDriven(),_=d.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const w=this._transitionablePaint._values[r].value,T=w.isDataDriven(),S=Ot(r,"pattern")||r==="line-dasharray";return T||g||S||this._handleOverridablePaintPropertyUpdate(r,_,w)}}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getProgramConfiguration(r){return null}_handleOverridablePaintPropertyUpdate(r,a,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),pn(r,(a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length))}_validate(r,a,u,d,g={}){return(!g||g.validate!==!1)&&k_(this,r.call(D_,{key:a,layerType:this.type,objectKey:u,value:d,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof ct&&gc(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=zd(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const dB=$t([{name:"a_pos",components:2,type:"Int16"}],4),fB=$t([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class $r{constructor(r=[]){this.segments=r}prepareSegment(r,a,u,d){let g=this.segments[this.segments.length-1];return r>$r.MAX_VERTEX_ARRAY_LENGTH&&Jt(`Max vertices per segment is ${$r.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!g||g.vertexLength+r>$r.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==d)&&(g={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},d!==void 0&&(g.sortKey=d),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,u,d){return new $r([{vertexOffset:r,primitiveOffset:a,vertexLength:u,primitiveLength:d,vaos:{},sortKey:0}])}}$r.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt($r,"SegmentVector");var sn=8192;class Ac{constructor(r,a){r&&(a?this.setSouthWest(r).setNorthEast(a):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof Dn?new Dn(r.lng,r.lat):Dn.convert(r),this}setSouthWest(r){return this._sw=r instanceof Dn?new Dn(r.lng,r.lat):Dn.convert(r),this}extend(r){const a=this._sw,u=this._ne;let d,g;if(r instanceof Dn)d=r,g=r;else{if(!(r instanceof Ac))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ac.convert(r)):this.extend(Dn.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(Dn.convert(r)):this;if(d=r._sw,g=r._ne,!d||!g)return this}return a||u?(a.lng=Math.min(d.lng,a.lng),a.lat=Math.min(d.lat,a.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new Dn(d.lng,d.lat),this._ne=new Dn(g.lng,g.lat)),this}getCenter(){return new Dn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Dn(this.getWest(),this.getNorth())}getSouthEast(){return new Dn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:a,lat:u}=Dn.convert(r);let d=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&d}static convert(r){return!r||r instanceof Ac?r:new Ac(r)}}var Q_=1e-6,Bo=typeof Float32Array<"u"?Float32Array:Array;function WM(){var o=new Bo(9);return Bo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function qM(o,r,a){var u=r[0],d=r[1],g=r[2],_=r[3],w=r[4],T=r[5],S=r[6],R=r[7],L=r[8],B=a[0],j=a[1],q=a[2],Q=a[3],ie=a[4],pe=a[5],xe=a[6],he=a[7],ve=a[8];return o[0]=B*u+j*_+q*S,o[1]=B*d+j*w+q*R,o[2]=B*g+j*T+q*L,o[3]=Q*u+ie*_+pe*S,o[4]=Q*d+ie*w+pe*R,o[5]=Q*g+ie*T+pe*L,o[6]=xe*u+he*_+ve*S,o[7]=xe*d+he*w+ve*R,o[8]=xe*g+he*T+ve*L,o}function ea(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Hw(o,r){var a=r[0],u=r[1],d=r[2],g=r[3],_=r[4],w=r[5],T=r[6],S=r[7],R=r[8],L=r[9],B=r[10],j=r[11],q=r[12],Q=r[13],ie=r[14],pe=r[15],xe=a*w-u*_,he=a*T-d*_,ve=a*S-g*_,Te=u*T-d*w,we=u*S-g*w,Ze=d*S-g*T,$e=R*Q-L*q,rt=R*ie-B*q,mt=R*pe-j*q,Ke=L*ie-B*Q,it=L*pe-j*Q,st=B*pe-j*ie,ht=xe*st-he*it+ve*Ke+Te*mt-we*rt+Ze*$e;return ht?(o[0]=(w*st-T*it+S*Ke)*(ht=1/ht),o[1]=(d*it-u*st-g*Ke)*ht,o[2]=(Q*Ze-ie*we+pe*Te)*ht,o[3]=(B*we-L*Ze-j*Te)*ht,o[4]=(T*mt-_*st-S*rt)*ht,o[5]=(a*st-d*mt+g*rt)*ht,o[6]=(ie*ve-q*Ze-pe*he)*ht,o[7]=(R*Ze-B*ve+j*he)*ht,o[8]=(_*it-w*mt+S*$e)*ht,o[9]=(u*mt-a*it-g*$e)*ht,o[10]=(q*we-Q*ve+pe*xe)*ht,o[11]=(L*ve-R*we-j*xe)*ht,o[12]=(w*rt-_*Ke-T*$e)*ht,o[13]=(a*Ke-u*rt+d*$e)*ht,o[14]=(Q*he-q*Te-ie*xe)*ht,o[15]=(R*Te-L*he+B*xe)*ht,o):null}function sh(o,r,a){var u=r[0],d=r[1],g=r[2],_=r[3],w=r[4],T=r[5],S=r[6],R=r[7],L=r[8],B=r[9],j=r[10],q=r[11],Q=r[12],ie=r[13],pe=r[14],xe=r[15],he=a[0],ve=a[1],Te=a[2],we=a[3];return o[0]=he*u+ve*w+Te*L+we*Q,o[1]=he*d+ve*T+Te*B+we*ie,o[2]=he*g+ve*S+Te*j+we*pe,o[3]=he*_+ve*R+Te*q+we*xe,o[4]=(he=a[4])*u+(ve=a[5])*w+(Te=a[6])*L+(we=a[7])*Q,o[5]=he*d+ve*T+Te*B+we*ie,o[6]=he*g+ve*S+Te*j+we*pe,o[7]=he*_+ve*R+Te*q+we*xe,o[8]=(he=a[8])*u+(ve=a[9])*w+(Te=a[10])*L+(we=a[11])*Q,o[9]=he*d+ve*T+Te*B+we*ie,o[10]=he*g+ve*S+Te*j+we*pe,o[11]=he*_+ve*R+Te*q+we*xe,o[12]=(he=a[12])*u+(ve=a[13])*w+(Te=a[14])*L+(we=a[15])*Q,o[13]=he*d+ve*T+Te*B+we*ie,o[14]=he*g+ve*S+Te*j+we*pe,o[15]=he*_+ve*R+Te*q+we*xe,o}function mm(o,r,a){var u,d,g,_,w,T,S,R,L,B,j,q,Q=a[0],ie=a[1],pe=a[2];return r===o?(o[12]=r[0]*Q+r[4]*ie+r[8]*pe+r[12],o[13]=r[1]*Q+r[5]*ie+r[9]*pe+r[13],o[14]=r[2]*Q+r[6]*ie+r[10]*pe+r[14],o[15]=r[3]*Q+r[7]*ie+r[11]*pe+r[15]):(d=r[1],g=r[2],_=r[3],w=r[4],T=r[5],S=r[6],R=r[7],L=r[8],B=r[9],j=r[10],q=r[11],o[0]=u=r[0],o[1]=d,o[2]=g,o[3]=_,o[4]=w,o[5]=T,o[6]=S,o[7]=R,o[8]=L,o[9]=B,o[10]=j,o[11]=q,o[12]=u*Q+w*ie+L*pe+r[12],o[13]=d*Q+T*ie+B*pe+r[13],o[14]=g*Q+S*ie+j*pe+r[14],o[15]=_*Q+R*ie+q*pe+r[15]),o}function ah(o,r,a){var u=a[0],d=a[1],g=a[2];return o[0]=r[0]*u,o[1]=r[1]*u,o[2]=r[2]*u,o[3]=r[3]*u,o[4]=r[4]*d,o[5]=r[5]*d,o[6]=r[6]*d,o[7]=r[7]*d,o[8]=r[8]*g,o[9]=r[9]*g,o[10]=r[10]*g,o[11]=r[11]*g,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o}function Zw(o,r,a){var u=Math.sin(a),d=Math.cos(a),g=r[4],_=r[5],w=r[6],T=r[7],S=r[8],R=r[9],L=r[10],B=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=g*d+S*u,o[5]=_*d+R*u,o[6]=w*d+L*u,o[7]=T*d+B*u,o[8]=S*d-g*u,o[9]=R*d-_*u,o[10]=L*d-w*u,o[11]=B*d-T*u,o}function K_(o,r,a){var u=Math.sin(a),d=Math.cos(a),g=r[0],_=r[1],w=r[2],T=r[3],S=r[8],R=r[9],L=r[10],B=r[11];return r!==o&&(o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=g*d-S*u,o[1]=_*d-R*u,o[2]=w*d-L*u,o[3]=T*d-B*u,o[8]=g*u+S*d,o[9]=_*u+R*d,o[10]=w*u+L*d,o[11]=T*u+B*d,o}function HM(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function ZM(o,r,a){var u,d,g,_=a[0],w=a[1],T=a[2],S=Math.hypot(_,w,T);return S<Q_?null:(_*=S=1/S,w*=S,T*=S,u=Math.sin(r),d=Math.cos(r),o[0]=_*_*(g=1-d)+d,o[1]=w*_*g+T*u,o[2]=T*_*g-w*u,o[3]=0,o[4]=_*w*g-T*u,o[5]=w*w*g+d,o[6]=T*w*g+_*u,o[7]=0,o[8]=_*T*g+w*u,o[9]=w*T*g-_*u,o[10]=T*T*g+d,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var pB=sh;function Yw(){var o=new Bo(3);return Bo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function YM(o){var r=new Bo(3);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r}function gm(o){return Math.hypot(o[0],o[1],o[2])}function Zd(o,r,a){var u=new Bo(3);return u[0]=o,u[1]=r,u[2]=a,u}function Sl(o,r,a){return o[0]=r[0]+a[0],o[1]=r[1]+a[1],o[2]=r[2]+a[2],o}function Xw(o,r,a){return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],o}function XM(o,r,a){return o[0]=r[0]*a[0],o[1]=r[1]*a[1],o[2]=r[2]*a[2],o}function ym(o,r,a){return o[0]=Math.min(r[0],a[0]),o[1]=Math.min(r[1],a[1]),o[2]=Math.min(r[2],a[2]),o}function _m(o,r,a){return o[0]=Math.max(r[0],a[0]),o[1]=Math.max(r[1],a[1]),o[2]=Math.max(r[2],a[2]),o}function Ko(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o}function vm(o,r,a,u){return o[0]=r[0]+a[0]*u,o[1]=r[1]+a[1]*u,o[2]=r[2]+a[2]*u,o}function to(o,r){var a=r[0],u=r[1],d=r[2],g=a*a+u*u+d*d;return g>0&&(g=1/Math.sqrt(g)),o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o}function bs(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function Qw(o,r,a){var u=r[0],d=r[1],g=r[2],_=a[0],w=a[1],T=a[2];return o[0]=d*T-g*w,o[1]=g*_-u*T,o[2]=u*w-d*_,o}function Nr(o,r,a){var u=r[0],d=r[1],g=r[2],_=a[3]*u+a[7]*d+a[11]*g+a[15];return o[0]=(a[0]*u+a[4]*d+a[8]*g+a[12])/(_=_||1),o[1]=(a[1]*u+a[5]*d+a[9]*g+a[13])/_,o[2]=(a[2]*u+a[6]*d+a[10]*g+a[14])/_,o}function QM(o,r,a){var u=a[0],d=a[1],g=a[2],_=r[0],w=r[1],T=r[2],S=d*T-g*w,R=g*_-u*T,L=u*w-d*_,B=d*L-g*R,j=g*S-u*L,q=u*R-d*S,Q=2*a[3];return R*=Q,L*=Q,j*=2,q*=2,o[0]=_+(S*=Q)+(B*=2),o[1]=w+R+j,o[2]=T+L+q,o}var xm,ta=Xw,mB=XM,gB=gm;function KM(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o[3]=r[3]*a,o}function JM(o,r){var a=r[0],u=r[1],d=r[2],g=r[3],_=a*a+u*u+d*d+g*g;return _>0&&(_=1/Math.sqrt(_)),o[0]=a*_,o[1]=u*_,o[2]=d*_,o[3]=g*_,o}function lh(o,r,a){var u=r[0],d=r[1],g=r[2],_=r[3];return o[0]=a[0]*u+a[4]*d+a[8]*g+a[12]*_,o[1]=a[1]*u+a[5]*d+a[9]*g+a[13]*_,o[2]=a[2]*u+a[6]*d+a[10]*g+a[14]*_,o[3]=a[3]*u+a[7]*d+a[11]*g+a[15]*_,o}function eA(){var o=new Bo(4);return Bo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function tA(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function nA(o,r,a){a*=.5;var u=r[0],d=r[1],g=r[2],_=r[3],w=Math.sin(a),T=Math.cos(a);return o[0]=u*T+_*w,o[1]=d*T+g*w,o[2]=g*T-d*w,o[3]=_*T-u*w,o}function rA(o,r,a){a*=.5;var u=r[0],d=r[1],g=r[2],_=r[3],w=Math.sin(a),T=Math.cos(a);return o[0]=u*T-g*w,o[1]=d*T+_*w,o[2]=g*T+u*w,o[3]=_*T-d*w,o}Yw(),xm=new Bo(4),Bo!=Float32Array&&(xm[0]=0,xm[1]=0,xm[2]=0,xm[3]=0);var yB=JM;Yw(),Zd(1,0,0),Zd(0,1,0),eA(),eA(),WM();const _B=$t([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:iA}=_B,oA=$t([{name:"a_pos_3",components:3,type:"Int16"}]);var wm=$t([{name:"a_pos",type:"Int16",components:2}]);class Kw{constructor(r,a){this.pos=r,this.dir=a}intersectsPlane(r,a,u){const d=bs(a,this.dir);if(Math.abs(d)<1e-6)return!1;const g=((r[0]-this.pos[0])*a[0]+(r[1]-this.pos[1])*a[1]+(r[2]-this.pos[2])*a[2])/d;return u[0]=this.pos[0]+this.dir[0]*g,u[1]=this.pos[1]+this.dir[1]*g,u[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(r,a,u){if(function(j,q){var Q=j[0],ie=j[1],pe=j[2],xe=q[0],he=q[1],ve=q[2];return Math.abs(Q-xe)<=Q_*Math.max(1,Math.abs(Q),Math.abs(xe))&&Math.abs(ie-he)<=Q_*Math.max(1,Math.abs(ie),Math.abs(he))&&Math.abs(pe-ve)<=Q_*Math.max(1,Math.abs(pe),Math.abs(ve))}(this.pos,r)||a===0)return u[0]=u[1]=u[2]=0,!1;const[d,g,_]=this.dir,w=this.pos[0]-r[0],T=this.pos[1]-r[1],S=this.pos[2]-r[2],R=d*d+g*g+_*_,L=2*(w*d+T*g+S*_),B=L*L-4*R*(w*w+T*T+S*S-a*a);if(B<0){const j=Math.max(-L/2,0),q=w+d*j,Q=T+g*j,ie=S+_*j,pe=Math.hypot(q,Q,ie);return u[0]=q*a/pe,u[1]=Q*a/pe,u[2]=ie*a/pe,!1}{const j=(-L-Math.sqrt(B))/(2*R);if(j<0){const q=Math.hypot(w,T,S);return u[0]=w*a/q,u[1]=T*a/q,u[2]=S*a/q,!1}return u[0]=w+d*j,u[1]=T+g*j,u[2]=S+_*j,!0}}}class Jw{constructor(r,a,u,d,g){this.TL=r,this.TR=a,this.BR=u,this.BL=d,this.horizon=g}static fromInvProjectionMatrix(r,a,u){const d=[-1,1,1],g=[1,1,1],_=[1,-1,1],w=[-1,-1,1],T=Nr(d,d,r),S=Nr(g,g,r),R=Nr(_,_,r),L=Nr(w,w,r);return new Jw(T,S,R,L,a/u)}}class eb{constructor(r,a){this.points=r,this.planes=a}static fromInvProjectionMatrix(r,a,u,d){const g=Math.pow(2,u),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const S=lh([],T,r),R=1/S[3]/a*g;return function(L,B,j){return L[0]=B[0]*j[0],L[1]=B[1]*j[1],L[2]=B[2]*j[2],L[3]=B[3]*j[3],L}(S,S,[R,R,d?1/S[3]:R,R])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const S=to([],Qw([],ta([],_[T[0]],_[T[1]]),ta([],_[T[2]],_[T[1]]))),R=-bs(S,_[T[1]]);return S.concat(R)});return new eb(_,w)}}class no{static fromPoints(r){const a=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const d of r)ym(a,a,d),_m(u,u,d);return new no(a,u)}static applyTransform(r,a){const u=r.getCorners();for(let d=0;d<u.length;++d)Nr(u[d],u[d],a);return no.fromPoints(u)}constructor(r,a){this.min=r,this.max=a,this.center=Ko([],Sl([],this.min,this.max),.5)}quadrant(r){const a=[r%2==0,r<2],u=YM(this.min),d=YM(this.max);for(let g=0;g<a.length;g++)u[g]=a[g]?this.min[g]:this.center[g],d[g]=a[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new no(u,d)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,a=this.max;return[[r[0],r[1],r[2]],[a[0],r[1],r[2]],[a[0],a[1],r[2]],[r[0],a[1],r[2]],[r[0],r[1],a[2]],[a[0],r[1],a[2]],[a[0],a[1],a[2]],[r[0],a[1],a[2]]]}intersects(r){const a=this.getCorners();let u=!0;for(let d=0;d<r.planes.length;d++){const g=r.planes[d];let _=0;for(let w=0;w<a.length;w++)_+=bs(g,a[w])+g[3]>=0;if(_===0)return 0;_!==a.length&&(u=!1)}if(u)return 2;for(let d=0;d<3;d++){let g=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let w=0;w<r.points.length;w++){const T=r.points[w][d]-this.min[d];g=Math.min(g,T),_=Math.max(_,T)}if(_<0||g>this.max[d]-this.min[d])return 0}return 1}}const ka=sn/Math.PI/2,ch=64,bm=[ch,32,16],Es=-ka,Ts=ka,vB=[new no([Es,Es,Es],[Ts,Ts,Ts]),new no([Es,Es,Es],[0,0,Ts]),new no([0,Es,Es],[Ts,0,Ts]),new no([Es,0,Es],[0,Ts,Ts]),new no([0,0,Es],[Ts,Ts,Ts])];function J_(o){return o*ka/Sm}function sA(o,r,a,u=!0){const d=Ko([],o._camera.position,o.worldSize),g=[r,a,1,1];lh(g,g,o.pixelMatrixInverse),KM(g,g,1/g[3]);const _=to([],ta([],g,d)),w=o.globeMatrix,T=[w[12],w[13],w[14]],S=ta([],T,d),R=gm(S),L=to([],S),B=o.worldSize/(2*Math.PI),j=bs(L,_),q=Math.asin(B/R);if(q<Math.acos(j)){if(!u)return null;const mt=[],Ke=[];Ko(mt,_,R/j),to(Ke,ta(Ke,mt,S)),to(_,Sl(_,S,Ko(_,Ke,Math.tan(q)*R)))}const Q=[];new Kw(d,_).closestPointOnSphere(T,B,Q);const ie=to([],vo(w,0)),pe=to([],vo(w,1)),xe=to([],vo(w,2)),he=bs(ie,Q),ve=bs(pe,Q),Te=bs(xe,Q),we=ce(Math.asin(-ve/B));let Ze=ce(Math.atan2(he,Te));Ze=o.center.lng+function(mt,Ke){const it=(Ke-mt+180)%360-180;return it<-180?it+360:it}(o.center.lng,Ze);const $e=za(Ze),rt=Oe(Na(we),0,1);return new Kd($e,rt)}class xB{constructor(r,a,u){this.a=ta([],r,u),this.b=ta([],a,u),this.center=u;const d=to([],this.a),g=to([],this.b);this.angle=Math.acos(bs(d,g))}}function tb(o,r){if(o.angle===0)return null;let a;return a=o.a[r]===0?1/o.angle*.5*Math.PI:1/o.angle*Math.atan(o.b[r]/o.a[r]/Math.sin(o.angle)-1/Math.tan(o.angle)),a<0||a>1?null:function(u,d,g,_){const w=Math.sin(g);return u*(Math.sin((1-_)*g)/w)+d*(Math.sin(_*g)/w)}(o.a[r],o.b[r],o.angle,Oe(a,0,1))+o.center[r]}function La(o){if(o.z<=1)return vB[o.z+2*o.y+o.x];const r=nb(e0(o));return no.fromPoints(r)}function uh(o,r,a){return Ko(o,o,1-a),vm(o,o,r,a)}function aA(o,r){const a=Qd(r.zoom);if(a===0)return La(o);const u=e0(o),d=nb(u),g=za(u.getWest())*r.worldSize,_=za(u.getEast())*r.worldSize,w=Na(u.getNorth())*r.worldSize,T=Na(u.getSouth())*r.worldSize,S=[g,w,0],R=[_,w,0],L=[g,T,0],B=[_,T,0],j=Hw([],r.globeMatrix);return Nr(S,S,j),Nr(R,R,j),Nr(L,L,j),Nr(B,B,j),d[0]=uh(d[0],L,a),d[1]=uh(d[1],B,a),d[2]=uh(d[2],R,a),d[3]=uh(d[3],S,a),no.fromPoints(d)}function lA(o,r,a){for(const u of o)Nr(u,u,r),Ko(u,u,a)}function wB(o,r,a){const u=r/o.worldSize,d=o.globeMatrix;if(a.z<=1){const $e=La(a).getCorners();return lA($e,d,u),no.fromPoints($e)}const g=e0(a),_=nb(g);lA(_,d,u);const w=Number.MAX_VALUE,T=[-w,-w,-w],S=[w,w,w];if(g.contains(o.center)){for(const mt of _)ym(S,S,mt),_m(T,T,mt);T[2]=0;const $e=o.point,rt=[$e.x*u,$e.y*u,0];return ym(S,S,rt),_m(T,T,rt),new no(S,T)}const R=[d[12]*u,d[13]*u,d[14]*u],L=g.getCenter(),B=Oe(o.center.lat,-Oi,Oi),j=Oe(L.lat,-Oi,Oi),q=za(o.center.lng),Q=Na(B);let ie=q-za(L.lng);const pe=Q-Na(j);ie>.5?ie-=1:ie<-.5&&(ie+=1);let xe=0;Math.abs(ie)>Math.abs(pe)?xe=ie>=0?1:3:(xe=pe>=0?0:2,vm(R,R,[d[4]*u,d[5]*u,d[6]*u],-Math.sin(re(pe>=0?g.getSouth():g.getNorth()))*ka));const he=_[xe],ve=_[(xe+1)%4],Te=new xB(he,ve,R),we=[tb(Te,0)||he[0],tb(Te,1)||he[1],tb(Te,2)||he[2]],Ze=Qd(o.zoom);if(Ze>0){const $e=function({x:mt,y:Ke,z:it},st,ht,gt,Je){const Tt=1/(1<<it);let en=mt*Tt,Rt=en+Tt,Ut=Ke*Tt,St=Ut+Tt,nn=0;const bn=(en+Rt)/2-gt;return bn>.5?nn=-1:bn<-.5&&(nn=1),en=((en+nn)*st-(gt*=st))*ht+gt,Rt=((Rt+nn)*st-gt)*ht+gt,Ut=(Ut*st-(Je*=st))*ht+Je,St=(St*st-Je)*ht+Je,[[en,St,0],[Rt,St,0],[Rt,Ut,0],[en,Ut,0]]}(a,r,o._pixelsPerMercatorPixel,q,Q);for(let mt=0;mt<_.length;mt++)uh(_[mt],$e[mt],Ze);const rt=Sl([],$e[xe],$e[(xe+1)%4]);Ko(rt,rt,.5),uh(we,rt,Ze)}for(const $e of _)ym(S,S,$e),_m(T,T,$e);return S[2]=Math.min(he[2],ve[2]),ym(S,S,we),_m(T,T,we),new no(S,T)}function e0({x:o,y:r,z:a}){const u=1/(1<<a),d=new Dn(Jo(o*u),Di((r+1)*u)),g=new Dn(Jo((o+1)*u),Di(r*u));return new Ac(d,g)}function nb(o){const r=re(o.getNorth()),a=re(o.getSouth()),u=Math.cos(r),d=Math.cos(a),g=Math.sin(r),_=Math.sin(a),w=o.getWest(),T=o.getEast();return[Yd(d,_,w),Yd(d,_,T),Yd(u,g,T),Yd(u,g,w)]}function Yd(o,r,a,u=ka){return a=re(a),[o*Math.sin(a)*u,-r*u,o*Math.cos(a)*u]}function Xd(o,r,a){return Yd(Math.cos(re(o)),Math.sin(re(o)),r,a)}function Em(o,r,a,u){const d=1<<a.z,g=(o/sn+a.x)/d;return Xd(Di((r/sn+a.y)/d),Jo(g),u)}function t0({min:o,max:r}){return 16383/Math.max(r[0]-o[0],r[1]-o[1],r[2]-o[2])}const cA=new Float64Array(16);function Tm(o){const r=t0(o),a=HM(cA,[r,r,r]);return mm(a,a,((u=[])[0]=-(d=o.min)[0],u[1]=-d[1],u[2]=-d[2],u));var u,d}function rb(o){const r=(u=o.min,(a=cA)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=u[0],a[13]=u[1],a[14]=u[2],a[15]=1,a);var a,u;const d=1/t0(o);return ah(r,r,[d,d,d])}function uA(o,r,a,u,d){const g=function(T){const S=sn/(2*Math.PI);return T/(2*Math.PI)/S}(a),_=[o,r,-a/(2*Math.PI)],w=ea(new Float64Array(16));return mm(w,w,_),ah(w,w,[g,g,g]),Zw(w,w,re(-d)),K_(w,w,re(-u)),w}function Qd(o){return ke(5,6,o)}function hA(o,r){const a=Xd(r.lat,r.lng),u=function(q){const Q=Xd(q._center.lat,q._center.lng);let ie=Qw([],Zd(0,1,0),Q);const pe=ZM([],-q.angle,Q);ie=Nr(ie,ie,pe),ZM(pe,-q._pitch,ie);const xe=to([],Q);return Ko(xe,xe,J_(q.cameraToCenterDistance/q.pixelsPerMeter)),Nr(xe,xe,pe),Sl([],Q,xe)}(o);return _=(d=Xw([],u,a))[0],w=d[1],T=d[2],S=(g=a)[0],R=g[1],L=g[2],j=(B=Math.sqrt(_*_+w*w+T*T)*Math.sqrt(S*S+R*R+L*L))&&bs(d,g)/B,Math.acos(Math.min(Math.max(j,-1),1));var d,g,_,w,T,S,R,L,B,j}function ib(o,r){return hA(o,r)>Math.PI/2*1.01}const dA=re(85),bB=Math.cos(dA),EB=Math.sin(dA),Sm=63710088e-1,fA=2*Math.PI*Sm;class Dn{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Dn(je(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,u=this.lat*a,d=r.lat*a,g=Math.sin(u)*Math.sin(d)+Math.cos(u)*Math.cos(d)*Math.cos((r.lng-this.lng)*a);return Sm*Math.acos(Math.min(g,1))}toBounds(r=0){const a=360*r/40075017,u=a/Math.cos(Math.PI/180*this.lat);return new Ac(new Dn(this.lng-u,this.lat-a),new Dn(this.lng+u,this.lat+a))}toEcef(r){const a=J_(r);return Xd(this.lat,this.lng,ka+a)}static convert(r){if(r instanceof Dn)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Dn(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Dn(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function ob(o){return fA*Math.cos(o*Math.PI/180)}function za(o){return(180+o)/360}function Na(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function na(o,r){return o/ob(r)}function Jo(o){return 360*o-180}function Di(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function pA(o,r){return o*ob(Di(r))}const Oi=85.051129;function mA(o){return 1/Math.cos(o*Math.PI/180)}class Kd{constructor(r,a,u=0){this.x=+r,this.y=+a,this.z=+u}static fromLngLat(r,a=0){const u=Dn.convert(r);return new Kd(za(u.lng),Na(u.lat),na(a,u.lat))}toLngLat(){return new Dn(Jo(this.x),Di(this.y))}toAltitude(){return pA(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fA*mA(Di(this.y))}}function sb(o,r,a,u,d,g,_,w,T){const S=(r+u)/2,R=(a+d)/2,L=new $(S,R);w(L),function(B,j,q,Q,ie,pe){const xe=q-ie,he=Q-pe;return Math.abs((Q-j)*xe-(q-B)*he)/Math.hypot(xe,he)}(L.x,L.y,g.x,g.y,_.x,_.y)>=T?(sb(o,r,a,S,R,g,L,w,T),sb(o,S,R,u,d,L,_,w,T)):o.push(_)}function gA(o,r,a){let u=o[0],d=u.x,g=u.y;r(u);const _=[u];for(let w=1;w<o.length;w++){const T=o[w],{x:S,y:R}=T;r(T),sb(_,d,g,S,R,u,T,r,a),d=S,g=R,u=T}return _}function ab(o,r,a,u){if(u(r,a)){const d=r.add(a)._mult(.5);ab(o,r,d,u),ab(o,d,a,u)}else o.push(a)}function TB(o,r){let a=o[0];const u=[a];for(let d=1;d<o.length;d++){const g=o[d];ab(u,a,g,r),a=g}return u}const lb=Math.pow(2,14)-1,yA=-lb-1;function SB(o,r){const a=Math.round(o.x*r),u=Math.round(o.y*r);return o.x=Oe(a,yA,lb),o.y=Oe(u,yA,lb),(a<o.x||a>o.x+1||u<o.y||u>o.y+1)&&Jt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o}function Il(o,r,a){const u=o.loadGeometry(),d=o.extent,g=sn/d;if(r&&a&&a.projection.isReprojectedInTileSpace){const _=1<<r.z,{scale:w,x:T,y:S,projection:R}=a,L=B=>{const j=Jo((r.x+B.x/d)/_),q=Di((r.y+B.y/d)/_),Q=R.project(j,q);B.x=(Q.x*w-T)*d,B.y=(Q.y*w-S)*d};for(let B=0;B<u.length;B++)if(o.type!==1)u[B]=gA(u[B],L,1);else{const j=[];for(const q of u[B])q.x<0||q.x>=d||q.y<0||q.y>=d||(L(q),j.push(q));u[B]=j}}for(const _ of u)for(const w of _)SB(w,g);return u}function hh(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Il(o):[]}}function n0(o,r,a,u,d){o.emplaceBack(2*r+(u+1)/2,2*a+(d+1)/2)}function r0(o,r,a){o.emplaceBack(r.x,r.y,r.z,a[0]*16384,a[1]*16384,a[2]*16384)}class cb{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new Zt,this.indexArray=new Ri,this.segments=new $r,this.programConfigurations=new oh(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,u,d){const g=this.layers[0],_=[];let w=null;g.type==="circle"&&(w=g.layout.get("circle-sort-key"));for(const{feature:S,id:R,index:L,sourceLayerIndex:B}of r){const j=this.layers[0]._featureFilter.needGeometry,q=hh(S,j);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),q,u))continue;const Q=w?w.evaluate(q,{},u):void 0,ie={id:R,properties:S.properties,type:S.type,sourceLayerIndex:B,index:L,geometry:j?q.geometry:Il(S,u,d),patterns:{},sortKey:Q};_.push(ie)}w&&_.sort((S,R)=>S.sortKey-R.sortKey);let T=null;d.projection.name==="globe"&&(this.globeExtVertexArray=new Qo,T=d.projection);for(const S of _){const{geometry:R,index:L,sourceLayerIndex:B}=S,j=r[L].feature;this.addFeature(S,R,L,a.availableImages,u,T),a.featureIndex.insert(j,R,L,B,this.index)}}update(r,a,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,dB.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,fB.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,a,u,d,g,_){for(const w of a)for(const T of w){const S=T.x,R=T.y;if(S<0||S>=sn||R<0||R>=sn)continue;if(_){const j=_.projectTilePoint(S,R,g),q=_.upVector(g,S,R),Q=this.globeExtVertexArray;r0(Q,j,q),r0(Q,j,q),r0(Q,j,q),r0(Q,j,q)}const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),B=L.vertexLength;n0(this.layoutVertexArray,S,R,-1,-1),n0(this.layoutVertexArray,S,R,1,-1),n0(this.layoutVertexArray,S,R,1,1),n0(this.layoutVertexArray,S,R,-1,1),this.indexArray.emplaceBack(B,B+1,B+2),this.indexArray.emplaceBack(B,B+2,B+3),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},d,g)}}function _A(o,r){for(let a=0;a<o.length;a++)if(dh(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(dh(o,r[a]))return!0;return!!ub(o,r)}function IB(o,r,a){return!!dh(o,r)||!!hb(r,o,a)}function vA(o,r){if(o.length===1)return wA(r,o[0]);for(let a=0;a<r.length;a++){const u=r[a];for(let d=0;d<u.length;d++)if(dh(o,u[d]))return!0}for(let a=0;a<o.length;a++)if(wA(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(ub(o,r[a]))return!0;return!1}function MB(o,r,a){if(o.length>1){if(ub(o,r))return!0;for(let u=0;u<r.length;u++)if(hb(r[u],o,a))return!0}for(let u=0;u<o.length;u++)if(hb(o[u],r,a))return!0;return!1}function ub(o,r){if(o.length===0||r.length===0)return!1;for(let a=0;a<o.length-1;a++){const u=o[a],d=o[a+1];for(let g=0;g<r.length-1;g++)if(AB(u,d,r[g],r[g+1]))return!0}return!1}function AB(o,r,a,u){return _r(o,a,u)!==_r(r,a,u)&&_r(o,r,a)!==_r(o,r,u)}function hb(o,r,a){const u=a*a;if(r.length===1)return o.distSqr(r[0])<u;for(let d=1;d<r.length;d++)if(xA(o,r[d-1],r[d])<u)return!0;return!1}function xA(o,r,a){const u=r.distSqr(a);if(u===0)return o.distSqr(r);const d=((o.x-r.x)*(a.x-r.x)+(o.y-r.y)*(a.y-r.y))/u;return o.distSqr(d<0?r:d>1?a:a.sub(r)._mult(d)._add(r))}function wA(o,r){let a,u,d,g=!1;for(let _=0;_<o.length;_++){a=o[_];for(let w=0,T=a.length-1;w<a.length;T=w++)u=a[w],d=a[T],u.y>r.y!=d.y>r.y&&r.x<(d.x-u.x)*(r.y-u.y)/(d.y-u.y)+u.x&&(g=!g)}return g}function dh(o,r){let a=!1;for(let u=0,d=o.length-1;u<o.length;d=u++){const g=o[u],_=o[d];g.y>r.y!=_.y>r.y&&r.x<(_.x-g.x)*(r.y-g.y)/(_.y-g.y)+g.x&&(a=!a)}return a}function bA(o,r,a,u,d){for(const _ of o)if(r<=_.x&&a<=_.y&&u>=_.x&&d>=_.y)return!0;const g=[new $(r,a),new $(r,d),new $(u,d),new $(u,a)];if(o.length>2){for(const _ of g)if(dh(o,_))return!0}for(let _=0;_<o.length-1;_++)if(CB(o[_],o[_+1],g))return!0;return!1}function CB(o,r,a){const u=a[0],d=a[2];if(o.x<u.x&&r.x<u.x||o.x>d.x&&r.x>d.x||o.y<u.y&&r.y<u.y||o.y>d.y&&r.y>d.y)return!1;const g=_r(o,r,a[0]);return g!==_r(o,r,a[1])||g!==_r(o,r,a[2])||g!==_r(o,r,a[3])}function Jd(o,r,a){const u=r.paint.get(o).value;return u.kind==="constant"?u.value:a.programConfigurations.get(r.id).getMaxValue(o)}function i0(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function EA(o,r,a,u,d){if(!r[0]&&!r[1])return o;const g=$.convert(r)._mult(d);a==="viewport"&&g._rotate(-u);const _=[];for(let w=0;w<o.length;w++)_.push(o[w].sub(g));return _}function TA(o,r,a,u){const d=$.convert(o)._mult(u);return r==="viewport"&&d._rotate(-a),d}Bt(cb,"CircleBucket",{omit:["layers"]});const PB=new dt({"circle-sort-key":new Qe(nt.layout_circle["circle-sort-key"])});var RB={paint:new dt({"circle-radius":new Qe(nt.paint_circle["circle-radius"]),"circle-color":new Qe(nt.paint_circle["circle-color"]),"circle-blur":new Qe(nt.paint_circle["circle-blur"]),"circle-opacity":new Qe(nt.paint_circle["circle-opacity"]),"circle-translate":new ze(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new ze(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ze(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ze(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qe(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qe(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qe(nt.paint_circle["circle-stroke-opacity"])}),layout:PB};function SA(o,r,a,u,d,g,_,w,T){if(g&&o.queryGeometry.isAboveHorizon)return!1;g&&(T*=o.pixelToTileUnitsFactor);const S=o.tileID.canonical,R=a.projection.upVectorScale(S,a.center.lat,a.worldSize).metersToTile;for(const L of r)for(const B of L){const j=B.add(w),q=d&&a.elevation?a.elevation.exaggeration()*d.getElevationAt(j.x,j.y,!0):0,Q=a.projection.projectTilePoint(j.x,j.y,S);if(q>0){const he=a.projection.upVector(S,j.x,j.y);Q.x+=he[0]*R*q,Q.y+=he[1]*R*q,Q.z+=he[2]*R*q}const ie=g?j:DB(Q.x,Q.y,Q.z,u),pe=g?o.tilespaceRays.map(he=>kB(he,q)):o.queryGeometry.screenGeometry,xe=lh([],[Q.x,Q.y,Q.z,1],u);if(!_&&g?T*=xe[3]/a.cameraToCenterDistance:_&&!g&&(T*=a.cameraToCenterDistance/xe[3]),g){const he=Di((B.y/sn+S.y)/(1<<S.z));T/=a.projection.pixelsPerMeter(he,1)/na(1,he)}if(IB(pe,ie,T))return!0}return!1}function DB(o,r,a,u){const d=lh([],[o,r,a,1],u);return new $(d[0]/d[3],d[1]/d[3])}const IA=Zd(0,0,0),OB=Zd(0,0,1);function kB(o,r){const a=Yw();return IA[2]=r,o.intersectsPlane(IA,OB,a),new $(a[0],a[1])}class MA extends cb{}function AA(o,{width:r,height:a},u,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==r*a*u)throw new RangeError("mismatched image size")}else d=new Uint8Array(r*a*u);return o.width=r,o.height=a,o.data=d,o}function CA(o,r,a){const{width:u,height:d}=r;u===o.width&&d===o.height||(db(o,r,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,u),height:Math.min(o.height,d)},a),o.width=u,o.height=d,o.data=r.data)}function db(o,r,a,u,d,g){if(d.width===0||d.height===0)return r;if(d.width>o.width||d.height>o.height||a.x>o.width-d.width||a.y>o.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>r.width||d.height>r.height||u.x>r.width-d.width||u.y>r.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,w=r.data;for(let T=0;T<d.height;T++){const S=((a.y+T)*o.width+a.x)*g,R=((u.y+T)*r.width+u.x)*g;for(let L=0;L<d.width*g;L++)w[R+L]=_[S+L]}return r}Bt(MA,"HeatmapBucket",{omit:["layers"]});class Ml{constructor(r,a){AA(this,r,1,a)}resize(r){CA(this,new Ml(r),1)}clone(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,u,d,g){db(r,a,u,d,g,1)}}class Fo{constructor(r,a){AA(this,r,4,a)}resize(r){CA(this,new Fo(r),4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Fo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,u,d,g){db(r,a,u,d,g,4)}}Bt(Ml,"AlphaImage"),Bt(Fo,"RGBAImage");var LB={paint:new dt({"heatmap-radius":new Qe(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qe(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ze(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new at(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ze(nt.paint_heatmap["heatmap-opacity"])})};function fb(o){const r={},a=o.resolution||256,u=o.clips?o.clips.length:1,d=o.image||new Fo({width:a,height:u}),g=(_,w,T)=>{r[o.evaluationKey]=T;const S=o.expression.evaluate(r);d.data[_+w+0]=Math.floor(255*S.r/S.a),d.data[_+w+1]=Math.floor(255*S.g/S.a),d.data[_+w+2]=Math.floor(255*S.b/S.a),d.data[_+w+3]=Math.floor(255*S.a)};if(o.clips)for(let _=0,w=0;_<u;++_,w+=4*a)for(let T=0,S=0;T<a;T++,S+=4){const R=T/(a-1),{start:L,end:B}=o.clips[_];g(w,S,L*(1-R)+B*R)}else for(let _=0,w=0;_<a;_++,w+=4)g(0,w,_/(a-1));return d}var zB={paint:new dt({"hillshade-illumination-direction":new ze(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ze(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ze(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ze(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ze(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ze(nt.paint_hillshade["hillshade-accent-color"])})};const NB=$t([{name:"a_pos",components:2,type:"Int16"}],4),{members:BB}=NB;var ef={};function o0(o,r,a){a=a||2;var u,d,g,_,w,T,S,R=r&&r.length,L=R?r[0]*a:o.length,B=PA(o,0,L,a,!0),j=[];if(!B||B.next===B.prev)return j;if(R&&(B=function(Q,ie,pe,xe){var he,ve,Te,we=[];for(he=0,ve=ie.length;he<ve;he++)(Te=PA(Q,ie[he]*xe,he<ve-1?ie[he+1]*xe:Q.length,xe,!1))===Te.next&&(Te.steiner=!0),we.push(qB(Te));for(we.sort(GB),he=0;he<we.length;he++)pe=$B(we[he],pe);return pe}(o,r,B,a)),o.length>80*a){u=g=o[0],d=_=o[1];for(var q=a;q<L;q+=a)(w=o[q])<u&&(u=w),(T=o[q+1])<d&&(d=T),w>g&&(g=w),T>_&&(_=T);S=(S=Math.max(g-u,_-d))!==0?32767/S:0}return Im(B,j,a,u,d,S,0),j}function PA(o,r,a,u,d){var g,_;if(d===gb(o,r,a,u)>0)for(g=r;g<a;g+=u)_=OA(g,o[g],o[g+1],_);else for(g=a-u;g>=r;g-=u)_=OA(g,o[g],o[g+1],_);return _&&s0(_,_.next)&&(Am(_),_=_.next),_}function fh(o,r){if(!o)return o;r||(r=o);var a,u=o;do if(a=!1,u.steiner||!s0(u,u.next)&&Wr(u.prev,u,u.next)!==0)u=u.next;else{if(Am(u),(u=r=u.prev)===u.next)break;a=!0}while(a||u!==r);return r}function Im(o,r,a,u,d,g,_){if(o){!_&&g&&function(R,L,B,j){var q=R;do q.z===0&&(q.z=pb(q.x,q.y,L,B,j)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==R);q.prevZ.nextZ=null,q.prevZ=null,function(Q){var ie,pe,xe,he,ve,Te,we,Ze,$e=1;do{for(pe=Q,Q=null,ve=null,Te=0;pe;){for(Te++,xe=pe,we=0,ie=0;ie<$e&&(we++,xe=xe.nextZ);ie++);for(Ze=$e;we>0||Ze>0&&xe;)we!==0&&(Ze===0||!xe||pe.z<=xe.z)?(he=pe,pe=pe.nextZ,we--):(he=xe,xe=xe.nextZ,Ze--),ve?ve.nextZ=he:Q=he,he.prevZ=ve,ve=he;pe=xe}ve.nextZ=null,$e*=2}while(Te>1)}(q)}(o,u,d,g);for(var w,T,S=o;o.prev!==o.next;)if(w=o.prev,T=o.next,g?UB(o,u,d,g):FB(o))r.push(w.i/a|0),r.push(o.i/a|0),r.push(T.i/a|0),Am(o),o=T.next,S=T.next;else if((o=T)===S){_?_===1?Im(o=VB(fh(o),r,a),r,a,u,d,g,2):_===2&&jB(o,r,a,u,d,g):Im(fh(o),r,a,u,d,g,1);break}}}function FB(o){var r=o.prev,a=o,u=o.next;if(Wr(r,a,u)>=0)return!1;for(var d=r.x,g=a.x,_=u.x,w=r.y,T=a.y,S=u.y,R=d<g?d<_?d:_:g<_?g:_,L=w<T?w<S?w:S:T<S?T:S,B=d>g?d>_?d:_:g>_?g:_,j=w>T?w>S?w:S:T>S?T:S,q=u.next;q!==r;){if(q.x>=R&&q.x<=B&&q.y>=L&&q.y<=j&&tf(d,w,g,T,_,S,q.x,q.y)&&Wr(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function UB(o,r,a,u){var d=o.prev,g=o,_=o.next;if(Wr(d,g,_)>=0)return!1;for(var w=d.x,T=g.x,S=_.x,R=d.y,L=g.y,B=_.y,j=w<T?w<S?w:S:T<S?T:S,q=R<L?R<B?R:B:L<B?L:B,Q=w>T?w>S?w:S:T>S?T:S,ie=R>L?R>B?R:B:L>B?L:B,pe=pb(j,q,r,a,u),xe=pb(Q,ie,r,a,u),he=o.prevZ,ve=o.nextZ;he&&he.z>=pe&&ve&&ve.z<=xe;){if(he.x>=j&&he.x<=Q&&he.y>=q&&he.y<=ie&&he!==d&&he!==_&&tf(w,R,T,L,S,B,he.x,he.y)&&Wr(he.prev,he,he.next)>=0||(he=he.prevZ,ve.x>=j&&ve.x<=Q&&ve.y>=q&&ve.y<=ie&&ve!==d&&ve!==_&&tf(w,R,T,L,S,B,ve.x,ve.y)&&Wr(ve.prev,ve,ve.next)>=0))return!1;ve=ve.nextZ}for(;he&&he.z>=pe;){if(he.x>=j&&he.x<=Q&&he.y>=q&&he.y<=ie&&he!==d&&he!==_&&tf(w,R,T,L,S,B,he.x,he.y)&&Wr(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;ve&&ve.z<=xe;){if(ve.x>=j&&ve.x<=Q&&ve.y>=q&&ve.y<=ie&&ve!==d&&ve!==_&&tf(w,R,T,L,S,B,ve.x,ve.y)&&Wr(ve.prev,ve,ve.next)>=0)return!1;ve=ve.nextZ}return!0}function VB(o,r,a){var u=o;do{var d=u.prev,g=u.next.next;!s0(d,g)&&RA(d,u,u.next,g)&&Mm(d,g)&&Mm(g,d)&&(r.push(d.i/a|0),r.push(u.i/a|0),r.push(g.i/a|0),Am(u),Am(u.next),u=o=g),u=u.next}while(u!==o);return fh(u)}function jB(o,r,a,u,d,g){var _=o;do{for(var w=_.next.next;w!==_.prev;){if(_.i!==w.i&&HB(_,w)){var T=DA(_,w);return _=fh(_,_.next),T=fh(T,T.next),Im(_,r,a,u,d,g,0),void Im(T,r,a,u,d,g,0)}w=w.next}_=_.next}while(_!==o)}function GB(o,r){return o.x-r.x}function $B(o,r){var a=function(d,g){var _,w=g,T=d.x,S=d.y,R=-1/0;do{if(S<=w.y&&S>=w.next.y&&w.next.y!==w.y){var L=w.x+(S-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(L<=T&&L>R&&(R=L,_=w.x<w.next.x?w:w.next,L===T))return _}w=w.next}while(w!==g);if(!_)return null;var B,j=_,q=_.x,Q=_.y,ie=1/0;w=_;do T>=w.x&&w.x>=q&&T!==w.x&&tf(S<Q?T:R,S,q,Q,S<Q?R:T,S,w.x,w.y)&&(B=Math.abs(S-w.y)/(T-w.x),Mm(w,d)&&(B<ie||B===ie&&(w.x>_.x||w.x===_.x&&WB(_,w)))&&(_=w,ie=B)),w=w.next;while(w!==j);return _}(o,r);if(!a)return r;var u=DA(a,o);return fh(u,u.next),fh(a,a.next)}function WB(o,r){return Wr(o.prev,o,r.prev)<0&&Wr(r.next,o,o.next)<0}function pb(o,r,a,u,d){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*d|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*d|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function qB(o){var r=o,a=o;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==o);return a}function tf(o,r,a,u,d,g,_,w){return(d-_)*(r-w)>=(o-_)*(g-w)&&(o-_)*(u-w)>=(a-_)*(r-w)&&(a-_)*(g-w)>=(d-_)*(u-w)}function HB(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(a,u){var d=a;do{if(d.i!==a.i&&d.next.i!==a.i&&d.i!==u.i&&d.next.i!==u.i&&RA(d,d.next,a,u))return!0;d=d.next}while(d!==a);return!1}(o,r)&&(Mm(o,r)&&Mm(r,o)&&function(a,u){var d=a,g=!1,_=(a.x+u.x)/2,w=(a.y+u.y)/2;do d.y>w!=d.next.y>w&&d.next.y!==d.y&&_<(d.next.x-d.x)*(w-d.y)/(d.next.y-d.y)+d.x&&(g=!g),d=d.next;while(d!==a);return g}(o,r)&&(Wr(o.prev,o,r.prev)||Wr(o,r.prev,r))||s0(o,r)&&Wr(o.prev,o,o.next)>0&&Wr(r.prev,r,r.next)>0)}function Wr(o,r,a){return(r.y-o.y)*(a.x-r.x)-(r.x-o.x)*(a.y-r.y)}function s0(o,r){return o.x===r.x&&o.y===r.y}function RA(o,r,a,u){var d=l0(Wr(o,r,a)),g=l0(Wr(o,r,u)),_=l0(Wr(a,u,o)),w=l0(Wr(a,u,r));return d!==g&&_!==w||!(d!==0||!a0(o,a,r))||!(g!==0||!a0(o,u,r))||!(_!==0||!a0(a,o,u))||!(w!==0||!a0(a,r,u))}function a0(o,r,a){return r.x<=Math.max(o.x,a.x)&&r.x>=Math.min(o.x,a.x)&&r.y<=Math.max(o.y,a.y)&&r.y>=Math.min(o.y,a.y)}function l0(o){return o>0?1:o<0?-1:0}function Mm(o,r){return Wr(o.prev,o,o.next)<0?Wr(o,r,o.next)>=0&&Wr(o,o.prev,r)>=0:Wr(o,r,o.prev)<0||Wr(o,o.next,r)<0}function DA(o,r){var a=new mb(o.i,o.x,o.y),u=new mb(r.i,r.x,r.y),d=o.next,g=r.prev;return o.next=r,r.prev=o,a.next=d,d.prev=a,u.next=a,a.prev=u,g.next=u,u.prev=g,u}function OA(o,r,a,u){var d=new mb(o,r,a);return u?(d.next=u.next,d.prev=u,u.next.prev=d,u.next=d):(d.prev=d,d.next=d),d}function Am(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function mb(o,r,a){this.i=o,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gb(o,r,a,u){for(var d=0,g=r,_=a-u;g<a;g+=u)d+=(o[_]-o[g])*(o[g+1]+o[_+1]),_=g;return d}function ZB(o,r,a,u,d){kA(o,r,a||0,u||o.length-1,d||YB)}function kA(o,r,a,u,d){for(;u>a;){if(u-a>600){var g=u-a+1,_=r-a+1,w=Math.log(g),T=.5*Math.exp(2*w/3),S=.5*Math.sqrt(w*T*(g-T)/g)*(_-g/2<0?-1:1);kA(o,r,Math.max(a,Math.floor(r-_*T/g+S)),Math.min(u,Math.floor(r+(g-_)*T/g+S)),d)}var R=o[r],L=a,B=u;for(Cm(o,a,r),d(o[u],R)>0&&Cm(o,a,u);L<B;){for(Cm(o,L,B),L++,B--;d(o[L],R)<0;)L++;for(;d(o[B],R)>0;)B--}d(o[a],R)===0?Cm(o,a,B):Cm(o,++B,u),B<=r&&(a=B+1),r<=B&&(u=B-1)}}function Cm(o,r,a){var u=o[r];o[r]=o[a],o[a]=u}function YB(o,r){return o<r?-1:o>r?1:0}function yb(o,r){const a=o.length;if(a<=1)return[o];const u=[];let d,g;for(let _=0;_<a;_++){const w=yn(o[_]);w!==0&&(o[_].area=Math.abs(w),g===void 0&&(g=w<0),g===w<0?(d&&u.push(d),d=[o[_]]):d.push(o[_]))}if(d&&u.push(d),r>1)for(let _=0;_<u.length;_++)u[_].length<=r||(ZB(u[_],r,1,u[_].length-1,XB),u[_]=u[_].slice(0,r));return u}function XB(o,r){return r.area-o.area}function _b(o,r,a){const u=a.patternDependencies;let d=!1;for(const g of r){const _=g.paint.get(`${o}-pattern`);_.isConstant()||(d=!0);const w=_.constantOr(null);w&&(d=!0,u[w]=!0)}return d}function vb(o,r,a,u,d){const g=d.patternDependencies;for(const _ of r){const w=_.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let T=w.evaluate({zoom:u},a,{},d.availableImages);T=T&&T.name?T.name:T,g[T]=!0,a.patterns[_.id]=T}}return a}({get exports(){return ef},set exports(o){ef=o}}).exports=o0,ef.default=o0,o0.deviation=function(o,r,a,u){var d=r&&r.length,g=Math.abs(gb(o,0,d?r[0]*a:o.length,a));if(d)for(var _=0,w=r.length;_<w;_++)g-=Math.abs(gb(o,r[_]*a,_<w-1?r[_+1]*a:o.length,a));var T=0;for(_=0;_<u.length;_+=3){var S=u[_]*a,R=u[_+1]*a,L=u[_+2]*a;T+=Math.abs((o[S]-o[L])*(o[R+1]-o[S+1])-(o[S]-o[R])*(o[L+1]-o[S+1]))}return g===0&&T===0?0:Math.abs((T-g)/g)},o0.flatten=function(o){for(var r=o[0][0].length,a={vertices:[],holes:[],dimensions:r},u=0,d=0;d<o.length;d++){for(var g=0;g<o[d].length;g++)for(var _=0;_<r;_++)a.vertices.push(o[d][g][_]);d>0&&a.holes.push(u+=o[d-1].length)}return a};class c0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Zt,this.indexArray=new Ri,this.indexArray2=new Da,this.programConfigurations=new oh(r.layers,r.zoom),this.segments=new $r,this.segments2=new $r,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=r.projection}populate(r,a,u,d){this.hasPattern=_b("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:w,id:T,index:S,sourceLayerIndex:R}of r){const L=this.layers[0]._featureFilter.needGeometry,B=hh(w,L);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),B,u))continue;const j=g?g.evaluate(B,{},u,a.availableImages):void 0,q={id:T,properties:w.properties,type:w.type,sourceLayerIndex:R,index:S,geometry:L?B.geometry:Il(w,u,d),patterns:{},sortKey:j};_.push(q)}g&&_.sort((w,T)=>w.sortKey-T.sortKey);for(const w of _){const{geometry:T,index:S,sourceLayerIndex:R}=w;if(this.hasPattern){const L=vb("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(w,T,S,u,{},a.availableImages);a.featureIndex.insert(r[S].feature,T,S,R,this.index)}}update(r,a,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,d)}addFeatures(r,a,u,d,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,a,u,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,BB),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,u,d,g,_=[]){for(const w of yb(a,500)){let T=0;for(const q of w)T+=q.length;const S=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),R=S.vertexLength,L=[],B=[];for(const q of w){if(q.length===0)continue;q!==w[0]&&B.push(L.length/2);const Q=this.segments2.prepareSegment(q.length,this.layoutVertexArray,this.indexArray2),ie=Q.vertexLength;this.layoutVertexArray.emplaceBack(q[0].x,q[0].y),this.indexArray2.emplaceBack(ie+q.length-1,ie),L.push(q[0].x),L.push(q[0].y);for(let pe=1;pe<q.length;pe++)this.layoutVertexArray.emplaceBack(q[pe].x,q[pe].y),this.indexArray2.emplaceBack(ie+pe-1,ie+pe),L.push(q[pe].x),L.push(q[pe].y);Q.vertexLength+=q.length,Q.primitiveLength+=q.length}const j=ef(L,B);for(let q=0;q<j.length;q+=3)this.indexArray.emplaceBack(R+j[q],R+j[q+1],R+j[q+2]);S.vertexLength+=T,S.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,_,d)}}Bt(c0,"FillBucket",{omit:["layers","patternFeatures"]});const QB=new dt({"fill-sort-key":new Qe(nt.layout_fill["fill-sort-key"])});var KB={paint:new dt({"fill-antialias":new ze(nt.paint_fill["fill-antialias"]),"fill-opacity":new Qe(nt.paint_fill["fill-opacity"]),"fill-color":new Qe(nt.paint_fill["fill-color"]),"fill-outline-color":new Qe(nt.paint_fill["fill-outline-color"]),"fill-translate":new ze(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new ze(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qe(nt.paint_fill["fill-pattern"])}),layout:QB};const JB=$t([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),eF=$t([{name:"a_centroid_pos",components:2,type:"Uint16"}]),tF=$t([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:nF}=JB;var u0={},rF=$,LA=nf;function nf(o,r,a,u,d){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=u,this._values=d,o.readFields(iF,this,r)}function iF(o,r,a){o==1?r.id=a.readVarint():o==2?function(u,d){for(var g=u.readVarint()+u.pos;u.pos<g;){var _=d._keys[u.readVarint()],w=d._values[u.readVarint()];d.properties[_]=w}}(a,r):o==3?r.type=a.readVarint():o==4&&(r._geometry=a.pos)}function oF(o){for(var r,a,u=0,d=0,g=o.length,_=g-1;d<g;_=d++)u+=((a=o[_]).x-(r=o[d]).x)*(r.y+a.y);return u}nf.types=["Unknown","Point","LineString","Polygon"],nf.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,a=o.readVarint()+o.pos,u=1,d=0,g=0,_=0,w=[];o.pos<a;){if(d<=0){var T=o.readVarint();u=7&T,d=T>>3}if(d--,u===1||u===2)g+=o.readSVarint(),_+=o.readSVarint(),u===1&&(r&&w.push(r),r=[]),r.push(new rF(g,_));else{if(u!==7)throw new Error("unknown command "+u);r&&r.push(r[0].clone())}}return r&&w.push(r),w},nf.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,a=1,u=0,d=0,g=0,_=1/0,w=-1/0,T=1/0,S=-1/0;o.pos<r;){if(u<=0){var R=o.readVarint();a=7&R,u=R>>3}if(u--,a===1||a===2)(d+=o.readSVarint())<_&&(_=d),d>w&&(w=d),(g+=o.readSVarint())<T&&(T=g),g>S&&(S=g);else if(a!==7)throw new Error("unknown command "+a)}return[_,T,w,S]},nf.prototype.toGeoJSON=function(o,r,a){var u,d,g=this.extent*Math.pow(2,a),_=this.extent*o,w=this.extent*r,T=this.loadGeometry(),S=nf.types[this.type];function R(j){for(var q=0;q<j.length;q++){var Q=j[q];j[q]=[360*(Q.x+_)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(Q.y+w)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(u=0;u<T.length;u++)L[u]=T[u][0];R(T=L);break;case 2:for(u=0;u<T.length;u++)R(T[u]);break;case 3:for(T=function(j){var q=j.length;if(q<=1)return[j];for(var Q,ie,pe=[],xe=0;xe<q;xe++){var he=oF(j[xe]);he!==0&&(ie===void 0&&(ie=he<0),ie===he<0?(Q&&pe.push(Q),Q=[j[xe]]):Q.push(j[xe]))}return Q&&pe.push(Q),pe}(T),u=0;u<T.length;u++)for(d=0;d<T[u].length;d++)R(T[u][d])}T.length===1?T=T[0]:S="Multi"+S;var B={type:"Feature",geometry:{type:S,coordinates:T},properties:this.properties};return"id"in this&&(B.id=this.id),B};var sF=LA,zA=NA;function NA(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(aF,this,r),this.length=this._features.length}function aF(o,r,a){o===15?r.version=a.readVarint():o===1?r.name=a.readString():o===5?r.extent=a.readVarint():o===2?r._features.push(a.pos):o===3?r._keys.push(a.readString()):o===4&&r._values.push(function(u){for(var d=null,g=u.readVarint()+u.pos;u.pos<g;){var _=u.readVarint()>>3;d=_===1?u.readString():_===2?u.readFloat():_===3?u.readDouble():_===4?u.readVarint64():_===5?u.readVarint():_===6?u.readSVarint():_===7?u.readBoolean():null}return d}(a))}NA.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new sF(this._pbf,r,this.extent,this._keys,this._values)};var lF=zA;function cF(o,r,a){if(o===3){var u=new lF(a,a.readVarint()+a.pos);u.length&&(r[u.name]=u)}}var xb=u0.VectorTile=function(o,r){this.layers=o.readFields(cF,{},r)},h0=u0.VectorTileFeature=LA;function d0(o,r,a,u){const d=[],g=u===0?(_,w,T,S,R,L)=>{_.push(new $(L,T+(L-w)/(S-w)*(R-T)))}:(_,w,T,S,R,L)=>{_.push(new $(w+(L-T)/(R-T)*(S-w),L))};for(const _ of o){const w=[];for(const T of _){if(T.length<=2)continue;const S=[];for(let B=0;B<T.length-1;B++){const j=T[B].x,q=T[B].y,Q=T[B+1].x,ie=T[B+1].y,pe=u===0?j:q,xe=u===0?Q:ie;pe<r?xe>r&&g(S,j,q,Q,ie,r):pe>a?xe<a&&g(S,j,q,Q,ie,a):S.push(T[B]),xe<r&&pe>=r&&g(S,j,q,Q,ie,r),xe>a&&pe<=a&&g(S,j,q,Q,ie,a)}let R=T[T.length-1];const L=u===0?R.x:R.y;L>=r&&L<=a&&S.push(R),S.length&&(R=S[S.length-1],S[0].x===R.x&&S[0].y===R.y||S.push(S[0]),w.push(S))}w.length&&d.push(w)}return d}u0.VectorTileLayer=zA;const uF=h0.types,hF=Math.pow(2,13);function Pm(o,r,a,u,d,g,_,w){o.emplaceBack((r<<1)+_,(a<<1)+g,(Math.floor(u*hF)<<1)+d,Math.round(w))}function Rm(o,r,a){o.emplaceBack(r.x,r.y,r.z,a[0]*16384,a[1]*16384,a[2]*16384)}class BA{constructor(){this.acc=new $(0,0),this.polyCount=[]}startRing(r){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new $(r.x,r.y),this.max=new $(r.x,r.y))}append(r,a){this.currentPolyCount.edges++,this.acc._add(r);const u=this.min,d=this.max;r.x<u.x?u.x=r.x:r.x>d.x&&(d.x=r.x),r.y<u.y?u.y=r.y:r.y>d.y&&(d.y=r.y),((r.x===0||r.x===sn)&&r.x===a.x)!=((r.y===0||r.y===sn)&&r.y===a.y)&&this.processBorderOverlap(r,a),a.x<0!=r.x<0&&this.addBorderIntersection(0,Rn(a.y,r.y,(0-a.x)/(r.x-a.x))),a.x>sn!=r.x>sn&&this.addBorderIntersection(1,Rn(a.y,r.y,(sn-a.x)/(r.x-a.x))),a.y<0!=r.y<0&&this.addBorderIntersection(2,Rn(a.x,r.x,(0-a.y)/(r.y-a.y))),a.y>sn!=r.y>sn&&this.addBorderIntersection(3,Rn(a.x,r.x,(sn-a.y)/(r.y-a.y)))}addBorderIntersection(r,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[r];a<u[0]&&(u[0]=a),a>u[1]&&(u[1]=a)}processBorderOverlap(r,a){if(r.x===a.x){if(r.y===a.y)return;const u=r.x===0?0:1;this.addBorderIntersection(u,a.y),this.addBorderIntersection(u,r.y)}else{const u=r.y===0?2:3;this.addBorderIntersection(u,a.x),this.addBorderIntersection(u,r.x)}}centroid(){const r=this.polyCount.reduce((a,u)=>a+u.edges,0);return r!==0?this.acc.div(r)._round():new $(0,0)}span(){return new $(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((r,a)=>r+ +(a[0]!==Number.MAX_VALUE),0)}}class Dm{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.layoutVertexArray=new Un,this.centroidVertexArray=new FM,this.indexArray=new Ri,this.programConfigurations=new oh(r.layers,r.zoom),this.segments=new $r,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=r.enableTerrain}populate(r,a,u,d){this.features=[],this.hasPattern=_b("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const _=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*_/(_*_+1)/sn/(1<<g.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:_,index:w,sourceLayerIndex:T}of r){const S=this.layers[0]._featureFilter.needGeometry,R=hh(g,S);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),R,u))continue;const L={id:_,sourceLayerIndex:T,index:w,geometry:S?R.geometry:Il(g,u,d),properties:g.properties,type:g.type,patterns:{}},B=this.layoutVertexArray.length;this.hasPattern?this.features.push(vb("fill-extrusion",this.layers,L,this.zoom,a)):this.addFeature(L,L.geometry,w,u,{},a.availableImages,d),a.featureIndex.insert(g,L.geometry,w,T,this.index,B)}this.sortBorders()}addFeatures(r,a,u,d,g){for(const _ of this.features){const{geometry:w}=_;this.addFeature(_,w,_.index,a,u,d,g)}this.sortBorders()}update(r,a,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,nF),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,tF.members,!0))),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,eF.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,u,d,g,_,w){const T=[new $(0,0),new $(sn,sn)],S=w.projection,R=S.name==="globe",L=this.enableTerrain&&!R?new BA:null,B=uF[r.type]==="Polygon";R&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Qo);const j=yb(a,500);for(let pe=j.length-1;pe>=0;pe--){const xe=j[pe];(xe.length===0||(q=xe[0]).every(he=>he.x<=0)||q.every(he=>he.x>=sn)||q.every(he=>he.y<=0)||q.every(he=>he.y>=sn))&&j.splice(pe,1)}var q;let Q;if(R)Q=WA(j,T,d);else{Q=[];for(const pe of j)Q.push({polygon:pe,bounds:T})}const ie=B?this.edgeRadius:0;for(const{polygon:pe,bounds:xe}of Q){let he=0,ve=0;for(const we of pe)B&&!we[0].equals(we[we.length-1])&&we.push(we[0]),ve+=B?we.length-1:we.length;const Te=this.segments.prepareSegment((B?5:4)*ve,this.layoutVertexArray,this.indexArray);if(B){const we=[],Ze=[];he=Te.vertexLength;for(const rt of pe){let mt,Ke;rt.length&&rt!==pe[0]&&Ze.push(we.length/2),mt=rt[1].sub(rt[0])._perp()._unit();for(let it=1;it<rt.length;it++){const st=rt[it],ht=rt[it===rt.length-1?1:it+1];let{x:gt,y:Je}=st;if(ie){Ke=ht.sub(st)._perp()._unit();const Tt=mt.add(Ke)._unit(),en=ie*Math.min(4,1/(mt.x*Tt.x+mt.y*Tt.y));gt+=en*Tt.x,Je+=en*Tt.y,mt=Ke}Pm(this.layoutVertexArray,gt,Je,0,0,1,1,0),Te.vertexLength++,we.push(st.x,st.y),R&&Rm(this.layoutVertexExtArray,S.projectTilePoint(gt,Je,d),S.upVector(d,gt,Je))}}const $e=ef(we,Ze);for(let rt=0;rt<$e.length;rt+=3)this.indexArray.emplaceBack(he+$e[rt],he+$e[rt+2],he+$e[rt+1]),Te.primitiveLength++}for(const we of pe){L&&we.length&&L.startRing(we[0]);let Ze,$e,rt,mt=we.length>4&&jA(we[we.length-2],we[0],we[1]),Ke=ie?dF(we[we.length-2],we[0],we[1],ie):0;$e=we[1].sub(we[0])._perp()._unit();let it=!0;for(let st=1,ht=0;st<we.length;st++){let gt=we[st-1],Je=we[st];const Tt=we[st===we.length-1?1:st+1];if(L&&B&&L.currentPolyCount.top++,VA(Je,gt,xe)){ie&&($e=Tt.sub(Je)._perp()._unit(),it=!it);continue}L&&L.append(Je,gt);const en=Je.sub(gt)._perp(),Rt=en.x/(Math.abs(en.x)+Math.abs(en.y)),Ut=en.y>0?1:0,St=gt.dist(Je);if(ht+St>32768&&(ht=0),ie){rt=Tt.sub(Je)._perp()._unit();let mn=UA(gt,Je,Tt,FA($e,rt),ie);isNaN(mn)&&(mn=0);const rn=Je.sub(gt)._unit();gt=gt.add(rn.mult(Ke))._round(),Je=Je.add(rn.mult(-mn))._round(),Ke=mn,$e=rt}const nn=Te.vertexLength,bn=we.length>4&&jA(gt,Je,Tt);let vn=GA(ht,mt,it);if(Pm(this.layoutVertexArray,gt.x,gt.y,Rt,Ut,0,0,vn),Pm(this.layoutVertexArray,gt.x,gt.y,Rt,Ut,0,1,vn),ht+=St,vn=GA(ht,bn,!it),mt=bn,Pm(this.layoutVertexArray,Je.x,Je.y,Rt,Ut,0,0,vn),Pm(this.layoutVertexArray,Je.x,Je.y,Rt,Ut,0,1,vn),Te.vertexLength+=4,this.indexArray.emplaceBack(nn+0,nn+1,nn+2),this.indexArray.emplaceBack(nn+1,nn+3,nn+2),Te.primitiveLength+=2,ie){const mn=he+(st===1?we.length-2:st-2),rn=st===1?he:mn+1;if(this.indexArray.emplaceBack(nn+1,mn,nn+3),this.indexArray.emplaceBack(mn,rn,nn+3),Te.primitiveLength+=2,Ze===void 0&&(Ze=nn),!VA(Tt,we[st],xe)){const jn=st===we.length-1?Ze:Te.vertexLength;this.indexArray.emplaceBack(nn+2,nn+3,jn),this.indexArray.emplaceBack(nn+3,jn+1,jn),this.indexArray.emplaceBack(nn+3,rn,jn+1),Te.primitiveLength+=3}it=!it}if(R){const mn=this.layoutVertexExtArray,rn=S.projectTilePoint(gt.x,gt.y,d),jn=S.projectTilePoint(Je.x,Je.y,d),cn=S.upVector(d,gt.x,gt.y),En=S.upVector(d,Je.x,Je.y);Rm(mn,rn,cn),Rm(mn,rn,cn),Rm(mn,jn,En),Rm(mn,jn,En)}}B&&(he+=we.length-1)}}if(L&&L.polyCount.length>0){if(L.borders){L.vertexArrayOffset=this.centroidVertexArray.length;const pe=L.borders,xe=this.featuresOnBorder.push(L)-1;for(let he=0;he<4;he++)pe[he][0]!==Number.MAX_VALUE&&this.borders[he].push(xe)}this.encodeCentroid(L.borders?void 0:L.centroid(),L)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,_,d)}sortBorders(){for(let r=0;r<4;r++)this.borders[r].sort((a,u)=>this.featuresOnBorder[a].borders[r][0]-this.featuresOnBorder[u].borders[r][0])}encodeCentroid(r,a,u=!0){let d,g;if(r)if(r.y!==0){const w=a.span()._mult(this.tileToMeter);d=(Math.max(r.x,1)<<3)+Math.min(7,Math.round(w.x/10)),g=(Math.max(r.y,1)<<3)+Math.min(7,Math.round(w.y/10))}else d=Math.ceil(7*(r.x+450)),g=0;else d=0,g=+u;let _=u?this.centroidVertexArray.length:a.vertexArrayOffset;for(const w of a.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*w.edges+w.top);for(let T=0;T<w.top;T++)this.centroidVertexArray.emplace(_++,d,g);for(let T=0;T<2*w.edges;T++)this.centroidVertexArray.emplace(_++,0,g),this.centroidVertexArray.emplace(_++,d,g)}}}function FA(o,r){const a=o.add(r)._unit();return o.x*a.x+o.y*a.y}function dF(o,r,a,u){const d=r.sub(o)._perp()._unit(),g=a.sub(r)._perp()._unit();return UA(o,r,a,FA(d,g),u)}function UA(o,r,a,u,d){const g=Math.sqrt(1-u*u);return Math.min(o.dist(r)/3,r.dist(a)/3,d*g/u)}function VA(o,r,a){return o.x<a[0].x&&r.x<a[0].x||o.x>a[1].x&&r.x>a[1].x||o.y<a[0].y&&r.y<a[0].y||o.y>a[1].y&&r.y>a[1].y}function jA(o,r,a){if(o.x<0||o.x>=sn||r.x<0||r.x>=sn||a.x<0||a.x>=sn)return!1;const u=a.sub(r),d=u.perp(),g=o.sub(r);return(u.x*g.x+u.y*g.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(g.x*g.x+g.y*g.y))>-.866&&d.x*g.x+d.y*g.y<0}function GA(o,r,a){const u=r?2|o:-3&o;return a?1|u:-2&u}function $A(){const o=Math.PI/32,r=Math.tan(o),a=Sm;return a*Math.sqrt(1+2*r*r)-a}function WA(o,r,a){const u=1<<a.z,d=Jo(a.x/u),g=Jo((a.x+1)/u),_=Di(a.y/u),w=Di((a.y+1)/u);return function(T,S,R,L,B=0,j){const q=[];if(!T.length||!R||!L)return q;const Q=(we,Ze)=>{for(const $e of we)q.push({polygon:$e,bounds:Ze})},ie=Math.ceil(Math.log2(R)),pe=Math.ceil(Math.log2(L)),xe=ie-pe,he=[];for(let we=0;we<Math.abs(xe);we++)he.push(xe>0?0:1);for(let we=0;we<Math.min(ie,pe);we++)he.push(0),he.push(1);let ve=T;if(ve=d0(ve,S[0].y-B,S[1].y+B,1),ve=d0(ve,S[0].x-B,S[1].x+B,0),!ve.length)return q;const Te=[];for(he.length?Te.push({polygons:ve,bounds:S,depth:0}):Q(ve,S);Te.length;){const we=Te.pop(),Ze=we.depth,$e=he[Ze],rt=we.bounds[0],mt=we.bounds[1],Ke=$e===0?rt.x:rt.y,it=$e===0?mt.x:mt.y,st=j?j($e,Ke,it):.5*(Ke+it),ht=d0(we.polygons,Ke-B,st+B,$e),gt=d0(we.polygons,st-B,it+B,$e);if(ht.length){const Je=[rt,new $($e===0?st:mt.x,$e===1?st:mt.y)];he.length>Ze+1?Te.push({polygons:ht,bounds:Je,depth:Ze+1}):Q(ht,Je)}if(gt.length){const Je=[new $($e===0?st:rt.x,$e===1?st:rt.y),mt];he.length>Ze+1?Te.push({polygons:gt,bounds:Je,depth:Ze+1}):Q(gt,Je)}}return q}(o,r,Math.ceil((g-d)/11.25),Math.ceil((_-w)/11.25),1,(T,S,R)=>{if(T===0)return .5*(S+R);{const L=Di((a.y+S/sn)/u);return(Na(.5*(Di((a.y+R/sn)/u)+L))*u-a.y)*sn}})}Bt(Dm,"FillExtrusionBucket",{omit:["layers","features"]}),Bt(BA,"PartMetadata");const fF=new dt({"fill-extrusion-edge-radius":new ze(nt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var pF={paint:new dt({"fill-extrusion-opacity":new ze(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qe(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ze(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ze(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qe(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qe(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qe(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ze(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ze(nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ze(nt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:fF};function qA(o,r,a){var u=2*Math.PI*6378137/256/Math.pow(2,a);return[o*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}class f0{constructor(r,a,u){this.z=r,this.x=a,this.y=u,this.key=Om(0,r,r,a,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a){const u=function(g,_,w){var T=qA(256*g,256*(_=Math.pow(2,w)-_-1),w),S=qA(256*(g+1),256*(_+1),w);return T[0]+","+T[1]+","+S[0]+","+S[1]}(this.x,this.y,this.z),d=function(g,_,w){let T,S="";for(let R=g;R>0;R--)T=1<<R-1,S+=(_&T?1:0)+(w&T?2:0);return S}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class HA{constructor(r,a){this.wrap=r,this.canonical=a,this.key=Om(r,a.z,a.z,a.x,a.y)}}class ro{constructor(r,a,u,d,g){this.overscaledZ=r,this.wrap=a,this.canonical=new f0(u,+d,+g),this.key=a===0&&r===u?this.canonical.key:Om(a,r,u,d,g)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const a=this.canonical.z-r;return r>this.canonical.z?new ro(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ro(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(r,a=!0){if(this.overscaledZ===r&&a)return this.key;if(r>this.canonical.z)return Om(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-r;return Om(this.wrap*+a,r,r,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const a=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new ro(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,u=2*this.canonical.x,d=2*this.canonical.y;return[new ro(a,this.wrap,a,u,d),new ro(a,this.wrap,a,u+1,d),new ro(a,this.wrap,a,u,d+1),new ro(a,this.wrap,a,u+1,d+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new ro(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new ro(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new HA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Om(o,r,a,u,d){const g=1<<Math.min(a,22);let _=g*(d%g)+u%g;return o&&a<22&&(_+=g*g*((o<0?-2*o-1:2*o)%(1<<2*(22-a)))),16*(32*_+a)+(r-a)}Bt(f0,"CanonicalTileID"),Bt(ro,"OverscaledTileID",{omit:["projMatrix"]});class rf extends ${constructor(r,a,u){super(r,a),this.z=u}}function km(o,r){return o.x*r.x+o.y*r.y}function ZA(o,r){if(o.length===1){let a=0;const u=r[a++];let d;for(;!d||u.equals(d);)if(d=r[a++],!d)return 1/0;for(;a<r.length;a++){const g=r[a],_=o[0],w=d.sub(u),T=g.sub(u),S=_.sub(u),R=km(w,w),L=km(w,T),B=km(T,T),j=km(S,w),q=km(S,T),Q=R*B-L*L,ie=(B*j-L*q)/Q,pe=(R*q-L*j)/Q,xe=u.z*(1-ie-pe)+d.z*ie+g.z*pe;if(isFinite(xe))return xe}return 1/0}{let a=1/0;for(const u of r)a=Math.min(a,u.z);return a}}function YA(o,r,a,u,d,g,_,w){const T=_*d.getElevationAt(o,r,!0,!0),S=g[0]!==0,R=S?g[1]===0?_*(g[0]/7-450):_*function(L,B,j){const q=Math.floor(B[0]/8),Q=Math.floor(B[1]/8),ie=10*(B[0]-8*q),pe=10*(B[1]-8*Q),xe=L.getElevationAt(q,Q,!0,!0),he=L.getMeterToDEM(j),ve=Math.floor(.5*(ie*he-1)),Te=Math.floor(.5*(pe*he-1)),we=L.tileCoordToPixel(q,Q),Ze=2*ve+1,$e=2*Te+1,rt=function(gt,Je,Tt,en,Rt){return[gt.getElevationAtPixel(Je,Tt,!0),gt.getElevationAtPixel(Je+Rt,Tt,!0),gt.getElevationAtPixel(Je,Tt+Rt,!0),gt.getElevationAtPixel(Je+en,Tt+Rt,!0)]}(L,we.x-ve,we.y-Te,Ze,$e),mt=Math.abs(rt[0]-rt[1]),Ke=Math.abs(rt[2]-rt[3]),it=Math.abs(rt[0]-rt[2])+Math.abs(rt[1]-rt[3]),st=Math.min(.25,.5*he*(mt+Ke)/Ze),ht=Math.min(.25,.5*he*it/$e);return xe+Math.max(st*ie,ht*pe)}(d,g,w):T;return{base:T+(a===0)?-1:a,top:S?Math.max(R+u,T+a+2):T+u}}const mF=$t([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:gF}=mF,yF=$t([{name:"a_packed",components:4,type:"Float32"}]),{members:_F}=yF,vF=h0.types,xF=Math.cos(Math.PI/180*37.5);class p0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new ir,this.layoutVertexArray2=new Jn,this.indexArray=new Ri,this.programConfigurations=new oh(r.layers,r.zoom),this.segments=new $r,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,u,d){this.hasPattern=_b("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),_=[];for(const{feature:R,id:L,index:B,sourceLayerIndex:j}of r){const q=this.layers[0]._featureFilter.needGeometry,Q=hh(R,q);if(!this.layers[0]._featureFilter.filter(new Ne(this.zoom),Q,u))continue;const ie=g?g.evaluate(Q,{},u):void 0,pe={id:L,properties:R.properties,type:R.type,sourceLayerIndex:j,index:B,geometry:q?Q.geometry:Il(R,u,d),patterns:{},sortKey:ie};_.push(pe)}g&&_.sort((R,L)=>R.sortKey-L.sortKey);const{lineAtlas:w,featureIndex:T}=a,S=this.addConstantDashes(w);for(const R of _){const{geometry:L,index:B,sourceLayerIndex:j}=R;if(S&&this.addFeatureDashes(R,w),this.hasPattern){const q=vb("line",this.layers,R,this.zoom,a);this.patternFeatures.push(q)}else this.addFeature(R,L,B,u,w.positions,a.availableImages);T.insert(r[B].feature,L,B,j,this.index)}}addConstantDashes(r){let a=!1;for(const u of this.layers){const d=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if(d.kind!=="constant"||g.kind!=="constant")a=!0;else{const _=g.value,w=d.value;if(!w)continue;r.addDash(w,_)}}return a}addFeatureDashes(r,a){const u=this.zoom;for(const d of this.layers){const g=d.paint.get("line-dasharray").value,_=d.layout.get("line-cap").value;if(g.kind==="constant"&&_.kind==="constant")continue;let w,T;if(g.kind==="constant"){if(w=g.value,!w)continue}else w=g.evaluate({zoom:u},r);T=_.kind==="constant"?_.value:_.evaluate({zoom:u},r),a.addDash(w,T),r.patterns[d.id]=a.getKey(w,T)}}update(r,a,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,d)}addFeatures(r,a,u,d,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,a,u,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,_F)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,gF),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,u,d,g,_){const w=this.layers[0].layout,T=w.get("line-join").evaluate(r,{}),S=w.get("line-cap").evaluate(r,{}),R=w.get("line-miter-limit"),L=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const B of a)this.addLine(B,r,T,S,R,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,_,d)}addLine(r,a,u,d,g,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<r.length-1;pe++)this.totalDistance+=r[pe].dist(r[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=vF[a.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let S=0;for(;S<T-1&&r[S].equals(r[S+1]);)S++;if(T<(w?3:2))return;u==="bevel"&&(g=1.05);const R=this.overscaling<=16?122880/(512*this.overscaling):0,L=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let B,j,q,Q,ie;this.e1=this.e2=-1,w&&(B=r[T-2],ie=r[S].sub(B)._unit()._perp());for(let pe=S;pe<T;pe++){if(q=pe===T-1?w?r[S+1]:void 0:r[pe+1],q&&r[pe].equals(q))continue;ie&&(Q=ie),B&&(j=B),B=r[pe],ie=q?q.sub(B)._unit()._perp():Q,Q=Q||ie;let xe=Q.add(ie);xe.x===0&&xe.y===0||xe._unit();const he=Q.x*ie.x+Q.y*ie.y,ve=xe.x*ie.x+xe.y*ie.y,Te=ve!==0?1/ve:1/0,we=2*Math.sqrt(2-2*ve),Ze=ve<xF&&j&&q,$e=Q.x*ie.y-Q.y*ie.x>0;if(Ze&&pe>S){const Ke=B.dist(j);if(Ke>2*R){const it=B.sub(B.sub(j)._mult(R/Ke)._round());this.updateDistance(j,it),this.addCurrentVertex(it,Q,0,0,L),j=it}}const rt=j&&q;let mt=rt?u:w?"butt":d;if(rt&&mt==="round"&&(Te<_?mt="miter":Te<=2&&(mt="fakeround")),mt==="miter"&&Te>g&&(mt="bevel"),mt==="bevel"&&(Te>2&&(mt="flipbevel"),Te<g&&(mt="miter")),j&&this.updateDistance(j,B),mt==="miter")xe._mult(Te),this.addCurrentVertex(B,xe,0,0,L);else if(mt==="flipbevel"){if(Te>100)xe=ie.mult(-1);else{const Ke=Te*Q.add(ie).mag()/Q.sub(ie).mag();xe._perp()._mult(Ke*($e?-1:1))}this.addCurrentVertex(B,xe,0,0,L),this.addCurrentVertex(B,xe.mult(-1),0,0,L)}else if(mt==="bevel"||mt==="fakeround"){const Ke=-Math.sqrt(Te*Te-1),it=$e?Ke:0,st=$e?0:Ke;if(j&&this.addCurrentVertex(B,Q,it,st,L),mt==="fakeround"){const ht=Math.round(180*we/Math.PI/20);for(let gt=1;gt<ht;gt++){let Je=gt/ht;if(Je!==.5){const en=Je-.5;Je+=Je*en*(Je-1)*((1.0904+he*(he*(3.55645-1.43519*he)-3.2452))*en*en+(.848013+he*(.215638*he-1.06021)))}const Tt=ie.sub(Q)._mult(Je)._add(Q)._unit()._mult($e?-1:1);this.addHalfVertex(B,Tt.x,Tt.y,!1,$e,0,L)}}q&&this.addCurrentVertex(B,ie,-it,-st,L)}else if(mt==="butt")this.addCurrentVertex(B,xe,0,0,L);else if(mt==="square"){const Ke=j?1:-1;j||this.addCurrentVertex(B,xe,Ke,Ke,L),this.addCurrentVertex(B,xe,0,0,L),j&&this.addCurrentVertex(B,xe,Ke,Ke,L)}else mt==="round"&&(j&&(this.addCurrentVertex(B,Q,0,0,L),this.addCurrentVertex(B,Q,1,1,L,!0)),q&&(this.addCurrentVertex(B,ie,-1,-1,L,!0),this.addCurrentVertex(B,ie,0,0,L)));if(Ze&&pe<T-1){const Ke=B.dist(q);if(Ke>2*R){const it=B.add(q.sub(B)._mult(R/Ke)._round());this.updateDistance(B,it),this.addCurrentVertex(it,ie,0,0,L),B=it}}}}addCurrentVertex(r,a,u,d,g,_=!1){const w=a.y*d-a.x,T=-a.y-a.x*d;this.addHalfVertex(r,a.x+a.y*u,a.y-a.x*u,_,!1,u,g),this.addHalfVertex(r,w,T,_,!0,-d,g)}addHalfVertex({x:r,y:a},u,d,g,_,w,T){this.layoutVertexArray.emplaceBack((r<<1)+(g?1:0),(a<<1)+(_?1:0),Math.round(63*u)+128,Math.round(63*d)+128,1+(w===0?0:w<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const S=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),T.primitiveLength++),_?this.e2=S:this.e1=S}updateScaledDistance(){if(this.lineClips){const r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}}Bt(p0,"LineBucket",{omit:["layers","patternFeatures"]});const wF=new dt({"line-cap":new Qe(nt.layout_line["line-cap"]),"line-join":new Qe(nt.layout_line["line-join"]),"line-miter-limit":new ze(nt.layout_line["line-miter-limit"]),"line-round-limit":new ze(nt.layout_line["line-round-limit"]),"line-sort-key":new Qe(nt.layout_line["line-sort-key"])});var XA={paint:new dt({"line-opacity":new Qe(nt.paint_line["line-opacity"]),"line-color":new Qe(nt.paint_line["line-color"]),"line-translate":new ze(nt.paint_line["line-translate"]),"line-translate-anchor":new ze(nt.paint_line["line-translate-anchor"]),"line-width":new Qe(nt.paint_line["line-width"]),"line-gap-width":new Qe(nt.paint_line["line-gap-width"]),"line-offset":new Qe(nt.paint_line["line-offset"]),"line-blur":new Qe(nt.paint_line["line-blur"]),"line-dasharray":new Qe(nt.paint_line["line-dasharray"]),"line-pattern":new Qe(nt.paint_line["line-pattern"]),"line-gradient":new at(nt.paint_line["line-gradient"]),"line-trim-offset":new ze(nt.paint_line["line-trim-offset"])}),layout:wF};const QA=new class extends Qe{possiblyEvaluate(o,r){return r=new Ne(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,transition:r.transition}),super.possiblyEvaluate(o,r)}evaluate(o,r,a,u){return r=He({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(o,r,a,u)}}(XA.paint.properties["line-width"].specification);function KA(o,r){return r>0?r+2*o:o}QA.useIntegerZoom=!0;const bF=$t([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),EF=$t([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),TF=$t([{name:"a_projected_pos",components:4,type:"Float32"}],4);$t([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const SF=$t([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),IF=$t([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);$t([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const JA=$t([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),MF=$t([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);$t([{name:"triangle",components:3,type:"Uint16"}]),$t([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),$t([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),$t([{type:"Float32",name:"offsetX"}]),$t([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var ki=24;const Ba=128;function wb(o,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Ne(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:d}=a;let g=0;for(;g<u.length&&u[g]<=o;)g++;g=Math.max(0,g-1);let _=g;for(;_<u.length&&u[_]<o+1;)_++;_=Math.min(u.length-1,_);const w=u[g],T=u[_];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:d}:{kind:"camera",minZoom:w,maxZoom:T,minSize:a.evaluate(new Ne(w)),maxSize:a.evaluate(new Ne(T)),interpolationType:d}}}function m0(o,{uSize:r,uSizeT:a},{lowerSize:u,upperSize:d}){return o.kind==="source"?u/Ba:o.kind==="composite"?Rn(u/Ba,d/Ba,a):r}function of(o,r){let a=0,u=0;if(o.kind==="constant")u=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:d,minZoom:g,maxZoom:_}=o,w=d?Oe(xs.interpolationFactor(d,r,g,_),0,1):0;o.kind==="camera"?u=Rn(o.minSize,o.maxSize,w):a=w}return{uSizeT:a,uSize:u}}var AF=Object.freeze({__proto__:null,getSizeData:wb,evaluateSizeForFeature:m0,evaluateSizeForZoom:of,SIZE_PACK_FACTOR:Ba});function CF(o,r,a){return o.sections.forEach(u=>{u.text=function(d,g,_){const w=g.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?d=d.toLocaleUpperCase():w==="lowercase"&&(d=d.toLocaleLowerCase()),Ce.applyArabicShaping&&(d=Ce.applyArabicShaping(d)),d}(u.text,r,a)}),o}const Lm={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function PF(o){return o==="︶"||o==="﹈"||o==="︸"||o==="﹄"||o==="﹂"||o==="︾"||o==="︼"||o==="︺"||o==="︘"||o==="﹀"||o==="︐"||o==="︓"||o==="︔"||o==="｀"||o==="￣"||o==="︑"||o==="︒"}function RF(o){return o==="︵"||o==="﹇"||o==="︷"||o==="﹃"||o==="﹁"||o==="︽"||o==="︻"||o==="︹"||o==="︗"||o==="︿"}var zm=or,eC=function(o,r,a,u,d){var g,_,w=8*d-u-1,T=(1<<w)-1,S=T>>1,R=-7,L=a?d-1:0,B=a?-1:1,j=o[r+L];for(L+=B,g=j&(1<<-R)-1,j>>=-R,R+=w;R>0;g=256*g+o[r+L],L+=B,R-=8);for(_=g&(1<<-R)-1,g>>=-R,R+=u;R>0;_=256*_+o[r+L],L+=B,R-=8);if(g===0)g=1-S;else{if(g===T)return _?NaN:1/0*(j?-1:1);_+=Math.pow(2,u),g-=S}return(j?-1:1)*_*Math.pow(2,g-u)},tC=function(o,r,a,u,d,g){var _,w,T,S=8*g-d-1,R=(1<<S)-1,L=R>>1,B=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=u?0:g-1,q=u?1:-1,Q=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(w=isNaN(r)?1:0,_=R):(_=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-_))<1&&(_--,T*=2),(r+=_+L>=1?B/T:B*Math.pow(2,1-L))*T>=2&&(_++,T/=2),_+L>=R?(w=0,_=R):_+L>=1?(w=(r*T-1)*Math.pow(2,d),_+=L):(w=r*Math.pow(2,L-1)*Math.pow(2,d),_=0));d>=8;o[a+j]=255&w,j+=q,w/=256,d-=8);for(_=_<<d|w,S+=d;S>0;o[a+j]=255&_,j+=q,_/=256,S-=8);o[a+j-q]|=128*Q};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function or(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}or.Varint=0,or.Fixed64=1,or.Bytes=2,or.Fixed32=5;var bb=4294967296,nC=1/bb,rC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Al(o){return o.type===or.Bytes?o.readVarint()+o.pos:o.pos+1}function sf(o,r,a){return a?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function iC(o,r,a){var u=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(u);for(var d=a.pos-1;d>=o;d--)a.buf[d+u]=a.buf[d]}function DF(o,r){for(var a=0;a<o.length;a++)r.writeVarint(o[a])}function OF(o,r){for(var a=0;a<o.length;a++)r.writeSVarint(o[a])}function kF(o,r){for(var a=0;a<o.length;a++)r.writeFloat(o[a])}function LF(o,r){for(var a=0;a<o.length;a++)r.writeDouble(o[a])}function zF(o,r){for(var a=0;a<o.length;a++)r.writeBoolean(o[a])}function NF(o,r){for(var a=0;a<o.length;a++)r.writeFixed32(o[a])}function BF(o,r){for(var a=0;a<o.length;a++)r.writeSFixed32(o[a])}function FF(o,r){for(var a=0;a<o.length;a++)r.writeFixed64(o[a])}function UF(o,r){for(var a=0;a<o.length;a++)r.writeSFixed64(o[a])}function g0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function af(o,r,a){o[a]=r,o[a+1]=r>>>8,o[a+2]=r>>>16,o[a+3]=r>>>24}function oC(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}function VF(o,r,a){r.glyphs=[],o===1&&a.readMessage(jF,r)}function jF(o,r,a){if(o===3){const{id:u,bitmap:d,width:g,height:_,left:w,top:T,advance:S}=a.readMessage(GF,{});r.glyphs.push({id:u,bitmap:new Ml({width:g+6,height:_+6},d),metrics:{width:g,height:_,left:w,top:T,advance:S}})}else o===4?r.ascender=a.readSVarint():o===5&&(r.descender=a.readSVarint())}function GF(o,r,a){o===1?r.id=a.readVarint():o===2?r.bitmap=a.readBytes():o===3?r.width=a.readVarint():o===4?r.height=a.readVarint():o===5?r.left=a.readSVarint():o===6?r.top=a.readSVarint():o===7&&(r.advance=a.readVarint())}function Eb(o){let r=0,a=0;for(const _ of o)r+=_.w*_.h,a=Math.max(a,_.w);o.sort((_,w)=>w.h-_.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let d=0,g=0;for(const _ of o)for(let w=u.length-1;w>=0;w--){const T=u[w];if(!(_.w>T.w||_.h>T.h)){if(_.x=T.x,_.y=T.y,g=Math.max(g,_.y+_.h),d=Math.max(d,_.x+_.w),_.w===T.w&&_.h===T.h){const S=u.pop();w<u.length&&(u[w]=S)}else _.h===T.h?(T.x+=_.w,T.w-=_.w):_.w===T.w?(T.y+=_.h,T.h-=_.h):(u.push({x:T.x+_.w,y:T.y,w:T.w-_.w,h:_.h}),T.y+=_.h,T.h-=_.h);break}}return{w:d,h:g,fill:r/(d*g)||0}}or.prototype={destroy:function(){this.buf=null},readFields:function(o,r,a){for(a=a||this.length;this.pos<a;){var u=this.readVarint(),d=u>>3,g=this.pos;this.type=7&u,o(d,r,this),this.pos===g&&this.skip(u)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=g0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=oC(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=g0(this.buf,this.pos)+g0(this.buf,this.pos+4)*bb;return this.pos+=8,o},readSFixed64:function(){var o=g0(this.buf,this.pos)+oC(this.buf,this.pos+4)*bb;return this.pos+=8,o},readFloat:function(){var o=eC(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=eC(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,a,u=this.buf;return r=127&(a=u[this.pos++]),a<128?r:(r|=(127&(a=u[this.pos++]))<<7,a<128?r:(r|=(127&(a=u[this.pos++]))<<14,a<128?r:(r|=(127&(a=u[this.pos++]))<<21,a<128?r:function(d,g,_){var w,T,S=_.buf;if(w=(112&(T=S[_.pos++]))>>4,T<128||(w|=(127&(T=S[_.pos++]))<<3,T<128)||(w|=(127&(T=S[_.pos++]))<<10,T<128)||(w|=(127&(T=S[_.pos++]))<<17,T<128)||(w|=(127&(T=S[_.pos++]))<<24,T<128)||(w|=(1&(T=S[_.pos++]))<<31,T<128))return sf(d,w,g);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(a=u[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&rC?function(a,u,d){return rC.decode(a.subarray(u,d))}(this.buf,r,o):function(a,u,d){for(var g="",_=u;_<d;){var w,T,S,R=a[_],L=null,B=R>239?4:R>223?3:R>191?2:1;if(_+B>d)break;B===1?R<128&&(L=R):B===2?(192&(w=a[_+1]))==128&&(L=(31&R)<<6|63&w)<=127&&(L=null):B===3?(T=a[_+2],(192&(w=a[_+1]))==128&&(192&T)==128&&((L=(15&R)<<12|(63&w)<<6|63&T)<=2047||L>=55296&&L<=57343)&&(L=null)):B===4&&(T=a[_+2],S=a[_+3],(192&(w=a[_+1]))==128&&(192&T)==128&&(192&S)==128&&((L=(15&R)<<18|(63&w)<<12|(63&T)<<6|63&S)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,B=1):L>65535&&(L-=65536,g+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),g+=String.fromCharCode(L),_+=B}return g}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==or.Bytes)return o.push(this.readVarint(r));var a=Al(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==or.Bytes)return o.push(this.readSVarint());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==or.Bytes)return o.push(this.readBoolean());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==or.Bytes)return o.push(this.readFloat());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==or.Bytes)return o.push(this.readDouble());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==or.Bytes)return o.push(this.readFixed32());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==or.Bytes)return o.push(this.readSFixed32());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==or.Bytes)return o.push(this.readFixed64());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==or.Bytes)return o.push(this.readSFixed64());var r=Al(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===or.Varint)for(;this.buf[this.pos++]>127;);else if(r===or.Bytes)this.pos=this.readVarint()+this.pos;else if(r===or.Fixed32)this.pos+=4;else{if(r!==or.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),af(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),af(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),af(this.buf,-1&o,this.pos),af(this.buf,Math.floor(o*nC),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),af(this.buf,-1&o,this.pos),af(this.buf,Math.floor(o*nC),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,a){var u,d;if(r>=0?(u=r%4294967296|0,d=r/4294967296|0):(d=~(-r/4294967296),4294967295^(u=~(-r%4294967296))?u=u+1|0:(u=0,d=d+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(g,_,w){w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,g>>>=7,w.buf[w.pos++]=127&g|128,w.buf[w.pos]=127&(g>>>=7)}(u,0,a),function(g,_){var w=(7&g)<<4;_.buf[_.pos++]|=w|((g>>>=3)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g)))))}(d,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(u,d,g){for(var _,w,T=0;T<d.length;T++){if((_=d.charCodeAt(T))>55295&&_<57344){if(!w){_>56319||T+1===d.length?(u[g++]=239,u[g++]=191,u[g++]=189):w=_;continue}if(_<56320){u[g++]=239,u[g++]=191,u[g++]=189,w=_;continue}_=w-55296<<10|_-56320|65536,w=null}else w&&(u[g++]=239,u[g++]=191,u[g++]=189,w=null);_<128?u[g++]=_:(_<2048?u[g++]=_>>6|192:(_<65536?u[g++]=_>>12|224:(u[g++]=_>>18|240,u[g++]=_>>12&63|128),u[g++]=_>>6&63|128),u[g++]=63&_|128)}return g}(this.buf,o,this.pos);var a=this.pos-r;a>=128&&iC(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),tC(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),tC(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var a=0;a<r;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,r){this.pos++;var a=this.pos;o(r,this);var u=this.pos-a;u>=128&&iC(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeMessage:function(o,r,a){this.writeTag(o,or.Bytes),this.writeRawMessage(r,a)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,DF,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,OF,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,zF,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,kF,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,LF,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,NF,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,BF,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,FF,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,UF,r)},writeBytesField:function(o,r){this.writeTag(o,or.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,or.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,or.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,or.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,or.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,or.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,or.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,or.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,or.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,or.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};class Tb{constructor(r,{pixelRatio:a,version:u,stretchX:d,stretchY:g,content:_}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=d,this.stretchY=g,this.content=_,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class sC{constructor(r,a){const u={},d={};this.haveRenderCallbacks=[];const g=[];this.addImages(r,u,g),this.addImages(a,d,g);const{w:_,h:w}=Eb(g),T=new Fo({width:_||1,height:w||1});for(const S in r){const R=r[S],L=u[S].paddedRect;Fo.copy(R.data,T,{x:0,y:0},{x:L.x+1,y:L.y+1},R.data)}for(const S in a){const R=a[S],L=d[S].paddedRect,B=L.x+1,j=L.y+1,q=R.data.width,Q=R.data.height;Fo.copy(R.data,T,{x:0,y:0},{x:B,y:j},R.data),Fo.copy(R.data,T,{x:0,y:Q-1},{x:B,y:j-1},{width:q,height:1}),Fo.copy(R.data,T,{x:0,y:0},{x:B,y:j+Q},{width:q,height:1}),Fo.copy(R.data,T,{x:q-1,y:0},{x:B-1,y:j},{width:1,height:Q}),Fo.copy(R.data,T,{x:0,y:0},{x:B+q,y:j},{width:1,height:Q})}this.image=T,this.iconPositions=u,this.patternPositions=d}addImages(r,a,u){for(const d in r){const g=r[d],_={x:0,y:0,w:g.data.width+2,h:g.data.height+2};u.push(_),a[d]=new Tb(_,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(r,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>r.hasImage(u)),r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in r.updatedImages)this.patchUpdatedImage(this.iconPositions[u],r.getImage(u),a),this.patchUpdatedImage(this.patternPositions[u],r.getImage(u),a)}patchUpdatedImage(r,a,u){if(!r||!a||r.version===a.version)return;r.version=a.version;const[d,g]=r.tl;u.update(a.data,void 0,{x:d,y:g})}}Bt(Tb,"ImagePosition"),Bt(sC,"ImageAtlas");const es={horizontal:1,vertical:2,horizontalOnly:3};class Nm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,a){const u=new Nm;return u.scale=r||1,u.fontStack=a,u}static forImage(r){const a=new Nm;return a.imageName=r,a}}class lf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,a){const u=new lf;for(let d=0;d<r.sections.length;d++){const g=r.sections[d];g.image?u.addImageSection(g):u.addTextSection(g,a)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(r){this.text=function(a,u){let d="";for(let g=0;g<a.length;g++){const _=a.charCodeAt(g+1)||null,w=a.charCodeAt(g-1)||null;d+=!u&&(_&&O(_)&&!Lm[a[g+1]]||w&&O(w)&&!Lm[a[g-1]])||!Lm[a[g]]?a[g]:Lm[a[g]]}return d}(this.text,r)}trim(){let r=0;for(let u=0;u<this.text.length&&y0[this.text.charCodeAt(u)];u++)r++;let a=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&y0[this.text.charCodeAt(u)];u--)a--;this.text=this.text.substring(r,a),this.sectionIndex=this.sectionIndex.slice(r,a)}substring(r,a){const u=new lf;return u.text=this.text.substring(r,a),u.sectionIndex=this.sectionIndex.slice(r,a),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,a)=>Math.max(r,this.sections[a].scale),0)}addTextSection(r,a){this.text+=r.text,this.sections.push(Nm.forText(r.scale,r.fontStack||a));const u=this.sections.length-1;for(let d=0;d<r.text.length;++d)this.sectionIndex.push(u)}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void Jt("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Nm.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Jt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Sb(o,r,a,u,d,g,_,w,T,S,R,L,B,j,q){const Q=lf.fromFeature(o,d);L===es.vertical&&Q.verticalizePunctuation(B);let ie=[];const pe=function(we,Ze,$e,rt,mt,Ke){if(!we)return[];const it=[],st=function(Tt,en,Rt,Ut,St,nn){let bn=0;for(let vn=0;vn<Tt.length();vn++){const mn=Tt.getSection(vn);bn+=aC(Tt.getCharCode(vn),mn,Ut,St,en,nn)}return bn/Math.max(1,Math.ceil(bn/Rt))}(we,Ze,$e,rt,mt,Ke),ht=we.text.indexOf("​")>=0;let gt=0;for(let Tt=0;Tt<we.length();Tt++){const en=we.getSection(Tt),Rt=we.getCharCode(Tt);if(y0[Rt]||(gt+=aC(Rt,en,rt,mt,Ze,Ke)),Tt<we.length()-1){const Ut=!((Je=Rt)<11904||!(B_(Je)||Wd(Je)||p(Je)||q_(Je)||V_(Je)||N_(Je)||F_(Je)||nh(Je)||j_(Je)||fm(Je)||U_(Je)||y(Je)||$d(Je)||hm(Je)||um(Je)||dm(Je)||Ec(Je)||rh(Je)||$_(Je)||G_(Je)));($F[Rt]||Ut||en.imageName)&&it.push(cC(Tt+1,gt,st,it,WF(Rt,we.getCharCode(Tt+1),Ut&&ht),!1))}}var Je;return uC(cC(we.length(),gt,st,it,0,!0))}(Q,S,g,r,u,j),{processBidirectionalText:xe,processStyledBidirectionalText:he}=Ce;if(xe&&Q.sections.length===1){const we=xe(Q.toString(),pe);for(const Ze of we){const $e=new lf;$e.text=Ze,$e.sections=Q.sections;for(let rt=0;rt<Ze.length;rt++)$e.sectionIndex.push(0);ie.push($e)}}else if(he){const we=he(Q.text,Q.sectionIndex,pe);for(const Ze of we){const $e=new lf;$e.text=Ze[0],$e.sectionIndex=Ze[1],$e.sections=Q.sections,ie.push($e)}}else ie=function(we,Ze){const $e=[],rt=we.text;let mt=0;for(const Ke of Ze)$e.push(we.substring(mt,Ke)),mt=Ke;return mt<rt.length&&$e.push(we.substring(mt,rt.length)),$e}(Q,pe);const ve=[],Te={positionedLines:ve,text:Q.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:L,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(we,Ze,$e,rt,mt,Ke,it,st,ht,gt,Je,Tt){let en=0,Rt=0,Ut=0;const St=st==="right"?1:st==="left"?0:.5;let nn=!1;for(const cn of mt){const En=cn.getSections();for(const Zn of En){if(Zn.imageName)continue;const ur=Ze[Zn.fontStack];if(ur&&(nn=ur.ascender!==void 0&&ur.descender!==void 0,!nn))break}if(!nn)break}let bn=0;for(const cn of mt){cn.trim();const En=cn.getMaxScale(),Zn=(En-1)*ki,ur={positionedGlyphs:[],lineOffset:0};we.positionedLines[bn]=ur;const sr=ur.positionedGlyphs;let hr=0;if(!cn.length()){Rt+=Ke,++bn;continue}let pr=0,Mr=0;for(let Gn=0;Gn<cn.length();Gn++){const Kr=cn.getSection(Gn),qr=cn.getSectionIndex(Gn),kn=cn.getCharCode(Gn);let br=Kr.scale,ni=null,Yn=null,Br=null,Wi=ki,wi=0;const bi=!(ht===es.horizontal||!Je&&!C(kn)||Je&&(y0[kn]||(vn=kn,th(vn)||z_(vn)||cm(vn)||qd(vn)||h(vn))));if(Kr.imageName){const io=rt[Kr.imageName];if(!io)continue;Br=Kr.imageName,we.iconsInText=we.iconsInText||!0,Yn=io.paddedRect;const Ei=io.displaySize;br=br*ki/Tt,ni={width:Ei[0],height:Ei[1],left:1,top:-3,advance:bi?Ei[1]:Ei[0],localGlyph:!1},wi=nn?-ni.height*br:En*ki-17-Ei[1]*br,Wi=ni.advance;const Pl=(bi?Ei[0]:Ei[1])*br-ki*En;Pl>0&&Pl>hr&&(hr=Pl)}else{const io=$e[Kr.fontStack];if(!io)continue;io[kn]&&(Yn=io[kn]);const Ei=Ze[Kr.fontStack];if(!Ei)continue;const Pl=Ei.glyphs[kn];if(!Pl)continue;if(ni=Pl.metrics,Wi=kn!==8203?ki:0,nn){const ff=Ei.ascender!==void 0?Math.abs(Ei.ascender):0,Wm=Ei.descender!==void 0?Math.abs(Ei.descender):0,qm=(ff+Wm)*br;pr<qm&&(pr=qm,Mr=(ff-Wm)/2*br),wi=-ff*br}else wi=(En-br)*ki-17}bi?(we.verticalizable=!0,sr.push({glyph:kn,imageName:Br,x:en,y:Rt+wi,vertical:bi,scale:br,localGlyph:ni.localGlyph,fontStack:Kr.fontStack,sectionIndex:qr,metrics:ni,rect:Yn}),en+=Wi*br+gt):(sr.push({glyph:kn,imageName:Br,x:en,y:Rt+wi,vertical:bi,scale:br,localGlyph:ni.localGlyph,fontStack:Kr.fontStack,sectionIndex:qr,metrics:ni,rect:Yn}),en+=ni.advance*br+gt)}sr.length!==0&&(Ut=Math.max(en-gt,Ut),nn?hC(sr,St,hr,Mr,Ke*En/2):hC(sr,St,hr,0,Ke/2)),en=0;const xi=Ke*En+hr;ur.lineOffset=Math.max(hr,Zn),Rt+=xi,++bn}var vn;const mn=Rt,{horizontalAlign:rn,verticalAlign:jn}=Ib(it);(function(cn,En,Zn,ur,sr,hr){const pr=(En-Zn)*sr,Mr=-hr*ur;for(const xi of cn)for(const Gn of xi.positionedGlyphs)Gn.x+=pr,Gn.y+=Mr})(we.positionedLines,St,rn,jn,Ut,mn),we.top+=-jn*mn,we.bottom=we.top+mn,we.left+=-rn*Ut,we.right=we.left+Ut,we.hasBaseline=nn}(Te,r,a,u,ie,_,w,T,L,S,B,q),!function(we){for(const Ze of we)if(Ze.positionedGlyphs.length!==0)return!1;return!0}(ve)&&Te}const y0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$F={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function aC(o,r,a,u,d,g){if(r.imageName){const _=u[r.imageName];return _?_.displaySize[0]*r.scale*ki/g+d:0}{const _=a[r.fontStack],w=_&&_.glyphs[o];return w?w.metrics.advance*r.scale+d:0}}function lC(o,r,a,u){const d=Math.pow(o-r,2);return u?o<r?d/2:2*d:d+Math.abs(a)*a}function WF(o,r,a){let u=0;return o===10&&(u-=1e4),a&&(u+=150),o!==40&&o!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function cC(o,r,a,u,d,g){let _=null,w=lC(r,a,d,g);for(const T of u){const S=lC(r-T.x,a,d,g)+T.badness;S<=w&&(_=T,w=S)}return{index:o,x:r,priorBreak:_,badness:w}}function uC(o){return o?uC(o.priorBreak).concat(o.index):[]}function Ib(o){let r=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function hC(o,r,a,u,d){if(!(r||a||u||d))return;const g=o.length-1,_=o[g],w=(_.x+_.metrics.advance*_.scale)*r;for(let T=0;T<=g;T++)o[T].x-=w,o[T].y+=a+u+d}function qF(o,r,a){const{horizontalAlign:u,verticalAlign:d}=Ib(a),g=r[0]-o.displaySize[0]*u,_=r[1]-o.displaySize[1]*d;return{image:o,top:_,bottom:_+o.displaySize[1],left:g,right:g+o.displaySize[0]}}function dC(o,r,a,u,d,g){const _=o.image;let w;if(_.content){const ie=_.content,pe=_.pixelRatio||1;w=[ie[0]/pe,ie[1]/pe,_.displaySize[0]-ie[2]/pe,_.displaySize[1]-ie[3]/pe]}const T=r.left*g,S=r.right*g;let R,L,B,j;a==="width"||a==="both"?(j=d[0]+T-u[3],L=d[0]+S+u[1]):(j=d[0]+(T+S-_.displaySize[0])/2,L=j+_.displaySize[0]);const q=r.top*g,Q=r.bottom*g;return a==="height"||a==="both"?(R=d[1]+q-u[0],B=d[1]+Q+u[2]):(R=d[1]+(q+Q-_.displaySize[1])/2,B=R+_.displaySize[1]),{image:_,top:R,right:L,bottom:B,left:j,collisionPadding:w}}class Cl extends ${constructor(r,a,u,d,g){super(r,a),this.angle=d,this.z=u,g!==void 0&&(this.segment=g)}clone(){return new Cl(this.x,this.y,this.z,this.angle,this.segment)}}function fC(o,r,a,u,d){if(r.segment===void 0)return!0;let g=r,_=r.segment+1,w=0;for(;w>-a/2;){if(_--,_<0)return!1;w-=o[_].dist(g),g=o[_]}w+=o[_].dist(o[_+1]),_++;const T=[];let S=0;for(;w<a/2;){const R=o[_],L=o[_+1];if(!L)return!1;let B=o[_-1].angleTo(R)-R.angleTo(L);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:B}),S+=B;w-T[0].distance>u;)S-=T.shift().angleDelta;if(S>d)return!1;_++,w+=R.dist(L)}return!0}function pC(o){let r=0;for(let a=0;a<o.length-1;a++)r+=o[a].dist(o[a+1]);return r}function mC(o,r,a){return o?.6*r*a:0}function gC(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function HF(o,r,a,u,d,g){const _=mC(a,d,g),w=gC(a,u)*g;let T=0;const S=pC(o)/2;for(let R=0;R<o.length-1;R++){const L=o[R],B=o[R+1],j=L.dist(B);if(T+j>S){const q=(S-T)/j,Q=Rn(L.x,B.x,q),ie=Rn(L.y,B.y,q),pe=new Cl(Q,ie,0,B.angleTo(L),R);return!_||fC(o,pe,w,_,r)?pe:void 0}T+=j}}function ZF(o,r,a,u,d,g,_,w,T){const S=mC(u,g,_),R=gC(u,d),L=R*_,B=o[0].x===0||o[0].x===T||o[0].y===0||o[0].y===T;return r-L<r/4&&(r=L+r/4),yC(o,B?r/2*w%r:(R/2+2*g)*_*w%r,r,S,a,L,B,!1,T)}function yC(o,r,a,u,d,g,_,w,T){const S=g/2,R=pC(o);let L=0,B=r-a,j=[];for(let q=0;q<o.length-1;q++){const Q=o[q],ie=o[q+1],pe=Q.dist(ie),xe=ie.angleTo(Q);for(;B+a<L+pe;){B+=a;const he=(B-L)/pe,ve=Rn(Q.x,ie.x,he),Te=Rn(Q.y,ie.y,he);if(ve>=0&&ve<T&&Te>=0&&Te<T&&B-S>=0&&B+S<=R){const we=new Cl(ve,Te,0,xe,q);we._round(),u&&!fC(o,we,g,u,d)||j.push(we)}}L+=pe}return w||j.length||_||(j=yC(o,L/2,a,u,d,g,_,!0,T)),j}function _C(o,r,a,u,d){const g=[];for(let _=0;_<o.length;_++){const w=o[_];let T;for(let S=0;S<w.length-1;S++){let R=w[S],L=w[S+1];R.x<r&&L.x<r||(R.x<r?R=new $(r,R.y+(r-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x<r&&(L=new $(r,R.y+(r-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y<a&&L.y<a||(R.y<a?R=new $(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round():L.y<a&&(L=new $(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round()),R.x>=u&&L.x>=u||(R.x>=u?R=new $(u,R.y+(u-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x>=u&&(L=new $(u,R.y+(u-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y>=d&&L.y>=d||(R.y>=d?R=new $(R.x+(d-R.y)/(L.y-R.y)*(L.x-R.x),d)._round():L.y>=d&&(L=new $(R.x+(d-R.y)/(L.y-R.y)*(L.x-R.x),d)._round()),T&&R.equals(T[T.length-1])||(T=[R],g.push(T)),T.push(L)))))}}return g}Bt(Cl,"Anchor");const Bm=1e20;function vC(o,r,a,u,d,g,_,w,T){for(let S=r;S<r+u;S++)xC(o,a*g+S,g,d,_,w,T);for(let S=a;S<a+d;S++)xC(o,S*g+r,1,u,_,w,T)}function xC(o,r,a,u,d,g,_){g[0]=0,_[0]=-Bm,_[1]=Bm,d[0]=o[r];for(let w=1,T=0,S=0;w<u;w++){d[w]=o[r+w*a];const R=w*w;do{const L=g[T];S=(d[w]-d[L]+R-L*L)/(w-L)/2}while(S<=_[T]&&--T>-1);T++,g[T]=w,_[T]=S,_[T+1]=Bm}for(let w=0,T=0;w<u;w++){for(;_[T+1]<w;)T++;const S=g[T],R=w-S;o[r+w*a]=d[S]+R*R}}const Mb={none:0,ideographs:1,all:2};class cf{constructor(r,a,u){this.requestManager=r,this.localGlyphMode=a,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r){this.url=r}getGlyphs(r,a){const u=[];for(const d in r)for(const g of r[d])u.push({stack:d,id:g});De(u,({stack:d,id:g},_)=>{let w=this.entries[d];w||(w=this.entries[d]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=w.glyphs[g];if(T!==void 0)return void _(null,{stack:d,id:g,glyph:T});if(T=this._tinySDF(w,d,g),T)return w.glyphs[g]=T,void _(null,{stack:d,id:g,glyph:T});const S=Math.floor(g/256);if(256*S>65535)return void _(new Error("glyphs > 65535 not supported"));if(w.ranges[S])return void _(null,{stack:d,id:g,glyph:T});let R=w.requests[S];R||(R=w.requests[S]=[],cf.loadGlyphRange(d,S,this.url,this.requestManager,(L,B)=>{if(B){w.ascender=B.ascender,w.descender=B.descender;for(const j in B.glyphs)this._doesCharSupportLocalGlyph(+j)||(w.glyphs[+j]=B.glyphs[+j]);w.ranges[S]=!0}for(const j of R)j(L,B);delete w.requests[S]})),R.push((L,B)=>{L?_(L):B&&_(null,{stack:d,id:g,glyph:B.glyphs[g]||null})})},(d,g)=>{if(d)a(d);else if(g){const _={};for(const{stack:w,id:T,glyph:S}of g)_[w]===void 0&&(_[w]={}),_[w].glyphs===void 0&&(_[w].glyphs={}),_[w].glyphs[T]=S&&{id:S.id,bitmap:S.bitmap.clone(),metrics:S.metrics},_[w].ascender=this.entries[w].ascender,_[w].descender=this.entries[w].descender;a(null,_)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==Mb.none&&(this.localGlyphMode===Mb.all?!!this.localFontFamily:!!this.localFontFamily&&(fm(r)||W_(r)||$d(r)||Ec(r)||nh(r)))}_tinySDF(r,a,u){const d=this.localFontFamily;if(!d||!this._doesCharSupportLocalGlyph(u))return;let g=r.tinySDF;if(!g){let Q="400";/bold/i.test(a)?Q="900":/medium/i.test(a)?Q="500":/light/i.test(a)&&(Q="200"),g=r.tinySDF=new cf.TinySDF({fontFamily:d,fontWeight:Q,fontSize:48,buffer:6,radius:16}),g.fontWeight=Q}if(this.localGlyphs[g.fontWeight][u])return this.localGlyphs[g.fontWeight][u];const _=String.fromCharCode(u),{data:w,width:T,height:S,glyphWidth:R,glyphHeight:L,glyphLeft:B,glyphTop:j,glyphAdvance:q}=g.draw(_);return this.localGlyphs[g.fontWeight][u]={id:u,bitmap:new Ml({width:T,height:S},w),metrics:{width:R/2,height:L/2,left:B/2,top:j/2-27,advance:q/2,localGlyph:!0}}}}function wC(o,r,a,u){const d=[],g=o.image,_=g.pixelRatio,w=g.paddedRect.w-2,T=g.paddedRect.h-2,S=o.right-o.left,R=o.bottom-o.top,L=g.stretchX||[[0,w]],B=g.stretchY||[[0,T]],j=(Ke,it)=>Ke+it[1]-it[0],q=L.reduce(j,0),Q=B.reduce(j,0),ie=w-q,pe=T-Q;let xe=0,he=q,ve=0,Te=Q,we=0,Ze=ie,$e=0,rt=pe;if(g.content&&u){const Ke=g.content;xe=_0(L,0,Ke[0]),ve=_0(B,0,Ke[1]),he=_0(L,Ke[0],Ke[2]),Te=_0(B,Ke[1],Ke[3]),we=Ke[0]-xe,$e=Ke[1]-ve,Ze=Ke[2]-Ke[0]-he,rt=Ke[3]-Ke[1]-Te}const mt=(Ke,it,st,ht)=>{const gt=v0(Ke.stretch-xe,he,S,o.left),Je=x0(Ke.fixed-we,Ze,Ke.stretch,q),Tt=v0(it.stretch-ve,Te,R,o.top),en=x0(it.fixed-$e,rt,it.stretch,Q),Rt=v0(st.stretch-xe,he,S,o.left),Ut=x0(st.fixed-we,Ze,st.stretch,q),St=v0(ht.stretch-ve,Te,R,o.top),nn=x0(ht.fixed-$e,rt,ht.stretch,Q),bn=new $(gt,Tt),vn=new $(Rt,Tt),mn=new $(Rt,St),rn=new $(gt,St),jn=new $(Je/_,en/_),cn=new $(Ut/_,nn/_),En=r*Math.PI/180;if(En){const sr=Math.sin(En),hr=Math.cos(En),pr=[hr,-sr,sr,hr];bn._matMult(pr),vn._matMult(pr),rn._matMult(pr),mn._matMult(pr)}const Zn=Ke.stretch+Ke.fixed,ur=it.stretch+it.fixed;return{tl:bn,tr:vn,bl:rn,br:mn,tex:{x:g.paddedRect.x+1+Zn,y:g.paddedRect.y+1+ur,w:st.stretch+st.fixed-Zn,h:ht.stretch+ht.fixed-ur},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:jn,pixelOffsetBR:cn,minFontScaleX:Ze/_/S,minFontScaleY:rt/_/R,isSDF:a}};if(u&&(g.stretchX||g.stretchY)){const Ke=bC(L,ie,q),it=bC(B,pe,Q);for(let st=0;st<Ke.length-1;st++){const ht=Ke[st],gt=Ke[st+1];for(let Je=0;Je<it.length-1;Je++)d.push(mt(ht,it[Je],gt,it[Je+1]))}}else d.push(mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return d}function _0(o,r,a){let u=0;for(const d of o)u+=Math.max(r,Math.min(a,d[1]))-Math.max(r,Math.min(a,d[0]));return u}function bC(o,r,a){const u=[{fixed:-1,stretch:0}];for(const[d,g]of o){const _=u[u.length-1];u.push({fixed:d-_.stretch,stretch:_.stretch}),u.push({fixed:d-_.stretch,stretch:_.stretch+(g-d)})}return u.push({fixed:r+1,stretch:a}),u}function v0(o,r,a,u){return o/r*a+u}function x0(o,r,a,u){return o-r*a/u}function YF(o,r,a,u){const d=r+o.positionedLines[u].lineOffset;return u===0?a+d/2:a+(d+(r+o.positionedLines[u-1].lineOffset))/2}cf.loadGlyphRange=function(o,r,a,u,d){const g=256*r,_=g+255,w=u.transformRequest(u.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",`${g}-${_}`),Ye.Glyphs);hi(w,(T,S)=>{if(T)d(T);else if(S){const R={},L=function(B){return new zm(B).readFields(VF,{})}(S);for(const B of L.glyphs)R[B.id]=B;d(null,{glyphs:R,ascender:L.ascender,descender:L.descender})}})},cf.TinySDF=class{constructor({fontSize:o=24,buffer:r=3,radius:a=8,cutoff:u=.25,fontFamily:d="sans-serif",fontWeight:g="normal",fontStyle:_="normal"}={}){this.buffer=r,this.cutoff=u,this.radius=a;const w=this.size=o+4*r,T=this._createCanvas(w),S=this.ctx=T.getContext("2d",{willReadFrequently:!0});S.font=`${_} ${g} ${o}px ${d}`,S.textBaseline="alphabetic",S.textAlign="left",S.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Uint16Array(w)}_createCanvas(o){const r=document.createElement("canvas");return r.width=r.height=o,r}draw(o){const{width:r,actualBoundingBoxAscent:a,actualBoundingBoxDescent:u,actualBoundingBoxLeft:d,actualBoundingBoxRight:g}=this.ctx.measureText(o),_=Math.ceil(a),w=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-d))),T=Math.min(this.size-this.buffer,_+Math.ceil(u)),S=w+2*this.buffer,R=T+2*this.buffer,L=Math.max(S*R,0),B=new Uint8ClampedArray(L),j={data:B,width:S,height:R,glyphWidth:w,glyphHeight:T,glyphTop:_,glyphLeft:0,glyphAdvance:r};if(w===0||T===0)return j;const{ctx:q,buffer:Q,gridInner:ie,gridOuter:pe}=this;q.clearRect(Q,Q,w,T),q.fillText(o,Q,Q+_);const xe=q.getImageData(Q,Q,w,T);pe.fill(Bm,0,L),ie.fill(0,0,L);for(let he=0;he<T;he++)for(let ve=0;ve<w;ve++){const Te=xe.data[4*(he*w+ve)+3]/255;if(Te===0)continue;const we=(he+Q)*S+ve+Q;if(Te===1)pe[we]=0,ie[we]=Bm;else{const Ze=.5-Te;pe[we]=Ze>0?Ze*Ze:0,ie[we]=Ze<0?Ze*Ze:0}}vC(pe,0,0,S,R,S,this.f,this.v,this.z),vC(ie,Q,Q,w,T,S,this.f,this.v,this.z);for(let he=0;he<L;he++){const ve=Math.sqrt(pe[he])-Math.sqrt(ie[he]);B[he]=Math.round(255-255*(ve/this.radius+this.cutoff))}return j}};class XF{constructor(r=[],a=QF){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:u}=this,d=a[r];for(;r>0;){const g=r-1>>1,_=a[g];if(u(d,_)>=0)break;a[r]=_,r=g}a[r]=d}_down(r){const{data:a,compare:u}=this,d=this.length>>1,g=a[r];for(;r<d;){let _=1+(r<<1),w=a[_];const T=_+1;if(T<this.length&&u(a[T],w)<0&&(_=T,w=a[T]),u(w,g)>=0)break;a[r]=w,r=_}a[r]=g}}function QF(o,r){return o<r?-1:o>r?1:0}function KF(o,r=1,a=!1){let u=1/0,d=1/0,g=-1/0,_=-1/0;const w=o[0];for(let j=0;j<w.length;j++){const q=w[j];(!j||q.x<u)&&(u=q.x),(!j||q.y<d)&&(d=q.y),(!j||q.x>g)&&(g=q.x),(!j||q.y>_)&&(_=q.y)}const T=Math.min(g-u,_-d);let S=T/2;const R=new XF([],JF);if(T===0)return new $(u,d);for(let j=u;j<g;j+=T)for(let q=d;q<_;q+=T)R.push(new uf(j+S,q+S,S,o));let L=function(j){let q=0,Q=0,ie=0;const pe=j[0];for(let xe=0,he=pe.length,ve=he-1;xe<he;ve=xe++){const Te=pe[xe],we=pe[ve],Ze=Te.x*we.y-we.x*Te.y;Q+=(Te.x+we.x)*Ze,ie+=(Te.y+we.y)*Ze,q+=3*Ze}return new uf(Q/q,ie/q,0,j)}(o),B=R.length;for(;R.length;){const j=R.pop();(j.d>L.d||!L.d)&&(L=j,a&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,B)),j.max-L.d<=r||(S=j.h/2,R.push(new uf(j.p.x-S,j.p.y-S,S,o)),R.push(new uf(j.p.x+S,j.p.y-S,S,o)),R.push(new uf(j.p.x-S,j.p.y+S,S,o)),R.push(new uf(j.p.x+S,j.p.y+S,S,o)),B+=4)}return a&&(console.log(`num probes: ${B}`),console.log(`best distance: ${L.d}`)),L.p}function JF(o,r){return r.max-o.max}class uf{constructor(r,a,u,d){this.p=new $(r,a),this.h=u,this.d=function(g,_){let w=!1,T=1/0;for(let S=0;S<_.length;S++){const R=_[S];for(let L=0,B=R.length,j=B-1;L<B;j=L++){const q=R[L],Q=R[j];q.y>g.y!=Q.y>g.y&&g.x<(Q.x-q.x)*(g.y-q.y)/(Q.y-q.y)+q.x&&(w=!w),T=Math.min(T,xA(g,q,Q))}}return(w?1:-1)*Math.sqrt(T)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}}const Ab=Number.POSITIVE_INFINITY,e6=Math.sqrt(2);function EC(o,[r,a]){let u=0,d=0;if(a===Ab){r<0&&(r=0);const g=r/e6;switch(o){case"top-right":case"top-left":d=g-7;break;case"bottom-right":case"bottom-left":d=7-g;break;case"bottom":d=7-r;break;case"top":d=r-7}switch(o){case"top-right":case"bottom-right":u=-g;break;case"top-left":case"bottom-left":u=g;break;case"left":u=r;break;case"right":u=-r}}else{switch(r=Math.abs(r),a=Math.abs(a),o){case"top-right":case"top-left":case"top":d=a-7;break;case"bottom-right":case"bottom-left":case"bottom":d=7-a}switch(o){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}}return[u,d]}function t6(o,r,a,u,d,g,_,w,T,S){o.createArrays(),o.tilePixelRatio=sn/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const R=o.layers[0].layout,L=o.layers[0]._unevaluatedLayout._values,B={};if(o.textSizeData.kind==="composite"){const{minZoom:Q,maxZoom:ie}=o.textSizeData;B.compositeTextSizes=[L["text-size"].possiblyEvaluate(new Ne(Q),w),L["text-size"].possiblyEvaluate(new Ne(ie),w)]}if(o.iconSizeData.kind==="composite"){const{minZoom:Q,maxZoom:ie}=o.iconSizeData;B.compositeIconSizes=[L["icon-size"].possiblyEvaluate(new Ne(Q),w),L["icon-size"].possiblyEvaluate(new Ne(ie),w)]}B.layoutTextSize=L["text-size"].possiblyEvaluate(new Ne(T+1),w),B.layoutIconSize=L["icon-size"].possiblyEvaluate(new Ne(T+1),w),B.textMaxSize=L["text-size"].possiblyEvaluate(new Ne(18),w);const j=R.get("text-rotation-alignment")==="map"&&R.get("symbol-placement")!=="point",q=R.get("text-size");for(const Q of o.features){const ie=R.get("text-font").evaluate(Q,{},w).join(","),pe=q.evaluate(Q,{},w),xe=B.layoutTextSize.evaluate(Q,{},w),he=(B.layoutIconSize.evaluate(Q,{},w),{horizontal:{},vertical:void 0}),ve=Q.text;let Te,we=[0,0];if(ve){const rt=ve.toString(),mt=R.get("text-letter-spacing").evaluate(Q,{},w)*ki,Ke=R.get("text-line-height").evaluate(Q,{},w)*ki,it=b(rt)?mt:0,st=R.get("text-anchor").evaluate(Q,{},w),ht=R.get("text-variable-anchor");if(!ht){const Rt=R.get("text-radial-offset").evaluate(Q,{},w);we=Rt?EC(st,[Rt*ki,Ab]):R.get("text-offset").evaluate(Q,{},w).map(Ut=>Ut*ki)}let gt=j?"center":R.get("text-justify").evaluate(Q,{},w);const Je=R.get("symbol-placement")==="point",Tt=Je?R.get("text-max-width").evaluate(Q,{},w)*ki:1/0,en=Rt=>{o.allowVerticalPlacement&&x(rt)&&(he.vertical=Sb(ve,r,a,d,ie,Tt,Ke,st,Rt,it,we,es.vertical,!0,xe,pe))};if(!j&&ht){const Rt=gt==="auto"?ht.map(St=>Cb(St)):[gt];let Ut=!1;for(let St=0;St<Rt.length;St++){const nn=Rt[St];if(!he.horizontal[nn])if(Ut)he.horizontal[nn]=he.horizontal[0];else{const bn=Sb(ve,r,a,d,ie,Tt,Ke,"center",nn,it,we,es.horizontal,!1,xe,pe);bn&&(he.horizontal[nn]=bn,Ut=bn.positionedLines.length===1)}}en("left")}else{if(gt==="auto"&&(gt=Cb(st)),Je||R.get("text-writing-mode").indexOf("horizontal")>=0||!x(rt)){const Rt=Sb(ve,r,a,d,ie,Tt,Ke,st,gt,it,we,es.horizontal,!1,xe,pe);Rt&&(he.horizontal[gt]=Rt)}en(Je?"left":gt)}}let Ze=!1;if(Q.icon&&Q.icon.name){const rt=u[Q.icon.name];rt&&(Te=qF(d[Q.icon.name],R.get("icon-offset").evaluate(Q,{},w),R.get("icon-anchor").evaluate(Q,{},w)),Ze=rt.sdf,o.sdfIcons===void 0?o.sdfIcons=rt.sdf:o.sdfIcons!==rt.sdf&&Jt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==o.pixelRatio||R.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const $e=SC(he.horizontal)||he.vertical;o.iconsInText||(o.iconsInText=!!$e&&$e.iconsInText),($e||Te)&&n6(o,Q,he,Te,u,B,xe,0,we,Ze,_,w,S)}g&&o.generateCollisionDebugBuffers(T,o.collisionBoxArray)}function Cb(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function n6(o,r,a,u,d,g,_,w,T,S,R,L,B){let j=g.textMaxSize.evaluate(r,{},L);j===void 0&&(j=_);const q=o.layers[0].layout,Q=q.get("icon-offset").evaluate(r,{},L),ie=SC(a.horizontal)||a.vertical,pe=B.name==="globe",xe=_/24,he=o.tilePixelRatio*j/24,ve=(it=o.overscaling,o.zoom>18&&it>2&&(it>>=1),Math.max(sn/(512*it),1)*q.get("symbol-spacing")),Te=q.get("text-padding")*o.tilePixelRatio,we=q.get("icon-padding")*o.tilePixelRatio,Ze=re(q.get("text-max-angle")),$e=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",rt=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",mt=q.get("symbol-placement"),Ke=ve/2;var it;const st=q.get("icon-text-fit");let ht;u&&st!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(ht=dC(u,a.vertical,st,q.get("icon-text-fit-padding"),Q,xe)),ie&&(u=dC(u,ie,st,q.get("icon-text-fit-padding"),Q,xe)));const gt=(Je,Tt,en)=>{if(Tt.x<0||Tt.x>=sn||Tt.y<0||Tt.y>=sn)return;let Rt=null;if(pe){const{x:Ut,y:St,z:nn}=B.projectTilePoint(Tt.x,Tt.y,en);Rt={anchor:new Cl(Ut,St,nn,0,void 0),up:B.upVector(en,Tt.x,Tt.y)}}(function(Ut,St,nn,bn,vn,mn,rn,jn,cn,En,Zn,ur,sr,hr,pr,Mr,xi,Gn,Kr,qr,kn,br,ni,Yn,Br){const Wi=Ut.addToLineVertexArray(St,bn);let wi,bi,io,Ei,Pl,ff,Wm,qm=0,eP=0,tP=0,nP=0,Vb=-1,jb=-1;const ja={};let rP=ih("");const gh=nn?nn.anchor:St;let Gb=0,$b=0;if(cn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Gb,$b]=cn.layout.get("text-offset").evaluate(kn,{},Br).map(Uo=>Uo*ki):(Gb=cn.layout.get("text-radial-offset").evaluate(kn,{},Br)*ki,$b=Ab),Ut.allowVerticalPlacement&&vn.vertical){const Uo=vn.vertical;if(pr)ff=Pb(Uo),jn&&(Wm=Pb(jn));else{const Vo=cn.layout.get("text-rotate").evaluate(kn,{},Br)+90;io=w0(En,gh,St,Zn,ur,sr,Uo,hr,Vo,Mr),jn&&(Ei=w0(En,gh,St,Zn,ur,sr,jn,Gn,Vo))}}if(mn){const Uo=cn.layout.get("icon-rotate").evaluate(kn,{},Br),Vo=cn.layout.get("icon-text-fit")!=="none",Hm=wC(mn,Uo,ni,Vo),qb=jn?wC(jn,Uo,ni,Vo):void 0;bi=w0(En,gh,St,Zn,ur,sr,mn,Gn,Uo),qm=4*Hm.length;const iP=Ut.iconSizeData;let yh=null;iP.kind==="source"?(yh=[Ba*cn.layout.get("icon-size").evaluate(kn,{},Br)],yh[0]>Cc&&Jt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):iP.kind==="composite"&&(yh=[Ba*br.compositeIconSizes[0].evaluate(kn,{},Br),Ba*br.compositeIconSizes[1].evaluate(kn,{},Br)],(yh[0]>Cc||yh[1]>Cc)&&Jt(`${Ut.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ut.addSymbols(Ut.icon,Hm,yh,qr,Kr,kn,!1,nn,St,Wi.lineStartIndex,Wi.lineLength,-1,Yn,Br),Vb=Ut.icon.placedSymbolArray.length-1,qb&&(eP=4*qb.length,Ut.addSymbols(Ut.icon,qb,yh,qr,Kr,kn,es.vertical,nn,St,Wi.lineStartIndex,Wi.lineLength,-1,Yn,Br),jb=Ut.icon.placedSymbolArray.length-1)}for(const Uo in vn.horizontal){const Vo=vn.horizontal[Uo];wi||(rP=ih(Vo.text),pr?Pl=Pb(Vo):wi=w0(En,gh,St,Zn,ur,sr,Vo,hr,cn.layout.get("text-rotate").evaluate(kn,{},Br),Mr));const Hm=Vo.positionedLines.length===1;if(tP+=TC(Ut,nn,St,Vo,rn,cn,pr,kn,Mr,Wi,vn.vertical?es.horizontal:es.horizontalOnly,Hm?Object.keys(vn.horizontal):[Uo],ja,Vb,br,Yn,Br),Hm)break}vn.vertical&&(nP+=TC(Ut,nn,St,vn.vertical,rn,cn,pr,kn,Mr,Wi,es.vertical,["vertical"],ja,jb,br,Yn,Br));let Lc=-1;const Wb=(Uo,Vo)=>Uo?Math.max(Uo,Vo):Vo;Lc=Wb(Pl,Lc),Lc=Wb(ff,Lc),Lc=Wb(Wm,Lc);const P6=Lc>-1?1:0;Ut.glyphOffsetArray.length>=Rc.MAX_GLYPHS&&Jt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),kn.sortKey!==void 0&&Ut.addToSortKeyRanges(Ut.symbolInstances.length,kn.sortKey),Ut.symbolInstances.emplaceBack(gh.x,gh.y,gh.z,St.x,St.y,ja.right>=0?ja.right:-1,ja.center>=0?ja.center:-1,ja.left>=0?ja.left:-1,ja.vertical>=0?ja.vertical:-1,Vb,jb,rP,wi!==void 0?wi:Ut.collisionBoxArray.length,wi!==void 0?wi+1:Ut.collisionBoxArray.length,io!==void 0?io:Ut.collisionBoxArray.length,io!==void 0?io+1:Ut.collisionBoxArray.length,bi!==void 0?bi:Ut.collisionBoxArray.length,bi!==void 0?bi+1:Ut.collisionBoxArray.length,Ei||Ut.collisionBoxArray.length,Ei?Ei+1:Ut.collisionBoxArray.length,Zn,tP,nP,qm,eP,P6,0,Gb,$b,Lc)})(o,Tt,Rt,Je,a,u,d,ht,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Te,$e,T,0,we,rt,Q,r,g,S,R,L)};if(mt==="line")for(const Je of _C(r.geometry,0,0,sn,sn)){const Tt=ZF(Je,ve,Ze,a.vertical||ie,u,24,he,o.overscaling,sn);for(const en of Tt){const Rt=ie;Rt&&r6(o,Rt.text,Ke,en)||gt(Je,en,L)}}else if(mt==="line-center"){for(const Je of r.geometry)if(Je.length>1){const Tt=HF(Je,Ze,a.vertical||ie,u,24,he);Tt&&gt(Je,Tt,L)}}else if(r.type==="Polygon")for(const Je of yb(r.geometry,0)){const Tt=KF(Je,16);gt(Je[0],new Cl(Tt.x,Tt.y,0,0,void 0),L)}else if(r.type==="LineString")for(const Je of r.geometry)gt(Je,new Cl(Je[0].x,Je[0].y,0,0,void 0),L);else if(r.type==="Point")for(const Je of r.geometry)for(const Tt of Je)gt([Tt],new Cl(Tt.x,Tt.y,0,0,void 0),L)}const Cc=32640;function TC(o,r,a,u,d,g,_,w,T,S,R,L,B,j,q,Q,ie){const pe=function(ve,Te,we,Ze,$e,rt,mt,Ke){const it=[];if(Te.positionedLines.length===0)return it;const st=Ze.layout.get("text-rotate").evaluate(rt,{})*Math.PI/180,ht=function(Rt){const Ut=Rt[0],St=Rt[1],nn=Ut*St;return nn>0?[Ut,-St]:nn<0?[-Ut,St]:Ut===0?[St,Ut]:[St,-Ut]}(we);let gt=Math.abs(Te.top-Te.bottom);for(const Rt of Te.positionedLines)gt-=Rt.lineOffset;const Je=Te.positionedLines.length,Tt=gt/Je;let en=Te.top-we[1];for(let Rt=0;Rt<Je;++Rt){const Ut=Te.positionedLines[Rt];en=YF(Te,Tt,en,Rt);for(const St of Ut.positionedGlyphs){if(!St.rect)continue;const nn=St.rect||{};let bn=4,vn=!0,mn=1,rn=0;if(St.imageName){const Yn=mt[St.imageName];if(!Yn)continue;if(Yn.sdf){Jt("SDF images are not supported in formatted text and will be ignored.");continue}vn=!1,mn=Yn.pixelRatio,bn=1/mn}const jn=($e||Ke)&&St.vertical,cn=St.metrics.advance*St.scale/2,En=St.metrics,Zn=St.rect;if(Zn===null)continue;Ke&&Te.verticalizable&&(rn=St.imageName?cn-St.metrics.width*St.scale/2:0);const ur=$e?[St.x+cn,St.y]:[0,0];let sr=[0,0],hr=[0,0],pr=!1;$e||(jn?(hr=[St.x+cn+ht[0],St.y+ht[1]-rn],pr=!0):sr=[St.x+cn+we[0],St.y+we[1]-rn]);const Mr=Zn.w*St.scale/(mn*(St.localGlyph?2:1)),xi=Zn.h*St.scale/(mn*(St.localGlyph?2:1));let Gn,Kr,qr,kn;if(jn){const Yn=St.y-en,Br=new $(-cn,cn-Yn),Wi=-Math.PI/2,wi=new $(...hr);Gn=new $(-cn+sr[0],sr[1]),Gn._rotateAround(Wi,Br)._add(wi),Gn.x+=-Yn+cn,Gn.y-=(En.left-bn)*St.scale;const bi=St.imageName?En.advance*St.scale:ki*St.scale,io=String.fromCharCode(St.glyph);PF(io)?Gn.x+=(1-bn)*St.scale:RF(io)?Gn.x+=bi-En.height*St.scale+(-bn-1)*St.scale:Gn.x+=St.imageName||En.width+2*bn===Zn.w&&En.height+2*bn===Zn.h?(bi-xi)/2:(bi-(En.height+2*bn)*St.scale)/2,Kr=new $(Gn.x,Gn.y-Mr),qr=new $(Gn.x+xi,Gn.y),kn=new $(Gn.x+xi,Gn.y-Mr)}else{const Yn=(En.left-bn)*St.scale-cn+sr[0],Br=(-En.top-bn)*St.scale+sr[1],Wi=Yn+Mr,wi=Br+xi;Gn=new $(Yn,Br),Kr=new $(Wi,Br),qr=new $(Yn,wi),kn=new $(Wi,wi)}if(st){let Yn;Yn=$e?new $(0,0):pr?new $(ht[0],ht[1]):new $(we[0],we[1]),Gn._rotateAround(st,Yn),Kr._rotateAround(st,Yn),qr._rotateAround(st,Yn),kn._rotateAround(st,Yn)}const br=new $(0,0),ni=new $(0,0);it.push({tl:Gn,tr:Kr,bl:qr,br:kn,tex:nn,writingMode:Te.writingMode,glyphOffset:ur,sectionIndex:St.sectionIndex,isSDF:vn,pixelOffsetTL:br,pixelOffsetBR:ni,minFontScaleX:0,minFontScaleY:0})}}return it}(0,u,T,g,_,w,d,o.allowVerticalPlacement),xe=o.textSizeData;let he=null;xe.kind==="source"?(he=[Ba*g.layout.get("text-size").evaluate(w,{},ie)],he[0]>Cc&&Jt(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):xe.kind==="composite"&&(he=[Ba*q.compositeTextSizes[0].evaluate(w,{},ie),Ba*q.compositeTextSizes[1].evaluate(w,{},ie)],(he[0]>Cc||he[1]>Cc)&&Jt(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,pe,he,T,_,w,R,r,a,S.lineStartIndex,S.lineLength,j,Q,ie);for(const ve of L)B[ve]=o.text.placedSymbolArray.length-1;return 4*pe.length}function SC(o){for(const r in o)return o[r];return null}function w0(o,r,a,u,d,g,_,w,T,S){let R=_.top,L=_.bottom,B=_.left,j=_.right;const q=_.collisionPadding;if(q&&(B-=q[0],R-=q[1],j+=q[2],L+=q[3]),T){const Q=new $(B,R),ie=new $(j,R),pe=new $(B,L),xe=new $(j,L),he=re(T);let ve=new $(0,0);S&&(ve=new $(S[0],S[1])),Q._rotateAround(he,ve),ie._rotateAround(he,ve),pe._rotateAround(he,ve),xe._rotateAround(he,ve),B=Math.min(Q.x,ie.x,pe.x,xe.x),j=Math.max(Q.x,ie.x,pe.x,xe.x),R=Math.min(Q.y,ie.y,pe.y,xe.y),L=Math.max(Q.y,ie.y,pe.y,xe.y)}return o.emplaceBack(r.x,r.y,r.z,a.x,a.y,B,R,j,L,w,u,d,g),o.length-1}function Pb(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const r=o.bottom-o.top;return r>0?Math.max(10,r):null}function r6(o,r,a,u){const d=o.compareText;if(r in d){const g=d[r];for(let _=g.length-1;_>=0;_--)if(u.dist(g[_])<a)return!0}else d[r]=[];return d[r].push(u),!1}function IC(o,r){const a=o.fovAboveCenter,u=o.elevation?o.elevation.getMinElevationBelowMSL()*r:0,d=(o._camera.position[2]*o.worldSize-u)/Math.cos(o._pitch),g=Math.sin(a)*d/Math.sin(Math.max(Math.PI/2-o._pitch-a,.01)),_=Math.sin(o._pitch)*g+d;return Math.min(1.01*_,d*(1/o._horizonShift))}function ph(o,r){if(!r.isReprojectedInTileSpace)return{scale:1<<o.z,x:o.x,y:o.y,x2:o.x+1,y2:o.y+1,projection:r};const a=Math.pow(2,-o.z),u=o.x*a,d=(o.x+1)*a,g=o.y*a,_=(o.y+1)*a,w=Jo(u),T=Jo(d),S=Di(g),R=Di(_),L=r.project(w,S),B=r.project(T,S),j=r.project(T,R),q=r.project(w,R);let Q=Math.min(L.x,B.x,j.x,q.x),ie=Math.min(L.y,B.y,j.y,q.y),pe=Math.max(L.x,B.x,j.x,q.x),xe=Math.max(L.y,B.y,j.y,q.y);const he=a/16;function ve(we,Ze,$e,rt,mt,Ke){const it=($e+mt)/2,st=(rt+Ke)/2,ht=r.project(Jo(it),Di(st)),gt=Math.max(0,Q-ht.x,ie-ht.y,ht.x-pe,ht.y-xe);Q=Math.min(Q,ht.x),pe=Math.max(pe,ht.x),ie=Math.min(ie,ht.y),xe=Math.max(xe,ht.y),gt>he&&(ve(we,ht,$e,rt,it,st),ve(ht,Ze,it,st,mt,Ke))}ve(L,B,u,g,d,g),ve(B,j,d,g,d,_),ve(j,q,d,_,u,_),ve(q,L,u,_,u,g),Q-=he,ie-=he,pe+=he,xe+=he;const Te=1/Math.max(pe-Q,xe-ie);return{scale:Te,x:Q*Te,y:ie*Te,x2:pe*Te,y2:xe*Te,projection:r}}const i6=ea(new Float32Array(16));class Pc{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,a){return{x:0,y:0,z:0}}unproject(r,a){return new Dn(0,0)}projectTilePoint(r,a,u){return{x:r,y:a,z:0}}locationPoint(r,a,u=!0){return r._coordinatePoint(r.locationCoordinate(a),u)}pixelsPerMeter(r,a){return na(1,r)*a}pixelSpaceConversion(r,a,u){return 1}farthestPixelDistance(r){return IC(r,r.pixelsPerMeter)}pointCoordinate(r,a,u,d){const g=r.horizonLineFromTop(!1),_=new $(a,Math.max(g,u));return r.rayIntersectionCoordinate(r.pointRayIntersection(_,d))}pointCoordinate3D(r,a,u){const d=new $(a,u);if(r.elevation)return r.elevation.pointCoordinate(d);{const g=this.pointCoordinate(r,d.x,d.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(r,a){if(r.elevation)return!this.pointCoordinate3D(r,a.x,a.y);const u=r.horizonLineFromTop();return a.y<u}createInversionMatrix(r,a){return i6}createTileMatrix(r,a,u){let d,g,_;const w=u.canonical,T=ea(new Float64Array(16));if(this.isReprojectedInTileSpace){const S=ph(w,this);d=1,g=S.x+u.wrap*S.scale,_=S.y,ah(T,T,[d/S.scale,d/S.scale,r.pixelsPerMeter/a])}else d=a/r.zoomScale(w.z),g=(w.x+Math.pow(2,w.z)*u.wrap)*d,_=w.y*d;return mm(T,T,[g,_,0]),ah(T,T,[d/sn,d/sn,1]),T}upVector(r,a,u){return[0,0,1]}upVectorScale(r,a,u){return{metersToTile:1}}}class o6 extends Pc{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[a,u]=this.parallels=r.parallels||[29.5,45.5],d=Math.sin(re(a));this.n=(d+Math.sin(re(u)))/2,this.c=1+d*(2*this.n-d),this.r0=Math.sqrt(this.c)/this.n}project(r,a){const{n:u,c:d,r0:g}=this,_=re(r-this.center[0]),w=re(a),T=Math.sqrt(d-2*u*Math.sin(w))/u;return{x:T*Math.sin(_*u),y:T*Math.cos(_*u)-g,z:0}}unproject(r,a){const{n:u,c:d,r0:g}=this,_=g+a;let w=Math.atan2(r,Math.abs(_))*Math.sign(_);_*u<0&&(w-=Math.PI*Math.sign(r)*Math.sign(_));const T=re(this.center[0])*u;w=je(w,-Math.PI-T,Math.PI-T);const S=Oe(ce(w/u)+this.center[0],-180,180),R=Math.asin(Oe((d-(r*r+_*_)*u*u)/(2*u),-1,1)),L=Oe(ce(R),-Oi,Oi);return new Dn(S,L)}}const Fm=1.340264,Um=-.081106,Vm=893e-6,jm=.003796,b0=Math.sqrt(3)/2;class s6 extends Pc{project(r,a){a=a/180*Math.PI,r=r/180*Math.PI;const u=Math.asin(b0*Math.sin(a)),d=u*u,g=d*d*d;return{x:.5*(r*Math.cos(u)/(b0*(Fm+3*Um*d+g*(7*Vm+9*jm*d)))/Math.PI+.5),y:1-.5*(u*(Fm+Um*d+g*(Vm+jm*d))/Math.PI+1),z:0}}unproject(r,a){r=(2*r-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,d=u*u,g=d*d*d;for(let R,L,B,j=0;j<12&&(L=u*(Fm+Um*d+g*(Vm+jm*d))-a,B=Fm+3*Um*d+g*(7*Vm+9*jm*d),R=L/B,u=Oe(u-R,-Math.PI/3,Math.PI/3),d=u*u,g=d*d*d,!(Math.abs(R)<1e-12));++j);const _=b0*r*(Fm+3*Um*d+g*(7*Vm+9*jm*d))/Math.cos(u),w=Math.asin(Math.sin(u)/b0),T=Oe(180*_/Math.PI,-180,180),S=Oe(180*w/Math.PI,-Oi,Oi);return new Dn(T,S)}}class a6 extends Pc{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,a){return{x:.5+r/360,y:.5-a/360,z:0}}unproject(r,a){const u=360*(r-.5),d=Oe(360*(.5-a),-Oi,Oi);return new Dn(u,d)}}const hf=Math.PI/2;function E0(o){return Math.tan((hf+o)/2)}class l6 extends Pc{constructor(r){super(r),this.center=r.center||[0,30];const[a,u]=this.parallels=r.parallels||[30,30];let d=re(a),g=re(u);this.southernCenter=d+g<0,this.southernCenter&&(d=-d,g=-g);const _=Math.cos(d),w=E0(d);this.n=d===g?Math.sin(d):Math.log(_/Math.cos(g))/Math.log(E0(g)/w),this.f=_*Math.pow(E0(d),this.n)/this.n}project(r,a){a=re(a),this.southernCenter&&(a=-a),r=re(r-this.center[0]);const u=1e-6,{n:d,f:g}=this;g>0?a<-hf+u&&(a=-hf+u):a>hf-u&&(a=hf-u);const _=g/Math.pow(E0(a),d);let w=_*Math.sin(d*r),T=g-_*Math.cos(d*r);return w=.5*(w/Math.PI+.5),T=.5*(T/Math.PI+.5),{x:w,y:this.southernCenter?T:1-T,z:0}}unproject(r,a){r=(2*r-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:u,f:d}=this,g=d-a,_=Math.sign(g),w=Math.sign(u)*Math.sqrt(r*r+g*g);let T=Math.atan2(r,Math.abs(g))*_;g*u<0&&(T-=Math.PI*Math.sign(r)*_);const S=Oe(ce(T/u)+this.center[0],-180,180),R=Oe(ce(2*Math.atan(Math.pow(d/w,1/u))-hf),-Oi,Oi);return new Dn(S,this.southernCenter?-R:R)}}class MC extends Pc{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,a){return{x:za(r),y:Na(a),z:0}}unproject(r,a){const u=Jo(r),d=Di(a);return new Dn(u,d)}}const AC=re(Oi);class c6 extends Pc{project(r,a){const u=(a=re(a))*a,d=u*u;return{x:.5*((r=re(r))*(.8707-.131979*u+d*(d*(.003971*u-.001529*d)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+u*(.015085+d*(.028874*u-.044475-.005916*d)))/Math.PI+1),z:0}}unproject(r,a){r=(2*r-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,d=25,g=0,_=u*u;do{_=u*u;const S=_*_;g=(u*(1.007226+_*(.015085+S*(.028874*_-.044475-.005916*S)))-a)/(1.007226+_*(.045255+S*(.259866*_-.311325-.005916*11*S))),u=Oe(u-g,-AC,AC)}while(Math.abs(g)>1e-6&&--d>0);_=u*u;const w=Oe(ce(r/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),T=ce(u);return new Dn(w,T)}}const CC=re(Oi);class u6 extends Pc{project(r,a){a=re(a),r=re(r);const u=Math.cos(a),d=2/Math.PI,g=Math.acos(u*Math.cos(r/2)),_=Math.sin(g)/g,w=.5*(r*d+2*u*Math.sin(r/2)/_)||0,T=.5*(a+Math.sin(a)/_)||0;return{x:.5*(w/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(r,a){let u=r=(2*r-.5)*Math.PI,d=a=(2*(1-a)-1)*Math.PI,g=25;const _=1e-6;let w=0,T=0;do{const S=Math.cos(d),R=Math.sin(d),L=2*R*S,B=R*R,j=S*S,q=Math.cos(u/2),Q=Math.sin(u/2),ie=2*q*Q,pe=Q*Q,xe=1-j*q*q,he=xe?1/xe:0,ve=xe?Math.acos(S*q)*Math.sqrt(1/xe):0,Te=.5*(2*ve*S*Q+2*u/Math.PI)-r,we=.5*(ve*R+d)-a,Ze=.5*he*(j*pe+ve*S*q*B)+1/Math.PI,$e=he*(ie*L/4-ve*R*Q),rt=.125*he*(L*Q-ve*R*j*ie),mt=.5*he*(B*q+ve*pe*S)+.5,Ke=$e*rt-mt*Ze;w=(we*$e-Te*mt)/Ke,T=(Te*rt-we*Ze)/Ke,u=Oe(u-w,-Math.PI,Math.PI),d=Oe(d-T,-CC,CC)}while((Math.abs(w)>_||Math.abs(T)>_)&&--g>0);return new Dn(ce(u),ce(d))}}class PC extends Pc{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(re(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,a){const{scale:u,cosPhi:d}=this;return{x:re(r)*d*u+.5,y:-Math.sin(re(a))/d*u+.5,z:0}}unproject(r,a){const{scale:u,cosPhi:d}=this,g=-(a-.5)/u,_=Oe(ce((r-.5)/u)/d,-180,180),w=Math.asin(Oe(g*d,-1,1)),T=Oe(ce(w),-Oi,Oi);return new Dn(_,T)}}class h6 extends MC{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,a,u){const d=Em(r,a,u);return Nr(d,d,Tm(La(u))),{x:d[0],y:d[1],z:d[2]}}locationPoint(r,a){const u=Xd(a.lat,a.lng),d=to([],u),g=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(a),r._centerAltitude):r._centerAltitude;vm(u,u,d,na(1,0)*sn*g);const _=ea(new Float64Array(16));return sh(_,r.pixelMatrix,r.globeMatrix),Nr(u,u,_),new $(u[0],u[1])}pixelsPerMeter(r,a){return na(1,0)*a}pixelSpaceConversion(r,a,u){const d=na(1,r)*a,g=Rn(na(1,45)*a,d,u);return this.pixelsPerMeter(r,a)/g}createTileMatrix(r,a,u){const d=rb(La(u.canonical));return sh(new Float64Array(16),r.globeMatrix,d)}createInversionMatrix(r,a){const{center:u}=r,d=Tm(La(a));return K_(d,d,re(u.lng)),Zw(d,d,re(u.lat)),ah(d,d,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(d)}pointCoordinate(r,a,u,d){return sA(r,a,u,!0)||new Kd(0,0)}pointCoordinate3D(r,a,u){const d=this.pointCoordinate(r,a,u,0);return[d.x,d.y,d.z]}isPointAboveHorizon(r,a){return!sA(r,a.x,a.y,!1)}farthestPixelDistance(r){const a=function(d,g){const _=d.cameraToCenterDistance,w=d._centerAltitude*g,T=d._camera,S=d._camera.forward(),R=Sl([],Ko([],S,-_),[0,0,w]),L=d.worldSize/(2*Math.PI),B=[0,0,-L],j=d.width/d.height,q=Math.tan(d.fovAboveCenter),Q=Ko([],T.up(),q),ie=Ko([],T.right(),q*j),pe=to([],Sl([],Sl([],S,Q),ie)),xe=[];let he;if(new Kw(R,pe).closestPointOnSphere(B,L,xe)){const ve=Sl([],xe,B),Te=ta([],ve,R);he=Math.cos(d.fovAboveCenter)*gm(Te)}else{const ve=ta([],R,B),Te=ta([],B,R);to(Te,Te);const we=gm(ve)-L;he=Math.sqrt(we*(we+2*L));const Ze=Math.acos(he/(L+we))-Math.acos(bs(S,Te));he*=Math.cos(Ze)}return 1.01*he}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),u=Qd(r.zoom);if(u>0){const d=IC(r,na(1,r.center.lat)*r.worldSize),g=r.worldSize/(2*Math.PI),_=Math.max(r.width,r.height)/r.worldSize*Math.PI;return Rn(a,d+g*(1-Math.cos(_)),Math.pow(u,10))}return a}upVector(r,a,u){return Em(a,u,r,1)}upVectorScale(r){return{metersToTile:J_(t0(La(r)))}}}function RC(o){const r=o.parallels,a=!!r&&Math.abs(r[0]+r[1])<.01;switch(o.name){case"mercator":return new MC(o);case"equirectangular":return new a6(o);case"naturalEarth":return new c6(o);case"equalEarth":return new s6(o);case"winkelTripel":return new u6(o);case"albers":return a?new PC(o):new o6(o);case"lambertConformalConic":return a?new PC(o):new l6(o);case"globe":return new h6(o)}throw new Error(`Invalid projection name: ${o.name}`)}const d6=h0.types,f6=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function T0(o,r,a,u,d,g,_,w,T,S,R,L,B){const j=w?Math.min(Cc,Math.round(w[0])):0,q=w?Math.min(Cc,Math.round(w[1])):0;o.emplaceBack(r,a,Math.round(32*u),Math.round(32*d),g,_,(j<<1)+(T?1:0),q,16*S,16*R,256*L,256*B)}function S0(o,r,a,u,d,g,_){o.emplaceBack(r,a,u,d,g,_)}function I0(o,r,a,u,d){o.emplaceBack(r,a,u,d),o.emplaceBack(r,a,u,d),o.emplaceBack(r,a,u,d),o.emplaceBack(r,a,u,d)}function p6(o){for(const r of o.sections)if(Z(r.text))return!0;return!1}class Rb{constructor(r){this.layoutVertexArray=new Xs,this.indexArray=new Ri,this.programConfigurations=r,this.segments=new $r,this.dynamicLayoutVertexArray=new Jn,this.opacityVertexArray=new er,this.placedSymbolArray=new DM,this.globeExtVertexArray=new fr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,u,d){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,bF.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,TF.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,f6,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,EF.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||d)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Bt(Rb,"SymbolBuffers");class Db{constructor(r,a,u){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new u,this.segments=new $r,this.collisionVertexArray=new cr,this.collisionVertexArrayExt=new Pi}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,SF.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,IF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Bt(Db,"CollisionBuffers");class Rc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(_=>_.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ea([]),this.placementViewportMatrix=ea([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wb(this.zoom,a["text-size"]),this.iconSizeData=wb(this.zoom,a["icon-size"]);const u=this.layers[0].layout,d=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(_=>es[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=r.sourceID,this.projection=r.projection}createArrays(){this.text=new Rb(new oh(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Rb(new oh(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new LM,this.lineVertexArray=new zM,this.symbolInstances=new kM}calculateGlyphDependencies(r,a,u,d,g){for(let _=0;_<r.length;_++)if(a[r.charCodeAt(_)]=!0,d&&g){const w=Lm[r.charAt(_)];w&&(a[w.charCodeAt(0)]=!0)}}populate(r,a,u,d){const g=this.layers[0],_=g.layout,w=this.projection.name==="globe",T=_.get("text-font"),S=_.get("text-field"),R=_.get("icon-image"),L=(S.value.kind!=="constant"||S.value.value instanceof Ji&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),B=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,j=_.get("symbol-sort-key");if(this.features=[],!L&&!B)return;const q=a.iconDependencies,Q=a.glyphDependencies,ie=a.availableImages,pe=new Ne(this.zoom);for(const{feature:xe,id:he,index:ve,sourceLayerIndex:Te}of r){const we=g._featureFilter.needGeometry,Ze=hh(xe,we);if(!g._featureFilter.filter(pe,Ze,u))continue;if(we||(Ze.geometry=Il(xe,u,d)),w&&xe.type!==1&&u.z<=5){const Ke=Ze.geometry,it=.98078528056,st=(ht,gt)=>bs(Em(ht.x,ht.y,u,1),Em(gt.x,gt.y,u,1))<it;for(let ht=0;ht<Ke.length;ht++)Ke[ht]=TB(Ke[ht],st)}let $e,rt;if(L){const Ke=g.getValueAndResolveTokens("text-field",Ze,u,ie),it=Ji.factory(Ke);p6(it)&&(this.hasRTLText=!0),(!this.hasRTLText||Se()==="unavailable"||this.hasRTLText&&Ce.isParsed())&&($e=CF(it,g,Ze))}if(B){const Ke=g.getValueAndResolveTokens("icon-image",Ze,u,ie);rt=Ke instanceof $i?Ke:$i.fromString(Ke)}if(!$e&&!rt)continue;const mt=this.sortFeaturesByKey?j.evaluate(Ze,{},u):void 0;if(this.features.push({id:he,text:$e,icon:rt,index:ve,sourceLayerIndex:Te,geometry:Ze.geometry,properties:xe.properties,type:d6[xe.type],sortKey:mt}),rt&&(q[rt.name]=!0),$e){const Ke=T.evaluate(Ze,{},u).join(","),it=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(es.vertical)>=0;for(const st of $e.sections)if(st.image)q[st.image.name]=!0;else{const ht=x($e.toString()),gt=st.fontStack||Ke,Je=Q[gt]=Q[gt]||{};this.calculateGlyphDependencies(st.text,Je,it,this.allowVerticalPlacement,ht)}}}_.get("symbol-placement")==="line"&&(this.features=function(xe){const he={},ve={},Te=[];let we=0;function Ze(Ke){Te.push(xe[Ke]),we++}function $e(Ke,it,st){const ht=ve[Ke];return delete ve[Ke],ve[it]=ht,Te[ht].geometry[0].pop(),Te[ht].geometry[0]=Te[ht].geometry[0].concat(st[0]),ht}function rt(Ke,it,st){const ht=he[it];return delete he[it],he[Ke]=ht,Te[ht].geometry[0].shift(),Te[ht].geometry[0]=st[0].concat(Te[ht].geometry[0]),ht}function mt(Ke,it,st){const ht=st?it[0][it[0].length-1]:it[0][0];return`${Ke}:${ht.x}:${ht.y}`}for(let Ke=0;Ke<xe.length;Ke++){const it=xe[Ke],st=it.geometry,ht=it.text?it.text.toString():null;if(!ht){Ze(Ke);continue}const gt=mt(ht,st),Je=mt(ht,st,!0);if(gt in ve&&Je in he&&ve[gt]!==he[Je]){const Tt=rt(gt,Je,st),en=$e(gt,Je,Te[Tt].geometry);delete he[gt],delete ve[Je],ve[mt(ht,Te[en].geometry,!0)]=en,Te[Tt].geometry=null}else gt in ve?$e(gt,Je,st):Je in he?rt(gt,Je,st):(Ze(Ke),he[gt]=we-1,ve[Je]=we-1)}return Te.filter(Ke=>Ke.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((xe,he)=>xe.sortKey-he.sortKey)}update(r,a,u,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,u,d),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,u,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=RC(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const u=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:d,y:g}of a)this.lineVertexArray.emplaceBack(d,g);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,a,u,d,g,_,w,T,S,R,L,B,j,q){const Q=r.indexArray,ie=r.layoutVertexArray,pe=r.globeExtVertexArray,xe=r.segments.prepareSegment(4*a.length,ie,Q,this.canOverlap?_.sortKey:void 0),he=this.glyphOffsetArray.length,ve=xe.vertexLength,Te=this.allowVerticalPlacement&&w===es.vertical?Math.PI/2:0,we=_.text&&_.text.sections;for(let $e=0;$e<a.length;$e++){const{tl:rt,tr:mt,bl:Ke,br:it,tex:st,pixelOffsetTL:ht,pixelOffsetBR:gt,minFontScaleX:Je,minFontScaleY:Tt,glyphOffset:en,isSDF:Rt,sectionIndex:Ut}=a[$e],St=xe.vertexLength,nn=en[1];if(T0(ie,S.x,S.y,rt.x,nn+rt.y,st.x,st.y,u,Rt,ht.x,ht.y,Je,Tt),T0(ie,S.x,S.y,mt.x,nn+mt.y,st.x+st.w,st.y,u,Rt,gt.x,ht.y,Je,Tt),T0(ie,S.x,S.y,Ke.x,nn+Ke.y,st.x,st.y+st.h,u,Rt,ht.x,gt.y,Je,Tt),T0(ie,S.x,S.y,it.x,nn+it.y,st.x+st.w,st.y+st.h,u,Rt,gt.x,gt.y,Je,Tt),T){const{x:bn,y:vn,z:mn}=T.anchor,[rn,jn,cn]=T.up;S0(pe,bn,vn,mn,rn,jn,cn),S0(pe,bn,vn,mn,rn,jn,cn),S0(pe,bn,vn,mn,rn,jn,cn),S0(pe,bn,vn,mn,rn,jn,cn),I0(r.dynamicLayoutVertexArray,bn,vn,mn,Te)}else I0(r.dynamicLayoutVertexArray,S.x,S.y,S.z,Te);Q.emplaceBack(St,St+1,St+2),Q.emplaceBack(St+1,St+2,St+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(en[0]),$e!==a.length-1&&Ut===a[$e+1].sectionIndex||r.programConfigurations.populatePaintArrays(ie.length,_,_.index,{},j,q,we&&we[Ut])}const Ze=T?T.anchor:S;r.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Ze.z,S.x,S.y,he,this.glyphOffsetArray.length-he,ve,R,L,S.segment,u?u[0]:0,u?u[1]:0,d[0],d[1],w,0,!1,0,B,0)}_commitLayoutVertex(r,a,u,d,g,_,w){r.emplaceBack(a,u,d,g,_,Math.round(w.x),Math.round(w.y))}_addCollisionDebugVertices(r,a,u,d,g,_,w){const T=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),S=T.vertexLength,R=w.tileAnchorX,L=w.tileAnchorY;for(let j=0;j<4;j++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(a,-r.padding,-r.padding),u.collisionVertexArrayExt.emplaceBack(a,r.padding,-r.padding),u.collisionVertexArrayExt.emplaceBack(a,r.padding,r.padding),u.collisionVertexArrayExt.emplaceBack(a,-r.padding,r.padding),this._commitLayoutVertex(u.layoutVertexArray,d,g,_,R,L,new $(r.x1,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,d,g,_,R,L,new $(r.x2,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,d,g,_,R,L,new $(r.x2,r.y2)),this._commitLayoutVertex(u.layoutVertexArray,d,g,_,R,L,new $(r.x1,r.y2)),T.vertexLength+=4;const B=u.indexArray;B.emplaceBack(S,S+1),B.emplaceBack(S+1,S+2),B.emplaceBack(S+2,S+3),B.emplaceBack(S+3,S),T.primitiveLength+=4}_addTextDebugCollisionBoxes(r,a,u,d,g,_){for(let w=d;w<g;w++){const T=u.get(w),S=this.getSymbolInstanceTextSize(r,_,a,w);this._addCollisionDebugVertices(T,S,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(r,a,u,d,g,_){for(let w=d;w<g;w++){const T=u.get(w),S=this.getSymbolInstanceIconSize(r,a,_.placedIconSymbolIndex);this._addCollisionDebugVertices(T,S,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,_)}}generateCollisionDebugBuffers(r,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Db(Ir,JA.members,Da),this.iconCollisionBox=new Db(Ir,JA.members,Da);const u=of(this.iconSizeData,r),d=of(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const _=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(d,r,a,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(d,r,a,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(u,r,a,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(u,r,a,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(r,a,u,d){const g=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:d),_=m0(this.textSizeData,r,g)/ki;return this.tilePixelRatio*_}getSymbolInstanceIconSize(r,a,u){const d=this.icon.placedSymbolArray.get(u),g=m0(this.iconSizeData,r,d);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(r,a,u){r.emplaceBack(a,-u,-u),r.emplaceBack(a,u,-u),r.emplaceBack(a,u,u),r.emplaceBack(a,-u,u)}_updateTextDebugCollisionBoxes(r,a,u,d,g,_){for(let w=d;w<g;w++){const T=u.get(w),S=this.getSymbolInstanceTextSize(r,_,a,w);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,S,T.padding)}}_updateIconDebugCollisionBoxes(r,a,u,d,g,_){for(let w=d;w<g;w++){const T=u.get(w),S=this.getSymbolInstanceIconSize(r,a,_);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,T.padding)}}updateCollisionDebugBuffers(r,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=of(this.iconSizeData,r),d=of(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const _=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(d,r,a,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(d,r,a,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(u,r,a,_.iconBoxStartIndex,_.iconBoxEndIndex,_.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,r,a,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,a,u,d,g,_,w,T,S){const R={};if(a<u){const{x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve,featureIndex:Te}=r.get(a);R.textBox={x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve},R.textFeatureIndex=Te}if(d<g){const{x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve,featureIndex:Te}=r.get(d);R.verticalTextBox={x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve},R.verticalTextFeatureIndex=Te}if(_<w){const{x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve,featureIndex:Te}=r.get(_);R.iconBox={x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve},R.iconFeatureIndex=Te}if(T<S){const{x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve,featureIndex:Te}=r.get(T);R.verticalIconBox={x1:L,y1:B,x2:j,y2:q,padding:Q,projectedAnchorX:ie,projectedAnchorY:pe,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ve},R.verticalIconFeatureIndex=Te}return R}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const u=r.placedSymbolArray.get(a),d=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<d;g+=4)r.indexArray.emplaceBack(g,g+1,g+2),r.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),u=Math.cos(r),d=[],g=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);const T=this.symbolInstances.get(w);d.push(0|Math.round(a*T.tileAnchorX+u*T.tileAnchorY)),g.push(T.featureIndex)}return _.sort((w,T)=>d[w]-d[T]||g[T]-g[w]),_}addToSortKeyRanges(r,a){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===a?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const u=this.symbolInstances.get(a);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:d,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:w,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:S}=u;d>=0&&this.addIndicesForPlacedSymbol(this.text,d),g>=0&&g!==d&&this.addIndicesForPlacedSymbol(this.text,g),_>=0&&_!==g&&_!==d&&this.addIndicesForPlacedSymbol(this.text,_),w>=0&&this.addIndicesForPlacedSymbol(this.text,w),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Bt(Rc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Rc.MAX_GLYPHS=65535,Rc.addDynamicAttributes=I0;const m6=new dt({"symbol-placement":new ze(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new ze(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ze(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qe(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ze(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ze(nt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ze(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ze(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ze(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qe(nt.layout_symbol["icon-size"]),"icon-text-fit":new ze(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ze(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qe(nt.layout_symbol["icon-image"]),"icon-rotate":new Qe(nt.layout_symbol["icon-rotate"]),"icon-padding":new ze(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new ze(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new Qe(nt.layout_symbol["icon-offset"]),"icon-anchor":new Qe(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ze(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ze(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ze(nt.layout_symbol["text-rotation-alignment"]),"text-field":new Qe(nt.layout_symbol["text-field"]),"text-font":new Qe(nt.layout_symbol["text-font"]),"text-size":new Qe(nt.layout_symbol["text-size"]),"text-max-width":new Qe(nt.layout_symbol["text-max-width"]),"text-line-height":new Qe(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new Qe(nt.layout_symbol["text-letter-spacing"]),"text-justify":new Qe(nt.layout_symbol["text-justify"]),"text-radial-offset":new Qe(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ze(nt.layout_symbol["text-variable-anchor"]),"text-anchor":new Qe(nt.layout_symbol["text-anchor"]),"text-max-angle":new ze(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new ze(nt.layout_symbol["text-writing-mode"]),"text-rotate":new Qe(nt.layout_symbol["text-rotate"]),"text-padding":new ze(nt.layout_symbol["text-padding"]),"text-keep-upright":new ze(nt.layout_symbol["text-keep-upright"]),"text-transform":new Qe(nt.layout_symbol["text-transform"]),"text-offset":new Qe(nt.layout_symbol["text-offset"]),"text-allow-overlap":new ze(nt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ze(nt.layout_symbol["text-ignore-placement"]),"text-optional":new ze(nt.layout_symbol["text-optional"])});var Ob={paint:new dt({"icon-opacity":new Qe(nt.paint_symbol["icon-opacity"]),"icon-color":new Qe(nt.paint_symbol["icon-color"]),"icon-halo-color":new Qe(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qe(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qe(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new ze(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ze(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qe(nt.paint_symbol["text-opacity"]),"text-color":new Qe(nt.paint_symbol["text-color"],{runtimeType:vs,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Qe(nt.paint_symbol["text-halo-color"]),"text-halo-width":new Qe(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new Qe(nt.paint_symbol["text-halo-blur"]),"text-translate":new ze(nt.paint_symbol["text-translate"]),"text-translate-anchor":new ze(nt.paint_symbol["text-translate-anchor"])}),layout:m6};class DC{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:oc,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt(DC,"FormatSectionOverride",{omit:["defaultValue"]});class M0 extends Js{constructor(r){super(r,Ob)}recalculate(r,a){super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const d=[];for(const g of u)d.indexOf(g)<0&&d.push(g);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(r,a,u,d){const g=this.layout.get(r).evaluate(a,{},u,d),_=this._unevaluatedLayout._values[r];return _.isDataDriven()||yc(_.value)||!g?g:function(w,T){return T.replace(/{([^{}]+)}/g,(S,R)=>R in w?String(w[R]):"")}(a.properties,g)}createBucket(r){return new Rc(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of Ob.paint.overridableProperties){if(!M0.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),u=new DC(a),d=new Od(u,a.property.specification);let g=null;g=a.value.kind==="constant"||a.value.kind==="source"?new kd("source",d):new wl("composite",d,a.value.zoomStops,a.value._interpolationType),this.paint._values[r]=new ct(a.property,g,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&M0.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const u=r.get("text-field"),d=Ob.paint.properties[a];let g=!1;const _=w=>{for(const T of w)if(d.overrides&&d.overrides.hasOverride(T))return void(g=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Ji)_(u.value.value.sections);else if(u.value.kind==="source"){const w=S=>{g||(S instanceof Du&&Qr(S.value)===sc?_(S.value.sections):S instanceof Ou?_(S.sections):S.eachChild(w))},T=u.value;T._styleExpression&&w(T._styleExpression.expression)}return g}getProgramConfiguration(r){return new Mc(this,r)}}var g6={paint:new dt({"background-color":new ze(nt.paint_background["background-color"]),"background-pattern":new ze(nt.paint_background["background-pattern"]),"background-opacity":new ze(nt.paint_background["background-opacity"])})},y6={paint:new dt({"raster-opacity":new ze(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ze(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ze(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ze(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new ze(nt.paint_raster["raster-saturation"]),"raster-contrast":new ze(nt.paint_raster["raster-contrast"]),"raster-resampling":new ze(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new ze(nt.paint_raster["raster-fade-duration"])})};class _6 extends Js{constructor(r){super(r,{}),this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}var v6={paint:new dt({"sky-type":new ze(nt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ze(nt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ze(nt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ze(nt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ze(nt.paint_sky["sky-gradient-radius"]),"sky-gradient":new at(nt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ze(nt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ze(nt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ze(nt.paint_sky["sky-opacity"])})};function kb(o,r,a){const u=[0,0,1],d=tA([]);return rA(d,d,a?-re(o)+Math.PI:re(o)),nA(d,d,-re(r)),QM(u,u,d),to(u,u)}const x6={circle:class extends Js{constructor(o){super(o,RB)}createBucket(o){return new cb(o)}queryRadius(o){const r=o;return Jd("circle-radius",this,r)+Jd("circle-stroke-width",this,r)+i0(this.paint.get("circle-translate"))}queryIntersectsFeature(o,r,a,u,d,g,_,w){const T=TA(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),S=this.paint.get("circle-radius").evaluate(r,a)+this.paint.get("circle-stroke-width").evaluate(r,a);return SA(o,u,g,_,w,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",T,S)}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new Mc(this,o)}},heatmap:class extends Js{createBucket(o){return new MA(o)}constructor(o){super(o,LB),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(o){return Jd("heatmap-radius",this,o)}queryIntersectsFeature(o,r,a,u,d,g,_,w){const T=this.paint.get("heatmap-radius").evaluate(r,a);return SA(o,u,g,_,w,!0,!0,new $(0,0),T)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new Mc(this,o)}},hillshade:class extends Js{constructor(o){super(o,zB)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Js{constructor(o){super(o,KB)}getProgramIds(){const o=this.paint.get("fill-pattern"),r=o&&o.constantOr(1),a=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(o){return new Mc(this,o)}recalculate(o,r){super.recalculate(o,r);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new c0(o)}queryRadius(){return i0(this.paint.get("fill-translate"))}queryIntersectsFeature(o,r,a,u,d,g){return!o.queryGeometry.isAboveHorizon&&vA(EA(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Js{constructor(o){super(o,pF)}createBucket(o){return new Dm(o)}queryRadius(){return i0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new Mc(this,o)}queryIntersectsFeature(o,r,a,u,d,g,_,w,T){const S=TA(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),R=this.paint.get("fill-extrusion-height").evaluate(r,a),L=this.paint.get("fill-extrusion-base").evaluate(r,a),B=[0,0],j=w&&g.elevation,q=g.elevation?g.elevation.exaggeration():1,Q=o.tile.getBucket(this);if(j&&Q instanceof Dm){const ve=Q.centroidVertexArray,Te=T+1;Te<ve.length&&(B[0]=ve.geta_centroid_pos0(Te),B[1]=ve.geta_centroid_pos1(Te))}if(B[0]===0&&B[1]===1)return!1;g.projection.name==="globe"&&(u=WA([u],[new $(0,0),new $(sn,sn)],o.tileID.canonical).map(ve=>ve.polygon).flat());const ie=j?w:null,[pe,xe]=function(ve,Te,we,Ze,$e,rt,mt,Ke,it,st,ht){return ve.projection.name==="globe"?function(gt,Je,Tt,en,Rt,Ut,St,nn,bn,vn,mn){const rn=[],jn=[],cn=gt.projection.upVectorScale(mn,gt.center.lat,gt.worldSize).metersToTile,En=[0,0,0,1],Zn=[0,0,0,1],ur=(hr,pr,Mr,xi)=>{hr[0]=pr,hr[1]=Mr,hr[2]=xi,hr[3]=1},sr=$A();Tt>0&&(Tt+=sr),en+=sr;for(const hr of Je){const pr=[],Mr=[];for(const xi of hr){const Gn=xi.x+Rt.x,Kr=xi.y+Rt.y,qr=gt.projection.projectTilePoint(Gn,Kr,mn),kn=gt.projection.upVector(mn,xi.x,xi.y);let br=Tt,ni=en;if(St){const Yn=YA(Gn,Kr,Tt,en,St,nn,bn,vn);br+=Yn.base,ni+=Yn.top}Tt!==0?ur(En,qr.x+kn[0]*cn*br,qr.y+kn[1]*cn*br,qr.z+kn[2]*cn*br):ur(En,qr.x,qr.y,qr.z),ur(Zn,qr.x+kn[0]*cn*ni,qr.y+kn[1]*cn*ni,qr.z+kn[2]*cn*ni),Nr(En,En,Ut),Nr(Zn,Zn,Ut),pr.push(new rf(En[0],En[1],En[2])),Mr.push(new rf(Zn[0],Zn[1],Zn[2]))}rn.push(pr),jn.push(Mr)}return[rn,jn]}(ve,Te,we,Ze,$e,rt,mt,Ke,it,st,ht):mt?function(gt,Je,Tt,en,Rt,Ut,St,nn,bn){const vn=[],mn=[],rn=[0,0,0,1];for(const jn of gt){const cn=[],En=[];for(const Zn of jn){const ur=Zn.x+en.x,sr=Zn.y+en.y,hr=YA(ur,sr,Je,Tt,Ut,St,nn,bn);rn[0]=ur,rn[1]=sr,rn[2]=hr.base,rn[3]=1,lh(rn,rn,Rt),rn[3]=Math.max(rn[3],1e-5);const pr=new rf(rn[0]/rn[3],rn[1]/rn[3],rn[2]/rn[3]);rn[0]=ur,rn[1]=sr,rn[2]=hr.top,rn[3]=1,lh(rn,rn,Rt),rn[3]=Math.max(rn[3],1e-5);const Mr=new rf(rn[0]/rn[3],rn[1]/rn[3],rn[2]/rn[3]);cn.push(pr),En.push(Mr)}vn.push(cn),mn.push(En)}return[vn,mn]}(Te,we,Ze,$e,rt,mt,Ke,it,st):function(gt,Je,Tt,en,Rt){const Ut=[],St=[],nn=Rt[8]*Je,bn=Rt[9]*Je,vn=Rt[10]*Je,mn=Rt[11]*Je,rn=Rt[8]*Tt,jn=Rt[9]*Tt,cn=Rt[10]*Tt,En=Rt[11]*Tt;for(const Zn of gt){const ur=[],sr=[];for(const hr of Zn){const pr=hr.x+en.x,Mr=hr.y+en.y,xi=Rt[0]*pr+Rt[4]*Mr+Rt[12],Gn=Rt[1]*pr+Rt[5]*Mr+Rt[13],Kr=Rt[2]*pr+Rt[6]*Mr+Rt[14],qr=Rt[3]*pr+Rt[7]*Mr+Rt[15],kn=xi+nn,br=Gn+bn,ni=Kr+vn,Yn=Math.max(qr+mn,1e-5),Br=xi+rn,Wi=Gn+jn,wi=Kr+cn,bi=Math.max(qr+En,1e-5);ur.push(new rf(kn/Yn,br/Yn,ni/Yn)),sr.push(new rf(Br/bi,Wi/bi,wi/bi))}Ut.push(ur),St.push(sr)}return[Ut,St]}(Te,we,Ze,$e,rt)}(g,u,L,R,S,_,ie,B,q,g.center.lat,o.tileID.canonical),he=o.queryGeometry;return function(ve,Te,we){let Ze=1/0;vA(we,Te)&&(Ze=ZA(we,Te[0]));for(let $e=0;$e<Te.length;$e++){const rt=Te[$e],mt=ve[$e];for(let Ke=0;Ke<rt.length-1;Ke++){const it=rt[Ke],st=[it,rt[Ke+1],mt[Ke+1],mt[Ke],it];_A(we,st)&&(Ze=Math.min(Ze,ZA(we,st)))}}return Ze!==1/0&&Ze}(pe,xe,he.isPointQuery()?he.screenBounds:he.screenGeometry)}},line:class extends Js{constructor(o){super(o,XA),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof Bp,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(o,r){super.recalculate(o,r),this.paint._values["line-floorwidth"]=QA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new p0(o)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(o){return new Mc(this,o)}queryRadius(o){const r=o,a=KA(Jd("line-width",this,r),Jd("line-gap-width",this,r)),u=Jd("line-offset",this,r);return a/2+Math.abs(u)+i0(this.paint.get("line-translate"))}queryIntersectsFeature(o,r,a,u,d,g){if(o.queryGeometry.isAboveHorizon)return!1;const _=EA(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),w=o.pixelToTileUnitsFactor/2*KA(this.paint.get("line-width").evaluate(r,a),this.paint.get("line-gap-width").evaluate(r,a)),T=this.paint.get("line-offset").evaluate(r,a);return T&&(u=function(S,R){const L=[],B=new $(0,0);for(let j=0;j<S.length;j++){const q=S[j],Q=[];for(let ie=0;ie<q.length;ie++){const pe=q[ie-1],xe=q[ie],he=q[ie+1],ve=ie===0?B:xe.sub(pe)._unit()._perp(),Te=ie===q.length-1?B:he.sub(xe)._unit()._perp(),we=ve._add(Te)._unit();we._mult(1/(we.x*Te.x+we.y*Te.y)),Q.push(we._mult(R)._add(xe))}L.push(Q)}return L}(u,T*o.pixelToTileUnitsFactor)),function(S,R,L){for(let B=0;B<R.length;B++){const j=R[B];if(S.length>=3){for(let q=0;q<j.length;q++)if(dh(S,j[q]))return!0}if(MB(S,j,L))return!0}return!1}(_,u,w)}isTileClipped(){return!0}},symbol:M0,background:class extends Js{constructor(o){super(o,g6)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Js{constructor(o){super(o,y6)}getProgramIds(){return["raster"]}},sky:class extends Js{constructor(o){super(o,v6),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="sky-gradient"?this._updateColorRamp():o!=="sky-atmosphere-sun"&&o!=="sky-atmosphere-halo-color"&&o!=="sky-atmosphere-color"&&o!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=fb({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(o,r){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),d=!u,g=o.style.light,_=g.properties.get("position");return d&&g.properties.get("anchor")==="viewport"&&Jt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),d?kb(_.azimuthal,90-_.polar,r):kb(u[0],90-u[1],r)}const a=this.paint.get("sky-gradient-center");return kb(a[0],90-a[1],r)}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return o==="atmosphere"?["skyboxCapture","skybox"]:o==="gradient"?["skyboxGradient"]:null}}};class Gm{constructor(r,a,u,d){this.context=r,this.format=u,this.texture=r.gl.createTexture(),this.update(a,d)}update(r,a,u){const{width:d,height:g}=r,{context:_}=this,{gl:w}=_,{HTMLImageElement:T,HTMLCanvasElement:S,HTMLVideoElement:R,ImageData:L,ImageBitmap:B}=v;if(w.bindTexture(w.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA&&(!a||a.premultiply!==!1)),u||this.size&&this.size[0]===d&&this.size[1]===g){const{x:j,y:q}=u||{x:0,y:0};r instanceof T||r instanceof S||r instanceof R||r instanceof L||B&&r instanceof B?w.texSubImage2D(w.TEXTURE_2D,0,j,q,w.RGBA,w.UNSIGNED_BYTE,r):w.texSubImage2D(w.TEXTURE_2D,0,j,q,d,g,w.RGBA,w.UNSIGNED_BYTE,r.data)}else this.size=[d,g],r instanceof T||r instanceof S||r instanceof R||r instanceof L||B&&r instanceof B?w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,w.UNSIGNED_BYTE,r):w.texImage2D(w.TEXTURE_2D,0,this.format,d,g,0,this.format,w.UNSIGNED_BYTE,r.data);this.useMipmap=!!(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(r,a){const{context:u}=this,{gl:d}=u;d.bindTexture(d.TEXTURE_2D,this.texture),r!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,r),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.useMipmap?r===d.NEAREST?d.NEAREST_MIPMAP_NEAREST:d.LINEAR_MIPMAP_NEAREST:r),this.filter=r),a!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class w6{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class b6{constructor(){this.tasks={},this.taskQueue=[],ft(["process"],this),this.invoker=new w6(this.process),this.nextId=0}add(r,a){const u=this.nextId++,d=function({type:g,isSymbolTile:_,zoom:w}){return w=w||0,g==="message"?0:g!=="maybePrepare"||_?g!=="parseTile"||_?g==="parseTile"&&_?300-w:g==="maybePrepare"&&_?400-w:500:200-w:100-w}(a);if(d===0){ui();try{r()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:r,metadata:a,priority:d,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){ui();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const a=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let r=null,a=1/0;for(let d=0;d<this.taskQueue.length;d++){const g=this.tasks[this.taskQueue[d]];g.priority<a&&(a=g.priority,r=d)}if(r===null)return null;const u=this.taskQueue[r];return this.taskQueue.splice(r,1),u}remove(){this.invoker.remove()}}class OC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const u=r[a];this._stringToNumber[u]=a,this._numberToString[a]=u}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const E6=["tile","layer","source","sourceLayer","state"];class kC{constructor(r,a,u,d,g){this.type="Feature",this._vectorTileFeature=r,this._z=a,this._x=u,this._y=d,this.properties=r.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(r.id=this.id);for(const a of E6)this[a]!==void 0&&(r[a]=this[a]);return r}}const Ss=32,Fa=33,Dc=new Uint16Array(8184);for(let o=0;o<2046;o++){let r=o+2,a=0,u=0,d=0,g=0,_=0,w=0;for(1&r?d=g=_=Ss:a=u=w=Ss;(r>>=1)>1;){const S=a+d>>1,R=u+g>>1;1&r?(d=a,g=u,a=_,u=w):(a=d,u=g,d=_,g=w),_=S,w=R}const T=4*o;Dc[T+0]=a,Dc[T+1]=u,Dc[T+2]=d,Dc[T+3]=g}const Ua=new Uint16Array(2178),Oc=new Uint8Array(1089),A0=new Uint16Array(1089);function LC(o){return o===0?-.03125:o===32?.03125:0}var zC=$t([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const NC={type:2,extent:sn,loadGeometry:()=>[[new $(0,0),new $(8193,0),new $(8193,8193),new $(0,8193),new $(0,0)]]};class Lb{constructor(r,a,u,d,g){this.tileID=r,this.uid=Mt(),this.uses=0,this.tileSize=a,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",d&&d.transform&&(this.projection=d.transform.projection)}registerFadeDuration(r){const a=r+this.timeAdded;a<zn.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=ph(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(r,a,u){if(this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(d,g){const _={};if(!g)return _;for(const w of d){const T=w.layerIds.map(S=>g.getLayer(S)).filter(Boolean);if(T.length!==0){w.layers=T,w.stateDependentLayerIds&&(w.stateDependentLayers=w.stateDependentLayerIds.map(S=>T.filter(R=>R.id===S)[0]));for(const S of T)_[S.id]=w}}return _}(r.buckets,a.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const g=this.buckets[d];if(g instanceof Rc){if(this.hasSymbolBuckets=!0,!u)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const g=this.buckets[d];if(g instanceof Rc&&g.hasRTLText){this.hasRTLText=!0,Ce.isLoading()||Ce.isLoaded()||Se()!=="deferred"||be();break}}this.queryPadding=0;for(const d in this.buckets){const g=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(d).queryRadius(g))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),r.lineAtlas&&(this.lineAtlas=r.lineAtlas)}else this.collisionBoxArray=new jw}unloadVectorData(){if(this.hasData()){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(r){return this.buckets[r.id]}upload(r){for(const u in this.buckets){const d=this.buckets[u];d.uploadPending()&&d.upload(r)}const a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Gm(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Gm(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Gm(r,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,a,u,d,g,_,w,T){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:d,pixelPosMatrix:w,transform:_,params:g,tileTransform:this.tileTransform},r,a,u):{}}querySourceFeatures(r,a){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const d=u.loadVTLayers(),g=a?a.sourceLayer:"",_=d._geojsonTileLayer||d[g];if(!_)return;const w=zd(a&&a.filter),{z:T,x:S,y:R}=this.tileID.canonical,L={z:T,x:S,y:R};for(let B=0;B<_.length;B++){const j=_.feature(B);if(w.needGeometry){const ie=hh(j,!0);if(!w.filter(new Ne(this.tileID.overscaledZ),ie,this.tileID.canonical))continue}else if(!w.filter(new Ne(this.tileID.overscaledZ),j))continue;const q=u.getId(j,g),Q=new kC(j,T,S,R,q);Q.tile=L,r.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const a=this.expirationTime;if(r.cacheControl){const u=Ui(r.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const u=Date.now();let d=!1;if(this.expirationTime>u)d=!1;else if(a)if(this.expirationTime<a)d=!0;else{const g=this.expirationTime-a;g?this.expirationTime=u+Math.max(g,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0||!a)return;const u=this.latestFeatureIndex.loadVTLayers(),d=a.style.listImages();for(const g in this.buckets){if(!a.style.hasLayer(g))continue;const _=this.buckets[g],w=_.layers[0].sourceLayer||"_geojsonTileLayer",T=u[w],S=r[w];if(!T||!S||Object.keys(S).length===0)continue;if(_.update(S,T,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),_ instanceof p0||_ instanceof c0){const L=a.style._getSourceCache(_.layers[0].source);a._terrain&&a._terrain.enabled&&L&&_.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(L.id,this.tileID)}const R=a&&a.style&&a.style.getLayer(g);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<zn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=zn.now()+r}setTexture(r,a){const u=a.context,d=u.gl;this.texture=this.texture||a.getTileTexture(r.width),this.texture?this.texture.update(r,{useMipmap:!0}):(this.texture=new Gm(u,r,d.RGBA,{useMipmap:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE))}setDependencies(r,a){const u={};for(const d of a)u[d]=!0;this.dependencies[r]=u}hasDependency(r,a){for(const u of r){const d=this.dependencies[u];if(d){for(const g of a)if(d[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(r,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;const u=Il(NC,this.tileID.canonical,this.tileTransform)[0],d=new Zt,g=new Oa;for(let _=0;_<u.length;_++){const{x:w,y:T}=u[_];d.emplaceBack(w,T),g.emplaceBack(_)}g.emplaceBack(0),this._tileDebugIndexBuffer=r.createIndexBuffer(g),this._tileDebugBuffer=r.createVertexBuffer(d,wm.members),this._tileDebugSegments=$r.simpleSegment(0,0,d.length,g.length)}_makeTileBoundsBuffers(r,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;const u=Il(NC,this.tileID.canonical,this.tileTransform)[0];let d,g;if(this.isRaster){const _=function(w,T){const S=ph(w,T),R=Math.pow(2,w.z);for(let ie=0;ie<Fa;ie++)for(let pe=0;pe<Fa;pe++){const xe=Jo((w.x+(pe+LC(pe))/Ss)/R),he=Di((w.y+(ie+LC(ie))/Ss)/R),ve=T.project(xe,he),Te=ie*Fa+pe;Ua[2*Te+0]=Math.round((ve.x*S.scale-S.x)*sn),Ua[2*Te+1]=Math.round((ve.y*S.scale-S.y)*sn)}Oc.fill(0),A0.fill(0);for(let ie=2045;ie>=0;ie--){const pe=4*ie,xe=Dc[pe+0],he=Dc[pe+1],ve=Dc[pe+2],Te=Dc[pe+3],we=xe+ve>>1,Ze=he+Te>>1,$e=we+Ze-he,rt=Ze+xe-we,mt=he*Fa+xe,Ke=Te*Fa+ve,it=Ze*Fa+we,st=Math.hypot((Ua[2*mt+0]+Ua[2*Ke+0])/2-Ua[2*it+0],(Ua[2*mt+1]+Ua[2*Ke+1])/2-Ua[2*it+1])>=16;if(Oc[it]=Oc[it]||(st?1:0),ie<1022){const ht=(he+rt>>1)*Fa+(xe+$e>>1),gt=(Te+rt>>1)*Fa+(ve+$e>>1);Oc[it]=Oc[it]||Oc[ht]||Oc[gt]}}const L=new Un,B=new Ri;let j=0;function q(ie,pe){const xe=pe*Fa+ie;return A0[xe]===0&&(L.emplaceBack(Ua[2*xe+0],Ua[2*xe+1],ie*sn/Ss,pe*sn/Ss),A0[xe]=++j),A0[xe]-1}function Q(ie,pe,xe,he,ve,Te){const we=ie+xe>>1,Ze=pe+he>>1;if(Math.abs(ie-ve)+Math.abs(pe-Te)>1&&Oc[Ze*Fa+we])Q(ve,Te,ie,pe,we,Ze),Q(xe,he,ve,Te,we,Ze);else{const $e=q(ie,pe),rt=q(xe,he),mt=q(ve,Te);B.emplaceBack($e,rt,mt)}}return Q(0,0,Ss,Ss,Ss,0),Q(Ss,Ss,0,0,0,Ss),{vertices:L,indices:B}}(this.tileID.canonical,a);d=_.vertices,g=_.indices}else{d=new Un,g=new Ri;for(const{x:w,y:T}of u)d.emplaceBack(w,T,0,0);const _=ef(d.int16,void 0,4);for(let w=0;w<_.length;w+=3)g.emplaceBack(_[w],_[w+1],_[w+2])}this._tileBoundsBuffer=r.createVertexBuffer(d,zC.members),this._tileBoundsIndexBuffer=r.createIndexBuffer(g),this._tileBoundsSegments=$r.simpleSegment(0,0,d.length,g.length)}_makeGlobeTileDebugBuffers(r,a){const u=a.projection;if(!u||u.name!=="globe"||a.freezeTileCoverage)return;const d=this.tileID.canonical,g=Tm(aA(d,a)),_=Qd(a.zoom);let w;_>0&&(w=Hw(new Float64Array(16),a.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(r,d,a,g,w,_),this._makeGlobeTileDebugTextBuffer(r,d,a,g,w,_)}_globePoint(r,a,u,d,g,_,w){let T=Em(r,a,u);if(_){const S=1<<u.z,R=za(d.center.lng),L=Na(d.center.lat),B=(u.x+.5)/S-R;let j=0;B>.5?j=-1:B<-.5&&(j=1);let q=(r/sn+u.x)/S+j,Q=(a/sn+u.y)/S;q=(q-R)*d._pixelsPerMercatorPixel+R,Q=(Q-L)*d._pixelsPerMercatorPixel+L;const ie=[q*d.worldSize,Q*d.worldSize,0];Nr(ie,ie,_),T=uh(T,ie,w)}return Nr(T,T,g)}_makeGlobeTileDebugBorderBuffer(r,a,u,d,g,_){const w=new Zt,T=new Oa,S=new Bn,R=(B,j,q,Q,ie)=>{const pe=(q-B)/(ie-1),xe=(Q-j)/(ie-1),he=w.length;for(let ve=0;ve<ie;ve++){const Te=B+ve*pe,we=j+ve*xe;w.emplaceBack(Te,we);const Ze=this._globePoint(Te,we,a,u,d,g,_);S.emplaceBack(Ze[0],Ze[1],Ze[2]),T.emplaceBack(he+ve)}},L=sn;R(0,0,L,0,16),R(L,0,L,L,16),R(L,L,0,L,16),R(0,L,0,0,16),this._tileDebugIndexBuffer=r.createIndexBuffer(T),this._tileDebugBuffer=r.createVertexBuffer(w,wm.members),this._globeTileDebugBorderBuffer=r.createVertexBuffer(S,oA.members),this._tileDebugSegments=$r.simpleSegment(0,0,w.length,T.length)}_makeGlobeTileDebugTextBuffer(r,a,u,d,g,_){const w=new Zt,T=new Ri,S=new Bn,R=25;T.reserve(32),w.reserve(R),S.reserve(R);const L=(B,j)=>R*B+j;for(let B=0;B<R;B++){const j=2048*B;for(let q=0;q<R;q++){const Q=2048*q;w.emplaceBack(Q,j);const ie=this._globePoint(Q,j,a,u,d,g,_);S.emplaceBack(ie[0],ie[1],ie[2])}}for(let B=0;B<4;B++)for(let j=0;j<4;j++){const q=L(B,j),Q=L(B,j+1),ie=L(B+1,j),pe=L(B+1,j+1);T.emplaceBack(q,Q,ie),T.emplaceBack(ie,Q,pe)}this._tileDebugTextIndexBuffer=r.createIndexBuffer(T),this._tileDebugTextBuffer=r.createVertexBuffer(w,wm.members),this._globeTileDebugTextBuffer=r.createVertexBuffer(S,oA.members),this._tileDebugTextSegments=$r.simpleSegment(0,0,R,32)}}class T6{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,a,u){const d=String(a);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][d]=this.stateChanges[r][d]||{},He(this.stateChanges[r][d],u),this.deletedStates[r]===null){this.deletedStates[r]={};for(const g in this.state[r])g!==d&&(this.deletedStates[r][g]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][d]===null){this.deletedStates[r][d]={};for(const g in this.state[r][d])u[g]||(this.deletedStates[r][d][g]=null)}else for(const g in u)this.deletedStates[r]&&this.deletedStates[r][d]&&this.deletedStates[r][d][g]===null&&delete this.deletedStates[r][d][g]}removeFeatureState(r,a,u){if(this.deletedStates[r]===null)return;const d=String(a);if(this.deletedStates[r]=this.deletedStates[r]||{},u&&a!==void 0)this.deletedStates[r][d]!==null&&(this.deletedStates[r][d]=this.deletedStates[r][d]||{},this.deletedStates[r][d][u]=null);else if(a!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][d])for(u in this.deletedStates[r][d]={},this.stateChanges[r][d])this.deletedStates[r][d][u]=null;else this.deletedStates[r][d]=null;else this.deletedStates[r]=null}getState(r,a){const u=String(a),d=He({},(this.state[r]||{})[u],(this.stateChanges[r]||{})[u]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const g=this.deletedStates[r][a];if(g===null)return{};for(const _ in g)delete d[_]}return d}initializeTileState(r,a){r.setFeatureState(this.state,a)}coalesceChanges(r,a){const u={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const g={};for(const _ in this.stateChanges[d])this.state[d][_]||(this.state[d][_]={}),He(this.state[d][_],this.stateChanges[d][_]),g[_]=this.state[d][_];u[d]=g}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const g={};if(this.deletedStates[d]===null)for(const _ in this.state[d])g[_]={},this.state[d][_]={};else for(const _ in this.deletedStates[d]){if(this.deletedStates[d][_]===null)this.state[d][_]={};else if(this.state[d][_])for(const w of Object.keys(this.deletedStates[d][_]))delete this.state[d][_][w];g[_]=this.state[d][_]}u[d]=u[d]||{},He(u[d],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const d in r)r[d].setFeatureState(u,a)}}class BC{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,a){const u=this.toIdx(r,a);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(r,a){return this.leaves[this.toIdx(r,a)]}toIdx(r,a){return a*this.size+r}}function FC(o,r,a,u){let d=0,g=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(u[_])<1e-15){if(a[_]<o[_]||a[_]>r[_])return null}else{const w=1/u[_];let T=(o[_]-a[_])*w,S=(r[_]-a[_])*w;if(T>S){const R=T;T=S,S=R}if(T>d&&(d=T),S<g&&(g=S),d>g)return null}return d}function UC(o,r,a,u,d,g,_,w,T,S,R){const L=u-o,B=d-r,j=g-a,q=_-o,Q=w-r,ie=T-a,pe=R[1]*ie-R[2]*Q,xe=R[2]*q-R[0]*ie,he=R[0]*Q-R[1]*q,ve=L*pe+B*xe+j*he;if(Math.abs(ve)<1e-15)return null;const Te=1/ve,we=S[0]-o,Ze=S[1]-r,$e=S[2]-a,rt=(we*pe+Ze*xe+$e*he)*Te;if(rt<0||rt>1)return null;const mt=Ze*j-$e*B,Ke=$e*L-we*j,it=we*B-Ze*L,st=(R[0]*mt+R[1]*Ke+R[2]*it)*Te;return st<0||rt+st>1?null:(q*mt+Q*Ke+ie*it)*Te}function VC(o,r,a){return(o-r)/(a-r)}function jC(o,r,a,u,d,g,_,w,T){const S=1<<a,R=g-u,L=_-d,B=(o+1)/S*R+u,j=(r+0)/S*L+d,q=(r+1)/S*L+d;w[0]=(o+0)/S*R+u,w[1]=j,T[0]=B,T[1]=q}class GC{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(g){const _=Math.ceil(Math.log2(g.dim/8)),w=[];let T=Math.ceil(Math.pow(2,_));const S=1/T,R=(j,q,Q,ie,pe)=>{const xe=ie?1:0,he=(j+1)*Q-xe,ve=q*Q,Te=(q+1)*Q-xe;pe[0]=j*Q,pe[1]=ve,pe[2]=he,pe[3]=Te};let L=new BC(T);const B=[];for(let j=0;j<T*T;j++){R(j%T,Math.floor(j/T),S,!1,B);const q=kc(B[0],B[1],g),Q=kc(B[2],B[1],g),ie=kc(B[2],B[3],g),pe=kc(B[0],B[3],g);L.minimums.push(Math.min(q,Q,ie,pe)),L.maximums.push(Math.max(q,Q,ie,pe)),L.leaves.push(1)}for(w.push(L),T/=2;T>=1;T/=2){const j=w[w.length-1];L=new BC(T);for(let q=0;q<T*T;q++){R(q%T,Math.floor(q/T),2,!0,B);const Q=j.getElevation(B[0],B[1]),ie=j.getElevation(B[2],B[1]),pe=j.getElevation(B[2],B[3]),xe=j.getElevation(B[0],B[3]),he=j.isLeaf(B[0],B[1]),ve=j.isLeaf(B[2],B[1]),Te=j.isLeaf(B[2],B[3]),we=j.isLeaf(B[0],B[3]),Ze=Math.min(Q.min,ie.min,pe.min,xe.min),$e=Math.max(Q.max,ie.max,pe.max,xe.max),rt=he&&ve&&Te&&we;L.maximums.push($e),L.minimums.push(Ze),L.leaves.push($e-Ze<=5&&rt?1:0)}w.push(L)}return w}(this.dem),u=a.length-1,d=a[u];this._addNode(d.minimums[0],d.maximums[0],d.leaves[0]),this._construct(a,0,0,u,0)}raycastRoot(r,a,u,d,g,_,w=1){return FC([r,a,-100],[u,d,this.maximums[0]*w],g,_)}raycast(r,a,u,d,g,_,w=1){if(!this.nodeCount)return null;const T=this.raycastRoot(r,a,u,d,g,_,w);if(T==null)return null;const S=[],R=[],L=[],B=[],j=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;j.length>0;){const{idx:q,t:Q,nodex:ie,nodey:pe,depth:xe}=j.pop();if(this.leaves[q]){jC(ie,pe,xe,r,a,u,d,L,B);const ve=1<<xe,Te=(ie+0)/ve,we=(ie+1)/ve,Ze=(pe+0)/ve,$e=(pe+1)/ve,rt=kc(Te,Ze,this.dem)*w,mt=kc(we,Ze,this.dem)*w,Ke=kc(we,$e,this.dem)*w,it=kc(Te,$e,this.dem)*w,st=UC(L[0],L[1],rt,B[0],L[1],mt,B[0],B[1],Ke,g,_),ht=UC(B[0],B[1],Ke,L[0],B[1],it,L[0],L[1],rt,g,_),gt=Math.min(st!==null?st:Number.MAX_VALUE,ht!==null?ht:Number.MAX_VALUE);if(gt!==Number.MAX_VALUE)return gt;{const Je=vm([],g,_,Q);if($C(rt,mt,it,Ke,VC(Je[0],L[0],B[0]),VC(Je[1],L[1],B[1]))>=Je[2])return Q}continue}let he=0;for(let ve=0;ve<this._siblingOffset.length;ve++){jC((ie<<1)+this._siblingOffset[ve][0],(pe<<1)+this._siblingOffset[ve][1],xe+1,r,a,u,d,L,B),L[2]=-100,B[2]=this.maximums[this.childOffsets[q]+ve]*w;const Te=FC(L,B,g,_);if(Te!=null){const we=Te;S[ve]=we;let Ze=!1;for(let $e=0;$e<he&&!Ze;$e++)we>=S[R[$e]]&&(R.splice($e,0,ve),Ze=!0);Ze||(R[he]=ve),he++}}for(let ve=0;ve<he;ve++){const Te=R[ve];j.push({idx:this.childOffsets[q]+Te,t:S[Te],nodex:(ie<<1)+this._siblingOffset[Te][0],nodey:(pe<<1)+this._siblingOffset[Te][1],depth:xe+1})}}return null}_addNode(r,a,u){return this.minimums.push(r),this.maximums.push(a),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(r,a,u,d,g){if(r[d].isLeaf(a,u)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const _=d-1,w=r[_];let T=0,S=0;for(let R=0;R<this._siblingOffset.length;R++){const L=2*a+this._siblingOffset[R][0],B=2*u+this._siblingOffset[R][1],j=w.getElevation(L,B),q=w.isLeaf(L,B),Q=this._addNode(j.min,j.max,q);q&&(T|=1<<R),S||(S=Q)}for(let R=0;R<this._siblingOffset.length;R++)T&1<<R||this._construct(r,2*a+this._siblingOffset[R][0],2*u+this._siblingOffset[R][1],_,S+R)}}function $C(o,r,a,u,d,g){return Rn(Rn(o,a,g),Rn(r,u,g),d)}function kc(o,r,a){const u=a.dim,d=Oe(o*u-.5,0,u-1),g=Oe(r*u-.5,0,u-1),_=Math.floor(d),w=Math.floor(g),T=Math.min(_+1,u-1),S=Math.min(w+1,u-1);return $C(a.get(_,w),a.get(T,w),a.get(_,S),a.get(T,S),d-_,g-w)}const WC={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function S6(o,r,a){return(256*o*256+256*r+a)/10-1e4}function I6(o,r,a){return 256*o+r+a/256-32768}class C0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,a,u,d=!1,g=!1){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return Jt(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const _=this.dim=a.height-2,w=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=u||"mapbox",this.borderReady=d,!d){for(let T=0;T<_;T++)w[this._idx(-1,T)]=w[this._idx(0,T)],w[this._idx(_,T)]=w[this._idx(_-1,T)],w[this._idx(T,-1)]=w[this._idx(T,0)],w[this._idx(T,_)]=w[this._idx(T,_-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(_,-1)]=w[this._idx(_-1,0)],w[this._idx(-1,_)]=w[this._idx(0,_-1)],w[this._idx(_,_)]=w[this._idx(_-1,_-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new GC(this)}get(r,a,u=!1){u&&(r=Oe(r,-1,this.dim),a=Oe(a,-1,this.dim));const d=4*this._idx(r,a);return(this.encoding==="terrarium"?I6:S6)(this.pixels[d],this.pixels[d+1],this.pixels[d+2])}static getUnpackVector(r){return WC[r]}get unpackVector(){return WC[this.encoding]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(r+1)}static pack(r,a){const u=[0,0,0,0],d=C0.getUnpackVector(a);let g=Math.floor((r+d[3])/d[2]);return u[2]=g%256,g=Math.floor(g/256),u[1]=g%256,g=Math.floor(g/256),u[0]=g,u}getPixels(){return new Fo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,a,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let d=a*this.dim,g=a*this.dim+this.dim,_=u*this.dim,w=u*this.dim+this.dim;switch(a){case-1:d=g-1;break;case 1:g=d+1}switch(u){case-1:_=w-1;break;case 1:w=_+1}const T=-a*this.dim,S=-u*this.dim;for(let R=_;R<w;R++)for(let L=d;L<g;L++){const B=4*this._idx(L,R),j=4*this._idx(L+T,R+S);this.pixels[B+0]=r.pixels[j+0],this.pixels[B+1]=r.pixels[j+1],this.pixels[B+2]=r.pixels[j+2],this.pixels[B+3]=r.pixels[j+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Bt(C0,"DEMData"),Bt(GC,"DemMinMaxQuadTree",{omit:["dem"]});class M6{constructor(r,a){this.max=r,this.onRemove=a,this.reset()}reset(){for(const r in this.data)for(const a of this.data[r])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(r,a,u){const d=r.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:a,timeout:void 0};if(u!==void 0&&(g.timeout=setTimeout(()=>{this.remove(r,g)},u)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const a=this.data[r].shift();return a.timeout&&clearTimeout(a.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),a.value}getByKey(r){const a=this.data[r];return a?a[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,a){if(!this.has(r))return this;const u=r.wrapped().key,d=a===void 0?0:this.data[u].indexOf(a),g=this.data[u][d];return this.data[u].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(r){const a=[];for(const u in this.data)for(const d of this.data[u])r(d.value)||a.push(d);for(const u of a)this.remove(u.value.tileID,u)}}class df{constructor(r,a,u){this.func=r,this.mask=a,this.range=u}}df.ReadOnly=!1,df.ReadWrite=!0,df.disabled=new df(519,df.ReadOnly,[0,1]);const zb=7680;class Nb{constructor(r,a,u,d,g,_){this.test=r,this.ref=a,this.mask=u,this.fail=d,this.depthFail=g,this.pass=_}}Nb.disabled=new Nb({func:519,mask:0},0,0,zb,zb,zb);class Va{constructor(r,a,u){this.blendFunction=r,this.blendColor=a,this.mask=u}}Va.Replace=[1,0],Va.disabled=new Va(Va.Replace,zr.transparent,[!1,!1,!1,!1]),Va.unblended=new Va(Va.Replace,zr.transparent,[!0,!0,!0,!0]),Va.alphaBlended=new Va([1,771],zr.transparent,[!0,!0,!0,!0]);const Bb=1029,Fb=2305;class ra{constructor(r,a,u){this.enable=r,this.mode=a,this.frontFace=u}}ra.disabled=new ra(!1,Bb,Fb),ra.backCCW=new ra(!0,Bb,Fb),ra.backCW=new ra(!0,Bb,2304),ra.frontCW=new ra(!0,1028,2304),ra.frontCCW=new ra(!0,1028,Fb);class mh extends Ws{constructor(r,a,u){super(),this.id=r,this._onlySymbols=u,a.on("data",d=>{d.dataType==="source"&&d.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&d.dataType==="source"&&d.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new M6(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new T6,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(r){this.map=r,this._minTileCacheSize=this._minTileCacheSize===void 0&&r?r._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&r?r._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const a=this._tiles[r];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,a){return r.isSymbolTile=this._onlySymbols,this._source.loadTile(r,a)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){if(this._source.abortTile)return this._source.abortTile(r,()=>{})}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const u=this._tiles[a];u.upload(r),u.prepare(this.map.style.imageManager)}}getIds(){return Be(this._tiles).map(r=>r.tileID).sort(qC).map(r=>r.key)}getRenderableIds(r){const a=[];for(const u in this._tiles)this._isIdRenderable(+u,r)&&a.push(this._tiles[u]);return r?a.sort((u,d)=>{const g=u.tileID,_=d.tileID,w=new $(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),T=new $(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-_.overscaledZ||T.y-w.y||T.x-w.x}).map(u=>u.tileID.key):a.map(u=>u.tileID).sort(qC).map(u=>u.key)}hasRenderableParent(r){const a=this.findLoadedParent(r,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(r,a){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(a||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(+r,"reloading")}}_reloadTile(r,a){const u=this._tiles[r];u&&(u.state!=="loading"&&(u.state=a),this._loadTile(u,this._tileLoaded.bind(this,u,r,a)))}_tileLoaded(r,a,u,d){if(d)if(r.state="errored",d.status!==404)this._source.fire(new Sa(d,{tile:r}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else r.timeAdded=zn.now(),u==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(a,r),this._source.type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new Hn("data",{dataType:"source",tile:r,coord:r.tileID,sourceCacheId:this.id}))}_backfillDEM(r){const a=this.getRenderableIds();for(let d=0;d<a.length;d++){const g=a[d];if(r.neighboringTiles&&r.neighboringTiles[g]){const _=this.getTileByID(g);u(r,_),u(_,r)}}function u(d,g){if(!d.dem||d.dem.borderReady)return;d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0;let _=g.tileID.canonical.x-d.tileID.canonical.x;const w=g.tileID.canonical.y-d.tileID.canonical.y,T=Math.pow(2,d.tileID.canonical.z),S=g.tileID.key;_===0&&w===0||Math.abs(w)>1||(Math.abs(_)>1&&(Math.abs(_+T)===1?_+=T:Math.abs(_-T)===1&&(_-=T)),g.dem&&d.dem&&(d.dem.backfillBorder(g.dem,_,w),d.neighboringTiles&&d.neighboringTiles[S]&&(d.neighboringTiles[S].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,a,u,d){for(const g in this._tiles){let _=this._tiles[g];if(d[g]||!_.hasData()||_.tileID.overscaledZ<=a||_.tileID.overscaledZ>u)continue;let w=_.tileID;for(;_&&_.tileID.overscaledZ>a+1;){const S=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[S.key],_&&_.hasData()&&(w=S)}let T=w;for(;T.overscaledZ>a;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]){d[w.key]=w;break}}}findLoadedParent(r,a){if(r.key in this._loadedParentTiles){const u=this._loadedParentTiles[r.key];return u&&u.tileID.overscaledZ>=a?u:null}for(let u=r.overscaledZ-1;u>=a;u--){const d=r.scaledTo(u),g=this._getLoadedTile(d);if(g)return g}}_getLoadedTile(r){const a=this._tiles[r.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?r.wrapped().key:r.canonical.key)}updateCacheSize(r,a){a=a||this._source.tileSize;const u=Math.ceil(r.width/a)+1,d=Math.ceil(r.height/a)+1,g=Math.floor(u*d*5),_=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)}handleWrapJump(r){const a=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,a){const u={};for(const d in this._tiles){const g=this._tiles[d];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+a),u[g.tileID.key]=g}this._tiles=u;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(+d,this._tiles[d])}}update(r,a,u){if(this.transform=r,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let d;this.updateCacheSize(r,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(w=>new ro(w.canonical.z,w.wrap,w.canonical.z,w.canonical.x,w.canonical.y)):(d=r.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(d=d.filter(w=>this._source.hasTile(w)))):d=[];const g=this._updateRetainedTiles(d);if(HC(this._source.type)&&d.length!==0){const w={},T={},S=Object.keys(g);for(const L of S){const B=g[L],j=this._tiles[L];if(!j||j.fadeEndTime&&j.fadeEndTime<=zn.now())continue;const q=this.findLoadedParent(B,Math.max(B.overscaledZ-mh.maxOverzooming,this._source.minzoom));q&&(this._addTile(q.tileID),w[q.tileID.key]=q.tileID),T[L]=B}const R=d[d.length-1].overscaledZ;for(const L in this._tiles){const B=this._tiles[L];if(g[L]||!B.hasData())continue;let j=B.tileID;for(;j.overscaledZ>R;){j=j.scaledTo(j.overscaledZ-1);const q=this._tiles[j.key];if(q&&q.hasData()&&T[j.key]){g[L]=B.tileID;break}}}for(const L in w)g[L]||(this._coveredTiles[L]=!0,g[L]=w[L])}for(const w in g)this._tiles[w].clearFadeHold();const _=function(w,T){const S=[];for(const R in w)R in T||S.push(R);return S}(this._tiles,g);for(const w of _){const T=this._tiles[w];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+w)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(+r)}_updateRetainedTiles(r){const a={};if(r.length===0)return a;const u={},d=r.reduce((S,R)=>Math.min(S,R.overscaledZ),1/0),g=r[0].overscaledZ,_=Math.max(g-mh.maxOverzooming,this._source.minzoom),w=Math.max(g+mh.maxUnderzooming,this._source.minzoom),T={};for(const S of r){const R=this._addTile(S);a[S.key]=S,R.hasData()||d<this._source.maxzoom&&(T[S.key]=S)}this._retainLoadedChildren(T,d,w,a);for(const S of r){let R=this._tiles[S.key];if(R.hasData())continue;if(S.canonical.z>=this._source.maxzoom){const B=S.children(this._source.maxzoom)[0],j=this.getTile(B);if(j&&j.hasData()){a[B.key]=B;continue}}else{const B=S.children(this._source.maxzoom);if(a[B[0].key]&&a[B[1].key]&&a[B[2].key]&&a[B[3].key])continue}let L=R.wasRequested();for(let B=S.overscaledZ-1;B>=_;--B){const j=S.scaledTo(B);if(u[j.key]||(u[j.key]=!0,R=this.getTile(j),!R&&L&&(R=this._addTile(j)),R&&(a[j.key]=j,L=R.wasRequested(),R.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const a=[];let u,d=this._tiles[r].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){u=this._loadedParentTiles[d.key];break}a.push(d.key);const g=d.scaledTo(d.overscaledZ-1);if(u=this._getLoadedTile(g),u)break;d=g}for(const g of a)this._loadedParentTiles[g]=u}}_addTile(r){let a=this._tiles[r.key];if(a)return a;a=this._cache.getAndRemove(r),a&&(this._setTileReloadTimer(r.key,a),a.tileID=r,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,a)));const u=!!a;if(!u){const d=this.map?this.map.painter:null;a=new Lb(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,d,this._isRaster),this._loadTile(a,this._tileLoaded.bind(this,a,r.key,a.state))}return a?(a.uses++,this._tiles[r.key]=a,u||this._source.fire(new Hn("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(r,a){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const u=a.getExpiryTimeout();u&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},u))}_removeTile(r){const a=this._tiles[r];a&&(a.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(+r);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(r,a,u){const d=[],g=this.transform;if(!g)return d;const _=g.projection.name==="globe",w=za(g.center.lng);for(const T in this._tiles){const S=this._tiles[T];if(u&&S.clearQueryDebugViz(),S.holdingForFade())continue;let R;if(_){const L=S.tileID.canonical;if(L.z===0){const B=[Math.abs(Oe(w,...$m(L,-1))-w),Math.abs(Oe(w,...$m(L,1))-w)];R=[0,2*B.indexOf(Math.min(...B))-1]}else{const B=[Math.abs(Oe(w,...$m(L,-1))-w),Math.abs(Oe(w,...$m(L,0))-w),Math.abs(Oe(w,...$m(L,1))-w)];R=[B.indexOf(Math.min(...B))-1]}}else R=[0];for(const L of R){const B=r.containsTile(S,g,a,L);B&&d.push(B)}}return d}getVisibleCoordinates(r){const a=this.getRenderableIds(r).map(u=>this._tiles[u].tileID);for(const u of a)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(HC(this._source.type))for(const r in this._tiles){const a=this._tiles[r];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=zn.now())return!0}return!1}setFeatureState(r,a,u){this._state.updateState(r=r||"_geojsonTileLayer",a,u)}removeFeatureState(r,a,u){this._state.removeFeatureState(r=r||"_geojsonTileLayer",a,u)}getFeatureState(r,a){return this._state.getState(r=r||"_geojsonTileLayer",a)}setDependencies(r,a,u){const d=this._tiles[r];d&&d.setDependencies(a,u)}reloadTilesForDependencies(r,a){for(const u in this._tiles)this._tiles[u].hasDependency(r,a)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(r,a))}_preloadTiles(r,a){const u=new Map,d=Array.isArray(r)?r:[r],g=this.map.painter.terrain,_=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const w of d){const T=w.coveringTiles({tileSize:_,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const S of T)u.set(S.key,S);this.usedForTerrain&&w.updateElevation(!1)}De(Array.from(u.values()),(w,T)=>{const S=new Lb(w,this._source.tileSize*w.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(S,R=>{this._source.type==="raster-dem"&&S.dem&&this._backfillDEM(S),T(R,S)})},a)}}function qC(o,r){const a=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*r.wrap)-+(r.wrap<0);return o.overscaledZ-r.overscaledZ||u-a||r.canonical.y-o.canonical.y||r.canonical.x-o.canonical.x}function HC(o){return o==="raster"||o==="image"||o==="video"||o==="custom"}function $m(o,r){const a=1<<o.z;return[o.x/a+r,(o.x+1)/a+r]}mh.maxOverzooming=10,mh.maxUnderzooming=3;class P0{constructor(r,a,u){this._demTile=r,this._dem=this._demTile.dem,this._scale=a,this._offset=u}static create(r,a,u){const d=u||r.findDEMTileFor(a);if(!d||!d.dem)return;const g=d.dem,_=d.tileID,w=1<<a.canonical.z-_.canonical.z;return new P0(d,d.tileSize/sn/w,[(a.canonical.x/w-_.canonical.x)*g.dim,(a.canonical.y/w-_.canonical.y)*g.dim])}tileCoordToPixel(r,a){const u=a*this._scale+this._offset[1],d=Math.floor(r*this._scale+this._offset[0]),g=Math.floor(u);return new $(d,g)}getElevationAt(r,a,u,d){const g=r*this._scale+this._offset[0],_=a*this._scale+this._offset[1],w=Math.floor(g),T=Math.floor(_),S=this._dem;return d=!!d,u?Rn(Rn(S.get(w,T,d),S.get(w,T+1,d),_-T),Rn(S.get(w+1,T,d),S.get(w+1,T+1,d),_-T),g-w):S.get(w,T,d)}getElevationAtPixel(r,a,u){return this._dem.get(r,a,!!u)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*na(1,r)*this._dem.stride}}class ZC{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new bc(sn,16,0),this.featureIndexArray=new BM,this.promoteId=a}insert(r,a,u,d,g,_=0){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,d,g,_);const T=this.grid;for(let S=0;S<a.length;S++){const R=a[S],L=[1/0,1/0,-1/0,-1/0];for(let B=0;B<R.length;B++){const j=R[B];L[0]=Math.min(L[0],j.x),L[1]=Math.min(L[1],j.y),L[2]=Math.max(L[2],j.x),L[3]=Math.max(L[3],j.y)}L[0]<sn&&L[1]<sn&&L[2]>=0&&L[3]>=0&&T.insert(w,L[0],L[1],L[2],L[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new xb(new zm(this.rawTileData)).layers,this.sourceLayerCoder=new OC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,a,u,d){this.loadVTLayers();const g=r.params||{},_=zd(g.filter),w=r.tileResult,T=r.transform,S=w.bufferedTilespaceBounds,R=this.grid.query(S.min.x,S.min.y,S.max.x,S.max.y,(q,Q,ie,pe)=>bA(w.bufferedTilespaceGeometry,q,Q,ie,pe));R.sort(A6);let L=null;T.elevation&&R.length>0&&(L=P0.create(T.elevation,this.tileID));const B={};let j;for(let q=0;q<R.length;q++){const Q=R[q];if(Q===j)continue;j=Q;const ie=this.featureIndexArray.get(Q);let pe=null;this.loadMatchingFeature(B,ie,_,g.layers,g.availableImages,a,u,d,(xe,he,ve,Te=0)=>(pe||(pe=Il(xe,this.tileID.canonical,r.tileTransform)),he.queryIntersectsFeature(w,xe,ve,pe,this.z,r.transform,r.pixelPosMatrix,L,Te)))}return B}loadMatchingFeature(r,a,u,d,g,_,w,T,S){const{featureIndex:R,bucketIndex:L,sourceLayerIndex:B,layoutVertexArrayOffset:j}=a,q=this.bucketLayerIDs[L];if(d&&!function(xe,he){for(let ve=0;ve<xe.length;ve++)if(he.indexOf(xe[ve])>=0)return!0;return!1}(d,q))return;const Q=this.sourceLayerCoder.decode(B),ie=this.vtLayers[Q].feature(R);if(u.needGeometry){const xe=hh(ie,!0);if(!u.filter(new Ne(this.tileID.overscaledZ),xe,this.tileID.canonical))return}else if(!u.filter(new Ne(this.tileID.overscaledZ),ie))return;const pe=this.getId(ie,Q);for(let xe=0;xe<q.length;xe++){const he=q[xe];if(d&&d.indexOf(he)<0)continue;const ve=_[he];if(!ve)continue;let Te={};pe!==void 0&&T&&(Te=T.getState(ve.sourceLayer||"_geojsonTileLayer",pe));const we=He({},w[he]);we.paint=YC(we.paint,ve.paint,ie,Te,g),we.layout=YC(we.layout,ve.layout,ie,Te,g);const Ze=!S||S(ie,ve,Te,j);if(!Ze)continue;const $e=new kC(ie,this.z,this.x,this.y,pe);$e.layer=we;let rt=r[he];rt===void 0&&(rt=r[he]=[]),rt.push({featureIndex:R,feature:$e,intersectionZ:Ze})}}lookupSymbolFeatures(r,a,u,d,g,_,w,T){const S={};this.loadVTLayers();const R=zd(g);for(const L of r)this.loadMatchingFeature(S,{bucketIndex:u,sourceLayerIndex:d,featureIndex:L,layoutVertexArrayOffset:0},R,_,w,T,a);return S}loadFeature(r){const{featureIndex:a,sourceLayerIndex:u}=r;this.loadVTLayers();const d=this.sourceLayerCoder.decode(u),g=this.vtFeatures[d];if(g[a])return g[a];const _=this.vtLayers[d].feature(a);return g[a]=_,_}hasLayer(r){for(const a of this.bucketLayerIDs)for(const u of a)if(r===u)return!0;return!1}getId(r,a){let u=r.id;if(this.promoteId){const d=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];d!=null&&(u=r.properties[d]),typeof u=="boolean"&&(u=Number(u))}return u}}function YC(o,r,a,u,d){return an(o,(g,_)=>{const w=r instanceof qe?r.get(_):null;return w&&w.evaluate?w.evaluate(a,u,d):w})}function A6(o,r){return r-o}Bt(ZC,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class XC{constructor(r,a){this.width=r,this.height=a,this.nextRow=0,this.image=new Ml({width:r,height:a}),this.positions={},this.uploaded=!1}getDash(r,a){const u=this.getKey(r,a);return this.positions[u]}trim(){const r=this.width,a=this.height=bt(this.nextRow);this.image.resize({width:r,height:a})}getKey(r,a){return r.join(",")+a}getDashRanges(r,a,u){const d=[];let g=r.length%2==1?-r[r.length-1]*u:0,_=r[0]*u,w=!0;d.push({left:g,right:_,isDash:w,zeroLength:r[0]===0});let T=r[0];for(let S=1;S<r.length;S++){w=!w;const R=r[S];g=T*u,T+=R,_=T*u,d.push({left:g,right:_,isDash:w,zeroLength:R===0})}return d}addRoundDash(r,a,u){const d=a/2;for(let g=-u;g<=u;g++){const _=this.width*(this.nextRow+u+g);let w=0,T=r[w];for(let S=0;S<this.width;S++){S/T.right>1&&(T=r[++w]);const R=Math.abs(S-T.left),L=Math.abs(S-T.right),B=Math.min(R,L);let j;const q=g/u*(d+1);if(T.isDash){const Q=d-Math.abs(q);j=Math.sqrt(B*B+Q*Q)}else j=d-Math.sqrt(B*B+q*q);this.image.data[_+S]=Math.max(0,Math.min(255,j+128))}}}addRegularDash(r,a){for(let T=r.length-1;T>=0;--T){const S=r[T],R=r[T+1];S.zeroLength?r.splice(T,1):R&&R.isDash===S.isDash&&(R.left=S.left,r.splice(T,1))}const u=r[0],d=r[r.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,w=r[_];for(let T=0;T<this.width;T++){T/w.right>1&&(w=r[++_]);const S=Math.abs(T-w.left),R=Math.abs(T-w.right),L=Math.min(S,R);this.image.data[g+T]=Math.max(0,Math.min(255,(w.isDash?L:-L)+a+128))}}addDash(r,a){const u=this.getKey(r,a);if(this.positions[u])return this.positions[u];const d=a==="round",g=d?7:0,_=2*g+1;if(this.nextRow+_>this.height)return Jt("LineAtlas out of space"),null;r.length===0&&r.push(1);let w=0;for(let R=0;R<r.length;R++)r[R]<0&&(Jt("Negative value is found in line dasharray, replacing values with 0"),r[R]=0),w+=r[R];if(w!==0){const R=this.width/w,L=this.getDashRanges(r,this.width,R);d?this.addRoundDash(L,R,g):this.addRegularDash(L,a==="square"?.5*R:0)}const T=this.nextRow+g;this.nextRow+=_;const S={tl:[T,g],br:[w,0]};return this.positions[u]=S,S}}Bt(XC,"LineAtlas");class QC{constructor(r){const a={},u=[];for(const w in r){const T=r[w],S=a[w]={};for(const R in T.glyphs){const L=T.glyphs[+R];if(!L||L.bitmap.width===0||L.bitmap.height===0)continue;const B=L.metrics.localGlyph?2:1,j={x:0,y:0,w:L.bitmap.width+2*B,h:L.bitmap.height+2*B};u.push(j),S[R]=j}}const{w:d,h:g}=Eb(u),_=new Ml({width:d||1,height:g||1});for(const w in r){const T=r[w];for(const S in T.glyphs){const R=T.glyphs[+S];if(!R||R.bitmap.width===0||R.bitmap.height===0)continue;const L=a[w][S],B=R.metrics.localGlyph?2:1;Ml.copy(R.bitmap,_,{x:0,y:0},{x:L.x+B,y:L.y+B},R.bitmap)}}this.image=_,this.positions=a}}Bt(QC,"GlyphAtlas");class C6{constructor(r){this.tileID=new ro(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.tileZoom=r.tileZoom,this.uid=r.uid,this.zoom=r.zoom,this.canonical=r.tileID.canonical,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId,this.enableTerrain=!!r.enableTerrain,this.isSymbolTile=r.isSymbolTile,this.tileTransform=ph(r.tileID.canonical,r.projection),this.projection=r.projection}parse(r,a,u,d,g){this.status="parsing",this.data=r,this.collisionBoxArray=new jw;const _=new OC(Object.keys(r.layers).sort()),w=new ZC(this.tileID,this.promoteId);w.bucketLayerIDs=[];const T={},S=new XC(256,256),R={featureIndex:w,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:S,availableImages:u},L=a.familiesBySource[this.source];for(const Te in L){const we=r.layers[Te];if(!we)continue;let Ze=!1,$e=!1;for(const Ke of L[Te])Ke[0].type==="symbol"?Ze=!0:$e=!0;if(this.isSymbolTile===!0&&!Ze||this.isSymbolTile===!1&&!$e)continue;we.version===1&&Jt(`Vector tile source "${this.source}" layer "${Te}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const rt=_.encode(Te),mt=[];for(let Ke=0;Ke<we.length;Ke++){const it=we.feature(Ke),st=w.getId(it,Te);mt.push({feature:it,id:st,index:Ke,sourceLayerIndex:rt})}for(const Ke of L[Te]){const it=Ke[0];this.isSymbolTile!==void 0&&it.type==="symbol"!==this.isSymbolTile||it.minzoom&&this.zoom<Math.floor(it.minzoom)||it.maxzoom&&this.zoom>=it.maxzoom||it.visibility!=="none"&&(Ub(Ke,this.zoom,u),(T[it.id]=it.createBucket({index:w.bucketLayerIDs.length,layers:Ke,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:rt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(mt,R,this.tileID.canonical,this.tileTransform),w.bucketLayerIDs.push(Ke.map(st=>st.id)))}}let B,j,q,Q;S.trim();const ie={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},pe=an(R.glyphDependencies,Te=>Object.keys(Te).map(Number));Object.keys(pe).length?d.send("getGlyphs",{uid:this.uid,stacks:pe},(Te,we)=>{B||(B=Te,j=we,ve.call(this))},void 0,!1,ie):j={};const xe=Object.keys(R.iconDependencies);xe.length?d.send("getImages",{icons:xe,source:this.source,tileID:this.tileID,type:"icons"},(Te,we)=>{B||(B=Te,q=we,ve.call(this))},void 0,!1,ie):q={};const he=Object.keys(R.patternDependencies);function ve(){if(B)return g(B);if(j&&q&&Q){const Te=new QC(j),we=new sC(q,Q);for(const Ze in T){const $e=T[Ze];$e instanceof Rc?(Ub($e.layers,this.zoom,u),t6($e,j,Te.positions,q,we.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):$e.hasPattern&&($e instanceof p0||$e instanceof c0||$e instanceof Dm)&&(Ub($e.layers,this.zoom,u),$e.addFeatures(R,this.tileID.canonical,we.patternPositions,u,this.tileTransform))}this.status="done",g(null,{buckets:Be(T).filter(Ze=>!Ze.isEmpty()),featureIndex:w,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Te.image,lineAtlas:S,imageAtlas:we,glyphMap:this.returnDependencies?j:null,iconMap:this.returnDependencies?q:null,glyphPositions:this.returnDependencies?Te.positions:null})}}he.length?d.send("getImages",{icons:he,source:this.source,tileID:this.tileID,type:"patterns"},(Te,we)=>{B||(B=Te,Q=we,ve.call(this))},void 0,!1,ie):Q={},ve.call(this)}}function Ub(o,r,a){const u=new Ne(r);for(const d of o)d.recalculate(u,a)}class KC{constructor(r){this.entries={},this.scheduler=r}request(r,a,u,d){const g=this.entries[r]=this.entries[r]||{callbacks:[]};if(g.result){const[_,w]=g.result;return this.scheduler?this.scheduler.add(()=>{d(_,w)},a):d(_,w),()=>{}}return g.callbacks.push(d),g.cancel||(g.cancel=u((_,w)=>{g.result=[_,w];for(const T of g.callbacks)this.scheduler?this.scheduler.add(()=>{T(_,w)},a):T(_,w);setTimeout(()=>delete this.entries[r],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(_=>_!==d),g.callbacks.length||(g.cancel(),delete this.entries[r]))}}}function JC(o,r,a){const u=JSON.stringify(o.request);return o.data&&(this.deduped.entries[u]={result:[null,o.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},d=>{const g=hi(o.request,(_,w,T,S)=>{_?d(_):w&&d(null,{vectorTile:a?void 0:new xb(new zm(w)),rawData:w,cacheControl:T,expires:S})});return()=>{g.cancel(),d()}},r)}s.ARRAY_TYPE=Bo,s.AUTH_ERR_MSG=dn,s.Aabb=no,s.Actor=class{constructor(o,r,a){this.target=o,this.parent=r,this.mapId=a,this.callbacks={},this.cancelCallbacks={},ft(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=ui()?o:v,this.scheduler=new b6}send(o,r,a,u,d=!1,g){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=g,this.callbacks[_]=a);const w=Vi(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:o,hasCallback:!!a,targetMapId:u,mustQueue:d,sourceMapId:this.mapId,data:Ju(r,w)},w),{cancel:()=>{a&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(o){const r=o.data,a=r.id;if(a&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const u=this.cancelCallbacks[a];delete this.cancelCallbacks[a],u&&u.cancel()}else if(r.mustQueue||ui()){const u=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,r),u&&u.metadata||{type:"message"})}else this.processTask(a,r)}processTask(o,r){if(r.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(r.error?a(eh(r.error)):a(null,eh(r.data)))}else{const a=Vi(this.globalScope)?void 0:[],u=r.hasCallback?(g,_)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:g?Ju(g):null,data:Ju(_,a)},a)}:g=>{},d=eh(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,d,u);else if(this.parent.getWorkerSource){const g=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,g[0],d.source)[g[1]](d,u)}else u(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=f0,s.Color=zr,s.ColorMode=Va,s.CullFaceMode=ra,s.DEMData=C0,s.DataConstantProperty=ze,s.DedupedRequest=KC,s.DepthMode=df,s.EXTENT=sn,s.Elevation=class{isDataAvailableAtPoint(o){const r=this._source();if(this.isUsingMockSource()||!r||o.y<0||o.y>1)return!1;const a=r.getSource().maxzoom,u=1<<a,d=Math.floor(o.x),g=Math.floor((o.x-d)*u),_=Math.floor(o.y*u),w=this.findDEMTileFor(new ro(a,d,a,g,_));return!(!w||!w.dem)}getAtPointOrZero(o,r=0){return this.getAtPoint(o,r)||0}getAtPoint(o,r,a=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const u=this._source();if(!u||o.y<0||o.y>1)return r;const d=u.getSource().maxzoom,g=1<<d,_=Math.floor(o.x),w=o.x-_,T=new ro(d,_,d,Math.floor(w*g),Math.floor(o.y*g)),S=this.findDEMTileFor(T);if(!S||!S.dem)return r;const R=S.dem,L=1<<S.tileID.canonical.z,B=(w*L-S.tileID.canonical.x)*R.dim,j=(o.y*L-S.tileID.canonical.y)*R.dim,q=Math.floor(B),Q=Math.floor(j);return(a?this.exaggeration():1)*Rn(Rn(R.get(q,Q),R.get(q,Q+1),j-Q),Rn(R.get(q+1,Q),R.get(q+1,Q+1),j-Q),B-q)}getAtTileOffset(o,r,a){const u=1<<o.canonical.z;return this.getAtPointOrZero(new Kd(o.wrap+(o.canonical.x+r/sn)/u,(o.canonical.y+a/sn)/u))}getAtTileOffsetFunc(o,r,a,u){return d=>{const g=this.getAtTileOffset(o,d.x,d.y),_=u.upVector(o.canonical,d.x,d.y);return Ko(_,_,g*u.upVectorScale(o.canonical,r,a).metersToTile),_}}getForTilePoints(o,r,a,u){if(this.isUsingMockSource())return!1;const d=P0.create(this,o,u);return!!d&&(r.forEach(g=>{g[2]=this.exaggeration()*d.getElevationAt(g[0],g[1],a)}),!0)}getMinMaxForTile(o){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(o);if(!r||!r.dem)return null;const a=r.dem.tree,u=r.tileID,d=1<<o.canonical.z-u.canonical.z;let g=o.canonical.x/d-u.canonical.x,_=o.canonical.y/d-u.canonical.y,w=0;for(let T=0;T<o.canonical.z-u.canonical.z&&!a.leaves[w];T++){g*=2,_*=2;const S=2*Math.floor(_)+Math.floor(g);w=a.childOffsets[w]+S,g%=1,_%=1}return{min:this.exaggeration()*a.minimums[w],max:this.exaggeration()*a.maximums[w]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,r,a){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=Sa,s.EvaluationParameters=Ne,s.Event=Hn,s.Evented=Ws,s.FillExtrusionBucket=Dm,s.Frustum=eb,s.FrustumCorners=Jw,s.GLOBE_RADIUS=ka,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=6,s.GLOBE_ZOOM_THRESHOLD_MIN=5,s.GlobeSharedBuffers=class{constructor(o){this._createGrid(o),this._createPoles(o)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const o of this._poleSegments)o.destroy();for(const o of this._gridSegments)o.withSkirts.destroy(),o.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const o of this._wireframeSegments)o.destroy()}}_fillGridMeshWithLods(o,r){const a=new Zt,u=new Ri,d=[],g=o+1+2,_=r[0]+1,w=r[0]+1+(1+r.length),T=(S,R,L)=>{let B=S===g-1?S-2:S===0?S:S-1;return B+=L?24575:0,[B,R]};for(let S=0;S<g;++S)a.emplaceBack(...T(S,0,!0));for(let S=0;S<_;++S)for(let R=0;R<g;++R)a.emplaceBack(...T(R,S,(R===0||R===g-1)&&!0));for(let S=0;S<r.length;++S){const R=r[S];for(let L=0;L<g;++L)a.emplaceBack(...T(L,R,!0))}for(let S=0;S<r.length;++S){const R=u.length,L=r[S]+1+2,B=new Ri;for(let Q=0;Q<L-1;Q++){const ie=Q===L-2,pe=ie?g*(w-r.length+S-Q):g;for(let xe=0;xe<g-1;xe++){const he=Q*g+xe;Q===0||ie||xe===0||xe===g-2?(B.emplaceBack(he+1,he,he+pe),B.emplaceBack(he+pe,he+pe+1,he+1)):(u.emplaceBack(he+1,he,he+pe),u.emplaceBack(he+pe,he+pe+1,he+1))}}const j=$r.simpleSegment(0,R,a.length,u.length-R);for(let Q=0;Q<B.uint16.length;Q+=3)u.emplaceBack(B.uint16[Q],B.uint16[Q+1],B.uint16[Q+2]);const q=$r.simpleSegment(0,R,a.length,u.length-R);d.push({withoutSkirts:j,withSkirts:q})}return{vertices:a,indices:u,segments:d}}_createGrid(o){const r=this._fillGridMeshWithLods(ch,bm);this._gridSegments=r.segments,this._gridBuffer=o.createVertexBuffer(r.vertices,wm.members),this._gridIndexBuffer=o.createIndexBuffer(r.indices,!0)}_createPoles(o){const r=new Ri;for(let d=0;d<=ch;d++)r.emplaceBack(0,d+1,d+2);this._poleIndexBuffer=o.createIndexBuffer(r,!0);const a=new No,u=new No;this._poleSegments=[];for(let d=0,g=0;d<5;d++){const _=360/(1<<d);a.emplaceBack(0,-ka,0,.5,0),u.emplaceBack(0,-ka,0,.5,1);for(let w=0;w<=ch;w++){const T=w/ch,S=Rn(0,_,T),[R,L,B]=Yd(bB,EB,S,ka);a.emplaceBack(R,L,B,T,0),u.emplaceBack(R,L,B,T,1)}this._poleSegments.push($r.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=o.createVertexBuffer(a,iA,!1),this._poleSouthVertexBuffer=o.createVertexBuffer(u,iA,!1)}getGridBuffers(o,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[o].withSkirts:this._gridSegments[o].withoutSkirts]}getPoleBuffers(o){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[o]]}getWirefameBuffers(o,r){if(!this._wireframeSegments){const a=new Da,u=ch,d=u+1+2,g=1;this._wireframeSegments=[];for(let _=0,w=0;_<bm.length;_++){const T=bm[_];for(let R=g;R<T+g;R++)for(let L=g;L<u+g;L++){const B=R*d+L;a.emplaceBack(B,B+1),a.emplaceBack(B,B+d),a.emplaceBack(B,B+d+1)}const S=T*u*3;this._wireframeSegments.push($r.simpleSegment(0,w,(T+1)*d,S)),w+=S}this._wireframeIndexBuffer=o.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[r]]}},s.GlyphManager=cf,s.ImagePosition=Tb,s.LivePerformanceUtils=lt,s.LngLat=Dn,s.LngLatBounds=Ac,s.LocalGlyphMode=Mb,s.MAX_MERCATOR_LATITUDE=Oi,s.MercatorCoordinate=Kd,s.ONE_EM=ki,s.OverscaledTileID=ro,s.PerformanceMarkers=Ge,s.Properties=dt,s.RGBAImage=Fo,s.Ray=Kw,s.RequestManager=class{constructor(o,r,a){this._transformRequestFn=o,this._customAccessToken=r,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const o=function(){let r="";for(let a=0;a<10;a++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,r){return this._transformRequestFn&&this._transformRequestFn(o,r)||{url:o}}normalizeStyleURL(o,r){if(!An(o))return o;const a=Kn(o);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||r)}normalizeGlyphsURL(o,r){if(!An(o))return o;const a=Kn(o);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||r)}normalizeSourceURL(o,r,a,u){if(!An(o))return o;const d=Kn(o);return d.path=`/v4/${d.authority}.json`,d.params.push("secure"),a&&d.params.push(`language=${a}`),u&&d.params.push(`worldview=${u}`),this._makeAPIURL(d,this._customAccessToken||r)}normalizeSpriteURL(o,r,a,u){const d=Kn(o);return An(o)?(d.path=`/styles/v1${d.path}/sprite${r}${a}`,this._makeAPIURL(d,this._customAccessToken||u)):(d.path+=`${r}${a}`,ji(d))}normalizeTileURL(o,r,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!An(o))return o;const u=Kn(o);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${r||a&&u.authority!=="raster"&&a===512?"@2x":""}${P.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${M.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${M.TILE_URL_VERSION}${u.path}`);const d=this._customAccessToken||function(g){for(const _ of g){const w=_.match(/^access_token=(.*)$/);if(w)return w[1]}return null}(u.params)||M.ACCESS_TOKEN;return M.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,d)}canonicalizeTileURL(o,r){const a=Kn(o);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return o;let u="mapbox://";a.path.match(/^\/raster\/v1\//)?u+=`raster/${a.path.replace(`/${M.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${a.path.replace(`/${M.TILE_URL_VERSION}/`,"")}`;let d=a.params;return r&&(d=d.filter(g=>!g.match(/^access_token=/))),d.length&&(u+=`?${d.join("&")}`),u}canonicalizeTileset(o,r){const a=!!r&&An(r),u=[];for(const d of o.tiles||[])Wn(d)?u.push(this.canonicalizeTileURL(d,a)):u.push(d);return u}_makeAPIURL(o,r){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=Kn(M.API_URL);if(o.protocol=u.protocol,o.authority=u.authority,o.protocol==="http"){const d=o.params.indexOf("secure");d>=0&&o.params.splice(d,1)}if(u.path!=="/"&&(o.path=`${u.path}${o.path}`),!M.REQUIRE_ACCESS_TOKEN)return ji(o);if(r=r||M.ACCESS_TOKEN,!this._silenceAuthErrors){if(!r)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(r[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return o.params=o.params.filter(d=>d.indexOf("access_token")===-1),o.params.push(`access_token=${r||""}`),ji(o)}},s.ResourceType=Ye,s.SegmentVector=$r,s.SourceCache=mh,s.StencilMode=Nb,s.StructArrayLayout1ui2=Oa,s.StructArrayLayout2f1f2i16=Ci,s.StructArrayLayout2i4=Zt,s.StructArrayLayout2ui4=Da,s.StructArrayLayout3f12=Pi,s.StructArrayLayout3ui6=Ri,s.StructArrayLayout4i8=Un,s.StructArrayLayout5f20=No,s.Texture=Gm,s.Tile=Lb,s.Transitionable=vt,s.Uniform1f=Y_,s.Uniform1i=class extends El{constructor(o){super(o),this.current=0}set(o,r,a){this.fetchUniformLocation(o,r)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},s.Uniform2f=class extends El{constructor(o){super(o),this.current=[0,0]}set(o,r,a){this.fetchUniformLocation(o,r)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},s.Uniform3f=class extends El{constructor(o){super(o),this.current=[0,0,0]}set(o,r,a){this.fetchUniformLocation(o,r)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},s.Uniform4f=jM,s.UniformColor=GM,s.UniformMatrix2f=class extends El{constructor(o){super(o),this.current=aB}set(o,r,a){if(this.fetchUniformLocation(o,r)){for(let u=0;u<4;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}},s.UniformMatrix3f=class extends El{constructor(o){super(o),this.current=sB}set(o,r,a){if(this.fetchUniformLocation(o,r)){for(let u=0;u<9;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},s.UniformMatrix4f=class extends El{constructor(o){super(o),this.current=oB}set(o,r,a){if(this.fetchUniformLocation(o,r)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let u=1;u<16;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},s.UnwrappedTileID=HA,s.ValidationError=Lt,s.VectorTileFeature=h0,s.VectorTileWorkerSource=class extends Ws{constructor(o,r,a,u,d){super(),this.actor=o,this.layerIndex=r,this.availableImages=a,this.loadVectorData=d||JC,this.loading={},this.loaded={},this.deduped=new KC(o.scheduler),this.isSpriteLoaded=u,this.scheduler=o.scheduler}loadTile(o,r){const a=o.uid,u=o&&o.request,d=u&&u.collectResourceTiming,g=this.loading[a]=new C6(o);g.abort=this.loadVectorData(o,(_,w)=>{const T=!this.loading[a];if(delete this.loading[a],T||_||!w)return g.status="done",T||(this.loaded[a]=g),r(_);const S=w.rawData,R={};w.expires&&(R.expires=w.expires),w.cacheControl&&(R.cacheControl=w.cacheControl),g.vectorTile=w.vectorTile||new xb(new zm(S));const L=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(B,j)=>{if(B||!j)return r(B);const q={};if(d){const Q=Kt(u);Q.length>0&&(q.resourceTiming=JSON.parse(JSON.stringify(Q)))}r(null,He({rawTileData:S.slice(0)},j,R,q))})};this.isSpriteLoaded?L():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(L,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):L()}),this.loaded=this.loaded||{},this.loaded[a]=g})}reloadTile(o,r){const a=this.loaded,u=o.uid,d=this;if(a&&a[u]){const g=a[u];g.showCollisionBoxes=o.showCollisionBoxes,g.enableTerrain=!!o.enableTerrain,g.projection=o.projection,g.tileTransform=ph(o.tileID.canonical,o.projection);const _=(w,T)=>{const S=g.reloadCallback;S&&(delete g.reloadCallback,g.parse(g.vectorTile,d.layerIndex,this.availableImages,d.actor,S)),r(w,T)};g.status==="parsing"?g.reloadCallback=_:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,_):_())}}abortTile(o,r){const a=o.uid,u=this.loading[a];u&&(u.abort&&u.abort(),delete this.loading[a]),r()}removeTile(o,r){const a=this.loaded,u=o.uid;a&&a[u]&&delete a[u],r()}},s.WritingMode=es,s.ZoomDependentExpression=wl,s.add=Sl,s.addDynamicAttributes=I0,s.adjoint=function(o,r){var a=r[0],u=r[1],d=r[2],g=r[3],_=r[4],w=r[5],T=r[6],S=r[7],R=r[8];return o[0]=_*R-w*S,o[1]=d*S-u*R,o[2]=u*w-d*_,o[3]=w*T-g*R,o[4]=a*R-d*T,o[5]=d*g-a*w,o[6]=g*S-_*T,o[7]=u*T-a*S,o[8]=a*_-u*g,o},s.asyncAll=De,s.bezier=Le,s.bindAll=ft,s.boundsAttributes=zC,s.bufferConvexPolygon=function(o,r){const a=[];for(let u=0;u<o.length;u++){const d=je(u-1,-1,o.length-1),g=je(u+1,-1,o.length-1),_=o[u],w=o[g],T=o[d].sub(_).unit(),S=w.sub(_).unit(),R=S.angleWithSep(T.x,T.y),L=T.add(S).unit().mult(-1*r/Math.sin(R/2));a.push(_.add(L))}return a},s.cacheEntryPossiblyAdded=function(o){yt++,yt>Ea&&(o.getActor().send("enforceCacheSizeLimit",Gs),yt=0)},s.calculateGlobeLabelMatrix=function(o,r){const{x:a,y:u}=o.point,d=uA(a,u,o.worldSize/o._pixelsPerMercatorPixel,0,0);return sh(d,d,rb(La(r)))},s.calculateGlobeMatrix=function(o){const{x:r,y:a}=o.point,{lng:u,lat:d}=o._center;return uA(r,a,o.worldSize,u,d)},s.calculateGlobeMercatorMatrix=function(o){const r=o.pixelsPerMeter,a=r/na(1,o.center.lat),u=ea(new Float64Array(16));return mm(u,u,[o.point.x,o.point.y,0]),ah(u,u,[a,a,r]),Float32Array.from(u)},s.circumferenceAtLatitude=ob,s.clamp=Oe,s.clearTileCache=function(o){if(!$s())return;const r=v.caches.delete(ti);o&&r.catch(o).then(()=>o())},s.clipLine=_C,s.clone=function(o){var r=new Bo(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},s.clone$1=Vt,s.collisionCircleLayout=MF,s.config=M,s.conjugate=function(o,r){return o[0]=-r[0],o[1]=-r[1],o[2]=-r[2],o[3]=r[3],o},s.create=function(){var o=new Bo(16);return Bo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},s.create$1=WM,s.createExpression=_c,s.createLayout=$t,s.createStyleLayer=function(o){return o.type==="custom"?new _6(o):new x6[o.type](o)},s.cross=Qw,s.degToRad=re,s.distance=function(o,r){return Math.hypot(r[0]-o[0],r[1]-o[1],r[2]-o[2])},s.div=function(o,r,a){return o[0]=r[0]/a[0],o[1]=r[1]/a[1],o[2]=r[2]/a[2],o},s.dot=bs,s.earthRadius=Sm,s.ease=Ae,s.easeCubicInOut=Me,s.ecefToLatLng=function([o,r,a]){const u=Math.hypot(o,r,a),d=Math.atan2(o,a),g=.5*Math.PI-Math.acos(-r/u);return new Dn(ce(d),ce(g))},s.emitValidationErrors=k_,s.endsWith=Ot,s.enforceCacheSizeLimit=function(o){Do(),vr&&vr.then(r=>{r.keys().then(a=>{for(let u=0;u<a.length-o;u++)r.delete(a[u])})})},s.evaluateSizeForFeature=m0,s.evaluateSizeForZoom=of,s.evaluateVariableOffset=EC,s.evented=ye,s.exactEquals=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]},s.exactEquals$1=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]},s.exported=zn,s.exported$1=P,s.extend=He,s.extend$1=qs,s.fillExtrusionHeightLift=$A,s.filterObject=pn,s.fromMat4=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[4],o[4]=r[5],o[5]=r[6],o[6]=r[8],o[7]=r[9],o[8]=r[10],o},s.fromQuat=function(o,r){var a=r[0],u=r[1],d=r[2],g=r[3],_=a+a,w=u+u,T=d+d,S=a*_,R=u*_,L=u*w,B=d*_,j=d*w,q=d*T,Q=g*_,ie=g*w,pe=g*T;return o[0]=1-L-q,o[1]=R+pe,o[2]=B-ie,o[3]=0,o[4]=R-pe,o[5]=1-S-q,o[6]=j+Q,o[7]=0,o[8]=B+ie,o[9]=j-Q,o[10]=1-S-L,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},s.fromRotation=function(o,r){var a=Math.sin(r),u=Math.cos(r);return o[0]=u,o[1]=a,o[2]=0,o[3]=-a,o[4]=u,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},s.fromScaling=HM,s.furthestTileCorner=function(o){const r=Math.round((o+45+360)%360/90)%4;return Ee[r]},s.getAABBPointSquareDist=function(o,r,a){let u=0;for(let d=0;d<2;++d){const g=a?a[d]:0;o[d]>g&&(u+=(o[d]-g)*(o[d]-g)),r[d]<g&&(u+=(g-r[d])*(g-r[d]))}return u},s.getAnchorAlignment=Ib,s.getAnchorJustification=Cb,s.getBounds=function(o){let r=1/0,a=1/0,u=-1/0,d=-1/0;for(const g of o)r=Math.min(r,g.x),a=Math.min(a,g.y),u=Math.max(u,g.x),d=Math.max(d,g.y);return{min:new $(r,a),max:new $(u,d)}},s.getColumn=vo,s.getGridMatrix=function(o,r,a,u){const d=r.getNorth(),g=r.getSouth(),_=r.getWest(),w=r.getEast(),T=1<<o.z,S=w-_,R=d-g,L=S/ch,B=-R/bm[a],j=[0,L,0,B,0,0,d,_,0];if(o.z>0){const q=180/u;qM(j,j,[q/S+1,0,0,0,q/R+1,0,-.5*q/L,.5*q/B,1])}return j[2]=T,j[5]=o.x,j[8]=o.y,j},s.getImage=Qt,s.getJSON=function(o,r){return dr(He(o,{type:"json"}),r)},s.getLatitudinalLod=function(o){const r=Oi-5;o=Oe(o,-r,r)/r*90;const a=Math.pow(Math.abs(Math.sin(re(o))),3);return Math.round(a*(bm.length-1))},s.getMapSessionAPI=Fe,s.getPerformanceMeasurement=Kt,s.getProjection=RC,s.getRTLTextPluginStatus=Se,s.getReferrer=It,s.getTilePoint=function(o,{x:r,y:a},u=0){return new $(((r-u)*o.scale-o.x)*sn,(a*o.scale-o.y)*sn)},s.getTileVec3=function(o,r,a=0){return Zd(((r.x-a)*o.scale-o.x)*sn,(r.y*o.scale-o.y)*sn,pA(r.z,r.y))},s.getVideo=function(o,r){const a=v.document.createElement("video");a.muted=!0,a.onloadstart=function(){r(null,a)};for(let u=0;u<o.length;u++){const d=v.document.createElement("source");Vn(o[u])||(a.crossOrigin="Anonymous"),d.src=o[u],a.appendChild(d)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(o){const r=[0,0,0],a=ea(new Float64Array(16));return sh(a,o.pixelMatrix,o.globeMatrix),Nr(r,r,a),new $(r[0],r[1])},s.globeDenormalizeECEF=rb,s.globeECEFOrigin=function(o,r){const a=[0,0,0];return Nr(a,a,Tm(La(r.canonical))),Nr(a,a,o),a},s.globeMetersToEcef=J_,s.globeNormalizeECEF=Tm,s.globePixelsToTileUnits=function(o,r){return sn/(512*Math.pow(2,o))*t0(La(r))},s.globePoleMatrixForTile=function(o,r,a){const u=ea(new Float64Array(16)),d=(r/(1<<o)-.5)*Math.PI*2;return K_(u,a.globeMatrix,d),Float32Array.from(u)},s.globeTileBounds=La,s.globeTiltAtLngLat=hA,s.globeToMercatorTransition=Qd,s.globeUseCustomAntiAliasing=function(o,r,a){const u=Qd(a.zoom),d=o.style.map._antialias,g=!!r.extStandardDerivatives,_=r.extStandardDerivativesForceOff||o.terrain&&o.terrain.exaggeration()>0;return u===0&&!d&&!_&&g},s.identity=ea,s.identity$1=tA,s.invert=Hw,s.isFullscreen=function(){return!!v.document.fullscreenElement||!!v.document.webkitFullscreenElement},s.isLngLatBehindGlobe=ib,s.isMapAuthenticated=function(o){return Re.has(o)},s.isMapboxURL=An,s.isSafariWithAntialiasingBug=function(o){const r=o.navigator?o.navigator.userAgent:null;return!!Vi(o)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Di,s.latLngToECEF=Xd,s.len=gB,s.length=gm,s.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},s.lngFromMercatorX=Jo,s.loadVectorTile=JC,s.makeRequest=dr,s.mapValue=function(o,r,a,u,d){return Oe((o-r)/(a-r)*(d-u)+u,u,d)},s.mercatorScale=mA,s.mercatorXfromLng=za,s.mercatorYfromLat=Na,s.mercatorZfromAltitude=na,s.mul=pB,s.mul$1=mB,s.multiply=sh,s.multiply$1=qM,s.multiply$2=XM,s.nextPowerOfTwo=bt,s.normalize=to,s.normalize$1=yB,s.normalize$2=JM,s.number=Rn,s.ortho=function(o,r,a,u,d,g,_){var w=1/(r-a),T=1/(u-d),S=1/(g-_);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*T,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*S,o[11]=0,o[12]=(r+a)*w,o[13]=(d+u)*T,o[14]=(_+g)*S,o[15]=1,o},s.pbf=zm,s.perspective=function(o,r,a,u,d){var g,_=1/Math.tan(r/2);return o[0]=_/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,d!=null&&d!==1/0?(o[10]=(d+u)*(g=1/(u-d)),o[14]=2*d*u*g):(o[10]=-1,o[14]=-2*u),o},s.pick=function(o,r){const a={};for(let u=0;u<r.length;u++){const d=r[u];d in o&&(a[d]=o[d])}return a},s.plugin=Ce,s.pointGeometry=$,s.polesInViewport=function(o){const r=ea(new Float64Array(16));sh(r,o.pixelMatrix,o.globeMatrix);const a=[0,Es,0],u=[0,Ts,0];return Nr(a,a,r),Nr(u,u,r),[a[0]>0&&a[0]<=o.width&&a[1]>0&&a[1]<=o.height&&!ib(o,new Dn(o.center.lat,90)),u[0]>0&&u[0]<=o.width&&u[1]>0&&u[1]<=o.height&&!ib(o,new Dn(o.center.lat,-90))]},s.polygonContainsPoint=dh,s.polygonIntersectsBox=bA,s.polygonIntersectsPolygon=_A,s.polygonizeBounds=function(o,r,a=0,u=!0){const d=new $(a,a),g=o.sub(d),_=r.add(d),w=[g,new $(_.x,g.y),_,new $(g.x,_.y)];return u&&w.push(g.clone()),w},s.posAttributes=wm,s.postMapLoadEvent=de,s.postPerformanceEvent=Ie,s.postTurnstileEvent=Y,s.potpack=Eb,s.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},s.radToDeg=ce,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(o){return o({pluginStatus:le,pluginURL:ee}),ye.on("pluginStateChange",o),o},s.removeAuthState=function(o){Re.delete(o)},s.renderColorRamp=fb,s.resample=gA,s.rotateX=Zw,s.rotateX$1=nA,s.rotateY=K_,s.rotateY$1=rA,s.rotateZ=function(o,r,a){var u=Math.sin(a),d=Math.cos(a),g=r[0],_=r[1],w=r[2],T=r[3],S=r[4],R=r[5],L=r[6],B=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=g*d+S*u,o[1]=_*d+R*u,o[2]=w*d+L*u,o[3]=T*d+B*u,o[4]=S*d-g*u,o[5]=R*d-_*u,o[6]=L*d-w*u,o[7]=B*d-T*u,o},s.rotateZ$1=function(o,r,a){a*=.5;var u=r[0],d=r[1],g=r[2],_=r[3],w=Math.sin(a),T=Math.cos(a);return o[0]=u*T+d*w,o[1]=d*T-u*w,o[2]=g*T+_*w,o[3]=_*T-g*w,o},s.scale=ah,s.scale$1=KM,s.scale$2=Ko,s.scaleAndAdd=vm,s.set=function(o,r,a,u){return o[0]=r,o[1]=a,o[2]=u,o},s.setCacheLimits=function(o,r){Gs=o,Ea=r},s.setColumn=function(o,r,a){o[4*r+0]=a[0],o[4*r+1]=a[1],o[4*r+2]=a[2],o[4*r+3]=a[3]},s.setRTLTextPlugin=function(o,r,a=!1){if(le===ne||le===oe||le===se)throw new Error("setRTLTextPlugin cannot be called multiple times.");ee=zn.resolveURL(o),le=ne,ae=r,me(),a||be()},s.smoothstep=ke,s.spec=nt,s.squaredLength=function(o){var r=o[0],a=o[1],u=o[2];return r*r+a*a+u*u},s.storeAuthState=function(o,r){r?Re.add(o):Re.delete(o)},s.sub=ta,s.subtract=Xw,s.symbolSize=AF,s.tileAABB=function(o,r,a,u,d,g,_,w,T){if(T.name==="globe")return wB(o,r,new f0(a,u,d));const S=ph({z:a,x:u,y:d},T);return new no([(g+S.x/S.scale)*r,r*(S.y/S.scale),_],[(g+S.x2/S.scale)*r,r*(S.y2/S.scale),w])},s.tileCornersToBounds=e0,s.tileTransform=ph,s.transformMat3=function(o,r,a){var u=r[0],d=r[1],g=r[2];return o[0]=u*a[0]+d*a[3]+g*a[6],o[1]=u*a[1]+d*a[4]+g*a[7],o[2]=u*a[2]+d*a[5]+g*a[8],o},s.transformMat4=Nr,s.transformMat4$1=lh,s.transformQuat=QM,s.transitionTileAABBinECEF=aA,s.translate=mm,s.transpose=function(o,r){if(o===r){var a=r[1],u=r[2],d=r[5];o[1]=r[3],o[2]=r[6],o[3]=a,o[5]=r[7],o[6]=u,o[7]=d}else o[0]=r[0],o[1]=r[3],o[2]=r[6],o[3]=r[1],o[4]=r[4],o[5]=r[7],o[6]=r[2],o[7]=r[5],o[8]=r[8];return o},s.triggerPluginCompletionEvent=ge,s.uniqueId=Mt,s.updateGlobeVertexNormal=function(o,r,a,u,d){const g=5*r+2;o.float32[g+0]=a,o.float32[g+1]=u,o.float32[g+2]=d},s.validateCustomStyleLayer=function(o){const r=[],a=o.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},s.validateFilter=o=>Ys(om(o)),s.validateFog=o=>Ys(R_(o)),s.validateLayer=o=>Ys(am(o)),s.validateLight=o=>Ys(P_(o)),s.validateSource=o=>Ys(Qu(o)),s.validateStyle=D_,s.validateTerrain=o=>Ys(lm(o)),s.values=Be,s.vectorTile=u0,s.version=E,s.warnOnce=Jt,s.window=v,s.wrap=je}),f(["./shared"],function(s){function v(fe){if(typeof fe=="number"||typeof fe=="boolean"||typeof fe=="string"||fe==null)return JSON.stringify(fe);if(Array.isArray(fe)){let K="[";for(const de of fe)K+=`${v(de)},`;return`${K}]`}let Y="{";for(const K of Object.keys(fe).sort())Y+=`${K}:${v(fe[K])},`;return`${Y}}`}function E(fe){let Y="";for(const K of s.refProperties)Y+=`/${v(fe[K])}`;return Y}class I{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,K){for(const _e of Y)this._layerConfigs[_e.id]=_e,(this._layers[_e.id]=s.createStyleLayer(_e)).compileFilter(),this.keyCache[_e.id]&&delete this.keyCache[_e.id];for(const _e of K)delete this.keyCache[_e],delete this._layerConfigs[_e],delete this._layers[_e];this.familiesBySource={};const de=function(_e,Ie){const Ue={};for(let Re=0;Re<_e.length;Re++){const Ge=Ie&&Ie[_e[Re].id]||E(_e[Re]);Ie&&(Ie[_e[Re].id]=Ge);let lt=Ue[Ge];lt||(lt=Ue[Ge]=[]),lt.push(_e[Re])}const Fe=[];for(const Re in Ue)Fe.push(Ue[Re]);return Fe}(s.values(this._layerConfigs),this.keyCache);for(const _e of de){const Ie=_e.map(kt=>this._layers[kt.id]),Ue=Ie[0];if(Ue.visibility==="none")continue;const Fe=Ue.source||"";let Re=this.familiesBySource[Fe];Re||(Re=this.familiesBySource[Fe]={});const Ge=Ue.sourceLayer||"_geojsonTileLayer";let lt=Re[Ge];lt||(lt=Re[Ge]=[]),lt.push(Ie)}}}class M{loadTile(Y,K){const{uid:de,encoding:_e,rawImageData:Ie,padding:Ue,buildQuadTree:Fe}=Y,Re=s.window.ImageBitmap&&Ie instanceof s.window.ImageBitmap?this.getImageData(Ie,Ue):Ie;K(null,new s.DEMData(de,Re,_e,Ue<1,Fe))}getImageData(Y,K){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const de=this.offscreenCanvasContext.getImageData(-K,-K,Y.width+2*K,Y.height+2*K);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),de}}var P=function fe(Y,K){var de,_e=Y&&Y.type;if(_e==="FeatureCollection")for(de=0;de<Y.features.length;de++)fe(Y.features[de],K);else if(_e==="GeometryCollection")for(de=0;de<Y.geometries.length;de++)fe(Y.geometries[de],K);else if(_e==="Feature")fe(Y.geometry,K);else if(_e==="Polygon")D(Y.coordinates,K);else if(_e==="MultiPolygon")for(de=0;de<Y.coordinates.length;de++)D(Y.coordinates[de],K);return Y};function D(fe,Y){if(fe.length!==0){k(fe[0],Y);for(var K=1;K<fe.length;K++)k(fe[K],!Y)}}function k(fe,Y){for(var K=0,de=0,_e=0,Ie=fe.length,Ue=Ie-1;_e<Ie;Ue=_e++){var Fe=(fe[_e][0]-fe[Ue][0])*(fe[Ue][1]+fe[_e][1]),Re=K+Fe;de+=Math.abs(K)>=Math.abs(Fe)?K-Re+Fe:Fe-Re+K,K=Re}K+de>=0!=!!Y&&fe.reverse()}const V=s.VectorTileFeature.prototype.toGeoJSON;class H{constructor(Y){this._feature=Y,this.extent=s.EXTENT,this.type=Y.type,this.properties=Y.tags,"id"in Y&&!isNaN(Y.id)&&(this.id=parseInt(Y.id,10))}loadGeometry(){if(this._feature.type===1){const Y=[];for(const K of this._feature.geometry)Y.push([new s.pointGeometry(K[0],K[1])]);return Y}{const Y=[];for(const K of this._feature.geometry){const de=[];for(const _e of K)de.push(new s.pointGeometry(_e[0],_e[1]));Y.push(de)}return Y}}toGeoJSON(Y,K,de){return V.call(this,Y,K,de)}}class G{constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=Y.length,this._features=Y}feature(Y){return new H(this._features[Y])}}var z={},N={get exports(){return z},set exports(fe){z=fe}},W=s.pointGeometry,$=s.vectorTile.VectorTileFeature,X=te;function te(fe,Y){this.options=Y||{},this.features=fe,this.length=fe.length}function J(fe,Y){this.id=typeof fe.id=="number"?fe.id:void 0,this.type=fe.type,this.rawGeometry=fe.type===1?[fe.geometry]:fe.geometry,this.properties=fe.tags,this.extent=Y||4096}te.prototype.feature=function(fe){return new J(this.features[fe],this.options.extent)},J.prototype.loadGeometry=function(){var fe=this.rawGeometry;this.geometry=[];for(var Y=0;Y<fe.length;Y++){for(var K=fe[Y],de=[],_e=0;_e<K.length;_e++)de.push(new W(K[_e][0],K[_e][1]));this.geometry.push(de)}return this.geometry},J.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var fe=this.geometry,Y=1/0,K=-1/0,de=1/0,_e=-1/0,Ie=0;Ie<fe.length;Ie++)for(var Ue=fe[Ie],Fe=0;Fe<Ue.length;Fe++){var Re=Ue[Fe];Y=Math.min(Y,Re.x),K=Math.max(K,Re.x),de=Math.min(de,Re.y),_e=Math.max(_e,Re.y)}return[Y,de,K,_e]},J.prototype.toGeoJSON=$.prototype.toGeoJSON;var re=s.pbf,ce=X;function Ee(fe){var Y=new re;return function(K,de){for(var _e in K.layers)de.writeMessage(3,Me,K.layers[_e])}(fe,Y),Y.finish()}function Me(fe,Y){var K;Y.writeVarintField(15,fe.version||1),Y.writeStringField(1,fe.name||""),Y.writeVarintField(5,fe.extent||4096);var de={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<fe.length;K++)de.feature=fe.feature(K),Y.writeMessage(2,Le,de);var _e=de.keys;for(K=0;K<_e.length;K++)Y.writeStringField(3,_e[K]);var Ie=de.values;for(K=0;K<Ie.length;K++)Y.writeMessage(4,De,Ie[K])}function Le(fe,Y){var K=fe.feature;K.id!==void 0&&Y.writeVarintField(1,K.id),Y.writeMessage(2,Ae,fe),Y.writeVarintField(3,K.type),Y.writeMessage(4,je,K)}function Ae(fe,Y){var K=fe.feature,de=fe.keys,_e=fe.values,Ie=fe.keycache,Ue=fe.valuecache;for(var Fe in K.properties){var Re=K.properties[Fe],Ge=Ie[Fe];if(Re!==null){Ge===void 0&&(de.push(Fe),Ie[Fe]=Ge=de.length-1),Y.writeVarint(Ge);var lt=typeof Re;lt!=="string"&&lt!=="boolean"&&lt!=="number"&&(Re=JSON.stringify(Re));var kt=lt+":"+Re,pt=Ue[kt];pt===void 0&&(_e.push(Re),Ue[kt]=pt=_e.length-1),Y.writeVarint(pt)}}}function Oe(fe,Y){return(Y<<3)+(7&fe)}function ke(fe){return fe<<1^fe>>31}function je(fe,Y){for(var K=fe.loadGeometry(),de=fe.type,_e=0,Ie=0,Ue=K.length,Fe=0;Fe<Ue;Fe++){var Re=K[Fe],Ge=1;de===1&&(Ge=Re.length),Y.writeVarint(Oe(1,Ge));for(var lt=de===3?Re.length-1:Re.length,kt=0;kt<lt;kt++){kt===1&&de!==1&&Y.writeVarint(Oe(2,lt-1));var pt=Re[kt].x-_e,Kt=Re[kt].y-Ie;Y.writeVarint(ke(pt)),Y.writeVarint(ke(Kt)),_e+=pt,Ie+=Kt}de===3&&Y.writeVarint(Oe(7,1))}}function De(fe,Y){var K=typeof fe;K==="string"?Y.writeStringField(1,fe):K==="boolean"?Y.writeBooleanField(7,fe):K==="number"&&(fe%1!=0?Y.writeDoubleField(3,fe):fe<0?Y.writeSVarintField(6,fe):Y.writeVarintField(5,fe))}function Be(fe,Y,K,de,_e,Ie){if(_e-de<=K)return;const Ue=de+_e>>1;He(fe,Y,Ue,de,_e,Ie%2),Be(fe,Y,K,de,Ue-1,Ie+1),Be(fe,Y,K,Ue+1,_e,Ie+1)}function He(fe,Y,K,de,_e,Ie){for(;_e>de;){if(_e-de>600){const Ge=_e-de+1,lt=K-de+1,kt=Math.log(Ge),pt=.5*Math.exp(2*kt/3),Kt=.5*Math.sqrt(kt*pt*(Ge-pt)/Ge)*(lt-Ge/2<0?-1:1);He(fe,Y,K,Math.max(de,Math.floor(K-lt*pt/Ge+Kt)),Math.min(_e,Math.floor(K+(Ge-lt)*pt/Ge+Kt)),Ie)}const Ue=Y[2*K+Ie];let Fe=de,Re=_e;for(tt(fe,Y,de,K),Y[2*_e+Ie]>Ue&&tt(fe,Y,de,_e);Fe<Re;){for(tt(fe,Y,Fe,Re),Fe++,Re--;Y[2*Fe+Ie]<Ue;)Fe++;for(;Y[2*Re+Ie]>Ue;)Re--}Y[2*de+Ie]===Ue?tt(fe,Y,de,Re):(Re++,tt(fe,Y,Re,_e)),Re<=K&&(de=Re+1),K<=Re&&(_e=Re-1)}}function tt(fe,Y,K,de){Mt(fe,K,de),Mt(Y,2*K,2*de),Mt(Y,2*K+1,2*de+1)}function Mt(fe,Y,K){const de=fe[Y];fe[Y]=fe[K],fe[K]=de}function Dt(fe,Y,K,de){const _e=fe-K,Ie=Y-de;return _e*_e+Ie*Ie}N.exports=Ee,z.fromVectorTileJs=Ee,z.fromGeojsonVt=function(fe,Y){Y=Y||{};var K={};for(var de in fe)K[de]=new ce(fe[de].features,Y),K[de].name=de,K[de].version=Y.version,K[de].extent=Y.extent;return Ee({layers:K})},z.GeoJSONWrapper=ce;const bt=fe=>fe[0],Nt=fe=>fe[1];class ft{constructor(Y,K=bt,de=Nt,_e=64,Ie=Float64Array){this.nodeSize=_e,this.points=Y;const Ue=Y.length<65536?Uint16Array:Uint32Array,Fe=this.ids=new Ue(Y.length),Re=this.coords=new Ie(2*Y.length);for(let Ge=0;Ge<Y.length;Ge++)Fe[Ge]=Ge,Re[2*Ge]=K(Y[Ge]),Re[2*Ge+1]=de(Y[Ge]);Be(Fe,Re,_e,0,Fe.length-1,0)}range(Y,K,de,_e){return function(Ie,Ue,Fe,Re,Ge,lt,kt){const pt=[0,Ie.length-1,0],Kt=[];let Ht,qt;for(;pt.length;){const on=pt.pop(),fn=pt.pop(),zn=pt.pop();if(fn-zn<=kt){for(let Hn=zn;Hn<=fn;Hn++)Ht=Ue[2*Hn],qt=Ue[2*Hn+1],Ht>=Fe&&Ht<=Ge&&qt>=Re&&qt<=lt&&Kt.push(Ie[Hn]);continue}const tn=Math.floor((zn+fn)/2);Ht=Ue[2*tn],qt=Ue[2*tn+1],Ht>=Fe&&Ht<=Ge&&qt>=Re&&qt<=lt&&Kt.push(Ie[tn]);const qn=(on+1)%2;(on===0?Fe<=Ht:Re<=qt)&&(pt.push(zn),pt.push(tn-1),pt.push(qn)),(on===0?Ge>=Ht:lt>=qt)&&(pt.push(tn+1),pt.push(fn),pt.push(qn))}return Kt}(this.ids,this.coords,Y,K,de,_e,this.nodeSize)}within(Y,K,de){return function(_e,Ie,Ue,Fe,Re,Ge){const lt=[0,_e.length-1,0],kt=[],pt=Re*Re;for(;lt.length;){const Kt=lt.pop(),Ht=lt.pop(),qt=lt.pop();if(Ht-qt<=Ge){for(let qn=qt;qn<=Ht;qn++)Dt(Ie[2*qn],Ie[2*qn+1],Ue,Fe)<=pt&&kt.push(_e[qn]);continue}const on=Math.floor((qt+Ht)/2),fn=Ie[2*on],zn=Ie[2*on+1];Dt(fn,zn,Ue,Fe)<=pt&&kt.push(_e[on]);const tn=(Kt+1)%2;(Kt===0?Ue-Re<=fn:Fe-Re<=zn)&&(lt.push(qt),lt.push(on-1),lt.push(tn)),(Kt===0?Ue+Re>=fn:Fe+Re>=zn)&&(lt.push(on+1),lt.push(Ht),lt.push(tn))}return kt}(this.ids,this.coords,Y,K,de,this.nodeSize)}}const Ot={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:fe=>fe},an=Math.fround||(pn=new Float32Array(1),fe=>(pn[0]=+fe,pn[0]));var pn;class Vt{constructor(Y){this.options=Vi(Object.create(Ot),Y),this.trees=new Array(this.options.maxZoom+1)}load(Y){const{log:K,minZoom:de,maxZoom:_e,nodeSize:Ie}=this.options;K&&console.time("total time");const Ue=`prepare ${Y.length} points`;K&&console.time(Ue),this.points=Y;let Fe=[];for(let Re=0;Re<Y.length;Re++)Y[Re].geometry&&Fe.push(Jt(Y[Re],Re));this.trees[_e+1]=new ft(Fe,Po,vo,Ie,Float32Array),K&&console.timeEnd(Ue);for(let Re=_e;Re>=de;Re--){const Ge=+Date.now();Fe=this._cluster(Fe,Re),this.trees[Re]=new ft(Fe,Po,vo,Ie,Float32Array),K&&console.log("z%d: %d clusters in %dms",Re,Fe.length,+Date.now()-Ge)}return K&&console.timeEnd("total time"),this}getClusters(Y,K){let de=((Y[0]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,Y[1]));let Ie=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)de=-180,Ie=180;else if(de>Ie){const lt=this.getClusters([de,_e,180,Ue],K),kt=this.getClusters([-180,_e,Ie,Ue],K);return lt.concat(kt)}const Fe=this.trees[this._limitZoom(K)],Re=Fe.range(ui(de),Ui(Ue),ui(Ie),Ui(_e)),Ge=[];for(const lt of Re){const kt=Fe.points[lt];Ge.push(kt.numPoints?_r(kt):this.points[kt.index])}return Ge}getChildren(Y){const K=this._getOriginId(Y),de=this._getOriginZoom(Y),_e="No cluster with the specified id.",Ie=this.trees[de];if(!Ie)throw new Error(_e);const Ue=Ie.points[K];if(!Ue)throw new Error(_e);const Fe=this.options.radius/(this.options.extent*Math.pow(2,de-1)),Re=Ie.within(Ue.x,Ue.y,Fe),Ge=[];for(const lt of Re){const kt=Ie.points[lt];kt.parentId===Y&&Ge.push(kt.numPoints?_r(kt):this.points[kt.index])}if(Ge.length===0)throw new Error(_e);return Ge}getLeaves(Y,K,de){const _e=[];return this._appendLeaves(_e,Y,K=K||10,de=de||0,0),_e}getTile(Y,K,de){const _e=this.trees[this._limitZoom(Y)],Ie=Math.pow(2,Y),{extent:Ue,radius:Fe}=this.options,Re=Fe/Ue,Ge=(de-Re)/Ie,lt=(de+1+Re)/Ie,kt={features:[]};return this._addTileFeatures(_e.range((K-Re)/Ie,Ge,(K+1+Re)/Ie,lt),_e.points,K,de,Ie,kt),K===0&&this._addTileFeatures(_e.range(1-Re/Ie,Ge,1,lt),_e.points,Ie,de,Ie,kt),K===Ie-1&&this._addTileFeatures(_e.range(0,Ge,Re/Ie,lt),_e.points,-1,de,Ie,kt),kt.features.length?kt:null}getClusterExpansionZoom(Y){let K=this._getOriginZoom(Y)-1;for(;K<=this.options.maxZoom;){const de=this.getChildren(Y);if(K++,de.length!==1)break;Y=de[0].properties.cluster_id}return K}_appendLeaves(Y,K,de,_e,Ie){const Ue=this.getChildren(K);for(const Fe of Ue){const Re=Fe.properties;if(Re&&Re.cluster?Ie+Re.point_count<=_e?Ie+=Re.point_count:Ie=this._appendLeaves(Y,Re.cluster_id,de,_e,Ie):Ie<_e?Ie++:Y.push(Fe),Y.length===de)break}return Ie}_addTileFeatures(Y,K,de,_e,Ie,Ue){for(const Fe of Y){const Re=K[Fe],Ge=Re.numPoints;let lt,kt,pt;if(Ge)lt=yn(Re),kt=Re.x,pt=Re.y;else{const qt=this.points[Re.index];lt=qt.properties,kt=ui(qt.geometry.coordinates[0]),pt=Ui(qt.geometry.coordinates[1])}const Kt={type:1,geometry:[[Math.round(this.options.extent*(kt*Ie-de)),Math.round(this.options.extent*(pt*Ie-_e))]],tags:lt};let Ht;Ge?Ht=Re.id:this.options.generateId?Ht=Re.index:this.points[Re.index].id&&(Ht=this.points[Re.index].id),Ht!==void 0&&(Kt.id=Ht),Ue.features.push(Kt)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,K){const de=[],{radius:_e,extent:Ie,reduce:Ue,minPoints:Fe}=this.options,Re=_e/(Ie*Math.pow(2,K));for(let Ge=0;Ge<Y.length;Ge++){const lt=Y[Ge];if(lt.zoom<=K)continue;lt.zoom=K;const kt=this.trees[K+1],pt=kt.within(lt.x,lt.y,Re),Kt=lt.numPoints||1;let Ht=Kt;for(const qt of pt){const on=kt.points[qt];on.zoom>K&&(Ht+=on.numPoints||1)}if(Ht>Kt&&Ht>=Fe){let qt=lt.x*Kt,on=lt.y*Kt,fn=Ue&&Kt>1?this._map(lt,!0):null;const zn=(Ge<<5)+(K+1)+this.points.length;for(const tn of pt){const qn=kt.points[tn];if(qn.zoom<=K)continue;qn.zoom=K;const Hn=qn.numPoints||1;qt+=qn.x*Hn,on+=qn.y*Hn,qn.parentId=zn,Ue&&(fn||(fn=this._map(lt,!0)),Ue(fn,this._map(qn)))}lt.parentId=zn,de.push(Mn(qt/Ht,on/Ht,zn,Ht,fn))}else if(de.push(lt),Ht>1)for(const qt of pt){const on=kt.points[qt];on.zoom<=K||(on.zoom=K,de.push(on))}}return de}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,K){if(Y.numPoints)return K?Vi({},Y.properties):Y.properties;const de=this.points[Y.index].properties,_e=this.options.map(de);return K&&_e===de?Vi({},_e):_e}}function Mn(fe,Y,K,de,_e){return{x:an(fe),y:an(Y),zoom:1/0,id:K,parentId:-1,numPoints:de,properties:_e}}function Jt(fe,Y){const[K,de]=fe.geometry.coordinates;return{x:an(ui(K)),y:an(Ui(de)),zoom:1/0,index:Y,parentId:-1}}function _r(fe){return{type:"Feature",id:fe.id,properties:yn(fe),geometry:{type:"Point",coordinates:[(Y=fe.x,360*(Y-.5)),_o(fe.y)]}};var Y}function yn(fe){const Y=fe.numPoints,K=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y;return Vi(Vi({},fe.properties),{cluster:!0,cluster_id:fe.id,point_count:Y,point_count_abbreviated:K})}function ui(fe){return fe/360+.5}function Ui(fe){const Y=Math.sin(fe*Math.PI/180),K=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return K<0?0:K>1?1:K}function _o(fe){const Y=(180-360*fe)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function Vi(fe,Y){for(const K in Y)fe[K]=Y[K];return fe}function Po(fe){return fe.x}function vo(fe){return fe.y}function ti(fe,Y,K,de){for(var _e,Ie=de,Ue=K-Y>>1,Fe=K-Y,Re=fe[Y],Ge=fe[Y+1],lt=fe[K],kt=fe[K+1],pt=Y+3;pt<K;pt+=3){var Kt=vr(fe[pt],fe[pt+1],Re,Ge,lt,kt);if(Kt>Ie)_e=pt,Ie=Kt;else if(Kt===Ie){var Ht=Math.abs(pt-Ue);Ht<Fe&&(_e=pt,Fe=Ht)}}Ie>de&&(_e-Y>3&&ti(fe,Y,_e,de),fe[_e+2]=Ie,K-_e>3&&ti(fe,_e,K,de))}function vr(fe,Y,K,de,_e,Ie){var Ue=_e-K,Fe=Ie-de;if(Ue!==0||Fe!==0){var Re=((fe-K)*Ue+(Y-de)*Fe)/(Ue*Ue+Fe*Fe);Re>1?(K=_e,de=Ie):Re>0&&(K+=Ue*Re,de+=Fe*Re)}return(Ue=fe-K)*Ue+(Fe=Y-de)*Fe}function Ro(fe,Y,K,de){var _e={id:fe===void 0?null:fe,type:Y,geometry:K,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ie){var Ue=Ie.geometry,Fe=Ie.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")Gs(Ie,Ue);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var Re=0;Re<Ue.length;Re++)Gs(Ie,Ue[Re]);else if(Fe==="MultiPolygon")for(Re=0;Re<Ue.length;Re++)for(var Ge=0;Ge<Ue[Re].length;Ge++)Gs(Ie,Ue[Re][Ge])}(_e),_e}function Gs(fe,Y){for(var K=0;K<Y.length;K+=3)fe.minX=Math.min(fe.minX,Y[K]),fe.minY=Math.min(fe.minY,Y[K+1]),fe.maxX=Math.max(fe.maxX,Y[K]),fe.maxY=Math.max(fe.maxY,Y[K+1])}function Ea(fe,Y,K,de){if(Y.geometry){var _e=Y.geometry.coordinates,Ie=Y.geometry.type,Ue=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),Fe=[],Re=Y.id;if(K.promoteId?Re=Y.properties[K.promoteId]:K.generateId&&(Re=de||0),Ie==="Point")$s(_e,Fe);else if(Ie==="MultiPoint")for(var Ge=0;Ge<_e.length;Ge++)$s(_e[Ge],Fe);else if(Ie==="LineString")Do(_e,Fe,Ue,!1);else if(Ie==="MultiLineString"){if(K.lineMetrics){for(Ge=0;Ge<_e.length;Ge++)Do(_e[Ge],Fe=[],Ue,!1),fe.push(Ro(Re,"LineString",Fe,Y.properties));return}Ta(_e,Fe,Ue,!1)}else if(Ie==="Polygon")Ta(_e,Fe,Ue,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(Ge=0;Ge<Y.geometry.geometries.length;Ge++)Ea(fe,{id:Re,geometry:Y.geometry.geometries[Ge],properties:Y.properties},K,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ge=0;Ge<_e.length;Ge++){var lt=[];Ta(_e[Ge],lt,Ue,!0),Fe.push(lt)}}fe.push(Ro(Re,Ie,Fe,Y.properties))}}function $s(fe,Y){Y.push(yt(fe[0])),Y.push(Ye(fe[1])),Y.push(0)}function Do(fe,Y,K,de){for(var _e,Ie,Ue=0,Fe=0;Fe<fe.length;Fe++){var Re=yt(fe[Fe][0]),Ge=Ye(fe[Fe][1]);Y.push(Re),Y.push(Ge),Y.push(0),Fe>0&&(Ue+=de?(_e*Ge-Re*Ie)/2:Math.sqrt(Math.pow(Re-_e,2)+Math.pow(Ge-Ie,2))),_e=Re,Ie=Ge}var lt=Y.length-3;Y[2]=1,ti(Y,0,lt,K),Y[lt+2]=1,Y.size=Math.abs(Ue),Y.start=0,Y.end=Y.size}function Ta(fe,Y,K,de){for(var _e=0;_e<fe.length;_e++){var Ie=[];Do(fe[_e],Ie,K,de),Y.push(Ie)}}function yt(fe){return fe/360+.5}function Ye(fe){var Y=Math.sin(fe*Math.PI/180),K=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return K<0?0:K>1?1:K}function wt(fe,Y,K,de,_e,Ie,Ue,Fe){if(de/=Y,Ie>=(K/=Y)&&Ue<de)return fe;if(Ue<K||Ie>=de)return null;for(var Re=[],Ge=0;Ge<fe.length;Ge++){var lt=fe[Ge],kt=lt.geometry,pt=lt.type,Kt=_e===0?lt.minX:lt.minY,Ht=_e===0?lt.maxX:lt.maxY;if(Kt>=K&&Ht<de)Re.push(lt);else if(!(Ht<K||Kt>=de)){var qt=[];if(pt==="Point"||pt==="MultiPoint")It(kt,qt,K,de,_e);else if(pt==="LineString")dr(kt,qt,K,de,_e,!1,Fe.lineMetrics);else if(pt==="MultiLineString")Vn(kt,qt,K,de,_e,!1);else if(pt==="Polygon")Vn(kt,qt,K,de,_e,!0);else if(pt==="MultiPolygon")for(var on=0;on<kt.length;on++){var fn=[];Vn(kt[on],fn,K,de,_e,!0),fn.length&&qt.push(fn)}if(qt.length){if(Fe.lineMetrics&&pt==="LineString"){for(on=0;on<qt.length;on++)Re.push(Ro(lt.id,pt,qt[on],lt.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(qt.length===1?(pt="LineString",qt=qt[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=qt.length===3?"Point":"MultiPoint"),Re.push(Ro(lt.id,pt,qt,lt.tags))}}}return Re.length?Re:null}function It(fe,Y,K,de,_e){for(var Ie=0;Ie<fe.length;Ie+=3){var Ue=fe[Ie+_e];Ue>=K&&Ue<=de&&(Y.push(fe[Ie]),Y.push(fe[Ie+1]),Y.push(fe[Ie+2]))}}function dr(fe,Y,K,de,_e,Ie,Ue){for(var Fe,Re,Ge=hi(fe),lt=_e===0?_t:Wt,kt=fe.start,pt=0;pt<fe.length-3;pt+=3){var Kt=fe[pt],Ht=fe[pt+1],qt=fe[pt+2],on=fe[pt+3],fn=fe[pt+4],zn=_e===0?Kt:Ht,tn=_e===0?on:fn,qn=!1;Ue&&(Fe=Math.sqrt(Math.pow(Kt-on,2)+Math.pow(Ht-fn,2))),zn<K?tn>K&&(Re=lt(Ge,Kt,Ht,on,fn,K),Ue&&(Ge.start=kt+Fe*Re)):zn>de?tn<de&&(Re=lt(Ge,Kt,Ht,on,fn,de),Ue&&(Ge.start=kt+Fe*Re)):ut(Ge,Kt,Ht,qt),tn<K&&zn>=K&&(Re=lt(Ge,Kt,Ht,on,fn,K),qn=!0),tn>de&&zn<=de&&(Re=lt(Ge,Kt,Ht,on,fn,de),qn=!0),!Ie&&qn&&(Ue&&(Ge.end=kt+Fe*Re),Y.push(Ge),Ge=hi(fe)),Ue&&(kt+=Fe)}var Hn=fe.length-3;Kt=fe[Hn],Ht=fe[Hn+1],qt=fe[Hn+2],(zn=_e===0?Kt:Ht)>=K&&zn<=de&&ut(Ge,Kt,Ht,qt),Hn=Ge.length-3,Ie&&Hn>=3&&(Ge[Hn]!==Ge[0]||Ge[Hn+1]!==Ge[1])&&ut(Ge,Ge[0],Ge[1],Ge[2]),Ge.length&&Y.push(Ge)}function hi(fe){var Y=[];return Y.size=fe.size,Y.start=fe.start,Y.end=fe.end,Y}function Vn(fe,Y,K,de,_e,Ie){for(var Ue=0;Ue<fe.length;Ue++)dr(fe[Ue],Y,K,de,_e,Ie,!1)}function ut(fe,Y,K,de){fe.push(Y),fe.push(K),fe.push(de)}function _t(fe,Y,K,de,_e,Ie){var Ue=(Ie-Y)/(de-Y);return fe.push(Ie),fe.push(K+(_e-K)*Ue),fe.push(1),Ue}function Wt(fe,Y,K,de,_e,Ie){var Ue=(Ie-K)/(_e-K);return fe.push(Y+(de-Y)*Ue),fe.push(Ie),fe.push(1),Ue}function Qt(fe,Y){for(var K=[],de=0;de<fe.length;de++){var _e,Ie=fe[de],Ue=Ie.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")_e=dn(Ie.geometry,Y);else if(Ue==="MultiLineString"||Ue==="Polygon"){_e=[];for(var Fe=0;Fe<Ie.geometry.length;Fe++)_e.push(dn(Ie.geometry[Fe],Y))}else if(Ue==="MultiPolygon")for(_e=[],Fe=0;Fe<Ie.geometry.length;Fe++){for(var Re=[],Ge=0;Ge<Ie.geometry[Fe].length;Ge++)Re.push(dn(Ie.geometry[Fe][Ge],Y));_e.push(Re)}K.push(Ro(Ie.id,Ue,_e,Ie.tags))}return K}function dn(fe,Y){var K=[];K.size=fe.size,fe.start!==void 0&&(K.start=fe.start,K.end=fe.end);for(var de=0;de<fe.length;de+=3)K.push(fe[de]+Y,fe[de+1],fe[de+2]);return K}function An(fe,Y){if(fe.transformed)return fe;var K,de,_e,Ie=1<<fe.z,Ue=fe.x,Fe=fe.y;for(K=0;K<fe.features.length;K++){var Re=fe.features[K],Ge=Re.geometry,lt=Re.type;if(Re.geometry=[],lt===1)for(de=0;de<Ge.length;de+=2)Re.geometry.push(Wn(Ge[de],Ge[de+1],Y,Ie,Ue,Fe));else for(de=0;de<Ge.length;de++){var kt=[];for(_e=0;_e<Ge[de].length;_e+=2)kt.push(Wn(Ge[de][_e],Ge[de][_e+1],Y,Ie,Ue,Fe));Re.geometry.push(kt)}}return fe.transformed=!0,fe}function Wn(fe,Y,K,de,_e,Ie){return[Math.round(K*(fe*de-_e)),Math.round(K*(Y*de-Ie))]}function ar(fe,Y,K,de,_e){for(var Ie=Y===_e.maxZoom?0:_e.tolerance/((1<<Y)*_e.extent),Ue={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:de,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<fe.length;Fe++){Ue.numFeatures++,Qn(Ue,fe[Fe],Ie,_e);var Re=fe[Fe].minX,Ge=fe[Fe].minY,lt=fe[Fe].maxX,kt=fe[Fe].maxY;Re<Ue.minX&&(Ue.minX=Re),Ge<Ue.minY&&(Ue.minY=Ge),lt>Ue.maxX&&(Ue.maxX=lt),kt>Ue.maxY&&(Ue.maxY=kt)}return Ue}function Qn(fe,Y,K,de){var _e=Y.geometry,Ie=Y.type,Ue=[];if(Ie==="Point"||Ie==="MultiPoint")for(var Fe=0;Fe<_e.length;Fe+=3)Ue.push(_e[Fe]),Ue.push(_e[Fe+1]),fe.numPoints++,fe.numSimplified++;else if(Ie==="LineString")Tr(Ue,_e,fe,K,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(Fe=0;Fe<_e.length;Fe++)Tr(Ue,_e[Fe],fe,K,Ie==="Polygon",Fe===0);else if(Ie==="MultiPolygon")for(var Re=0;Re<_e.length;Re++){var Ge=_e[Re];for(Fe=0;Fe<Ge.length;Fe++)Tr(Ue,Ge[Fe],fe,K,!0,Fe===0)}if(Ue.length){var lt=Y.tags||null;if(Ie==="LineString"&&de.lineMetrics){for(var kt in lt={},Y.tags)lt[kt]=Y.tags[kt];lt.mapbox_clip_start=_e.start/_e.size,lt.mapbox_clip_end=_e.end/_e.size}var pt={geometry:Ue,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:lt};Y.id!==null&&(pt.id=Y.id),fe.features.push(pt)}}function Tr(fe,Y,K,de,_e,Ie){var Ue=de*de;if(de>0&&Y.size<(_e?Ue:de))K.numPoints+=Y.length/3;else{for(var Fe=[],Re=0;Re<Y.length;Re+=3)(de===0||Y[Re+2]>Ue)&&(K.numSimplified++,Fe.push(Y[Re]),Fe.push(Y[Re+1])),K.numPoints++;_e&&function(Ge,lt){for(var kt=0,pt=0,Kt=Ge.length,Ht=Kt-2;pt<Kt;Ht=pt,pt+=2)kt+=(Ge[pt]-Ge[Ht])*(Ge[pt+1]+Ge[Ht+1]);if(kt>0===lt)for(pt=0,Kt=Ge.length;pt<Kt/2;pt+=2){var qt=Ge[pt],on=Ge[pt+1];Ge[pt]=Ge[Kt-2-pt],Ge[pt+1]=Ge[Kt-1-pt],Ge[Kt-2-pt]=qt,Ge[Kt-1-pt]=on}}(Fe,Ie),fe.push(Fe)}}function lr(fe,Y){var K=(Y=this.options=function(_e,Ie){for(var Ue in Ie)_e[Ue]=Ie[Ue];return _e}(Object.create(this.options),Y)).debug;if(K&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var de=function(_e,Ie){var Ue=[];if(_e.type==="FeatureCollection")for(var Fe=0;Fe<_e.features.length;Fe++)Ea(Ue,_e.features[Fe],Ie,Fe);else Ea(Ue,_e.type==="Feature"?_e:{geometry:_e},Ie);return Ue}(fe,Y);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),de=function(_e,Ie){var Ue=Ie.buffer/Ie.extent,Fe=_e,Re=wt(_e,1,-1-Ue,Ue,0,-1,2,Ie),Ge=wt(_e,1,1-Ue,2+Ue,0,-1,2,Ie);return(Re||Ge)&&(Fe=wt(_e,1,-Ue,1+Ue,0,-1,2,Ie)||[],Re&&(Fe=Qt(Re,1).concat(Fe)),Ge&&(Fe=Fe.concat(Qt(Ge,-1)))),Fe}(de,Y),de.length&&this.splitTile(de,0,0,0),K&&(de.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kn(fe,Y,K){return 32*((1<<fe)*K+Y)+fe}function ji(fe,Y){const K=fe.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const de=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!de)return Y(null,null);const _e=new G(de.features);let Ie=z(_e);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),Y(null,{vectorTile:_e,rawData:Ie.buffer})}lr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},lr.prototype.splitTile=function(fe,Y,K,de,_e,Ie,Ue){for(var Fe=[fe,Y,K,de],Re=this.options,Ge=Re.debug;Fe.length;){de=Fe.pop(),K=Fe.pop(),Y=Fe.pop(),fe=Fe.pop();var lt=1<<Y,kt=Kn(Y,K,de),pt=this.tiles[kt];if(!pt&&(Ge>1&&console.time("creation"),pt=this.tiles[kt]=ar(fe,Y,K,de,Re),this.tileCoords.push({z:Y,x:K,y:de}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,K,de,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var Kt="z"+Y;this.stats[Kt]=(this.stats[Kt]||0)+1,this.total++}if(pt.source=fe,_e){if(Y===Re.maxZoom||Y===_e)continue;var Ht=1<<_e-Y;if(K!==Math.floor(Ie/Ht)||de!==Math.floor(Ue/Ht))continue}else if(Y===Re.indexMaxZoom||pt.numPoints<=Re.indexMaxPoints)continue;if(pt.source=null,fe.length!==0){Ge>1&&console.time("clipping");var qt,on,fn,zn,tn,qn,Hn=.5*Re.buffer/Re.extent,Sa=.5-Hn,Ws=.5+Hn,nt=1+Hn;qt=on=fn=zn=null,tn=wt(fe,lt,K-Hn,K+Ws,0,pt.minX,pt.maxX,Re),qn=wt(fe,lt,K+Sa,K+nt,0,pt.minX,pt.maxX,Re),fe=null,tn&&(qt=wt(tn,lt,de-Hn,de+Ws,1,pt.minY,pt.maxY,Re),on=wt(tn,lt,de+Sa,de+nt,1,pt.minY,pt.maxY,Re),tn=null),qn&&(fn=wt(qn,lt,de-Hn,de+Ws,1,pt.minY,pt.maxY,Re),zn=wt(qn,lt,de+Sa,de+nt,1,pt.minY,pt.maxY,Re),qn=null),Ge>1&&console.timeEnd("clipping"),Fe.push(qt||[],Y+1,2*K,2*de),Fe.push(on||[],Y+1,2*K,2*de+1),Fe.push(fn||[],Y+1,2*K+1,2*de),Fe.push(zn||[],Y+1,2*K+1,2*de+1)}}},lr.prototype.getTile=function(fe,Y,K){var de=this.options,_e=de.extent,Ie=de.debug;if(fe<0||fe>24)return null;var Ue=1<<fe,Fe=Kn(fe,Y=(Y%Ue+Ue)%Ue,K);if(this.tiles[Fe])return An(this.tiles[Fe],_e);Ie>1&&console.log("drilling down to z%d-%d-%d",fe,Y,K);for(var Re,Ge=fe,lt=Y,kt=K;!Re&&Ge>0;)Ge--,lt=Math.floor(lt/2),kt=Math.floor(kt/2),Re=this.tiles[Kn(Ge,lt,kt)];return Re&&Re.source?(Ie>1&&console.log("found parent tile z%d-%d-%d",Ge,lt,kt),Ie>1&&console.time("drilling down"),this.splitTile(Re.source,Ge,lt,kt,fe,Y,K),Ie>1&&console.timeEnd("drilling down"),this.tiles[Fe]?An(this.tiles[Fe],_e):null):null};class Oo extends s.VectorTileWorkerSource{constructor(Y,K,de,_e,Ie){super(Y,K,de,_e,ji),Ie&&(this.loadGeoJSON=Ie)}loadData(Y,K){const de=Y&&Y.request,_e=de&&de.collectResourceTiming;this.loadGeoJSON(Y,(Ie,Ue)=>{if(Ie||!Ue)return K(Ie);if(typeof Ue!="object")return K(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{P(Ue,!0);try{if(Y.filter){const Re=s.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Re.result==="error")throw new Error(Re.value.map(lt=>`${lt.key}: ${lt.message}`).join(", "));Ue={type:"FeatureCollection",features:Ue.features.filter(lt=>Re.value.evaluate({zoom:0},lt))}}this._geoJSONIndex=Y.cluster?new Vt(function({superclusterOptions:Re,clusterProperties:Ge}){if(!Ge||!Re)return Re;const lt={},kt={},pt={accumulated:null,zoom:0},Kt={properties:null},Ht=Object.keys(Ge);for(const qt of Ht){const[on,fn]=Ge[qt],zn=s.createExpression(fn),tn=s.createExpression(typeof on=="string"?[on,["accumulated"],["get",qt]]:on);lt[qt]=zn.value,kt[qt]=tn.value}return Re.map=qt=>{Kt.properties=qt;const on={};for(const fn of Ht)on[fn]=lt[fn].evaluate(pt,Kt);return on},Re.reduce=(qt,on)=>{Kt.properties=on;for(const fn of Ht)pt.accumulated=qt[fn],qt[fn]=kt[fn].evaluate(pt,Kt)},Re}(Y)).load(Ue.features):function(Re,Ge){return new lr(Re,Ge)}(Ue,Y.geojsonVtOptions)}catch(Re){return K(Re)}this.loaded={};const Fe={};if(_e){const Re=s.getPerformanceMeasurement(de);Re&&(Fe.resourceTiming={},Fe.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Re)))}K(null,Fe)}})}reloadTile(Y,K){const de=this.loaded;return de&&de[Y.uid]?super.reloadTile(Y,K):this.loadTile(Y,K)}loadGeoJSON(Y,K){if(Y.request)s.getJSON(Y.request,K);else{if(typeof Y.data!="string")return K(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));try{return K(null,JSON.parse(Y.data))}catch{return K(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Y,K){try{K(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(de){K(de)}}getClusterChildren(Y,K){try{K(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(de){K(de)}}getClusterLeaves(Y,K){try{K(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(de){K(de)}}}class ko{constructor(Y){this.self=Y,this.actor=new s.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Oo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(K,de)=>{if(this.workerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.workerSourceTypes[K]=de},this.self.registerRTLTextPlugin=K=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=K.applyArabicShaping,s.plugin.processBidirectionalText=K.processBidirectionalText,s.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}}clearCaches(Y,K,de){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.workerSources[Y],delete this.demWorkerSources[Y],de()}checkIfReady(Y,K,de){de()}setReferrer(Y,K){this.referrer=K}spriteLoaded(Y,K){this.isSpriteLoaded[Y]=K;for(const de in this.workerSources[Y]){const _e=this.workerSources[Y][de];for(const Ie in _e)_e[Ie]instanceof s.VectorTileWorkerSource&&(_e[Ie].isSpriteLoaded=K,_e[Ie].fire(new s.Event("isSpriteLoaded")))}}setImages(Y,K,de){this.availableImages[Y]=K;for(const _e in this.workerSources[Y]){const Ie=this.workerSources[Y][_e];for(const Ue in Ie)Ie[Ue].availableImages=K}de()}enableTerrain(Y,K,de){this.terrain=K,de()}setProjection(Y,K){this.projections[Y]=s.getProjection(K)}setLayers(Y,K,de){this.getLayerIndex(Y).replace(K),de()}updateLayers(Y,K,de){this.getLayerIndex(Y).update(K.layers,K.removedIds),de()}loadTile(Y,K,de){const _e=this.enableTerrain?s.extend({enableTerrain:this.terrain},K):K;_e.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,K.type,K.source).loadTile(_e,de)}loadDEMTile(Y,K,de){const _e=this.enableTerrain?s.extend({buildQuadTree:this.terrain},K):K;this.getDEMWorkerSource(Y,K.source).loadTile(_e,de)}reloadTile(Y,K,de){const _e=this.enableTerrain?s.extend({enableTerrain:this.terrain},K):K;_e.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,K.type,K.source).reloadTile(_e,de)}abortTile(Y,K,de){this.getWorkerSource(Y,K.type,K.source).abortTile(K,de)}removeTile(Y,K,de){this.getWorkerSource(Y,K.type,K.source).removeTile(K,de)}removeSource(Y,K,de){if(!this.workerSources[Y]||!this.workerSources[Y][K.type]||!this.workerSources[Y][K.type][K.source])return;const _e=this.workerSources[Y][K.type][K.source];delete this.workerSources[Y][K.type][K.source],_e.removeSource!==void 0?_e.removeSource(K,de):de()}loadWorkerSource(Y,K,de){try{this.self.importScripts(K.url),de()}catch(_e){de(_e.toString())}}syncRTLPluginState(Y,K,de){try{s.plugin.setState(K);const _e=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&_e!=null){this.self.importScripts(_e);const Ie=s.plugin.isParsed();de(Ie?void 0:new Error(`RTL Text Plugin failed to import scripts from ${_e}`),Ie)}}catch(_e){de(_e.toString())}}getAvailableImages(Y){let K=this.availableImages[Y];return K||(K=[]),K}getLayerIndex(Y){let K=this.layerIndexes[Y];return K||(K=this.layerIndexes[Y]=new I),K}getWorkerSource(Y,K,de){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][K]||(this.workerSources[Y][K]={}),!this.workerSources[Y][K][de]){const _e={send:(Ie,Ue,Fe,Re,Ge,lt)=>{this.actor.send(Ie,Ue,Fe,Y,Ge,lt)},scheduler:this.actor.scheduler};this.workerSources[Y][K][de]=new this.workerSourceTypes[K](_e,this.getLayerIndex(Y),this.getAvailableImages(Y),this.isSpriteLoaded[Y])}return this.workerSources[Y][K][de]}getDEMWorkerSource(Y,K){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][K]||(this.demWorkerSources[Y][K]=new M),this.demWorkerSources[Y][K]}enforceCacheSizeLimit(Y,K){s.enforceCacheSizeLimit(K)}getWorkerPerformanceMetrics(Y,K,de){de(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ko(self)),ko}),f(["./shared"],function(s){function v(p,l){if(Array.isArray(p)){if(!Array.isArray(l)||p.length!==l.length)return!1;for(let h=0;h<p.length;h++)if(!v(p[h],l[h]))return!1;return!0}if(typeof p=="object"&&p!==null&&l!==null){if(typeof l!="object"||Object.keys(p).length!==Object.keys(l).length)return!1;for(const h in p)if(!v(p[h],l[h]))return!1;return!0}return p===l}var E=I;function I(p){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,x,b=new Blob([""],{type:"text/javascript"}),A=URL.createObjectURL(b);try{x=new Worker(A),y=!0}catch{y=!1}return x&&x.terminate(),URL.revokeObjectURL(A),y}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var y=document.createElement("canvas");y.width=y.height=1;var x=y.getContext("2d");if(!x)return!1;var b=x.getImageData(0,0,1,1);return b&&b.width===y.width}()?(M[h=l&&l.failIfMajorPerformanceCaveat]===void 0&&(M[h]=function(y){var x,b=function(A){var C=document.createElement("canvas"),O=Object.create(I.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=A,C.getContext("webgl",O)||C.getContext("experimental-webgl",O)}(y);if(!b)return!1;try{x=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!x||b.isContextLost())&&(b.shaderSource(x,"void main() {}"),b.compileShader(x),b.getShaderParameter(x,b.COMPILE_STATUS)===!0)}(h)),M[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(p)}var M={};function P(p,l,h){const y=s.window.document.createElement(p);return l!==void 0&&(y.className=l),h&&h.appendChild(y),y}function D(p,l,h){const y=s.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const x of Object.keys(l))y.setAttributeNS(null,x,l[x]);return h&&h.appendChild(y),y}I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const k=s.window.document&&s.window.document.documentElement.style,V=k&&k.userSelect!==void 0?"userSelect":"WebkitUserSelect";let H;function G(){k&&V&&(H=k[V],k[V]="none")}function z(){k&&V&&(k[V]=H)}function N(p){p.preventDefault(),p.stopPropagation(),s.window.removeEventListener("click",N,!0)}function W(){s.window.addEventListener("click",N,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",N,!0)},0)}function $(p,l){const h=p.getBoundingClientRect();return J(p,h,l)}function X(p,l){const h=p.getBoundingClientRect(),y=[];for(let x=0;x<l.length;x++)y.push(J(p,h,l[x]));return y}function te(p){return s.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function J(p,l,h){const y=p.offsetWidth===l.width?1:p.offsetWidth/l.width;return new s.pointGeometry((h.clientX-l.left)*y,(h.clientY-l.top)*y)}function re(p,l){var h=l[0],y=l[1],x=l[2],b=l[3],A=h*b-x*y;return A?(p[0]=b*(A=1/A),p[1]=-y*A,p[2]=-x*A,p[3]=h*A,p):null}function ce(p){const{userImage:l}=p;return!!(l&&l.render&&l.render())&&(p.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ee extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:h,callback:y}of this.requestors)this._notify(h,y);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,h){this._validate(l,h)&&(this.images[l]=h)}_validate(l,h){let y=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),y=!1),y}_validateStretch(l,h){if(!l)return!0;let y=0;for(const x of l){if(x[0]<y||x[1]<x[0]||h<x[1])return!1;y=x[1]}return!0}_validateContent(l,h){return!(l&&(l.length!==4||l[0]<0||h.data.width<l[0]||l[1]<0||h.data.height<l[1]||l[2]<0||h.data.width<l[2]||l[3]<0||h.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,h){h.version=this.images[l].version+1,this.images[l]=h,this.updatedImages[l]=!0}removeImage(l){const h=this.images[l];delete this.images[l],delete this.patterns[l],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,h){let y=!0;if(!this.isLoaded())for(const x of l)this.images[x]||(y=!1);this.isLoaded()||y?this._notify(l,h):this.requestors.push({ids:l,callback:h})}_notify(l,h){const y={};for(const x of l){this.images[x]||this.fire(new s.Event("styleimagemissing",{id:x}));const b=this.images[x];b?y[x]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:s.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,y)}getPixelSize(){const{width:l,height:h}=this.atlasImage;return{width:l,height:h}}getPattern(l){const h=this.patterns[l],y=this.getImage(l);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const x={w:y.data.width+2,h:y.data.height+2,x:0,y:0},b=new s.ImagePosition(x,y);this.patterns[l]={bin:x,position:b}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const h=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(l,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const b in this.patterns)l.push(this.patterns[b].bin);const{w:h,h:y}=s.potpack(l),x=this.atlasImage;x.resize({width:h||1,height:y||1});for(const b in this.patterns){const{bin:A}=this.patterns[b],C=A.x+1,O=A.y+1,U=this.images[b].data,F=U.width,Z=U.height;s.RGBAImage.copy(U,x,{x:0,y:0},{x:C,y:O},{width:F,height:Z}),s.RGBAImage.copy(U,x,{x:0,y:Z-1},{x:C,y:O-1},{width:F,height:1}),s.RGBAImage.copy(U,x,{x:0,y:0},{x:C,y:O+Z},{width:F,height:1}),s.RGBAImage.copy(U,x,{x:F-1,y:0},{x:C-1,y:O},{width:1,height:Z}),s.RGBAImage.copy(U,x,{x:0,y:0},{x:C+F,y:O},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const h of l){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.images[h];ce(y)&&this.updateImage(h,y)}}}const Me=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(p,l){return function([h,y,x]){const b=s.degToRad(y+90),A=s.degToRad(x);return{x:h*Math.cos(b)*Math.sin(A),y:h*Math.sin(b)*Math.sin(A),z:h*Math.cos(A),azimuthal:y,polar:x}}(p.expression.evaluate(l))}interpolate(p,l,h){return{x:s.number(p.x,l.x,h),y:s.number(p.y,l.y,h),z:s.number(p.z,l.z,h),azimuthal:s.number(p.azimuthal,l.azimuthal,h),polar:s.number(p.polar,l.polar,h)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),Le="-transition";class Ae extends s.Evented{constructor(l){super(),this._transitionable=new s.Transitionable(Me),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h={}){if(!this._validate(s.validateLight,l,h))for(const y in l){const x=l[y];s.endsWith(y,Le)?this._transitionable.setTransition(y.slice(0,-Le.length),x):this._transitionable.setValue(y,x)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Oe=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)}),ke="-transition";class je extends s.Evented{constructor(l,h){super(),this._transitionable=new s.Transitionable(Oe),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=h}get(){return this._transitionable.serialize()}set(l){for(const h in l){const y=l[h];s.endsWith(h,ke)?this._transitionable.setTransition(h.slice(0,-ke.length),y):this._transitionable.setValue(h,y)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function De(p,l,h,y){const x=s.smoothstep(45,65,h),[b,A]=Be(p,y),C=s.length(l);let O=1-Math.min(1,Math.exp((C-b)/(A-b)*-6));return O*=O*O,O=Math.min(1,1.00747*O),O*x*p.alpha}function Be(p,l){const h=.5/Math.tan(.5*l);return[p.range[0]+h,p.range[1]+h]}const He=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])}),tt="-transition";class Mt extends s.Evented{constructor(l,h){super(),this._transitionable=new s.Transitionable(He),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const l=this._transform,h=l.projection.name==="globe",y=s.globeToMercatorTransition(l.zoom),x=this.properties.get("range"),b=[.5,3];return{range:h?[s.number(b[0],x[0],y),s.number(b[1],x[1],y)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,h={}){if(!this._validate(s.validateFog,l,h)){for(const y of Object.keys(s.spec.fog))l&&l[y]===void 0&&(l[y]=s.spec.fog[y].default);for(const y in l){const x=l[y];s.endsWith(y,tt)?this._transitionable.setTransition(y.slice(0,-tt.length),x):this._transitionable.setValue(y,x)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,l))*h.a}getOpacityAtLatLng(l,h){return this._transform.projection.supportsFog?function(y,x,b){const A=s.MercatorCoordinate.fromLngLat(x),C=b.elevation?b.elevation.getAtPointOrZero(A):0,O=[A.x,A.y,C];return s.transformMat4(O,O,b.mercatorFogMatrix),De(y,O,b.pitch,b._fov)}(this.state,l,h):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Be(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Dt{constructor(l,h){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const y=this.workerPool.acquire(this.id);for(let x=0;x<y.length;x++){const b=new Dt.Actor(y[x],h,this.id);b.name=`Worker ${x}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,h,y){s.asyncAll(this.actors,(x,b)=>{x.send(l,h,b)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function bt(p,l,h){return l*(s.EXTENT/(p.tileSize*Math.pow(2,h-p.tileID.overscaledZ)))}Dt.Actor=s.Actor;class Nt{constructor(l,h,y,x){this.screenBounds=l,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(l,h){let y,x;if(l instanceof s.pointGeometry||typeof l[0]=="number"){const b=s.pointGeometry.convert(l);y=[b],x=h.isPointAboveHorizon(b)}else{const b=s.pointGeometry.convert(l[0]),A=s.pointGeometry.convert(l[1]);y=[b,A],x=s.polygonizeBounds(b,A).every(C=>h.isPointAboveHorizon(C))}return new Nt(y,h.getCameraPoint(),x,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const h=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],x=s.polygonizeBounds(h,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<y.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?x[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(x[3]=this.cameraPoint)),s.bufferConvexPolygon(x,l)}bufferedCameraGeometryGlobe(l){const h=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.pointGeometry(1,1)):this.screenBounds[1],x=s.polygonizeBounds(h,y,l),b=this.cameraPoint.clone();switch(3*((b.y>h.y)+(b.y>y.y))+((b.x>h.x)+(b.x>y.x))){case 0:x[0]=b,x[4]=b.clone();break;case 1:x.splice(1,0,b);break;case 2:x[1]=b;break;case 3:x.splice(4,0,b);break;case 5:x.splice(2,0,b);break;case 6:x[3]=b;break;case 7:x.splice(3,0,b);break;case 8:x[2]=b}return x}containsTile(l,h,y,x=0){const b=l.queryPadding/h._pixelsPerMercatorPixel+1,A=y?this._bufferedCameraMercator(b,h):this._bufferedScreenMercator(b,h);let C=l.tileID.wrap+(A.unwrapped?x:0);const O=A.polygon.map(le=>s.getTilePoint(l.tileTransform,le,C));if(!s.polygonIntersectsBox(O,0,0,s.EXTENT,s.EXTENT))return;C=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const U=this.screenGeometryMercator.polygon.map(le=>s.getTileVec3(l.tileTransform,le,C)),F=U.map(le=>new s.pointGeometry(le[0],le[1])),Z=h.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),ne=s.getTileVec3(l.tileTransform,Z,C),oe=U.map(le=>{const ee=s.sub(le,le,ne);return s.normalize(ee,ee),new s.Ray(ne,ee)}),se=bt(l,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:F,tilespaceRays:oe,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(ae=s.getBounds(O),ae.min.x=s.clamp(ae.min.x,0,s.EXTENT),ae.min.y=s.clamp(ae.min.y,0,s.EXTENT),ae.max.x=s.clamp(ae.max.x,0,s.EXTENT),ae.max.y=s.clamp(ae.max.y,0,s.EXTENT),ae),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:se};var ae}_bufferedScreenMercator(l,h){const y=an(l);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),h):{polygon:this.bufferedScreenGeometry(l).map(b=>h.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[y]=x,x}}_bufferedCameraMercator(l,h){const y=an(l);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),h):{polygon:this.bufferedCameraGeometry(l).map(b=>h.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[y]=x,x}}_projectAndResample(l,h){const y=function(b,A){const C=s.multiply([],A.pixelMatrix,A.globeMatrix),O=[0,-s.GLOBE_RADIUS,0,1],U=[0,s.GLOBE_RADIUS,0,1],F=[0,0,0,1];s.transformMat4$1(O,O,C),s.transformMat4$1(U,U,C),s.transformMat4$1(F,F,C);const Z=new s.pointGeometry(O[0]/O[3],O[1]/O[3]),ne=new s.pointGeometry(U[0]/U[3],U[1]/U[3]),oe=s.polygonContainsPoint(b,Z)&&O[3]<F[3],se=s.polygonContainsPoint(b,ne)&&U[3]<F[3];if(!oe&&!se)return null;const ae=function(Ce,Ne,We){for(let Xe=1;Xe<Ce.length;Xe++){const vt=Ot(Ne.pointCoordinate3D(Ce[Xe-1]).x),Ve=Ot(Ne.pointCoordinate3D(Ce[Xe]).x);if(We<0){if(vt<Ve)return{idx:Xe,t:-vt/(Ve-1-vt)}}else if(Ve<vt)return{idx:Xe,t:(1-vt)/(Ve+1-vt)}}return null}(b,A,oe?-1:1);if(!ae)return null;const{idx:le,t:ee}=ae;let ge=le>1?ft(b.slice(0,le),A):[],me=le<b.length?ft(b.slice(le),A):[];ge=ge.map(Ce=>new s.pointGeometry(Ot(Ce.x),Ce.y)),me=me.map(Ce=>new s.pointGeometry(Ot(Ce.x),Ce.y));const ye=[...ge];ye.length===0&&ye.push(me[me.length-1]);const Se=s.number(ye[ye.length-1].y,(me.length===0?ge[0]:me[0]).y,ee);let be;return be=oe?[new s.pointGeometry(0,Se),new s.pointGeometry(0,0),new s.pointGeometry(1,0),new s.pointGeometry(1,Se)]:[new s.pointGeometry(1,Se),new s.pointGeometry(1,1),new s.pointGeometry(0,1),new s.pointGeometry(0,Se)],ye.push(...be),me.length===0?ye.push(ge[0]):ye.push(...me),{polygon:ye.map(Ce=>new s.MercatorCoordinate(Ce.x,Ce.y)),unwrapped:!1}}(l,h);if(y)return y;const x=function(b,A){let C=!1,O=-1/0,U=0;for(let Z=0;Z<b.length-1;Z++)b[Z].x>O&&(O=b[Z].x,U=Z);for(let Z=0;Z<b.length-1;Z++){const ne=(U+Z)%(b.length-1),oe=b[ne],se=b[ne+1];Math.abs(oe.x-se.x)>.5&&(oe.x<se.x?(oe.x+=1,ne===0&&(b[b.length-1].x+=1)):(se.x+=1,ne+1===b.length-1&&(b[0].x+=1)),C=!0)}const F=s.mercatorXfromLng(A.center.lng);return C&&F<Math.abs(F-1)&&b.forEach(Z=>{Z.x-=1}),{polygon:b,unwrapped:C}}(ft(l,h).map(b=>new s.pointGeometry(Ot(b.x),b.y)),h);return{polygon:x.polygon.map(b=>new s.MercatorCoordinate(b.x,b.y)),unwrapped:x.unwrapped}}}function ft(p,l){return s.resample(p,h=>{const y=l.pointCoordinate3D(h);h.x=y.x,h.y=y.y},1/256)}function Ot(p){return p<0?1+p%1:p%1}function an(p){return 100*p|0}function pn(p,l,h,y,x){const b=function(A,C){if(A)return x(A);if(C){p.url&&C.tiles&&p.tiles&&delete p.tiles;const O=s.pick(s.extend(C,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);C.vector_layers&&(O.vectorLayers=C.vector_layers,O.vectorLayerIds=O.vectorLayers.map(U=>U.id)),O.tiles=l.canonicalizeTileset(O,p.url),x(null,O)}};return p.url?s.getJSON(l.transformRequest(l.normalizeSourceURL(p.url,null,h,y),s.ResourceType.Source),b):s.exported.frame(()=>b(null,p))}class Vt{constructor(l,h,y){this.bounds=s.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),y=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*h),x=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*h),b=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*h),A=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*h);return l.x>=y&&l.x<b&&l.y>=x&&l.y<A}}class Mn{constructor(l,h,y){this.context=l;const x=l.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _r{constructor(l,h,y,x){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=x,this.context=l;const b=l.gl;this.buffer=b.createBuffer(),l.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let y=0;y<this.attributes.length;y++){const x=h.attributes[this.attributes[y].name];x!==void 0&&l.enableVertexAttribArray(x)}}setVertexAttribPointers(l,h,y){for(let x=0;x<this.attributes.length;x++){const b=this.attributes[x],A=h.attributes[b.name];A!==void 0&&l.vertexAttribPointer(A,b.components,l[Jt[b.type]],!1,this.itemSize,b.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class yn{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ui extends yn{getDefault(){return s.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ui extends yn{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class _o extends yn{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Vi extends yn{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Po extends yn{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class vo extends yn{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class ti extends yn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class vr extends yn{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Ro extends yn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class Gs extends yn{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Ea extends yn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class $s extends yn{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Do extends yn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class Ta extends yn{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class yt extends yn{getDefault(){return s.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ye extends yn{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class wt extends yn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class It extends yn{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class dr extends yn{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class hi extends yn{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Vn extends yn{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class ut extends yn{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class _t extends yn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Wt extends yn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Qt extends yn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class dn extends yn{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class An extends yn{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Wn extends yn{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class ar extends yn{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Qn extends yn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Tr extends yn{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class lr extends yn{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class Kn extends lr{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class ji extends lr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Oo extends ji{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ko{constructor(l,h,y,x){this.context=l,this.width=h,this.height=y;const b=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new Kn(l,b),x&&(this.depthAttachment=new ji(l,b))}destroy(){const l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&l.deleteRenderbuffer(y)}l.deleteFramebuffer(this.framebuffer)}}class fe{constructor(l,h=!1){if(this.gl=l,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const y=l;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(l),deleteVertexArrayOES:y.deleteVertexArray.bind(l),bindVertexArrayOES:y.bindVertexArray.bind(l)}}this.clearColor=new ui(this),this.clearDepth=new Ui(this),this.clearStencil=new _o(this),this.colorMask=new Vi(this),this.depthMask=new Po(this),this.stencilMask=new vo(this),this.stencilFunc=new ti(this),this.stencilOp=new vr(this),this.stencilTest=new Ro(this),this.depthRange=new Gs(this),this.depthTest=new Ea(this),this.depthFunc=new $s(this),this.blend=new Do(this),this.blendFunc=new Ta(this),this.blendColor=new yt(this),this.blendEquation=new Ye(this),this.cullFace=new wt(this),this.cullFaceSide=new It(this),this.frontFace=new dr(this),this.program=new hi(this),this.activeTexture=new Vn(this),this.viewport=new ut(this),this.bindFramebuffer=new _t(this),this.bindRenderbuffer=new Wt(this),this.bindTexture=new Qt(this),this.bindVertexBuffer=new dn(this),this.bindElementBuffer=new An(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Wn(this),this.pixelStoreUnpack=new ar(this),this.pixelStoreUnpackPremultiplyAlpha=new Qn(this),this.pixelStoreUnpackFlipY=new Tr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h){return new Mn(this,l,h)}createVertexBuffer(l,h,y){return new _r(this,l,h,y)}createRenderbuffer(l,h,y){const x=this.gl,b=x.createRenderbuffer();return this.bindRenderbuffer.set(b),x.renderbufferStorage(x.RENDERBUFFER,l,h,y),this.bindRenderbuffer.set(null),b}createFramebuffer(l,h,y){return new ko(this,l,h,y)}clear({color:l,depth:h,stencil:y}){const x=this.gl;let b=0;l&&(b|=x.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(b|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),y!==void 0&&(b|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),x.clear(b)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){v(l.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Y extends s.Evented{constructor(l,h,y,x){if(super(),this.id=l,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(h,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(l){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=pn(this._options,this.map._requestManager,h,y,(x,b)=>{this._tileJSONRequest=null,this._loaded=!0,x?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new s.ErrorEvent(x))):b&&(s.extend(this,b),b.bounds&&(this.tileBounds=new Vt(b.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(x)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(l,h){const y=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(y,s.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=h:l.request=l.actor.send("reloadTile",x,b.bind(this));else if(l.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",x,b.bind(this),void 0,!0);else{const A=s.loadVectorTile.call({deduped:this._deduped},x,(C,O)=>{C||!O?b.call(this,C):(x.data={cacheControl:O.cacheControl,expires:O.expires,rawData:O.rawData.slice(0)},l.actor&&l.actor.send("loadTile",x,b.bind(this),void 0,!0))},!0);l.request={cancel:A}}function b(A,C){return delete l.request,l.aborted?h(null):A&&A.status!==404?h(A):(C&&C.resourceTiming&&(l.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&l.setExpiryData(C),l.loadVectorData(C,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class K extends s.Evented{constructor(l,h,y,x){super(),this.id=l,this.dispatcher=y,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},h),s.extend(this,s.pick(h,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=pn(this._options,this.map._requestManager,null,null,(h,y)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new s.ErrorEvent(h)):y&&(s.extend(this,y),y.bounds&&(this.tileBounds=new Vt(y.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(y.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(h)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,h){const y=s.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);l.request=s.getImage(this.map._requestManager.transformRequest(x,s.ResourceType.Tile),(b,A,C,O)=>(delete l.request,l.aborted?(l.state="unloaded",h(null)):b?(l.state="errored",h(b)):A?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:C,expires:O}),l.setTexture(A,this.map.painter),l.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(l,h,y){l.setTexture(h,y)}static unloadTileData(l,h){l.texture&&h.saveTileTexture(l.texture)}abortTile(l,h){l.request&&(l.request.cancel(),delete l.request),h()}unloadTile(l,h){l.texture&&this.map.painter.saveTileTexture(l.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let de;function _e(p,l,h,y,x,b,A,C){const O=[p,h,x,l,y,b,1,1,1],U=[A,C,1],F=s.adjoint([],O),[Z,ne,oe]=s.transformMat3(U,U,s.transpose(F,F));return s.multiply$1(O,[Z,0,0,0,ne,0,0,0,oe],O)}class Ie extends s.Evented{constructor(l,h,y,x){super(),this.id=l,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=h,this._dirty=!1}load(l,h){this._loaded=h||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(y,x)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new s.ErrorEvent(y));else if(x){const{HTMLImageElement:b}=s.window;this.image=x instanceof b?s.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const h=l.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(y){let x=1/0,b=1/0,A=-1/0,C=-1/0;for(const Z of y)x=Math.min(x,Z.x),b=Math.min(b,Z.y),A=Math.max(A,Z.x),C=Math.max(C,Z.y);const O=Math.max(A-x,C-b),U=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),F=Math.pow(2,U);return new s.CanonicalTileID(U,Math.floor((x+A)/2*F),Math.floor((b+C)/2*F))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const O in this.tiles){const U=this.tiles[O];U.state!=="loaded"&&(U.state="loaded",U.texture=this.texture)}if(this._boundsArray)return;const h=s.tileTransform(this.tileID,this.map.transform.projection),[y,x,b,A]=this.coordinates.map(O=>{const U=h.projection.project(O[0],O[1]);return s.getTilePoint(h,U)._round()});this.perspectiveTransform=function(O,U,F,Z,ne,oe,se,ae,le,ee){const ge=_e(0,0,O,0,0,U,O,U),me=_e(F,Z,ne,oe,se,ae,le,ee);return s.multiply$1(me,s.adjoint(ge,ge),me),[me[6]/me[8]*O/s.EXTENT,me[7]/me[8]*U/s.EXTENT]}(this.width,this.height,y.x,y.y,x.x,x.y,A.x,A.y,b.x,b.y);const C=this._boundsArray=new s.StructArrayLayout4i8;C.emplaceBack(y.x,y.y,0,0),C.emplaceBack(x.x,x.y,s.EXTENT,0),C.emplaceBack(A.x,A.y,0,s.EXTENT),C.emplaceBack(b.x,b.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(C,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,h=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(l,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,h){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},h(null)):(l.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ue={vector:Y,raster:K,"raster-dem":class extends K{constructor(p,l,h,y){super(p,l,h,y),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(p,l){const h=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(x,b){x&&(p.state="errored",l(x)),b&&(p.dem=b,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",l(null))}p.request=s.getImage(this.map._requestManager.transformRequest(h,s.ResourceType.Tile),function(x,b,A,C){if(delete p.request,p.aborted)p.state="unloaded",l(null);else if(x)p.state="errored",l(x);else if(b){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:A,expires:C});const O=s.window.ImageBitmap&&b instanceof s.window.ImageBitmap&&(de==null&&(de=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),de),U=1-(b.width-s.prevPowerOfTwo(b.width))/2;U<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const F=O?b:s.exported.getImageData(b,U),Z={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:F,encoding:this.encoding,padding:U};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",Z,y.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(p){const l=p.canonical,h=Math.pow(2,l.z),y=(l.x-1+h)%h,x=l.x===0?p.wrap-1:p.wrap,b=(l.x+1+h)%h,A=l.x+1===h?p.wrap+1:p.wrap,C={};return C[new s.OverscaledTileID(p.overscaledZ,x,l.z,y,l.y).key]={backfilled:!1},C[new s.OverscaledTileID(p.overscaledZ,A,l.z,b,l.y).key]={backfilled:!1},l.y>0&&(C[new s.OverscaledTileID(p.overscaledZ,x,l.z,y,l.y-1).key]={backfilled:!1},C[new s.OverscaledTileID(p.overscaledZ,p.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},C[new s.OverscaledTileID(p.overscaledZ,A,l.z,b,l.y-1).key]={backfilled:!1}),l.y+1<h&&(C[new s.OverscaledTileID(p.overscaledZ,x,l.z,y,l.y+1).key]={backfilled:!1},C[new s.OverscaledTileID(p.overscaledZ,p.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},C[new s.OverscaledTileID(p.overscaledZ,A,l.z,b,l.y+1).key]={backfilled:!1}),C}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends s.Evented{constructor(p,l,h,y){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(y),this._data=l.data,this._options=s.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:s.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},l),this}getClusterChildren(p,l){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},l),this}getClusterLeaves(p,l,h,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:l,offset:h},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=s.extend({},this.workerOptions),l=this._data;typeof l=="string"?(p.request=this.map._requestManager.transformRequest(s.exported.resolveURL(l),s.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(h,y)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new s.ErrorEvent(h));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(x.resourceTiming=y.resourceTiming[this.id]),this.fire(new s.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,l){const h=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(h,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(y,x)=>(delete p.request,p.unloadVectorData(),p.aborted?l(null):y?l(y):(p.loadVectorData(x,this.map.painter,h==="reloadTile"),l(null))),void 0,h==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ie{constructor(p,l,h,y){super(p,l,h,y),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const l of p.urls)this.urls.push(this.map._requestManager.transformRequest(l,s.ResourceType.Source).url);s.getVideo(this.urls,(l,h)=>{this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const l=this.video.seekable;p<l.start(0)||p>l.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,l=p.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(p,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ie,canvas:class extends Ie{constructor(p,l,h,y){super(p,l,h,y),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(b=>typeof b!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends s.Evented{constructor(p,l,h,y){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=l,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Vt(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:l,y:h,z:y}=p.canonical;return this._implementation.hasTile({x:l,y:h,z:y})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,l){const{x:h,y,z:x}=p.tileID.canonical,b=new s.window.AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:h,y,z:x},{signal:b.signal})).then(function(A){return delete p.request,p.aborted?(p.state="unloaded",l(null)):A===void 0?(p.state="errored",l(null)):A===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",l(null)):function(C){return C instanceof s.window.ImageData||C instanceof s.window.HTMLCanvasElement||C instanceof s.window.ImageBitmap||C instanceof s.window.HTMLImageElement}(A)?(this.loadTileData(p,A),p.state="loaded",void l(null)):(p.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(A=>{A.code!==20&&(p.state="errored",l(A))}),p.request.cancel=()=>b.abort()}loadTileData(p,l){K.loadTileData(p,l,this._map.painter)}unloadTileData(p){K.unloadTileData(p,this._map.painter)}unloadTile(p,l){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:h,y,z:x}=p.tileID.canonical;this._implementation.unloadTile({x:h,y,z:x})}l()}abortTile(p,l){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Fe=function(p,l,h,y){const x=new Ue[l.type](p,l,h,y);if(x.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${x.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],x),x};function Re(p,l){const h=s.identity([]);return s.scale(h,h,[.5*p.width,.5*-p.height,1]),s.translate(h,h,[1,-1,0]),s.multiply(h,h,p.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(h)}function Ge(p,l,h,y,x,b,A,C=!1){const O=p.tilesIn(y,A,C);O.sort(kt);const U=[];for(const Z of O)U.push({wrappedTileID:Z.tile.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(l,h,p._state,Z,x,b,Re(p.transform,Z.tile.tileID),C)});const F=function(Z){const ne={},oe={};for(const se of Z){const ae=se.queryResults,le=se.wrappedTileID,ee=oe[le]=oe[le]||{};for(const ge in ae){const me=ae[ge],ye=ee[ge]=ee[ge]||{},Se=ne[ge]=ne[ge]||[];for(const be of me)ye[be.featureIndex]||(ye[be.featureIndex]=!0,Se.push(be))}}return ne}(U);for(const Z in F)F[Z].forEach(ne=>{const oe=ne.feature,se=oe.layer;se&&se.type!=="background"&&se.type!=="sky"&&(oe.source=se.source,se["source-layer"]&&(oe.sourceLayer=se["source-layer"]),oe.state=oe.id!==void 0?p.getFeatureState(se["source-layer"],oe.id):{})});return F}function lt(p,l){const h=p.getRenderableIds().map(b=>p.getTileByID(b)),y=[],x={};for(let b=0;b<h.length;b++){const A=h[b],C=A.tileID.canonical.key;x[C]||(x[C]=!0,A.querySourceFeatures(y,l))}return y}function kt(p,l){const h=p.tileID,y=l.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}function pt(){return rh.workerClass!=null?new rh.workerClass:new s.window.Worker(rh.workerUrl)}const Kt="mapboxgl_preloaded_worker_pool";class Ht{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Ht.workerCount;)this.workers.push(new pt);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Kt]}numActive(){return Object.keys(this.active).length}}let qt;function on(){return qt||(qt=new Ht),qt}function fn(p,l){const h={};for(const y in p)y!=="ref"&&(h[y]=p[y]);return s.refProperties.forEach(y=>{y in l&&(h[y]=l[y])}),h}function zn(p){p=p.slice();const l=Object.create(null);for(let h=0;h<p.length;h++)l[p[h].id]=p[h];for(let h=0;h<p.length;h++)"ref"in p[h]&&(p[h]=fn(p[h],l[p[h].ref]));return p}Ht.workerCount=2;const tn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function qn(p,l,h){h.push({command:tn.addSource,args:[p,l[p]]})}function Hn(p,l,h){l.push({command:tn.removeSource,args:[p]}),h[p]=!0}function Sa(p,l,h,y){Hn(p,h,y),qn(p,l,h)}function Ws(p,l,h){let y;for(y in p[h])if(p[h].hasOwnProperty(y)&&y!=="data"&&!v(p[h][y],l[h][y]))return!1;for(y in l[h])if(l[h].hasOwnProperty(y)&&y!=="data"&&!v(p[h][y],l[h][y]))return!1;return!0}function nt(p,l,h,y,x,b){let A;for(A in l=l||{},p=p||{})p.hasOwnProperty(A)&&(v(p[A],l[A])||h.push({command:b,args:[y,A,l[A],x]}));for(A in l)l.hasOwnProperty(A)&&!p.hasOwnProperty(A)&&(v(p[A],l[A])||h.push({command:b,args:[y,A,l[A],x]}))}function qs(p){return p.id}function jr(p,l){return p[l.id]=l,p}class Ia{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=s.clamp(l,0,1);let h=1,y=this._distances[h];const x=l*this.paddedLength+this.padding;for(;y<x&&h<this._distances.length;)y=this._distances[++h];const b=h-1,A=this._distances[b],C=y-A,O=C>0?(x-A)/C:0;return this.points[b].mult(1-O).add(this.points[h].mult(O))}}class Yy{constructor(l,h,y){const x=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(l/y),this.yCellCount=Math.ceil(h/y);for(let A=0;A<this.xCellCount*this.yCellCount;A++)x.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,y,x,b){this._forEachCell(h,y,x,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(x),this.bboxes.push(b)}insertCircle(l,h,y,x){this._forEachCell(h-x,y-x,h+x,y+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(y),this.circles.push(x)}_insertBoxCell(l,h,y,x,b,A){this.boxCells[b].push(A)}_insertCircleCell(l,h,y,x,b,A){this.circleCells[b].push(A)}_query(l,h,y,x,b,A){if(y<0||l>this.width||x<0||h>this.height)return!b&&[];const C=[];if(l<=0&&h<=0&&this.width<=y&&this.height<=x){if(b)return!0;for(let O=0;O<this.boxKeys.length;O++)C.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const U=this.circles[3*O],F=this.circles[3*O+1],Z=this.circles[3*O+2];C.push({key:this.circleKeys[O],x1:U-Z,y1:F-Z,x2:U+Z,y2:F+Z})}return A?C.filter(A):C}return this._forEachCell(l,h,y,x,this._queryCell,C,{hitTest:b,seenUids:{box:{},circle:{}}},A),b?C.length>0:C}_queryCircle(l,h,y,x,b){const A=l-y,C=l+y,O=h-y,U=h+y;if(C<0||A>this.width||U<0||O>this.height)return!x&&[];const F=[];return this._forEachCell(A,O,C,U,this._queryCellCircle,F,{hitTest:x,circle:{x:l,y:h,radius:y},seenUids:{box:{},circle:{}}},b),x?F.length>0:F}query(l,h,y,x,b){return this._query(l,h,y,x,!1,b)}hitTest(l,h,y,x,b){return this._query(l,h,y,x,!0,b)}hitTestCircle(l,h,y,x){return this._queryCircle(l,h,y,!0,x)}_queryCell(l,h,y,x,b,A,C,O){const U=C.seenUids,F=this.boxCells[b];if(F!==null){const ne=this.bboxes;for(const oe of F)if(!U.box[oe]){U.box[oe]=!0;const se=4*oe;if(l<=ne[se+2]&&h<=ne[se+3]&&y>=ne[se+0]&&x>=ne[se+1]&&(!O||O(this.boxKeys[oe]))){if(C.hitTest)return A.push(!0),!0;A.push({key:this.boxKeys[oe],x1:ne[se],y1:ne[se+1],x2:ne[se+2],y2:ne[se+3]})}}}const Z=this.circleCells[b];if(Z!==null){const ne=this.circles;for(const oe of Z)if(!U.circle[oe]){U.circle[oe]=!0;const se=3*oe;if(this._circleAndRectCollide(ne[se],ne[se+1],ne[se+2],l,h,y,x)&&(!O||O(this.circleKeys[oe]))){if(C.hitTest)return A.push(!0),!0;{const ae=ne[se],le=ne[se+1],ee=ne[se+2];A.push({key:this.circleKeys[oe],x1:ae-ee,y1:le-ee,x2:ae+ee,y2:le+ee})}}}}}_queryCellCircle(l,h,y,x,b,A,C,O){const U=C.circle,F=C.seenUids,Z=this.boxCells[b];if(Z!==null){const oe=this.bboxes;for(const se of Z)if(!F.box[se]){F.box[se]=!0;const ae=4*se;if(this._circleAndRectCollide(U.x,U.y,U.radius,oe[ae+0],oe[ae+1],oe[ae+2],oe[ae+3])&&(!O||O(this.boxKeys[se])))return A.push(!0),!0}}const ne=this.circleCells[b];if(ne!==null){const oe=this.circles;for(const se of ne)if(!F.circle[se]){F.circle[se]=!0;const ae=3*se;if(this._circlesCollide(oe[ae],oe[ae+1],oe[ae+2],U.x,U.y,U.radius)&&(!O||O(this.circleKeys[se])))return A.push(!0),!0}}}_forEachCell(l,h,y,x,b,A,C,O){const U=this._convertToXCellCoord(l),F=this._convertToYCellCoord(h),Z=this._convertToXCellCoord(y),ne=this._convertToYCellCoord(x);for(let oe=U;oe<=Z;oe++)for(let se=F;se<=ne;se++)if(b.call(this,l,h,y,x,this.xCellCount*se+oe,A,C,O))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,y,x,b,A){const C=x-l,O=b-h,U=y+A;return U*U>C*C+O*O}_circleAndRectCollide(l,h,y,x,b,A,C){const O=(A-x)/2,U=Math.abs(l-(x+O));if(U>O+y)return!1;const F=(C-b)/2,Z=Math.abs(h-(b+F));if(Z>F+y)return!1;if(U<=O||Z<=F)return!0;const ne=U-O,oe=Z-F;return ne*ne+oe*oe<=y*y}}const _s=Math.tan(85*Math.PI/180);function ic(p,l,h,y,x,b,A){const C=s.create();if(h)if(b.name==="globe"){const O=s.calculateGlobeLabelMatrix(x,l);s.multiply(C,C,O)}else{const O=re([],A);C[0]=O[0],C[1]=O[1],C[4]=O[2],C[5]=O[3],y||s.rotateZ(C,C,x.angle)}else s.multiply(C,x.labelPlaneMatrix,p);return C}function Xy(p,l,h,y,x,b,A){const C=ic(p,l,h,y,x,b,A);return b.name==="globe"&&h||(C[2]=C[6]=C[10]=C[14]=0),C}function oc(p,l,h,y,x,b,A){if(h){if(b.name==="globe"){const C=ic(p,l,h,y,x,b,A);return s.invert(C,C),s.multiply(C,p,C),C}{const C=s.clone(p),O=s.identity([]);return O[0]=A[0],O[1]=A[1],O[4]=A[2],O[5]=A[3],s.multiply(C,C,O),y||s.rotateZ(C,C,-x.angle),C}}return x.glCoordMatrix}function Et(p,l,h,y){const x=[p,l,h,1];h?s.transformMat4$1(x,x,y):Qy(x,x,y);const b=x[3];return x[0]/=b,x[1]/=b,x[2]/=b,x}function Sn(p,l){return Math.min(.5+p/l*.5,1.5)}function xn(p,l){const h=p[0]/p[3],y=p[1]/p[3];return h>=-l[0]&&h<=l[0]&&y>=-l[1]&&y<=l[1]}function vs(p,l,h,y,x,b,A,C,O,U){const F=h.transform,Z=y?p.textSizeData:p.iconSizeData,ne=s.evaluateSizeForZoom(Z,h.transform.zoom),oe=F.projection.name==="globe",se=[256/h.width*2+1,256/h.height*2+1],ae=y?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ae.clear();let le=null;oe&&(le=y?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const ee=p.lineVertexArray,ge=y?p.text.placedSymbolArray:p.icon.placedSymbolArray,me=h.transform.width/h.transform.height;let ye,Se=!1;for(let be=0;be<ge.length;be++){const Ce=ge.get(be),{numGlyphs:Ne,writingMode:We}=Ce;if(We!==s.WritingMode.vertical||Se||ye===s.WritingMode.horizontal||(Se=!0),ye=We,(Ce.hidden||We===s.WritingMode.vertical)&&!Se){rr(Ne,ae);continue}Se=!1;const Xe=new s.pointGeometry(Ce.tileAnchorX,Ce.tileAnchorY);let{x:vt,y:Ve,z:ot}=F.projection.projectTilePoint(Xe.x,Xe.y,U.canonical);if(O){const[hn,Ft,zt]=O(Xe);vt+=hn,Ve+=Ft,ot+=zt}const et=[vt,Ve,ot,1];if(s.transformMat4$1(et,et,l),!xn(et,se)){rr(Ne,ae);continue}const ct=Sn(h.transform.cameraToCenterDistance,et[3]),qe=s.evaluateSizeForFeature(Z,ne,Ce),ze=A?qe/ct:qe*ct,Qe=Et(vt,Ve,ot,x);if(Qe[3]<=0){rr(Ne,ae);continue}let at={};const dt=A?null:O,jt=Au(Ce,ze,!1,C,l,x,b,p.glyphOffsetArray,ee,ae,le,Qe,Xe,at,me,dt,F.projection,U,A);Se=jt.useVertical,dt&&jt.needsFlipping&&(at={}),(jt.notEnoughRoom||Se||jt.needsFlipping&&Au(Ce,ze,!0,C,l,x,b,p.glyphOffsetArray,ee,ae,le,Qe,Xe,at,me,dt,F.projection,U,A).notEnoughRoom)&&rr(Ne,ae)}y?(p.text.dynamicLayoutVertexBuffer.updateData(ae),le&&p.text.globeExtVertexBuffer.updateData(le)):(p.icon.dynamicLayoutVertexBuffer.updateData(ae),le&&p.icon.globeExtVertexBuffer.updateData(le))}function ml(p,l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae){const{lineStartIndex:le,glyphStartIndex:ee,segment:ge}=C,me=ee+C.numGlyphs,ye=le+C.lineLength,Se=l.getoffsetX(ee),be=l.getoffsetX(me-1),Ce=Gi(p*Se,h,y,x,b,A,ge,le,ye,O,U,F,Z,ne,!0,oe,se,ae);if(!Ce)return null;const Ne=Gi(p*be,h,y,x,b,A,ge,le,ye,O,U,F,Z,ne,!0,oe,se,ae);return Ne?{first:Ce,last:Ne}:null}function _n(p,l,h,y){return p===s.WritingMode.horizontal&&Math.abs(y)>Math.abs(h)?{useVertical:!0}:p===s.WritingMode.vertical?y>0?{needsFlipping:!0}:null:l!==0&&function(x,b){return x===0||Math.abs(b/x)>_s}(h,y)?l===1?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function Au(p,l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae,le,ee,ge){const me=l/24,ye=p.lineOffsetX*me,Se=p.lineOffsetY*me,{lineStartIndex:be,glyphStartIndex:Ce,numGlyphs:Ne,segment:We,writingMode:Xe,flipState:vt}=p,Ve=be+p.lineLength,ot=et=>{if(F){const[Qe,at,dt]=et.up,jt=U.length;s.updateGlobeVertexNormal(F,jt+0,Qe,at,dt),s.updateGlobeVertexNormal(F,jt+1,Qe,at,dt),s.updateGlobeVertexNormal(F,jt+2,Qe,at,dt),s.updateGlobeVertexNormal(F,jt+3,Qe,at,dt)}const[ct,qe,ze]=et.point;s.addDynamicAttributes(U,ct,qe,ze,et.angle)};if(Ne>1){const et=ml(me,C,ye,Se,h,Z,ne,p,O,b,oe,ae,!1,le,ee,ge);if(!et)return{notEnoughRoom:!0};if(y&&!h){let[ct,qe,ze]=et.first.point,[Qe,at,dt]=et.last.point;[ct,qe]=Et(ct,qe,ze,A),[Qe,at]=Et(Qe,at,dt,A);const jt=_n(Xe,vt,(Qe-ct)*se,at-qe);if(p.flipState=jt&&jt.needsFlipping?1:2,jt)return jt}ot(et.first);for(let ct=Ce+1;ct<Ce+Ne-1;ct++){const qe=Gi(me*C.getoffsetX(ct),ye,Se,h,Z,ne,We,be,Ve,O,b,oe,ae,!1,!1,le,ee,ge);if(!qe)return U.length-=4*(ct-Ce),{notEnoughRoom:!0};ot(qe)}ot(et.last)}else{if(y&&!h){const ct=Et(ne.x,ne.y,0,x),qe=be+We+1,ze=new s.pointGeometry(O.getx(qe),O.gety(qe)),Qe=Et(ze.x,ze.y,0,x),at=Qe[3]>0?Qe:ac(ne,ze,ct,1,x,void 0,le,ee.canonical),dt=_n(Xe,vt,(at[0]-ct[0])*se,at[1]-ct[1]);if(p.flipState=dt&&dt.needsFlipping?1:2,dt)return dt}const et=Gi(me*C.getoffsetX(Ce),ye,Se,h,Z,ne,We,be,Ve,O,b,oe,ae,!1,!1,le,ee,ge);if(!et)return{notEnoughRoom:!0};ot(et)}return{}}function sc(p,l,h,y,x){const{x:b,y:A,z:C}=y.projectTilePoint(p.x,p.y,l);if(!x)return Et(b,A,C,h);const[O,U,F]=x(p);return Et(b+O,A+U,C+F,h)}function ac(p,l,h,y,x,b,A,C){const O=sc(p.sub(l)._unit()._add(p),C,x,A,b);return s.sub(O,h,O),s.normalize(O,O),s.scaleAndAdd(O,h,O,y)}function Gi(p,l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae,le,ee){const ge=y?p-l:p+l;let me=ge>0?1:-1,ye=0;y&&(me*=-1,ye=Math.PI),me<0&&(ye+=Math.PI);let Se=C+A+(me>0?0:1)|0,be=x,Ce=x,Ne=0,We=0;const Xe=Math.abs(ge),vt=[],Ve=[];let ot=b,et=ot;const ct=()=>ac(et,ot,Ce,Xe-Ne+1,F,ne,ae,le.canonical);for(;Ne+We<=Xe;){if(Se+=me,Se<C||Se>=O)return null;if(Ce=be,et=ot,vt.push(Ce),oe&&Ve.push(et),ot=new s.pointGeometry(U.getx(Se),U.gety(Se)),be=Z[Se],!be){const zt=sc(ot,le.canonical,F,ae,ne);be=zt[3]>0?Z[Se]=zt:ct()}Ne+=We,We=s.distance(Ce,be)}se&&ne&&(Z[Se]&&(be=ct(),We=s.distance(Ce,be)),Z[Se]=be);const qe=(Xe-Ne)/We,ze=ot.sub(et)._mult(qe)._add(et),Qe=s.sub([],be,Ce),at=s.scaleAndAdd([],Ce,Qe,qe);let dt=[0,0,1],jt=Qe[0],hn=Qe[1];if(ee&&(dt=ae.upVector(le.canonical,ze.x,ze.y),dt[0]!==0||dt[1]!==0||dt[2]!==1)){const zt=[dt[2],0,-dt[0]],$t=s.cross([],dt,zt);s.normalize(zt,zt),s.normalize($t,$t),jt=s.dot(Qe,zt),hn=s.dot(Qe,$t)}if(h){const zt=s.cross([],dt,Qe);s.normalize(zt,zt),s.scaleAndAdd(at,at,zt,h*me)}const Ft=ye+Math.atan2(hn,jt);return vt.push(at),oe&&Ve.push(ze),{point:at,angle:Ft,path:vt,tilePath:Ve,up:dt}}function rr(p,l){const h=l.length,y=h+4*p;l.resize(y),l.float32.fill(-1/0,4*h,4*y)}function Qy(p,l,h){const y=l[0],x=l[1];return p[0]=h[0]*y+h[4]*x+h[12],p[1]=h[1]*y+h[5]*x+h[13],p[3]=h[3]*y+h[7]*x+h[15],p}const Qi=100;class Mp{constructor(l,h,y=new Yy(l.width+200,l.height+200,25),x=new Yy(l.width+200,l.height+200,25)){this.transform=l,this.grid=y,this.ignoredGrid=x,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Qi,this.screenBottomBoundary=l.height+Qi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=h}placeCollisionBox(l,h,y,x,b,A,C,O){let U=y.projectedAnchorX,F=y.projectedAnchorY,Z=y.projectedAnchorZ;const ne=y.elevation,oe=y.tileID,se=l.getProjection();if(ne&&oe){const[be,Ce,Ne]=se.upVector(oe.canonical,y.tileAnchorX,y.tileAnchorY),We=se.upVectorScale(oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;U+=be*ne*We,F+=Ce*ne*We,Z+=Ne*ne*We}const ae=this.projectAndGetPerspectiveRatio(C,U,F,Z,y.tileID,se.name==="globe"||!!ne||this.transform.pitch>0,se),le=A*ae.perspectiveRatio,ee=(y.x1*h+x.x-y.padding)*le+ae.point.x,ge=(y.y1*h+x.y-y.padding)*le+ae.point.y,me=(y.x2*h+x.x+y.padding)*le+ae.point.x,ye=(y.y2*h+x.y+y.padding)*le+ae.point.y,Se=ae.perspectiveRatio<=.55||ae.occluded;return!this.isInsideGrid(ee,ge,me,ye)||!b&&this.grid.hitTest(ee,ge,me,ye,O)||Se?{box:[],offscreen:!1,occluded:ae.occluded}:{box:[ee,ge,me,ye],offscreen:this.isOffscreen(ee,ge,me,ye),occluded:!1}}placeCollisionCircles(l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae){const le=[],ee=this.transform.elevation,ge=l.getProjection(),me=ee?ee.getAtTileOffsetFunc(ae,this.transform.center.lat,this.transform.worldSize,ge):null,ye=new s.pointGeometry(y.tileAnchorX,y.tileAnchorY);let{x:Se,y:be,z:Ce}=ge.projectTilePoint(ye.x,ye.y,ae.canonical);if(me){const[ze,Qe,at]=me(ye);Se+=ze,be+=Qe,Ce+=at}const Ne=ge.name==="globe",We=this.projectAndGetPerspectiveRatio(C,Se,be,Ce,ae,Ne||!!ee||this.transform.pitch>0,ge),{perspectiveRatio:Xe}=We,vt=(Z?A/Xe:A*Xe)/s.ONE_EM,Ve=Et(Se,be,Ce,O),ot=We.signedDistanceFromCamera>0?ml(vt,b,y.lineOffsetX*vt,y.lineOffsetY*vt,!1,Ve,ye,y,x,O,{},ee&&!Z?me:null,Z&&!!ee,ge,ae,Z):null;let et=!1,ct=!1,qe=!0;if(ot&&!We.occluded){const ze=.5*oe*Xe+se,Qe=new s.pointGeometry(-100,-100),at=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),dt=new Ia,{first:jt,last:hn}=ot,Ft=jt.path.length;let zt=[];for(let Zt=Ft-1;Zt>=1;Zt--)zt.push(jt.path[Zt]);for(let Zt=1;Zt<hn.path.length;Zt++)zt.push(hn.path[Zt]);const $t=2.5*ze;U&&(zt=zt.map(([Zt,Bn,Un],ir)=>(me&&!Ne&&(Un=me(ir<Ft-1?jt.tilePath[Ft-1-ir]:hn.tilePath[ir-Ft+2])[2]),Et(Zt,Bn,Un,U))),zt.some(Zt=>Zt[3]<=0)&&(zt=[]));let wn=[];if(zt.length>0){let Zt=1/0,Bn=-1/0,Un=1/0,ir=-1/0;for(const Jn of zt)Zt=Math.min(Zt,Jn[0]),Un=Math.min(Un,Jn[1]),Bn=Math.max(Bn,Jn[0]),ir=Math.max(ir,Jn[1]);Bn>=Qe.x&&Zt<=at.x&&ir>=Qe.y&&Un<=at.y&&(wn=[zt.map(Jn=>new s.pointGeometry(Jn[0],Jn[1]))],(Zt<Qe.x||Bn>at.x||Un<Qe.y||ir>at.y)&&(wn=s.clipLine(wn,Qe.x,Qe.y,at.x,at.y)))}for(const Zt of wn){dt.reset(Zt,.25*ze);let Bn=0;Bn=dt.length<=.5*ze?1:Math.ceil(dt.paddedLength/$t)+1;for(let Un=0;Un<Bn;Un++){const ir=Un/Math.max(Bn-1,1),Jn=dt.lerp(ir),Gr=Jn.x+Qi,eo=Jn.y+Qi;le.push(Gr,eo,ze,0);const Qo=Gr-ze,Xs=eo-ze,fr=Gr+ze,er=eo+ze;if(qe=qe&&this.isOffscreen(Qo,Xs,fr,er),ct=ct||this.isInsideGrid(Qo,Xs,fr,er),!h&&this.grid.hitTestCircle(Gr,eo,ze,ne)&&(et=!0,!F))return{circles:[],offscreen:!1,collisionDetected:et,occluded:!1}}}}return{circles:!F&&et||!ct?[]:le,offscreen:qe,collisionDetected:et,occluded:We.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let y=1/0,x=1/0,b=-1/0,A=-1/0;for(const F of l){const Z=new s.pointGeometry(F.x+Qi,F.y+Qi);y=Math.min(y,Z.x),x=Math.min(x,Z.y),b=Math.max(b,Z.x),A=Math.max(A,Z.y),h.push(Z)}const C=this.grid.query(y,x,b,A).concat(this.ignoredGrid.query(y,x,b,A)),O={},U={};for(const F of C){const Z=F.key;if(O[Z.bucketInstanceId]===void 0&&(O[Z.bucketInstanceId]={}),O[Z.bucketInstanceId][Z.featureIndex])continue;const ne=[new s.pointGeometry(F.x1,F.y1),new s.pointGeometry(F.x2,F.y1),new s.pointGeometry(F.x2,F.y2),new s.pointGeometry(F.x1,F.y2)];s.polygonIntersectsPolygon(h,ne)&&(O[Z.bucketInstanceId][Z.featureIndex]=!0,U[Z.bucketInstanceId]===void 0&&(U[Z.bucketInstanceId]=[]),U[Z.bucketInstanceId].push(Z.featureIndex))}return U}insertCollisionBox(l,h,y,x,b){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:b},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,y,x,b){const A=h?this.ignoredGrid:this.grid,C={bucketInstanceId:y,featureIndex:x,collisionGroupID:b};for(let O=0;O<l.length;O+=4)A.insertCircle(C,l[O],l[O+1],l[O+2])}projectAndGetPerspectiveRatio(l,h,y,x,b,A,C){const O=[h,y,x,1];let U=!1;if(x||this.transform.pitch>0){s.transformMat4$1(O,O,l);const Z=C.name==="globe";this.fogState&&b&&!Z&&(U=function(oe,se,ae,le,ee,ge){const me=ge.calculateFogTileMatrix(ee),ye=[se,ae,le];return s.transformMat4(ye,ye,me),De(oe,ye,ge.pitch,ge._fov)}(this.fogState,h,y,x,b.toUnwrapped(),this.transform)>.9)}else Qy(O,O,l);const F=O[3];return{point:new s.pointGeometry((O[0]/F+1)/2*this.transform.width+Qi,(-O[1]/F+1)/2*this.transform.height+Qi),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(C)/F*.5,1.5),signedDistanceFromCamera:F,occluded:A&&O[2]>F||U}}isOffscreen(l,h,y,x){return y<Qi||l>=this.screenRightBoundary||x<Qi||h>this.screenBottomBoundary}isInsideGrid(l,h,y,x){return y>=0&&l<this.gridRightBoundary&&x>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=s.identity([]);return s.translate(l,l,[-100,-100,0]),l}}function gl(p,l,h){const y=l.createTileMatrix(p,p.worldSize,h.toUnwrapped());return s.multiply(new Float32Array(16),p.projMatrix,y)}function Ap(p,l,h){if(l.projection.name===h.projection.name)return p.projMatrix;const y=h.clone();return y.setProjection(l.projection),gl(y,l.getProjection(),p)}function dd(p,l,h){return l.name===h.projection.name?p.projMatrix:gl(h,l,p)}class Cu{constructor(l,h,y,x){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):x&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class yl{constructor(l,h,y,x,b,A=!1){this.text=new Cu(l?l.text:null,h,y,b),this.icon=new Cu(l?l.icon:null,h,x,b),this.clipped=A}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class lc{constructor(l,h,y,x=!1){this.text=l,this.icon=h,this.skipFade=y,this.clipped=x}}class Cp{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ki{constructor(l,h,y,x,b){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=x,this.tileID=b}}class zr{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[l]}}function fd(p,l,h,y,x){const{horizontalAlign:b,verticalAlign:A}=s.getAnchorAlignment(p),C=-(b-.5)*l,O=-(A-.5)*h,U=s.evaluateVariableOffset(p,y);return new s.pointGeometry(C+U[0]*x,O+U[1]*x)}function Pu(p,l,h,y,x){const b=new s.pointGeometry(p,l);return h&&b._rotate(y?x:-x),b}class Ji{constructor(l,h,y,x,b){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Mp(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new zr(y),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,h,y,x){const b=y.getBucket(h),A=y.latestFeatureIndex;if(!b||!A||h.id!==b.layerIds[0])return;const C=b.layers[0].layout,O=y.collisionBoxArray,U=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),F=y.tileSize/s.EXTENT,Z=y.tileID.toUnwrapped();this.transform.setProjection(b.projection);const ne=(oe=y.tileID,se=b.getProjection(),ae=this.transform,se.name===this.projection?ae.calculateProjMatrix(oe.toUnwrapped()):gl(ae,se,oe));var oe,se,ae;const le=C.get("text-pitch-alignment")==="map",ee=C.get("text-rotation-alignment")==="map";h.compileFilter();const ge=h.dynamicFilter(),me=h.dynamicFilterNeedsFeature(),ye=this.transform.calculatePixelsToTileUnitsMatrix(y),Se=Xy(ne,y.tileID.canonical,le,ee,this.transform,b.getProjection(),ye);let be=null;if(le){const We=oc(ne,y.tileID.canonical,le,ee,this.transform,b.getProjection(),ye);be=s.multiply([],this.transform.labelPlaneMatrix,We)}let Ce=null;ge&&y.latestFeatureIndex&&(Ce={unwrappedTileID:Z,dynamicFilter:ge,dynamicFilterNeedsFeature:me,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new Ki(b.bucketInstanceId,A,b.sourceLayerIndex,b.index,y.tileID);const Ne={bucket:b,layout:C,posMatrix:ne,textLabelPlaneMatrix:Se,labelToScreenMatrix:be,clippingData:Ce,scale:U,textPixelRatio:F,holdingForFade:y.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(x)for(const We of b.sortKeyRanges){const{sortKey:Xe,symbolInstanceStart:vt,symbolInstanceEnd:Ve}=We;l.push({sortKey:Xe,symbolInstanceStart:vt,symbolInstanceEnd:Ve,parameters:Ne})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ne})}attemptAnchorPlacement(l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae,le,ee,ge){const{textOffset0:me,textOffset1:ye,crossTileID:Se}=ne,be=[me,ye],Ce=fd(l,y,x,be,b),Ne=this.collisionIndex.placeCollisionBox(se,b,h,Pu(Ce.x,Ce.y,A,C,this.transform.angle),Z,O,U,F.predicate);if(le){const We=se.getSymbolInstanceIconSize(ge,this.transform.zoom,ne.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(se,We,le,Pu(Ce.x,Ce.y,A,C,this.transform.angle),Z,O,U,F.predicate).box.length===0)return}if(Ne.box.length>0){let We;return this.prevPlacement&&this.prevPlacement.variableOffsets[Se]&&this.prevPlacement.placements[Se]&&this.prevPlacement.placements[Se].text&&(We=this.prevPlacement.variableOffsets[Se].anchor),this.variableOffsets[Se]={textOffset:be,width:y,height:x,anchor:l,textScale:b,prevAnchor:We},this.markUsedJustification(se,l,ne,ae),se.allowVerticalPlacement&&(this.markUsedOrientation(se,ae,ne),this.placedOrientations[Se]=ae),{shift:Ce,placedGlyphBoxes:Ne}}}placeLayerBucketPart(l,h,y,x){const{bucket:b,layout:A,posMatrix:C,textLabelPlaneMatrix:O,labelToScreenMatrix:U,clippingData:F,textPixelRatio:Z,holdingForFade:ne,collisionBoxArray:oe,partiallyEvaluatedTextSize:se,partiallyEvaluatedIconSize:ae,collisionGroup:le}=l.parameters,ee=A.get("text-optional"),ge=A.get("icon-optional"),me=A.get("text-allow-overlap"),ye=A.get("icon-allow-overlap"),Se=A.get("text-rotation-alignment")==="map",be=A.get("text-pitch-alignment")==="map",Ce=A.get("icon-text-fit")!=="none",Ne=A.get("symbol-z-order")==="viewport-y";this.transform.setProjection(b.projection);let We=me&&(ye||!b.hasIconData()||ge),Xe=ye&&(me||!b.hasTextData()||ee);!b.collisionArrays&&oe&&b.deserializeCollisionBoxes(oe),y&&x&&b.updateCollisionDebugBuffers(this.transform.zoom,oe);const vt=(Ve,ot,et)=>{const{crossTileID:ct,numVerticalGlyphVertices:qe}=Ve;if(F){const fr={zoom:this.transform.zoom,pitch:this.transform.pitch};let er=null;if(F.dynamicFilterNeedsFeature){const On=this.retainedQueryData[b.bucketInstanceId];er=F.featureIndex.loadFeature({featureIndex:Ve.featureIndex,bucketIndex:On.bucketIndex,sourceLayerIndex:On.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,F.dynamicFilter)(fr,er,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new s.pointGeometry(Ve.tileAnchorX,Ve.tileAnchorY),this.transform.calculateDistanceTileData(F.unwrappedTileID)))return this.placements[ct]=new lc(!1,!1,!1,!0),void(h[ct]=!0)}if(h[ct])return;if(ne)return void(this.placements[ct]=new lc(!1,!1,!1));let ze=!1,Qe=!1,at=!0,dt=!1,jt=!1,hn=null,Ft={box:null,offscreen:null,occluded:null},zt={box:null,offscreen:null,occluded:null},$t=null,wn=null,Zt=null,Bn=0,Un=0,ir=0;et.textFeatureIndex?Bn=et.textFeatureIndex:Ve.useRuntimeCollisionCircles&&(Bn=Ve.featureIndex),et.verticalTextFeatureIndex&&(Un=et.verticalTextFeatureIndex);const Jn=fr=>{fr.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const er=this.transform.elevation;(er||fr.elevation)&&(fr.elevation=er?er.getAtTileOffset(fr.tileID,fr.tileAnchorX,fr.tileAnchorY):0)},Gr=et.textBox;if(Gr){Jn(Gr);const fr=On=>{let Ir=s.WritingMode.horizontal;if(b.allowVerticalPlacement&&!On&&this.prevPlacement){const Ci=this.prevPlacement.placedOrientations[ct];Ci&&(this.placedOrientations[ct]=Ci,Ir=Ci,this.markUsedOrientation(b,Ir,Ve))}return Ir},er=(On,Ir)=>{if(b.allowVerticalPlacement&&qe>0&&et.verticalTextBox){for(const Ci of b.writingModes)if(Ci===s.WritingMode.vertical?(Ft=Ir(),zt=Ft):Ft=On(),Ft&&Ft.box&&Ft.box.length)break}else Ft=On()};if(A.get("text-variable-anchor")){let On=A.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ct]){const cr=this.prevPlacement.variableOffsets[ct];On.indexOf(cr.anchor)>0&&(On=On.filter(Pi=>Pi!==cr.anchor),On.unshift(cr.anchor))}const Ir=(cr,Pi,Ri)=>{const Ra=b.getSymbolInstanceTextSize(se,Ve,this.transform.zoom,ot),Tc=(cr.x2-cr.x1)*Ra+2*cr.padding,xo=(cr.y2-cr.y1)*Ra+2*cr.padding,No=Ce&&!ye?Pi:null;No&&Jn(No);let Qs={box:[],offscreen:!1,occluded:!1};const Da=me?2*On.length:On.length;for(let Oa=0;Oa<Da;++Oa){const Sc=this.attemptAnchorPlacement(On[Oa%On.length],cr,Tc,xo,Ra,Se,be,Z,C,le,Oa>=On.length,Ve,ot,b,Ri,No,se,ae);if(Sc&&(Qs=Sc.placedGlyphBoxes,Qs&&Qs.box&&Qs.box.length)){ze=!0,hn=Sc.shift;break}}return Qs};er(()=>Ir(Gr,et.iconBox,s.WritingMode.horizontal),()=>{const cr=et.verticalTextBox;return cr&&Jn(cr),b.allowVerticalPlacement&&!(Ft&&Ft.box&&Ft.box.length)&&qe>0&&cr?Ir(cr,et.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ft&&(ze=Ft.box,at=Ft.offscreen,dt=Ft.occluded);const Ci=fr(Ft&&Ft.box);if(!ze&&this.prevPlacement){const cr=this.prevPlacement.variableOffsets[ct];cr&&(this.variableOffsets[ct]=cr,this.markUsedJustification(b,cr.anchor,Ve,Ci))}}else{const On=(Ir,Ci)=>{const cr=b.getSymbolInstanceTextSize(se,Ve,this.transform.zoom,ot),Pi=this.collisionIndex.placeCollisionBox(b,cr,Ir,new s.pointGeometry(0,0),me,Z,C,le.predicate);return Pi&&Pi.box&&Pi.box.length&&(this.markUsedOrientation(b,Ci,Ve),this.placedOrientations[ct]=Ci),Pi};er(()=>On(Gr,s.WritingMode.horizontal),()=>{const Ir=et.verticalTextBox;return b.allowVerticalPlacement&&qe>0&&Ir?(Jn(Ir),On(Ir,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),fr(Ft&&Ft.box&&Ft.box.length)}}if($t=Ft,ze=$t&&$t.box&&$t.box.length>0,at=$t&&$t.offscreen,dt=$t&&$t.occluded,Ve.useRuntimeCollisionCircles){const fr=b.text.placedSymbolArray.get(Ve.centerJustifiedTextSymbolIndex>=0?Ve.centerJustifiedTextSymbolIndex:Ve.verticalPlacedTextSymbolIndex),er=s.evaluateSizeForFeature(b.textSizeData,se,fr),On=A.get("text-padding");wn=this.collisionIndex.placeCollisionCircles(b,me,fr,b.lineVertexArray,b.glyphOffsetArray,er,C,O,U,y,be,le.predicate,Ve.collisionCircleDiameter*er/s.ONE_EM,On,this.retainedQueryData[b.bucketInstanceId].tileID),ze=me||wn.circles.length>0&&!wn.collisionDetected,at=at&&wn.offscreen,dt=wn.occluded}if(et.iconFeatureIndex&&(ir=et.iconFeatureIndex),et.iconBox){const fr=er=>{Jn(er);const On=Ce&&hn?Pu(hn.x,hn.y,Se,be,this.transform.angle):new s.pointGeometry(0,0),Ir=b.getSymbolInstanceIconSize(ae,this.transform.zoom,Ve.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,Ir,er,On,ye,Z,C,le.predicate)};zt&&zt.box&&zt.box.length&&et.verticalIconBox?(Zt=fr(et.verticalIconBox),Qe=Zt.box.length>0):(Zt=fr(et.iconBox),Qe=Zt.box.length>0),at=at&&Zt.offscreen,jt=Zt.occluded}const eo=ee||Ve.numHorizontalGlyphVertices===0&&qe===0,Qo=ge||Ve.numIconVertices===0;if(eo||Qo?Qo?eo||(Qe=Qe&&ze):ze=Qe&&ze:Qe=ze=Qe&&ze,ze&&$t&&$t.box&&this.collisionIndex.insertCollisionBox($t.box,A.get("text-ignore-placement"),b.bucketInstanceId,zt&&zt.box&&Un?Un:Bn,le.ID),Qe&&Zt&&this.collisionIndex.insertCollisionBox(Zt.box,A.get("icon-ignore-placement"),b.bucketInstanceId,ir,le.ID),wn&&(ze&&this.collisionIndex.insertCollisionCircles(wn.circles,A.get("text-ignore-placement"),b.bucketInstanceId,Bn,le.ID),y)){const fr=b.bucketInstanceId;let er=this.collisionCircleArrays[fr];er===void 0&&(er=this.collisionCircleArrays[fr]=new Cp);for(let On=0;On<wn.circles.length;On+=4)er.circles.push(wn.circles[On+0]),er.circles.push(wn.circles[On+1]),er.circles.push(wn.circles[On+2]),er.circles.push(wn.collisionDetected?1:0)}const Xs=b.projection.name!=="globe";We=We&&(Xs||!dt),Xe=Xe&&(Xs||!jt),this.placements[ct]=new lc(ze||We,Qe||Xe,at||b.justReloaded),h[ct]=!0};if(Ne){const Ve=b.getSortedSymbolIndexes(this.transform.angle);for(let ot=Ve.length-1;ot>=0;--ot){const et=Ve[ot];vt(b.symbolInstances.get(et),et,b.collisionArrays[et])}}else for(let Ve=l.symbolInstanceStart;Ve<l.symbolInstanceEnd;Ve++)vt(b.symbolInstances.get(Ve),Ve,b.collisionArrays[Ve]);if(y&&b.bucketInstanceId in this.collisionCircleArrays){const Ve=this.collisionCircleArrays[b.bucketInstanceId];s.invert(Ve.invProjMatrix,C),Ve.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(l,h,y,x){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:A,rightJustifiedTextSymbolIndex:C,verticalPlacedTextSymbolIndex:O,crossTileID:U}=y,F=s.getAnchorJustification(h),Z=x===s.WritingMode.vertical?O:F==="left"?b:F==="center"?A:F==="right"?C:-1;b>=0&&(l.text.placedSymbolArray.get(b).crossTileID=Z>=0&&b!==Z?0:U),A>=0&&(l.text.placedSymbolArray.get(A).crossTileID=Z>=0&&A!==Z?0:U),C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=Z>=0&&C!==Z?0:U),O>=0&&(l.text.placedSymbolArray.get(O).crossTileID=Z>=0&&O!==Z?0:U)}markUsedOrientation(l,h,y){const x=h===s.WritingMode.horizontal||h===s.WritingMode.horizontalOnly?h:0,b=h===s.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:A,centerJustifiedTextSymbolIndex:C,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:U}=y,F=l.text.placedSymbolArray;A>=0&&(F.get(A).placedOrientation=x),C>=0&&(F.get(C).placedOrientation=x),O>=0&&(F.get(O).placedOrientation=x),U>=0&&(F.get(U).placedOrientation=b)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const x=h?h.symbolFadeChange(l):1,b=h?h.opacities:{},A=h?h.variableOffsets:{},C=h?h.placedOrientations:{};for(const O in this.placements){const U=this.placements[O],F=b[O];F?(this.opacities[O]=new yl(F,x,U.text,U.icon,null,U.clipped),y=y||U.text!==F.text.placed||U.icon!==F.icon.placed):(this.opacities[O]=new yl(null,x,U.text,U.icon,U.skipFade,U.clipped),y=y||U.text||U.icon)}for(const O in b){const U=b[O];if(!this.opacities[O]){const F=new yl(U,x,!1,!1);F.isHidden()||(this.opacities[O]=F,y=y||U.text.placed||U.icon.placed)}}for(const O in A)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=A[O]);for(const O in C)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=C[O]);y?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const y={};for(const x of h){const b=x.getBucket(l);b&&x.latestFeatureIndex&&l.id===b.layerIds[0]&&this.updateBucketOpacities(b,y,x.collisionBoxArray)}}updateBucketOpacities(l,h,y){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const x=l.layers[0].layout,b=!!l.layers[0].dynamicFilter(),A=new yl(null,0,!1,!1,!0),C=x.get("text-allow-overlap"),O=x.get("icon-allow-overlap"),U=x.get("text-variable-anchor"),F=x.get("text-rotation-alignment")==="map",Z=x.get("text-pitch-alignment")==="map",ne=x.get("icon-text-fit")!=="none",oe=new yl(null,0,C&&(O||!l.hasIconData()||x.get("icon-optional")),O&&(C||!l.hasTextData()||x.get("text-optional")),!0);!l.collisionArrays&&y&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(y);const se=(le,ee,ge)=>{for(let me=0;me<ee/4;me++)le.opacityVertexArray.emplaceBack(ge)};let ae=0;for(let le=0;le<l.symbolInstances.length;le++){const ee=l.symbolInstances.get(le),{numHorizontalGlyphVertices:ge,numVerticalGlyphVertices:me,crossTileID:ye,numIconVertices:Se}=ee;let be=this.opacities[ye];h[ye]?be=A:be||(be=oe,this.opacities[ye]=be),h[ye]=!0;const Ce=ge>0||me>0,Ne=Se>0,We=this.placedOrientations[ye],Xe=We===s.WritingMode.vertical,vt=We===s.WritingMode.horizontal||We===s.WritingMode.horizontalOnly;if(!Ce&&!Ne||be.isHidden()||ae++,Ce){const Ve=md(be.text);se(l.text,ge,Xe?cc:Ve),se(l.text,me,vt?cc:Ve);const ot=be.text.isHidden(),{leftJustifiedTextSymbolIndex:et,centerJustifiedTextSymbolIndex:ct,rightJustifiedTextSymbolIndex:qe,verticalPlacedTextSymbolIndex:ze}=ee,Qe=l.text.placedSymbolArray,at=ot||Xe?1:0;et>=0&&(Qe.get(et).hidden=at),ct>=0&&(Qe.get(ct).hidden=at),qe>=0&&(Qe.get(qe).hidden=at),ze>=0&&(Qe.get(ze).hidden=ot||vt?1:0);const dt=this.variableOffsets[ye];dt&&this.markUsedJustification(l,dt.anchor,ee,We);const jt=this.placedOrientations[ye];jt&&(this.markUsedJustification(l,"left",ee,jt),this.markUsedOrientation(l,jt,ee))}if(Ne){const Ve=md(be.icon),{placedIconSymbolIndex:ot,verticalPlacedIconSymbolIndex:et}=ee,ct=l.icon.placedSymbolArray,qe=be.icon.isHidden()?1:0;ot>=0&&(se(l.icon,Se,Xe?cc:Ve),ct.get(ot).hidden=qe),et>=0&&(se(l.icon,ee.numVerticalIconVertices,vt?cc:Ve),ct.get(et).hidden=qe)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Ve=l.collisionArrays[le];if(Ve){let ot=new s.pointGeometry(0,0),et=!0;if(Ve.textBox||Ve.verticalTextBox){if(U){const qe=this.variableOffsets[ye];qe?(ot=fd(qe.anchor,qe.width,qe.height,qe.textOffset,qe.textScale),F&&ot._rotate(Z?this.transform.angle:-this.transform.angle)):et=!1}b&&(et=!be.clipped),Ve.textBox&&$i(l.textCollisionBox.collisionVertexArray,be.text.placed,!et||Xe,ot.x,ot.y),Ve.verticalTextBox&&$i(l.textCollisionBox.collisionVertexArray,be.text.placed,!et||vt,ot.x,ot.y)}const ct=et&&!!(!vt&&Ve.verticalIconBox);Ve.iconBox&&$i(l.iconCollisionBox.collisionVertexArray,be.icon.placed,ct,ne?ot.x:0,ne?ot.y:0),Ve.verticalIconBox&&$i(l.iconCollisionBox.collisionVertexArray,be.icon.placed,!ct,ne?ot.x:0,ne?ot.y:0)}}}if(l.fullyClipped=ae===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const le=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=le.invProjMatrix,l.placementViewportMatrix=le.viewportMatrix,l.collisionCircleArray=le.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>l}setStale(){this.stale=!0}}function $i(p,l,h,y,x){p.emplaceBack(l?1:0,h?1:0,y||0,x||0),p.emplaceBack(l?1:0,h?1:0,y||0,x||0),p.emplaceBack(l?1:0,h?1:0,y||0,x||0),p.emplaceBack(l?1:0,h?1:0,y||0,x||0)}const Ky=Math.pow(2,25),pd=Math.pow(2,24),Qr=Math.pow(2,17),Ru=Math.pow(2,16),Pp=Math.pow(2,9),Du=Math.pow(2,8),vi=Math.pow(2,1);function md(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const l=p.placed?1:0,h=Math.floor(127*p.opacity);return h*Ky+l*pd+h*Qr+l*Ru+h*Pp+l*Du+h*vi+l}const cc=0;class Hs{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,h,y,x,b){const A=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(A,x,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((C,O)=>C.sortKey-O.sortKey));this._currentPartIndex<A.length;){const C=A[this._currentPartIndex];if(h.placeLayerBucketPart(C,this._seenCrossTileIDs,y,C.symbolInstanceStart===0),this._currentPartIndex++,b())return!0}return!1}}class Ou{constructor(l,h,y,x,b,A,C,O){this.placement=new Ji(l,b,A,C,O),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(l,h,y){const x=s.exported.now(),b=()=>{const A=s.exported.now()-x;return!this._forceFullPlacement&&A>2};for(;this._currentPlacementIndex>=0;){const A=h[l[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=C)&&(!A.maxzoom||A.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Hs(A)),this._inProgressLayer.continuePlacement(y[A.source],this.placement,this._showCollisionBoxes,A,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const gd=512/s.EXTENT/2;class Pw{constructor(l,h,y){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=y;for(let x=0;x<h.length;x++){const b=h.get(x),A=b.key;this.indexedSymbolInstances[A]||(this.indexedSymbolInstances[A]=[]),this.indexedSymbolInstances[A].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,l)})}}getScaledCoordinates(l,h){const y=gd/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*s.EXTENT+l.tileAnchorX)*y),y:Math.floor((h.canonical.y*s.EXTENT+l.tileAnchorY)*y)}}findMatches(l,h,y){const x=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let b=0;b<l.length;b++){const A=l.get(b);if(A.crossTileID)continue;const C=this.indexedSymbolInstances[A.key];if(!C)continue;const O=this.getScaledCoordinates(A,h);for(const U of C)if(Math.abs(U.coord.x-O.x)<=x&&Math.abs(U.coord.y-O.y)<=x&&!y[U.crossTileID]){y[U.crossTileID]=!0,A.crossTileID=U.crossTileID;break}}}}class Rp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class uc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const y in this.indexes){const x=this.indexes[y],b={};for(const A in x){const C=x[A];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+h),b[C.tileID.key]=C}this.indexes[y]=b}this.lng=l}addBucket(l,h,y){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let b=0;b<h.symbolInstances.length;b++)h.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const x=this.usedCrossTileIDs[l.overscaledZ];for(const b in this.indexes){const A=this.indexes[b];if(Number(b)>l.overscaledZ)for(const C in A){const O=A[C];O.tileID.isChildOf(l)&&O.findMatches(h.symbolInstances,l,x)}else{const C=A[l.scaledTo(Number(b)).key];C&&C.findMatches(h.symbolInstances,l,x)}}for(let b=0;b<h.symbolInstances.length;b++){const A=h.symbolInstances.get(b);A.crossTileID||(A.crossTileID=y.generate(),x[A.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Pw(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const y in h.indexedSymbolInstances)for(const x of h.indexedSymbolInstances[y])delete this.usedCrossTileIDs[l][x.crossTileID]}removeStaleBuckets(l){let h=!1;for(const y in this.indexes){const x=this.indexes[y];for(const b in x)l[x[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,x[b]),delete x[b],h=!0)}return h}}class Jy{constructor(){this.layerIndexes={},this.crossTileIDs=new Rp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,y,x){let b=this.layerIndexes[l.id];b===void 0&&(b=this.layerIndexes[l.id]=new uc);let A=!1;const C={};x.name!=="globe"&&b.handleWrapJump(y);for(const O of h){const U=O.getBucket(l);U&&l.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(O.tileID,U,this.crossTileIDs)&&(A=!0),C[U.bucketInstanceId]=!0)}return b.removeStaleBuckets(C)&&(A=!0),A}pruneUnusedLayers(l){const h={};l.forEach(y=>{h[y]=!0});for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}const ku=(p,l)=>s.emitValidationErrors(p,l&&l.filter(h=>h.identifier!=="source.canvas")),hc=s.pick(tn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ma=s.pick(tn,["setCenter","setZoom","setBearing","setPitch"]),yd={version:8,layers:[],sources:{}},Aa={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Lo extends s.Evented{constructor(l,h={}){super(),this.map=l,this.dispatcher=new Dt(on(),this),this.imageManager=new Ee,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(l._requestManager,h.localFontFamily?s.LocalGlyphMode.all:h.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new Jy,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const y=this;this._rtlTextPluginCallback=Lo.registerForPluginStateChange(x=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(b,A)=>{if(s.triggerPluginCompletionEvent(b),A&&A.every(C=>C))for(const C in y._sourceCaches){const O=y._sourceCaches[C],U=O.getSource().type;U!=="vector"&&U!=="geojson"||O.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const b=this.getSource(x.sourceId);if(b&&b.vectorLayerIds)for(const A in this._layers){const C=this._layers[A];C.source===b.id&&this._validateLayer(C)}})}loadURL(l,h={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const y=typeof h.validate=="boolean"?h.validate:!s.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,h.accessToken);const x=this.map._requestManager.transformRequest(l,s.ResourceType.Style);this._request=s.getJSON(x,(b,A)=>{this._request=null,b?this.fire(new s.ErrorEvent(b)):A&&this._load(A,y)})}loadJSON(l,h={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(l,h.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(yd,!1)}_updateLayerCount(l,h){const y=h?1:-1;l.is3D()&&(this._num3DLayers+=y),l.type==="circle"&&(this._numCircleLayers+=y),l.type==="symbol"&&(this._numSymbolLayers+=y)}_load(l,h){if(h&&ku(this,s.validateStyle(l)))return;this._loaded=!0,this.stylesheet=s.clone$1(l),this._updateMapProjection();for(const x in l.sources)this.addSource(x,l.sources[x],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const y=zn(this.stylesheet.layers);this._order=y.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of y){const b=s.createStyleLayer(x);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ae(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(h,y,x){let b,A,C;const O=s.exported.devicePixelRatio>1?"@2x":"";let U=s.getJSON(y.transformRequest(y.normalizeSpriteURL(h,O,".json"),s.ResourceType.SpriteJSON),(ne,oe)=>{U=null,C||(C=ne,b=oe,Z())}),F=s.getImage(y.transformRequest(y.normalizeSpriteURL(h,O,".png"),s.ResourceType.SpriteImage),(ne,oe)=>{F=null,C||(C=ne,A=oe,Z())});function Z(){if(C)x(C);else if(b&&A){const ne=s.exported.getImageData(A),oe={};for(const se in b){const{width:ae,height:le,x:ee,y:ge,sdf:me,pixelRatio:ye,stretchX:Se,stretchY:be,content:Ce}=b[se],Ne=new s.RGBAImage({width:ae,height:le});s.RGBAImage.copy(ne,Ne,{x:ee,y:ge},{x:0,y:0},{width:ae,height:le}),oe[se]={data:Ne,pixelRatio:ye,sdf:me,stretchX:Se,stretchY:be,content:Ce}}x(null,oe)}}return{cancel(){U&&(U.cancel(),U=null),F&&(F.cancel(),F=null)}}}(l,this.map._requestManager,(h,y)=>{if(this._spriteRequest=null,h)this.fire(new s.ErrorEvent(h));else if(y)for(const x in y)this.imageManager.addImage(x,y[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(l){const h=this.getSource(l.source);if(!h)return;const y=l.sourceLayer;y&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${h.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const h=[];for(const y of l){const x=this._layers[y];x.type!=="custom"&&h.push(x.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():Aa[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const h=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(x.length||b.length)&&this._updateWorkerLayers(x,b);for(const A in this._updatedSources){const C=this._updatedSources[A];C==="reload"?this._reloadSource(A):C==="clear"&&this._clearSource(A)}this._updateTilesForChangedImages();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const y={};for(const x in this._sourceCaches){const b=this._sourceCaches[x];y[x]=b.used,b.used=!1}for(const x of this._order){const b=this._layers[x];if(b.recalculate(l,this._availableImages),!b.isHidden(l.zoom)){const C=this._getLayerSourceCache(b);C&&(C.used=!0)}const A=this.map.painter;if(A){const C=b.getProgramIds();if(!C)continue;const O=b.getProgramConfiguration(l.zoom);for(const U of C)A.useProgram(U,O)}}for(const x in y){const b=this._sourceCaches[x];y[x]!==b.used&&b.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),ku(this,s.validateStyle(l)))return!1;(l=s.clone$1(l)).layers=zn(l.layers);const h=function(x,b){if(!x)return[{command:tn.setStyle,args:[b]}];let A=[];try{if(!v(x.version,b.version))return[{command:tn.setStyle,args:[b]}];v(x.center,b.center)||A.push({command:tn.setCenter,args:[b.center]}),v(x.zoom,b.zoom)||A.push({command:tn.setZoom,args:[b.zoom]}),v(x.bearing,b.bearing)||A.push({command:tn.setBearing,args:[b.bearing]}),v(x.pitch,b.pitch)||A.push({command:tn.setPitch,args:[b.pitch]}),v(x.sprite,b.sprite)||A.push({command:tn.setSprite,args:[b.sprite]}),v(x.glyphs,b.glyphs)||A.push({command:tn.setGlyphs,args:[b.glyphs]}),v(x.transition,b.transition)||A.push({command:tn.setTransition,args:[b.transition]}),v(x.light,b.light)||A.push({command:tn.setLight,args:[b.light]}),v(x.fog,b.fog)||A.push({command:tn.setFog,args:[b.fog]}),v(x.projection,b.projection)||A.push({command:tn.setProjection,args:[b.projection]});const C={},O=[];(function(Z,ne,oe,se){let ae;for(ae in ne=ne||{},Z=Z||{})Z.hasOwnProperty(ae)&&(ne.hasOwnProperty(ae)||Hn(ae,oe,se));for(ae in ne){if(!ne.hasOwnProperty(ae))continue;const le=ne[ae];Z.hasOwnProperty(ae)?v(Z[ae],le)||(Z[ae].type==="geojson"&&le.type==="geojson"&&Ws(Z,ne,ae)?oe.push({command:tn.setGeoJSONSourceData,args:[ae,le.data]}):Sa(ae,ne,oe,se)):qn(ae,ne,oe)}})(x.sources,b.sources,O,C);const U=[];x.layers&&x.layers.forEach(Z=>{Z.source&&C[Z.source]?A.push({command:tn.removeLayer,args:[Z.id]}):U.push(Z)});let F=x.terrain;F&&C[F.source]&&(A.push({command:tn.setTerrain,args:[void 0]}),F=void 0),A=A.concat(O),v(F,b.terrain)||A.push({command:tn.setTerrain,args:[b.terrain]}),function(Z,ne,oe){ne=ne||[];const se=(Z=Z||[]).map(qs),ae=ne.map(qs),le=Z.reduce(jr,{}),ee=ne.reduce(jr,{}),ge=se.slice(),me=Object.create(null);let ye,Se,be,Ce,Ne,We,Xe;for(ye=0,Se=0;ye<se.length;ye++)be=se[ye],ee.hasOwnProperty(be)?Se++:(oe.push({command:tn.removeLayer,args:[be]}),ge.splice(ge.indexOf(be,Se),1));for(ye=0,Se=0;ye<ae.length;ye++)be=ae[ae.length-1-ye],ge[ge.length-1-ye]!==be&&(le.hasOwnProperty(be)?(oe.push({command:tn.removeLayer,args:[be]}),ge.splice(ge.lastIndexOf(be,ge.length-Se),1)):Se++,We=ge[ge.length-ye],oe.push({command:tn.addLayer,args:[ee[be],We]}),ge.splice(ge.length-ye,0,be),me[be]=!0);for(ye=0;ye<ae.length;ye++)if(be=ae[ye],Ce=le[be],Ne=ee[be],!me[be]&&!v(Ce,Ne))if(v(Ce.source,Ne.source)&&v(Ce["source-layer"],Ne["source-layer"])&&v(Ce.type,Ne.type)){for(Xe in nt(Ce.layout,Ne.layout,oe,be,null,tn.setLayoutProperty),nt(Ce.paint,Ne.paint,oe,be,null,tn.setPaintProperty),v(Ce.filter,Ne.filter)||oe.push({command:tn.setFilter,args:[be,Ne.filter]}),v(Ce.minzoom,Ne.minzoom)&&v(Ce.maxzoom,Ne.maxzoom)||oe.push({command:tn.setLayerZoomRange,args:[be,Ne.minzoom,Ne.maxzoom]}),Ce)Ce.hasOwnProperty(Xe)&&Xe!=="layout"&&Xe!=="paint"&&Xe!=="filter"&&Xe!=="metadata"&&Xe!=="minzoom"&&Xe!=="maxzoom"&&(Xe.indexOf("paint.")===0?nt(Ce[Xe],Ne[Xe],oe,be,Xe.slice(6),tn.setPaintProperty):v(Ce[Xe],Ne[Xe])||oe.push({command:tn.setLayerProperty,args:[be,Xe,Ne[Xe]]}));for(Xe in Ne)Ne.hasOwnProperty(Xe)&&!Ce.hasOwnProperty(Xe)&&Xe!=="layout"&&Xe!=="paint"&&Xe!=="filter"&&Xe!=="metadata"&&Xe!=="minzoom"&&Xe!=="maxzoom"&&(Xe.indexOf("paint.")===0?nt(Ce[Xe],Ne[Xe],oe,be,Xe.slice(6),tn.setPaintProperty):v(Ce[Xe],Ne[Xe])||oe.push({command:tn.setLayerProperty,args:[be,Xe,Ne[Xe]]}))}else oe.push({command:tn.removeLayer,args:[be]}),We=ge[ge.lastIndexOf(be)+1],oe.push({command:tn.addLayer,args:[Ne,We]})}(U,b.layers,A)}catch(C){console.warn("Unable to compute style diff:",C),A=[{command:tn.setStyle,args:[b]}]}return A}(this.serialize(),l).filter(x=>!(x.command in Ma));if(h.length===0)return!1;const y=h.filter(x=>!(x.command in hc));if(y.length>0)throw new Error(`Unimplemented: ${y.map(x=>x.command).join(", ")}.`);return h.forEach(x=>{x.command!=="setTransition"&&x.command!=="setProjection"&&this[x.command].apply(this,x.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,h){return this.getImage(l)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,h),this._afterImageUpdated(l),this)}updateImage(l,h){this.imageManager.updateImage(l,h)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,h,y={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(s.validateSource,`sources.${l}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const x=Fe(l,h,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:x.serialize(),sourceId:l}));const b=A=>{const C=(A?"symbol:":"other:")+l,O=this._sourceCaches[C]=new s.SourceCache(C,x,A);(A?this._symbolSourceCaches:this._otherSourceCaches)[l]=O,O.style=this,O.onAdd(this.map)};b(!1),h.type!=="vector"&&h.type!=="geojson"||b(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const h=this.getSource(l);if(!h)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(l);for(const x of y)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,h){this._checkLoaded(),this.getSource(l).setData(h),this._changed=!0}getSource(l){const h=this._getSourceCache(l);return h&&h.getSource()}_getSources(){const l=[];for(const h in this._otherSourceCaches){const y=this._getSourceCache(h);y&&l.push(y.getSource())}return l}addLayer(l,h,y={}){this._checkLoaded();const x=l.id;if(this.getLayer(x))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let b;if(l.type==="custom"){if(ku(this,s.validateCustomStyleLayer(l)))return;b=s.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(x,l.source),l=s.clone$1(l),l=s.extend(l,{source:x})),this._validate(s.validateLayer,`layers.${x}`,l,{arrayIndex:-1},y))return;b=s.createStyleLayer(l),this._validateLayer(b),b.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const A=h?this._order.indexOf(h):this._order.length;if(h&&A===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(A,0,x),this._layerOrderChanged=!0,this._layers[x]=b;const C=this._getLayerSourceCache(b);if(this._removedLayers[x]&&b.source&&C&&b.type!=="custom"){const O=this._removedLayers[x];delete this._removedLayers[x],O.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",C.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,h){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===h)return;const y=this._order.indexOf(l);this._order.splice(y,1);const x=h?this._order.indexOf(h):this._order.length;h&&x===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(x,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const h=this._layers[l];if(!h)return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const y=this._order.indexOf(l);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=h,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const h in this._layers)if(this._layers[h].type===l)return!0;return!1}setLayerZoomRange(l,h,y){this._checkLoaded();const x=this.getLayer(l);x?x.minzoom===h&&x.maxzoom===y||(h!=null&&(x.minzoom=h),y!=null&&(x.maxzoom=y),this._updateLayer(x)):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,h,y={}){this._checkLoaded();const x=this.getLayer(l);if(x){if(!v(x.filter,h))return h==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(s.validateFilter,`layers.${x.id}.filter`,h,{layerType:x.type},y)||(x.filter=s.clone$1(h),this._updateLayer(x)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const h=this.getLayer(l);return h&&s.clone$1(h.filter)}setLayoutProperty(l,h,y,x={}){this._checkLoaded();const b=this.getLayer(l);b?v(b.getLayoutProperty(h),y)||(b.setLayoutProperty(h,y,x),this._updateLayer(b)):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,h){const y=this.getLayer(l);if(y)return y.getLayoutProperty(h);this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,h,y,x={}){this._checkLoaded();const b=this.getLayer(l);b?v(b.getPaintProperty(h),y)||(b.setPaintProperty(h,y,x)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,h){const y=this.getLayer(l);return y&&y.getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const y=l.source,x=l.sourceLayer,b=this.getSource(y);if(!b)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const A=b.type;if(A==="geojson"&&x)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(A==="vector"&&!x)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const C=this._getSourceCaches(y);for(const O of C)O.setFeatureState(x,l.id,h)}removeFeatureState(l,h){this._checkLoaded();const y=l.source,x=this.getSource(y);if(!x)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const b=x.type,A=b==="vector"?l.sourceLayer:void 0;if(b==="vector"&&!A)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const C=this._getSourceCaches(y);for(const O of C)O.removeFeatureState(A,l.id,h)}getFeatureState(l){this._checkLoaded();const h=l.source,y=l.sourceLayer,x=this.getSource(h);if(x){if(x.type!=="vector"||y)return l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(y,l.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const h in this._sourceCaches){const y=this._sourceCaches[h].getSource();l[y.id]||(l[y.id]=y.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},h=>h!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const h=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&h&&h.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",h.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const h=A=>this._layers[A].type==="fill-extrusion",y={},x=[];for(let A=this._order.length-1;A>=0;A--){const C=this._order[A];if(h(C)){y[C]=A;for(const O of l){const U=O[C];if(U)for(const F of U)x.push(F)}}}x.sort((A,C)=>C.intersectionZ-A.intersectionZ);const b=[];for(let A=this._order.length-1;A>=0;A--){const C=this._order[A];if(h(C))for(let O=x.length-1;O>=0;O--){const U=x[O].feature;if(y[U.layer.id]<A)break;b.push(U),x.pop()}else for(const O of l){const U=O[C];if(U)for(const F of U)b.push(F.feature)}}return b}queryRenderedFeatures(l,h,y){h&&h.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const x={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const O of h.layers){const U=this._layers[O];if(!U)return this.fire(new s.ErrorEvent(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];x[U.source]=!0}}const b=[];h.availableImages=this._availableImages;const A=h&&h.layers?h.layers.some(O=>{const U=this.getLayer(O);return U&&U.is3D()}):this.has3DLayers(),C=Nt.createFromScreenPoints(l,y);for(const O in this._sourceCaches){const U=this._sourceCaches[O].getSource().id;h.layers&&!x[U]||b.push(Ge(this._sourceCaches[O],this._layers,this._serializedLayers,C,h,y,A,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(O,U,F,Z,ne,oe,se){const ae={},le=oe.queryRenderedSymbols(Z),ee=[];for(const ge of Object.keys(le).map(Number))ee.push(se[ge]);ee.sort(kt);for(const ge of ee){const me=ge.featureIndex.lookupSymbolFeatures(le[ge.bucketInstanceId],U,ge.bucketIndex,ge.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,O);for(const ye in me){const Se=ae[ye]=ae[ye]||[],be=me[ye];be.sort((Ce,Ne)=>{const We=ge.featureSortOrder;if(We){const Xe=We.indexOf(Ce.featureIndex);return We.indexOf(Ne.featureIndex)-Xe}return Ne.featureIndex-Ce.featureIndex});for(const Ce of be)Se.push(Ce)}}for(const ge in ae)ae[ge].forEach(me=>{const ye=me.feature,Se=F(O[ge]);if(!Se)return;const be=Se.getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=be});return ae}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),C.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(l,h){h&&h.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const y=this._getSourceCaches(l);let x=[];for(const b of y)x=x.concat(lt(b,h));return x}addSourceType(l,h,y){return Lo.getSourceType(l)?y(new Error(`A source type called "${l}" already exists.`)):(Lo.setSourceType(l,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:h.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(l,h={}){this._checkLoaded();const y=this.light.getLight();let x=!1;for(const A in l)if(!v(l[A],y[A])){x=!0;break}if(!x)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,h),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,h=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=l;if(h===1){if(typeof y.source=="object"){const x="terrain-dem-src";this.addSource(x,y.source),y=s.clone$1(y),y=s.extend(y,{source:x})}if(this._validate(s.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,h)}else{const x=this.terrain,b=x.get();for(const A of Object.keys(s.spec.terrain))!y.hasOwnProperty(A)&&s.spec.terrain[A].default&&(y[A]=s.spec.terrain[A].default);for(const A in y)if(!v(y[A],b[A])){x.set(y),this.stylesheet.terrain=y;const C=this._setTransitionParameters({duration:0});x.updateTransitions(C);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const h=this.fog=new Mt(l,this.map.transform);this.stylesheet.fog=l;const y=this._setTransitionParameters({duration:0});h.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,y=h.get();Object.keys(l).length===0&&h.set(l);for(const x in l)if(!v(l[x],y[x])){h.set(l),this.stylesheet.fog=l;const b=this._setTransitionParameters({duration:0});h.updateTransitions(b);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:s.exported.now(),transition:s.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(y=>this.isLayerDraped(this._layers[y])),h=this._order.filter(y=>!this.isLayerDraped(this._layers[y]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...h)}_createTerrain(l,h){const y=this.terrain=new je(l,h);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});y.updateTransitions(x)}_force3DLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="symbol"&&this._updateLayer(h)}}_validate(l,h,y,x,b={}){return(!b||b.validate!==!1)&&ku(this,l.call(s.validateStyle,s.extend({key:h,style:this.serialize(),value:y,styleSpec:s.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const h=this._getSourceCaches(l);for(const y of h)y.clearTiles()}_reloadSource(l){const h=this._getSourceCaches(l);for(const y of h)y.resume(),y.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const h in this._sourceCaches)this._sourceCaches[h].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const h=this._sourceCaches[l];h.resume(),h.reload()}}_updatePlacement(l,h,y,x,b=!1){let A=!1,C=!1;const O={};for(const U of this._order){const F=this._layers[U];if(F.type!=="symbol")continue;if(!O[F.source]){const ne=this._getLayerSourceCache(F);if(!ne)continue;O[F.source]=ne.getRenderableIds(!0).map(oe=>ne.getTileByID(oe)).sort((oe,se)=>se.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(se.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(F,O[F.source],l.center.lng,l.projection);A=A||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),l.zoom))&&(this.pauseablePlacement=new Ou(l,this._order,b,h,y,x,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),C=!0),A&&this.pauseablePlacement.placement.setStale()),C||A)for(const U of this._order){const F=this._layers[U];F.type==="symbol"&&this.placement.updateLayerOpacities(F,O[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,h,y){this.imageManager.getImages(h.icons,y),this._updateTilesForChangedImages();const x=b=>{b&&b.setDependencies(h.tileID.key,h.type,h.icons)};x(this._otherSourceCaches[h.source]),x(this._symbolSourceCaches[h.source])}getGlyphs(l,h,y){this.glyphManager.getGlyphs(h.stacks,y)}getResource(l,h,y){return s.makeRequest(h,y)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const h=[];return this._otherSourceCaches[l]&&h.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&h.push(this._symbolSourceCaches[l]),h}_isSourceCacheLoaded(l){const h=this._getSourceCaches(l);return h.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):h.every(y=>y.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Lo.getSourceType=function(p){return Ue[p]},Lo.setSourceType=function(p,l){Ue[p]=l},Lo.registerForPluginStateChange=s.registerForPluginStateChange;var Lu=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,e_="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",t_=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,_d=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,n_=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Dp={},Op={};const dc=[];_l(Lu,dc),_l(t_,dc),_l(_d,dc),_l(n_,dc),Dp=Nn("",t_),Op=Nn(n_,_d);const r_=Nn(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),vd=Lu,xd=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var kp={background:Nn(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Nn(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Nn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Nn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Nn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Nn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Nn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Nn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Nn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Nn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Nn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Nn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Nn(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Nn(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Nn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Nn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Nn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Nn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Nn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Nn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Nn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Nn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Nn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Nn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,e_),skyboxGradient:Nn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,e_),skyboxCapture:Nn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Nn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Nn(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function _l(p,l){const h=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of h)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=y.split(" ");for(const b of x)l.includes(b)||l.push(b)}}function Nn(p,l){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},b=[...dc];return _l(p,b),_l(l,b),{fragmentSource:p=p.replace(h,(A,C,O,U,F)=>(x[F]=!0,C==="define"?`
#ifndef HAS_UNIFORM_u_${F}
varying ${O} ${U} ${F};
#else
uniform ${O} ${U} u_${F};
#endif
`:`
#ifdef HAS_UNIFORM_u_${F}
    ${O} ${U} ${F} = u_${F};
#endif
`)),vertexSource:l=l.replace(h,(A,C,O,U,F)=>{const Z=U==="float"?"vec2":"vec4",ne=F.match(/color/)?"color":Z;return x[F]?C==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
attribute ${O} ${Z} a_${F};
varying ${O} ${U} ${F};
#else
uniform ${O} ${U} u_${F};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = a_${F};
#else
    ${O} ${U} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = unpack_mix_${ne}(a_${F}, u_${F}_t);
#else
    ${O} ${U} ${F} = u_${F};
#endif
`:C==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
attribute ${O} ${Z} a_${F};
#else
uniform ${O} ${U} u_${F};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${O} ${U} ${F} = a_${F};
#else
    ${O} ${U} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${O} ${U} ${F} = unpack_mix_${ne}(a_${F}, u_${F}_t);
#else
    ${O} ${U} ${F} = u_${F};
#endif
`}),staticAttributes:y,usedDefines:b}}class zu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,h,y,x,b,A,C){this.context=l;let O=this.boundPaintVertexBuffers.length!==x.length;for(let F=0;!O&&F<x.length;F++)this.boundPaintVertexBuffers[F]!==x[F]&&(O=!0);let U=this.boundDynamicVertexBuffers.length!==C.length;for(let F=0;!U&&F<C.length;F++)this.boundDynamicVertexBuffers[F]!==C[F]&&(U=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==y||O||U||this.boundIndexBuffer!==b||this.boundVertexOffset!==A)this.freshBind(h,y,x,b,A,C);else{l.bindVertexArrayOES.set(this.vao);for(const F of C)F&&F.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(l,h,y,x,b,A){let C;const O=l.numAttributes,U=this.context,F=U.gl;if(U.extVertexArrayObject)this.vao&&this.destroy(),this.vao=U.extVertexArrayObject.createVertexArrayOES(),U.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=x,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=A;else{C=U.currentNumAttributes||0;for(let Z=O;Z<C;Z++)F.disableVertexAttribArray(Z)}h.enableAttributes(F,l),h.bind(),h.setVertexAttribPointers(F,l,b);for(const Z of y)Z.enableAttributes(F,l),Z.bind(),Z.setVertexAttribPointers(F,l,b);for(const Z of A)Z&&(Z.enableAttributes(F,l),Z.bind(),Z.setVertexAttribPointers(F,l,b));x&&x.bind(),U.currentNumAttributes=O}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Lp(p,l){const h=Math.pow(2,l.canonical.z),y=l.canonical.y;return[new s.MercatorCoordinate(0,y/h).toLngLat().lat,new s.MercatorCoordinate(0,(y+1)/h).toLngLat().lat]}function Nu(p,l,h,y,x,b,A){const C=p.context,O=C.gl,U=h.fbo;if(!U)return;p.prepareDrawTile();const F=p.useProgram("hillshade");C.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,U.colorAttachment.get());const Z=((ae,le,ee,ge)=>{const me=ee.paint.get("hillshade-shadow-color"),ye=ee.paint.get("hillshade-highlight-color"),Se=ee.paint.get("hillshade-accent-color");let be=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);ee.paint.get("hillshade-illumination-anchor")==="viewport"&&(be-=ae.transform.angle);const Ce=!ae.options.moving;return{u_matrix:ge||ae.transform.calculateProjMatrix(le.tileID.toUnwrapped(),Ce),u_image:0,u_latrange:Lp(0,le.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),be],u_shadow:me,u_highlight:ye,u_accent:Se}})(p,h,y,p.terrain?l.projMatrix:null);p.prepareDrawProgram(C,F,l.toUnwrapped());const{tileBoundsBuffer:ne,tileBoundsIndexBuffer:oe,tileBoundsSegments:se}=p.getTileBoundsBuffers(h);F.draw(C,O.TRIANGLES,x,b,A,s.CullFaceMode.disabled,Z,y.id,ne,oe,se)}function Bu(p,l,h){if(!l.needsDEMTextureUpload)return;const y=p.context,x=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||p.getTileTexture(h.stride);const b=h.getPixels();l.demTexture?l.demTexture.update(b,{premultiply:!1}):l.demTexture=new s.Texture(y,b,x.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function wd(p,l,h,y,x,b){const A=p.context,C=A.gl;if(!l.dem)return;const O=l.dem;if(A.activeTexture.set(C.TEXTURE1),Bu(p,l,O),!l.demTexture)return;l.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);const U=O.dim;A.activeTexture.set(C.TEXTURE0);let F=l.fbo;if(!F){const se=new s.Texture(A,{width:U,height:U,data:null},C.RGBA);se.bind(C.LINEAR,C.CLAMP_TO_EDGE),F=l.fbo=A.createFramebuffer(U,U,!0),F.colorAttachment.set(se.texture)}A.bindFramebuffer.set(F.framebuffer),A.viewport.set([0,0,U,U]);const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:ne,tileBoundsSegments:oe}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(A,C.TRIANGLES,y,x,b,s.CullFaceMode.disabled,((se,ae)=>{const le=ae.stride,ee=s.create();return s.ortho(ee,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(ee,ee,[0,-s.EXTENT,0]),{u_matrix:ee,u_image:1,u_dimension:[le,le],u_zoom:se.overscaledZ,u_unpack:ae.unpackVector}})(l.tileID,O),h.id,Z,ne,oe),l.needsHillshadePrepare=!1}const bd=p=>({u_matrix:new s.UniformMatrix4f(p),u_image0:new s.Uniform1i(p),u_skirt_height:new s.Uniform1f(p)}),zp=(p,l)=>({u_matrix:p,u_image0:0,u_skirt_height:l}),Ed=(p,l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:h,u_zoom_transition:x,u_merc_center:b,u_image0:0,u_frustum_tl:A,u_frustum_tr:C,u_frustum_br:O,u_frustum_bl:U,u_globe_pos:F,u_globe_radius:Z,u_viewport:ne,u_grid_matrix:se?Float32Array.from(se):new Float32Array(9),u_skirt_height:oe});function Np(p,l){return p!=null&&l!=null&&!(!p.hasData()||!l.hasData())&&p.demTexture!=null&&l.demTexture!=null&&p.tileID.key!==l.tileID.key}const Ca=new class{constructor(){this.operations={}}newMorphing(p,l,h,y,x){if(p in this.operations){const b=this.operations[p];b.to.tileID.key!==h.tileID.key&&(b.queued=h)}else this.operations[p]={startTime:y,phase:0,duration:x,from:l,to:h,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const l=this.operations[p];return{from:l.from,to:l.to,phase:l.phase}}update(p){for(const l in this.operations){const h=this.operations[l];for(h.phase=(p-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,p)){delete this.operations[l];break}}}_nextOp(p,l){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=l,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},vl={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Td(p){return 6*Math.pow(1.5,22-p)}function Bp(p,l){const h=1<<p.z;return!l&&(p.x===0||p.x===h-1)||p.y===0||p.y===h-1}const Rn=p=>({u_matrix:p});function Fu(p,l,h,y,x){if(x>0){const b=s.exported.now(),A=(b-p.timeAdded)/x,C=l?(b-l.timeAdded)/x:-1,O=h.getSource(),U=y.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),F=!l||Math.abs(l.tileID.overscaledZ-U)>Math.abs(p.tileID.overscaledZ-U),Z=F&&p.refreshedUponExpiration?1:s.clamp(F?A:1-C,0,1);return p.refreshedUponExpiration&&A>=1&&(p.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}class i_ extends s.SourceCache{constructor(l){const h={type:"raster-dem",maxzoom:l.transform.maxZoom},y=new Dt(on(),null),x=Fe("mock-dem",h,y,l.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,h){l.state="loaded",h(null)}}class o_ extends s.SourceCache{constructor(l){const h=Fe("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Dt(on(),null),l.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,h,y){if(l.freezeTileCoverage)return;this.transform=l;const x=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,A)=>{if(b[A.key]="",!this._tiles[A.key]){const C=new s.Tile(A,this._source.tileSize*A.overscaleFactor(),l.tileZoom);C.state="loaded",this._tiles[A.key]=C}return b},{});for(const b in this._tiles)b in x||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(l){const h=this.proxyCachedFBO[l];if(h!==void 0){const y=Object.values(h);this.renderCachePool.push(...y),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Fp extends s.OverscaledTileID{constructor(l,h,y){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=h,this.projMatrix=y}}class Up extends s.Elevation{constructor(l,h){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,x,b]=function(O){const U=new s.StructArrayLayout2i4,F=new s.StructArrayLayout3ui6,Z=131;U.reserve(17161),F.reserve(33800);const ne=s.EXTENT/128,oe=s.EXTENT+ne/2,se=oe+ne;for(let le=-ne;le<se;le+=ne)for(let ee=-ne;ee<se;ee+=ne){const ge=ee<0||ee>oe||le<0||le>oe?24575:0,me=s.clamp(Math.round(ee),0,s.EXTENT),ye=s.clamp(Math.round(le),0,s.EXTENT);U.emplaceBack(me+ge,ye)}const ae=(le,ee)=>{const ge=ee*Z+le;F.emplaceBack(ge+1,ge,ge+Z),F.emplaceBack(ge+Z,ge+Z+1,ge+1)};for(let le=1;le<129;le++)for(let ee=1;ee<129;ee++)ae(ee,le);return[0,129].forEach(le=>{for(let ee=0;ee<130;ee++)ae(ee,le),ae(le,ee)}),[U,F,32768]}(),A=l.context;this.gridBuffer=A.createVertexBuffer(y,s.posAttributes.members),this.gridIndexBuffer=A.createIndexBuffer(x),this.gridSegments=s.SegmentVector.simpleSegment(0,0,y.length,x.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,y.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new o_(h.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const C=A.gl;this._overlapStencilMode=new s.StencilMode({func:C.GEQUAL,mask:255},0,255,C.KEEP,C.KEEP,C.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new i_(h.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,h,y){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const x=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const b=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const A=this.getScaledDemTileSize();this.sourceCache.update(h,A,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),h.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=h.getIds().map(O=>{const U=h.getTileByID(O).tileID;return U.projMatrix=y.calculateProjMatrix(U.toUnwrapped()),U});(function(O,U){const F=U.transform.pointCoordinate(U.transform.getCameraPoint()),Z=new s.pointGeometry(F.x,F.y);O.sort((ne,oe)=>{if(oe.overscaledZ-ne.overscaledZ)return oe.overscaledZ-ne.overscaledZ;const se=new s.pointGeometry(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),ae=new s.pointGeometry(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),le=Z.mult(1<<ne.canonical.z);return le.x-=.5,le.y-=.5,le.distSqr(se)-le.distSqr(ae)})})(x,this.painter),this._previousZoom=y.zoom;const b=this.proxyToSource||{};this.proxyToSource={},x.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const A=this._style._sourceCaches;for(const O in A){const U=A[O];if(!U.used||(U!==this.sourceCache&&this.resetTileLookupCache(U.id),this._setupProxiedCoordsForOrtho(U,l[O],b),U.usedForTerrain))continue;const F=l[O];U.getSource().reparseOverscaled&&this._assignTerrainTiles(F)}this.proxiedCoords[h.id]=x.map(O=>new Fp(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const C={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const U=this.terrainTileForTile[O.key];if(!U)continue;const F=U.tileID.key;F in C||(this._visibleDemTiles.push(U),C[F]=F)}}_assignTerrainTiles(l){this._initializing||l.forEach(h=>{if(this.terrainTileForTile[h.key])return;const y=this._findTileCoveringTileID(h,this.sourceCache);y&&(this.terrainTileForTile[h.key]=y)})}_prepareDEMTextures(){const l=this.painter.context,h=l.gl;for(const y in this.terrainTileForTile){const x=this.terrainTileForTile[y],b=x.dem;!b||x.demTexture&&!x.needsDEMTextureUpload||(l.activeTexture.set(h.TEXTURE1),Bu(this.painter,x,b))}}_prepareDemTileUniforms(l,h,y,x){if(!h||h.demTexture==null)return!1;const b=l.tileID.canonical,A=Math.pow(2,h.tileID.canonical.z-b.z),C=x||"";return y[`u_dem_tl${C}`]=[b.x*A%1,b.y*A%1],y[`u_dem_scale${C}`]=A,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,h=l.gl;if(!this._emptyDepthBufferTexture){const y=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(l,y,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const h=this._visibleDemTiles.reduce((y,x)=>{if(!x.dem)return y;const b=x.dem.tree.minimums[0];return b>0&&l++,y+b},0);return l?h/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,h=l.gl;l.activeTexture.set(h.TEXTURE2);const y=this._getLoadedAreaMinimum(),x=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(x,{premultiply:!1}):b=this._emptyDEMTexture=new s.Texture(l,x,h.RGBA,{premultiply:!1}),b}setupElevationDraw(l,h,y){const x=this.painter.context,b=x.gl,A=(C=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(C),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var C;A.u_dem_size=this.sourceCache.getSource().tileSize,A.u_exaggeration=this.exaggeration();let O=null,U=null,F=1;if(y&&y.morphing&&this._useVertexMorphing){const Z=y.morphing.srcDemTile,ne=y.morphing.dstDemTile;F=y.morphing.phase,Z&&ne&&(this._prepareDemTileUniforms(l,Z,A,"_prev")&&(U=Z),this._prepareDemTileUniforms(l,ne,A)&&(O=ne))}if(U&&O?(x.activeTexture.set(b.TEXTURE2),O.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),x.activeTexture.set(b.TEXTURE4),U.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),A.u_dem_lerp=F):(O=this.terrainTileForTile[l.tileID.key],x.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(l,O,A)?O.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),x.activeTexture.set(b.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(A.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),A.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&O){const Z=(1<<O.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;A.u_meter_to_dem=Z}if(y&&y.labelPlaneMatrixInv&&(A.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),h.setTerrainUniformValues(x,A),this.painter.transform.projection.name==="globe"){const Z=this.globeUniformValues(this.painter.transform,l.tileID.canonical,y&&y.useDenormalizedUpVectorScale);h.setGlobeUniformValues(x,Z)}}globeUniformValues(l,h,y){const x=l.projection;return{u_tile_tl_up:x.upVector(h,0,0),u_tile_tr_up:x.upVector(h,s.EXTENT,0),u_tile_br_up:x.upVector(h,s.EXTENT,s.EXTENT),u_tile_bl_up:x.upVector(h,0,s.EXTENT),u_tile_up_scale:y?s.globeMetersToEcef(1):x.upVectorScale(h,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const h=this.painter,y=this.painter.context;l.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,b,A,C,O){if(x.transform.projection.name==="globe")(function(U,F,Z,ne,oe){const se=U.context,ae=se.gl;let le,ee;const ge=U.options.showTerrainWireframe?2:0,me=U.transform,ye=s.globeUseCustomAntiAliasing(U,se,me),Se=(ct,qe)=>{if(ee===ct)return;const ze=[vl[ct],"PROJECTION_GLOBE_VIEW"];ye&&ze.push("CUSTOM_ANTIALIASING"),qe&&ze.push(vl[ge]),le=U.useProgram("globeRaster",null,ze),ee=ct},be=U.colorModeForRenderPass(),Ce=new s.DepthMode(ae.LEQUAL,s.DepthMode.ReadWrite,U.depthRangeFor3D);Ca.update(oe);const Ne=s.calculateGlobeMercatorMatrix(me),We=[s.mercatorXfromLng(me.center.lng),s.mercatorYfromLat(me.center.lat)],Xe=ge?[!1,!0]:[!1],vt=U.globeSharedBuffers,Ve=[me.width*s.exported.devicePixelRatio,me.height*s.exported.devicePixelRatio],ot=Float32Array.from(me.globeMatrix),et={useDenormalizedUpVectorScale:!0};if(Xe.forEach(ct=>{const qe=U.transform,ze=Td(qe.zoom)*F.exaggeration();ee=-1;const Qe=ct?ae.LINES:ae.TRIANGLES;for(const at of ne){const dt=Z.getTile(at),jt=s.StencilMode.disabled,hn=F.prevTerrainTileForTile[at.key],Ft=F.terrainTileForTile[at.key];Np(hn,Ft)&&Ca.newMorphing(at.key,hn,Ft,oe,250),se.activeTexture.set(ae.TEXTURE0),dt.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const zt=Ca.getMorphValuesForProxy(at.key),$t=zt?1:0;zt&&s.extend$1(et,{morphing:{srcDemTile:zt.from,dstDemTile:zt.to,phase:s.easeCubicInOut(zt.phase)}});const wn=s.tileCornersToBounds(at.canonical),Zt=s.getLatitudinalLod(wn.getCenter().lat),Bn=s.getGridMatrix(at.canonical,wn,Zt,qe.worldSize/qe._pixelsPerMercatorPixel),Un=s.globeNormalizeECEF(s.globeTileBounds(at.canonical)),ir=Ed(qe.projMatrix,ot,Ne,Un,s.globeToMercatorTransition(qe.zoom),We,qe.frustumCorners.TL,qe.frustumCorners.TR,qe.frustumCorners.BR,qe.frustumCorners.BL,qe.globeCenterInViewSpace,qe.globeRadius,Ve,ze,Bn);if(Se($t,ct),F.setupElevationDraw(dt,le,et),U.prepareDrawProgram(se,le,at.toUnwrapped()),vt){const[Jn,Gr,eo]=ct?vt.getWirefameBuffers(U.context,Zt):vt.getGridBuffers(Zt,ze!==0);le.draw(se,Qe,Ce,jt,be,s.CullFaceMode.backCCW,ir,"globe_raster",Jn,Gr,eo)}}}),vt){const ct=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ye&&ct.push("CUSTOM_ANTIALIASING"),le=U.useProgram("globeRaster",null,ct);for(const qe of ne){const{x:ze,y:Qe,z:at}=qe.canonical,dt=Qe===0,jt=Qe===(1<<at)-1,[hn,Ft,zt,$t]=vt.getPoleBuffers(at);if($t&&(dt||jt)){const wn=Z.getTile(qe);se.activeTexture.set(ae.TEXTURE0),wn.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);let Zt=s.globePoleMatrixForTile(at,ze,me);const Bn=s.globeNormalizeECEF(s.globeTileBounds(qe.canonical)),Un=(ir,Jn)=>ir.draw(se,ae.TRIANGLES,Ce,s.StencilMode.disabled,be,s.CullFaceMode.disabled,Ed(me.projMatrix,Zt,Zt,Bn,0,We,me.frustumCorners.TL,me.frustumCorners.TR,me.frustumCorners.BR,me.frustumCorners.BL,me.globeCenterInViewSpace,me.globeRadius,Ve,0),"globe_pole_raster",Jn,zt,$t);F.setupElevationDraw(wn,le,et),U.prepareDrawProgram(se,le,qe.toUnwrapped()),dt&&Un(le,hn),jt&&(Zt=s.scale(s.create(),Zt,[1,-1,1]),Un(le,Ft))}}}})(x,b,A,C,O);else{const U=x.context,F=U.gl;let Z,ne;const oe=x.options.showTerrainWireframe?2:0,se=(me,ye)=>{if(ne===me)return;const Se=[vl[me]];ye&&Se.push(vl[oe]),Z=x.useProgram("terrainRaster",null,Se),ne=me},ae=x.colorModeForRenderPass(),le=new s.DepthMode(F.LEQUAL,s.DepthMode.ReadWrite,x.depthRangeFor3D);Ca.update(O);const ee=x.transform,ge=Td(ee.zoom)*b.exaggeration();(oe?[!1,!0]:[!1]).forEach(me=>{ne=-1;const ye=me?F.LINES:F.TRIANGLES,[Se,be]=me?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const Ce of C){const Ne=A.getTile(Ce),We=s.StencilMode.disabled,Xe=b.prevTerrainTileForTile[Ce.key],vt=b.terrainTileForTile[Ce.key];Np(Xe,vt)&&Ca.newMorphing(Ce.key,Xe,vt,O,250),U.activeTexture.set(F.TEXTURE0),Ne.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const Ve=Ca.getMorphValuesForProxy(Ce.key),ot=Ve?1:0;let et;Ve&&(et={morphing:{srcDemTile:Ve.from,dstDemTile:Ve.to,phase:s.easeCubicInOut(Ve.phase)}});const ct=zp(Ce.projMatrix,Bp(Ce.canonical,ee.renderWorldCopies)?ge/10:ge);se(ot,me),b.setupElevationDraw(Ne,Z,et),x.prepareDrawProgram(U,Z,Ce.toUnwrapped()),Z.draw(U,ye,le,We,ae,s.CullFaceMode.backCCW,ct,"terrain_raster",b.gridBuffer,Se,be)}})}}(h,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const h=this.painter,y=this.painter.context,x=this.proxySourceCache,b=this.proxiedCoords[x.id],A=this._drapedRenderBatches.shift(),C=[],O=h.style.order;let U=0;for(const F of b){const Z=x.getTileByID(F.proxyTileKey),ne=x.proxyCachedFBO[F.key]?x.proxyCachedFBO[F.key][l]:void 0,oe=ne!==void 0?x.renderCache[ne]:this.pool[U++],se=ne!==void 0;if(Z.texture=oe.tex,se&&!oe.dirty){C.push(Z.tileID);continue}let ae;y.bindFramebuffer.set(oe.fb.framebuffer),this.renderedToTile=!1,oe.dirty&&(y.clear({color:s.Color.transparent,stencil:0}),oe.dirty=!1);for(let le=A.start;le<=A.end;++le){const ee=h.style._layers[O[le]];if(ee.isHidden(h.transform.zoom))continue;const ge=h.style._getLayerSourceCache(ee),me=ge?this.proxyToSource[F.key][ge.id]:[F];if(!me)continue;const ye=me;y.viewport.set([0,0,oe.fb.width,oe.fb.height]),ae!==(ge?ge.id:null)&&(this._setupStencil(oe,me,ee,ge),ae=ge?ge.id:null),h.renderLayer(h,ge,ee,ye)}this.renderedToTile?(oe.dirty=!0,C.push(Z.tileID)):se||--U,U===5&&(U=0,this.renderToBackBuffer(C))}return this.renderToBackBuffer(C),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),A.end+1}postRender(){}renderCacheEfficiency(l){const h=l.order.length;if(h===0)return{efficiency:100};let y,x=0,b=0,A=!1;for(let C=0;C<h;++C){const O=l._layers[l.order[C]];this._style.isLayerDraped(O)?(A&&++x,++b):A||(A=!0,y=O.id)}return b===0?{efficiency:100}:{efficiency:100*(1-x/b),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{l=Math.min(l,h.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,h,y){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const A=b.tileID,C=1<<A.overscaledZ,{x:O,y:U}=A.canonical,F=O/C,Z=(O+1)/C,ne=U/C,oe=(U+1)/C;return{minx:F,miny:ne,maxx:Z,maxy:oe,t:b.dem.tree.raycastRoot(F,ne,Z,oe,l,h,y),tile:b}});x.sort((b,A)=>(b.t!==null?b.t:Number.MAX_VALUE)-(A.t!==null?A.t:Number.MAX_VALUE));for(const b of x){if(b.t==null)return null;const A=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,l,h,y);if(A!=null)return A}return null}_createFBO(){const l=this.painter.context,h=l.gl,y=this.drapeBufferSize;l.activeTexture.set(h.TEXTURE0);const x=new s.Texture(l,{width:y[0],height:y[1],data:null},h.RGBA);x.bind(h.LINEAR,h.CLAMP_TO_EDGE);const b=l.createFramebuffer(y[0],y[1],!1);return b.colorAttachment.set(x.texture),b.depthAttachment=new Oo(l,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:b,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const h=this._style._layers[l],y=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!y&&h.shouldRedrape():!y&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const y of this._style._getSources())if(y instanceof Y){l=!0;break}if(!l)return;const h={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],b=this._style._getLayerSourceCache(x);if(b&&!h[b.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof s.ZoomDependentExpression){h[b.id]=!0;for(const A of this.proxyCoords){const C=this.proxyToSource[A.key][b.id];if(C)for(const O of C)this._clearRenderCacheForTile(b.id,O)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof K){l=!0;break}if(!l)return;const h={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],b=this._style._getLayerSourceCache(x);if(!b||h[b.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const A=x.paint.get("raster-fade-duration");for(const C of this.proxyCoords){const O=this.proxyToSource[C.key][b.id];if(O)for(const U of O){const F=Fu(b.getTile(U),b.findLoadedParent(U,0),b,this.painter.transform,A);(F.opacity!==1||F.mix!==0)&&this._clearRenderCacheForTile(b.id,U)}}}}_setupDrapedRenderBatches(){const l=this._style.order,h=l.length;if(h===0)return;const y=[];let x,b=0,A=this._style._layers[l[b]];for(;!this._style.isLayerDraped(A)&&A.isHidden(this.painter.transform.zoom)&&++b<h;)A=this._style._layers[l[b]];for(;b<h;++b){const C=this._style._layers[l[b]];C.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(C)?x===void 0&&(x=b):x!==void 0&&(y.push({start:x,end:b-1}),x=void 0))}x!==void 0&&y.push({start:x,end:b-1}),this._drapedRenderBatches=y}_setupRenderCache(l){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const A=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let C=0;C<A.length;++C){const O=Object.values(A[C]);h.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,x=this._tilesDirty;for(let A=y.length-1;A>=0;A--){const C=y[A];if(h.getTileByID(C.key),h.proxyCachedFBO[C.key]!==void 0){const O=l[C.key],U=this.proxyToSource[C.key];let F=0;for(const Z in U){const ne=U[Z],oe=O[Z];if(!oe||oe.length!==ne.length||ne.some((se,ae)=>se!==oe[ae]||x[Z]&&x[Z].hasOwnProperty(se.key))){F=-1;break}++F}for(const Z in h.proxyCachedFBO[C.key])h.renderCache[h.proxyCachedFBO[C.key][Z]].dirty=F<0||F!==Object.values(O).length}}const b=[...this._drapedRenderBatches];b.sort((A,C)=>C.end-C.start-(A.end-A.start));for(const A of b)for(const C of y){if(h.proxyCachedFBO[C.key])continue;let O=h.renderCachePool.pop();O===void 0&&h.renderCache.length<50&&(O=h.renderCache.length,h.renderCache.push(this._createFBO())),O!==void 0&&(h.proxyCachedFBO[C.key]={},h.proxyCachedFBO[C.key][A.start]=O,h.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(l,h,y,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,A=b.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let C;if(y.isTileClipped())C=h.length,this._overlapStencilMode.test={func:A.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);C=1,this._overlapStencilMode.test={func:A.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+C>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=C,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(l,h){const y=this.painter,x=this.painter.context,b=x.gl;y._tileClippingMaskIDs={},x.setColorMode(s.ColorMode.disabled),x.setDepthMode(s.DepthMode.disabled);const A=y.useProgram("clippingMask");for(const C of l){const O=y._tileClippingMaskIDs[C.key]=--h;A.draw(x,b.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:b.ALWAYS,mask:0},O,255,b.KEEP,b.KEEP,b.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Rn(C.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(l){const h=this.painter.transform;if(l.x<0||l.x>h.width||l.y<0||l.y>h.height)return null;const y=[l.x,l.y,1,1];s.transformMat4$1(y,y,h.pixelMatrixInverse),s.scale$1(y,y,1/y[3]),y[0]/=h.worldSize,y[1]/=h.worldSize;const x=h._camera.position,b=s.mercatorZfromAltitude(1,h.center.lat),A=[x[0],x[1],x[2]/b,0],C=s.subtract([],y.slice(0,3),A);s.normalize(C,C);const O=this.raycast(A,C,this._exaggeration);return O!==null&&O?(s.scaleAndAdd(A,A,C,O),A[3]=A[2],A[2]*=b,A):null}drawDepth(){const l=this.painter,h=l.context,y=this.proxySourceCache,x=Math.ceil(l.width),b=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const A=h.gl,C=h.createFramebuffer(x,b,!0);h.activeTexture.set(A.TEXTURE0);const O=new s.Texture(h,{width:x,height:b,data:null},A.RGBA);O.bind(A.NEAREST,A.CLAMP_TO_EDGE),C.colorAttachment.set(O.texture);const U=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,x,b);C.depthAttachment.set(U),this._depthFBO=C,this._depthTexture=O}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,x,b]),function(A,C,O,U){if(A.transform.projection.name==="globe")return;const F=A.context,Z=F.gl;F.clear({depth:1});const ne=A.useProgram("terrainDepth"),oe=new s.DepthMode(Z.LESS,s.DepthMode.ReadWrite,A.depthRangeFor3D);for(const se of U){const ae=O.getTile(se),le=zp(se.projMatrix,0);C.setupElevationDraw(ae,ne),ne.draw(F,Z.TRIANGLES,oe,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,le,"terrain_depth",C.gridBuffer,C.gridIndexBuffer,C.gridNoSkirtSegments)}}(l,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,h,y){if(l.getSource()instanceof Ie)return this._setupProxiedCoordsForImageSource(l,h,y);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const x=this.proxiedCoords[l.id]=[],b=this.proxyCoords;for(let C=0;C<b.length;C++){const O=b[C],U=this._findTileCoveringTileID(O,l);if(U){const F=this._createProxiedId(O,U,y[O.key]&&y[O.key][l.id]);x.push(F),this.proxyToSource[O.key][l.id]=[F]}}let A=!1;for(let C=0;C<h.length;C++){const O=l.getTile(h[C]);if(!O||!O.hasData())continue;const U=this._findTileCoveringTileID(O.tileID,this.proxySourceCache);if(U&&U.tileID.canonical.z!==O.tileID.canonical.z){const F=this.proxyToSource[U.tileID.key][l.id],Z=this._createProxiedId(U.tileID,O,y[U.tileID.key]&&y[U.tileID.key][l.id]);F?F.splice(F.length-1,0,Z):this.proxyToSource[U.tileID.key][l.id]=[Z],x.push(Z),A=!0}}this._sourceTilesOverlap[l.id]=A}_setupProxiedCoordsForImageSource(l,h,y){if(!l.getSource().loaded())return;const x=this.proxiedCoords[l.id]=[],b=this.proxyCoords,A=l.getSource(),C=new s.pointGeometry(A.tileID.x,A.tileID.y)._div(1<<A.tileID.z),O=A.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((F,Z)=>(F.min.x=Math.min(F.min.x,Z.x-C.x),F.min.y=Math.min(F.min.y,Z.y-C.y),F.max.x=Math.max(F.max.x,Z.x-C.x),F.max.y=Math.max(F.max.y,Z.y-C.y),F),{min:new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),U=(F,Z)=>{const ne=F.wrap+F.canonical.x/(1<<F.canonical.z),oe=F.canonical.y/(1<<F.canonical.z),se=s.EXTENT/(1<<F.canonical.z),ae=Z.wrap+Z.canonical.x/(1<<Z.canonical.z),le=Z.canonical.y/(1<<Z.canonical.z);return ne+se<ae+O.min.x||ne>ae+O.max.x||oe+se<le+O.min.y||oe>le+O.max.y};for(let F=0;F<b.length;F++){const Z=b[F];for(let ne=0;ne<h.length;ne++){const oe=l.getTile(h[ne]);if(!oe||!oe.hasData()||U(Z,oe.tileID))continue;const se=this._createProxiedId(Z,oe,y[Z.key]&&y[Z.key][l.id]),ae=this.proxyToSource[Z.key][l.id];ae?ae.push(se):this.proxyToSource[Z.key][l.id]=[se],x.push(se)}}}_createProxiedId(l,h,y){let x=this.orthoMatrix;if(y){const b=y.find(A=>A.key===h.tileID.key);if(b)return b}if(h.tileID.key!==l.key){const b=l.canonical.z-h.tileID.canonical.z;let A,C,O;x=s.create();const U=h.tileID.wrap-l.wrap<<l.overscaledZ;b>0?(A=s.EXTENT>>b,C=A*((h.tileID.canonical.x<<b)-l.canonical.x+U),O=A*((h.tileID.canonical.y<<b)-l.canonical.y)):(A=s.EXTENT<<-b,C=s.EXTENT*(h.tileID.canonical.x-(l.canonical.x+U<<-b)),O=s.EXTENT*(h.tileID.canonical.y-(l.canonical.y<<-b))),s.ortho(x,0,A,0,A,0,1),s.translate(x,x,[C,O,0])}return new Fp(h.tileID,l.key,x)}_findTileCoveringTileID(l,h){let y=h.getTile(l);if(y&&y.hasData())return y;const x=this._findCoveringTileCache[h.id],b=x[l.key];if(y=b?h.getTileByID(b):null,y&&y.hasData()||b===null)return y;let A=y?y.tileID:l,C=A.overscaledZ;const O=h.getSource().minzoom,U=[];if(!b){const Z=h.getSource().maxzoom;if(l.canonical.z>=Z){const ne=l.canonical.z-Z;h.getSource().reparseOverscaled?(C=Math.max(l.canonical.z+2,h.transform.tileZoom),A=new s.OverscaledTileID(C,l.wrap,Z,l.canonical.x>>ne,l.canonical.y>>ne)):ne!==0&&(C=Z,A=new s.OverscaledTileID(C,l.wrap,Z,l.canonical.x>>ne,l.canonical.y>>ne))}A.key!==l.key&&(U.push(A.key),y=h.getTile(A))}const F=Z=>{U.forEach(ne=>{x[ne]=Z}),U.length=0};for(C-=1;C>=O&&(!y||!y.hasData());C--){y&&F(y.tileID.key);const Z=A.calculateScaledKey(C);if(y=h.getTileByID(Z),y&&y.hasData())break;const ne=x[Z];if(ne===null)break;ne===void 0?U.push(Z):y=h.getTileByID(ne)}return F(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,h){let y=this._tilesDirty[l];y||(y=this._tilesDirty[l]={}),y[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(h){let y=0;const x=new s.StructArrayLayout2ui4,b=131;for(let A=1;A<129;A++){for(let C=1;C<129;C++)y=A*b+C,x.emplaceBack(y,y+1),x.emplaceBack(y,y+b),x.emplaceBack(y+1,y+b),A===128&&x.emplaceBack(y+b,y+b+1);x.emplaceBack(y+1,y+1+b)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Vp{static cacheKey(l,h,y,x){let b=`${h}${x?x.cacheKey:""}`;for(const A of y)l.usedDefines.includes(A)&&(b+=`/${A}`);return b}constructor(l,h,y,x,b,A){const C=l.gl;this.program=C.createProgram();const O=function(ee){const ge=[];for(let me=0;me<ee.length;me++){if(ee[me]===null)continue;const ye=ee[me].split(" ");ge.push(ye.pop())}return ge}(y.staticAttributes),U=x?x.getBinderAttributes():[],F=O.concat(U);let Z=x?x.defines():[];Z=Z.concat(A.map(ee=>`#define ${ee}`));const ne=l.isWebGL2?`#version 300 es
`:"",oe=ne+Z.concat(l.extStandardDerivatives&&ne.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(xd):xd,xd,vd,r_.fragmentSource,Op.fragmentSource,y.fragmentSource).join(`
`),se=ne+Z.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,vd,r_.vertexSource,Op.vertexSource,Dp.vertexSource,y.vertexSource).join(`
`),ae=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(ae,oe),C.compileShader(ae),C.attachShader(this.program,ae);const le=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())this.failedToCreate=!0;else{C.shaderSource(le,se),C.compileShader(le),C.attachShader(this.program,le),this.attributes={},this.numAttributes=F.length;for(let ee=0;ee<this.numAttributes;ee++)F[ee]&&(C.bindAttribLocation(this.program,ee,F[ee]),this.attributes[F[ee]]=ee);C.linkProgram(this.program),C.deleteShader(le),C.deleteShader(ae),this.fixedUniforms=b(l),this.binderUniforms=x?x.getUniforms(l):[],A.includes("TERRAIN")&&(this.terrainUniforms=(ee=>({u_dem:new s.Uniform1i(ee),u_dem_prev:new s.Uniform1i(ee),u_dem_unpack:new s.Uniform4f(ee),u_dem_tl:new s.Uniform2f(ee),u_dem_scale:new s.Uniform1f(ee),u_dem_tl_prev:new s.Uniform2f(ee),u_dem_scale_prev:new s.Uniform1f(ee),u_dem_size:new s.Uniform1f(ee),u_dem_lerp:new s.Uniform1f(ee),u_exaggeration:new s.Uniform1f(ee),u_depth:new s.Uniform1i(ee),u_depth_size_inv:new s.Uniform2f(ee),u_meter_to_dem:new s.Uniform1f(ee),u_label_plane_matrix_inv:new s.UniformMatrix4f(ee)}))(l)),A.includes("GLOBE")&&(this.globeUniforms=(ee=>({u_tile_tl_up:new s.Uniform3f(ee),u_tile_tr_up:new s.Uniform3f(ee),u_tile_br_up:new s.Uniform3f(ee),u_tile_bl_up:new s.Uniform3f(ee),u_tile_up_scale:new s.Uniform1f(ee)}))(l)),A.includes("FOG")&&(this.fogUniforms=(ee=>({u_fog_matrix:new s.UniformMatrix4f(ee),u_fog_range:new s.Uniform2f(ee),u_fog_color:new s.Uniform4f(ee),u_fog_horizon_blend:new s.Uniform1f(ee),u_fog_temporal_offset:new s.Uniform1f(ee),u_frustum_tl:new s.Uniform3f(ee),u_frustum_tr:new s.Uniform3f(ee),u_frustum_br:new s.Uniform3f(ee),u_frustum_bl:new s.Uniform3f(ee),u_globe_pos:new s.Uniform3f(ee),u_globe_radius:new s.Uniform1f(ee),u_globe_transition:new s.Uniform1f(ee),u_is_globe:new s.Uniform1i(ee),u_viewport:new s.Uniform2f(ee)}))(l))}}setTerrainUniformValues(l,h){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)y[x]&&y[x].set(this.program,x,h[x])}}setGlobeUniformValues(l,h){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)y[x]&&y[x].set(this.program,x,h[x])}}setFogUniformValues(l,h){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)y[x].set(this.program,x,h[x])}}draw(l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae){const le=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(y),l.setStencilMode(x),l.setColorMode(b),l.setCullFace(A);for(const ge of Object.keys(this.fixedUniforms))this.fixedUniforms[ge].set(this.program,ge,C[ge]);se&&se.setUniforms(this.program,l,this.binderUniforms,ne,{zoom:oe});const ee={[le.LINES]:2,[le.TRIANGLES]:3,[le.LINE_STRIP]:1}[h];for(const ge of Z.get()){const me=ge.vaos||(ge.vaos={});(me[O]||(me[O]=new zu)).bind(l,this,U,se?se.getPaintVertexBuffers():[],F,ge.vertexOffset,ae||[]),le.drawElements(h,ge.primitiveLength*ee,le.UNSIGNED_SHORT,ge.primitiveOffset*ee*2)}}}function s_(p,l){const h=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,p.transform.tileZoom)/h,x=y*(l.tileID.canonical.x+l.tileID.wrap*h),b=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/bt(l,1,p.transform.tileZoom),u_pixel_coord_upper:[x>>16,b>>16],u_pixel_coord_lower:[65535&x,65535&b]}}const Rw=s.create(),Sd=(p,l,h,y,x,b,A,C,O,U,F)=>{const Z=l.style.light,ne=Z.properties.get("position"),oe=[ne.x,ne.y,ne.z],se=s.create$1();Z.properties.get("anchor")==="viewport"&&(s.fromRotation(se,-l.transform.angle),s.transformMat3(oe,oe,se));const ae=Z.properties.get("color"),le=l.transform,ee={u_matrix:p,u_lightpos:oe,u_lightintensity:Z.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+h,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Rw,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:b};return le.projection.name==="globe"&&(ee.u_tile_id=[A.canonical.x,A.canonical.y,1<<A.canonical.z],ee.u_zoom_transition=O,ee.u_inv_rot_matrix=F,ee.u_merc_center=U,ee.u_up_dir=le.projection.upVector(new s.CanonicalTileID(0,0,0),U[0]*s.EXTENT,U[1]*s.EXTENT),ee.u_height_lift=C),ee},jp=(p,l,h,y,x,b,A,C,O,U,F,Z)=>{const ne=Sd(p,l,h,y,x,b,A,O,U,F,Z),oe={u_height_factor:-Math.pow(2,A.overscaledZ)/C.tileSize/8};return s.extend(ne,s_(l,C),oe)},Id=p=>({u_matrix:p}),Md=(p,l,h)=>s.extend(Id(p),s_(l,h)),a_=(p,l)=>({u_matrix:p,u_world:l}),l_=(p,l,h,y)=>s.extend(Md(p,l,h),{u_world:y}),Dw=s.create(),Uu=(p,l,h,y,x,b)=>{const A=p.transform,C=A.projection.name==="globe";let O;if(b.paint.get("circle-pitch-alignment")==="map")if(C){const F=s.globePixelsToTileUnits(A.zoom,l.canonical)*A._pixelsPerMercatorPixel;O=Float32Array.from([F,0,0,F])}else O=A.calculatePixelsToTileUnitsMatrix(h);else O=new Float32Array([A.pixelsToGLUnits[0],0,0,A.pixelsToGLUnits[1]]);const U={u_camera_to_center_distance:A.cameraToCenterDistance,u_matrix:p.translatePosMatrix(l.projMatrix,h,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:O,u_inv_rot_matrix:Dw,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(C){U.u_inv_rot_matrix=y,U.u_merc_center=x,U.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],U.u_zoom_transition=s.globeToMercatorTransition(A.zoom);const F=x[0]*s.EXTENT,Z=x[1]*s.EXTENT;U.u_up_dir=A.projection.upVector(new s.CanonicalTileID(0,0,0),F,Z)}return U},Vu=p=>{const l=[];return p.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),p.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},c_=(p,l,h,y)=>{const x=s.EXTENT/h.tileSize;return{u_matrix:p,u_camera_to_center_distance:l.getCameraToCenterDistance(y),u_extrude_scale:[l.pixelsToGLUnits[0]/x,l.pixelsToGLUnits[1]/x]}},ju=(p,l,h=1)=>({u_matrix:p,u_color:l,u_overlay:0,u_overlay_scale:h}),Gp=s.create(),xs=(p,l,h,y,x,b,A)=>{const C=p.transform,O=C.projection.name==="globe",U=O?s.globePixelsToTileUnits(C.zoom,l.canonical)*C._pixelsPerMercatorPixel:bt(h,1,b),F={u_matrix:l.projMatrix,u_extrude_scale:U,u_intensity:A,u_inv_rot_matrix:Gp,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){F.u_inv_rot_matrix=y,F.u_merc_center=x,F.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],F.u_zoom_transition=s.globeToMercatorTransition(C.zoom);const Z=x[0]*s.EXTENT,ne=x[1]*s.EXTENT;F.u_up_dir=C.projection.upVector(new s.CanonicalTileID(0,0,0),Z,ne)}return F},$p=(p,l,h,y,x,b,A)=>{const C=p.transform,O=C.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:Wp(p,l,h,y),u_pixels_to_tile_units:O,u_device_pixel_ratio:b,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:Cd(h)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Ad(l,p.transform),u_alpha_discard_threshold:0,u_trim_offset:A}},u_=(p,l,h,y,x)=>{const b=p.transform;return{u_matrix:Wp(p,l,h,y),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:Ad(l,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ad(p,l){return 1/bt(p,1,l.tileZoom)}function Wp(p,l,h,y){return p.translatePosMatrix(y||l.tileID.projMatrix,l,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function Cd(p){const l=p.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const Ow=(p,l,h,y,x,b)=>{return{u_matrix:p,u_tl_parent:l,u_scale_parent:h,u_fade_t:y.mix,u_opacity:y.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(C=x.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(A=x.paint.get("raster-contrast"),A>0?1/(1-A):1+A),u_spin_weights:qp(x.paint.get("raster-hue-rotate")),u_perspective_transform:b};var A,C};function qp(p){p*=Math.PI/180;const l=Math.sin(p),h=Math.cos(p);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const h_=s.create(),Gu=(p,l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae)=>{const le=x.transform,ee={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:le.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:le.width/le.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:A,u_coord_matrix:C,u_is_text:+O,u_pitch_with_map:+y,u_texsize:U,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:h_,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:h_,u_up_vector:[0,-1,0]};return ae.name==="globe"&&(ee.u_tile_id=[F.canonical.x,F.canonical.y,1<<F.canonical.z],ee.u_zoom_transition=Z,ee.u_inv_rot_matrix=oe,ee.u_merc_center=ne,ee.u_camera_forward=le._camera.forward(),ee.u_ecef_origin=s.globeECEFOrigin(le.globeMatrix,F.toUnwrapped()),ee.u_tile_matrix=Float32Array.from(le.globeMatrix),ee.u_up_vector=se),ee},d_=(p,l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae,le)=>s.extend(Gu(p,l,h,y,x,b,A,C,O,U,Z,ne,oe,se,ae,le),{u_gamma_scale:y?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+F}),Hp=(p,l,h,y,x,b,A,C,O,U,F,Z,ne,oe,se,ae)=>s.extend(d_(p,l,h,y,x,b,A,C,!0,O,!0,F,Z,ne,oe,se,ae),{u_texsize_icon:U,u_texture_icon:1}),kw=(p,l,h)=>({u_matrix:p,u_opacity:l,u_color:h}),Zp=(p,l,h,y,x)=>s.extend(function(b,A,C){const O=A.imageManager.getPattern(b.toString()),{width:U,height:F}=A.imageManager.getPixelSize(),Z=Math.pow(2,C.tileID.overscaledZ),ne=C.tileSize*Math.pow(2,A.transform.tileZoom)/Z,oe=ne*(C.tileID.canonical.x+C.tileID.wrap*Z),se=ne*C.tileID.canonical.y;return{u_image:0,u_pattern_tl:O.tl,u_pattern_br:O.br,u_texsize:[U,F],u_pattern_size:O.displaySize,u_tile_units_to_pixels:1/bt(C,1,A.transform.tileZoom),u_pixel_coord_upper:[oe>>16,se>>16],u_pixel_coord_lower:[65535&oe,65535&se]}}(y,h,x),{u_matrix:p,u_opacity:l}),Lw={fillExtrusion:p=>({u_matrix:new s.UniformMatrix4f(p),u_lightpos:new s.Uniform3f(p),u_lightintensity:new s.Uniform1f(p),u_lightcolor:new s.Uniform3f(p),u_vertical_gradient:new s.Uniform1f(p),u_opacity:new s.Uniform1f(p),u_edge_radius:new s.Uniform1f(p),u_ao:new s.Uniform2f(p),u_tile_id:new s.Uniform3f(p),u_zoom_transition:new s.Uniform1f(p),u_inv_rot_matrix:new s.UniformMatrix4f(p),u_merc_center:new s.Uniform2f(p),u_up_dir:new s.Uniform3f(p),u_height_lift:new s.Uniform1f(p)}),fillExtrusionPattern:p=>({u_matrix:new s.UniformMatrix4f(p),u_lightpos:new s.Uniform3f(p),u_lightintensity:new s.Uniform1f(p),u_lightcolor:new s.Uniform3f(p),u_vertical_gradient:new s.Uniform1f(p),u_height_factor:new s.Uniform1f(p),u_edge_radius:new s.Uniform1f(p),u_ao:new s.Uniform2f(p),u_tile_id:new s.Uniform3f(p),u_zoom_transition:new s.Uniform1f(p),u_inv_rot_matrix:new s.UniformMatrix4f(p),u_merc_center:new s.Uniform2f(p),u_up_dir:new s.Uniform3f(p),u_height_lift:new s.Uniform1f(p),u_image:new s.Uniform1i(p),u_texsize:new s.Uniform2f(p),u_pixel_coord_upper:new s.Uniform2f(p),u_pixel_coord_lower:new s.Uniform2f(p),u_tile_units_to_pixels:new s.Uniform1f(p),u_opacity:new s.Uniform1f(p)}),fill:p=>({u_matrix:new s.UniformMatrix4f(p)}),fillPattern:p=>({u_matrix:new s.UniformMatrix4f(p),u_image:new s.Uniform1i(p),u_texsize:new s.Uniform2f(p),u_pixel_coord_upper:new s.Uniform2f(p),u_pixel_coord_lower:new s.Uniform2f(p),u_tile_units_to_pixels:new s.Uniform1f(p)}),fillOutline:p=>({u_matrix:new s.UniformMatrix4f(p),u_world:new s.Uniform2f(p)}),fillOutlinePattern:p=>({u_matrix:new s.UniformMatrix4f(p),u_world:new s.Uniform2f(p),u_image:new s.Uniform1i(p),u_texsize:new s.Uniform2f(p),u_pixel_coord_upper:new s.Uniform2f(p),u_pixel_coord_lower:new s.Uniform2f(p),u_tile_units_to_pixels:new s.Uniform1f(p)}),circle:p=>({u_camera_to_center_distance:new s.Uniform1f(p),u_extrude_scale:new s.UniformMatrix2f(p),u_device_pixel_ratio:new s.Uniform1f(p),u_matrix:new s.UniformMatrix4f(p),u_inv_rot_matrix:new s.UniformMatrix4f(p),u_merc_center:new s.Uniform2f(p),u_tile_id:new s.Uniform3f(p),u_zoom_transition:new s.Uniform1f(p),u_up_dir:new s.Uniform3f(p)}),collisionBox:p=>({u_matrix:new s.UniformMatrix4f(p),u_camera_to_center_distance:new s.Uniform1f(p),u_extrude_scale:new s.Uniform2f(p)}),collisionCircle:p=>({u_matrix:new s.UniformMatrix4f(p),u_inv_matrix:new s.UniformMatrix4f(p),u_camera_to_center_distance:new s.Uniform1f(p),u_viewport_size:new s.Uniform2f(p)}),debug:p=>({u_color:new s.UniformColor(p),u_matrix:new s.UniformMatrix4f(p),u_overlay:new s.Uniform1i(p),u_overlay_scale:new s.Uniform1f(p)}),clippingMask:p=>({u_matrix:new s.UniformMatrix4f(p)}),heatmap:p=>({u_extrude_scale:new s.Uniform1f(p),u_intensity:new s.Uniform1f(p),u_matrix:new s.UniformMatrix4f(p),u_inv_rot_matrix:new s.UniformMatrix4f(p),u_merc_center:new s.Uniform2f(p),u_tile_id:new s.Uniform3f(p),u_zoom_transition:new s.Uniform1f(p),u_up_dir:new s.Uniform3f(p)}),heatmapTexture:p=>({u_image:new s.Uniform1i(p),u_color_ramp:new s.Uniform1i(p),u_opacity:new s.Uniform1f(p)}),hillshade:p=>({u_matrix:new s.UniformMatrix4f(p),u_image:new s.Uniform1i(p),u_latrange:new s.Uniform2f(p),u_light:new s.Uniform2f(p),u_shadow:new s.UniformColor(p),u_highlight:new s.UniformColor(p),u_accent:new s.UniformColor(p)}),hillshadePrepare:p=>({u_matrix:new s.UniformMatrix4f(p),u_image:new s.Uniform1i(p),u_dimension:new s.Uniform2f(p),u_zoom:new s.Uniform1f(p),u_unpack:new s.Uniform4f(p)}),line:p=>({u_matrix:new s.UniformMatrix4f(p),u_pixels_to_tile_units:new s.UniformMatrix2f(p),u_device_pixel_ratio:new s.Uniform1f(p),u_units_to_pixels:new s.Uniform2f(p),u_dash_image:new s.Uniform1i(p),u_gradient_image:new s.Uniform1i(p),u_image_height:new s.Uniform1f(p),u_texsize:new s.Uniform2f(p),u_tile_units_to_pixels:new s.Uniform1f(p),u_alpha_discard_threshold:new s.Uniform1f(p),u_trim_offset:new s.Uniform2f(p)}),linePattern:p=>({u_matrix:new s.UniformMatrix4f(p),u_texsize:new s.Uniform2f(p),u_pixels_to_tile_units:new s.UniformMatrix2f(p),u_device_pixel_ratio:new s.Uniform1f(p),u_image:new s.Uniform1i(p),u_units_to_pixels:new s.Uniform2f(p),u_tile_units_to_pixels:new s.Uniform1f(p),u_alpha_discard_threshold:new s.Uniform1f(p)}),raster:p=>({u_matrix:new s.UniformMatrix4f(p),u_tl_parent:new s.Uniform2f(p),u_scale_parent:new s.Uniform1f(p),u_fade_t:new s.Uniform1f(p),u_opacity:new s.Uniform1f(p),u_image0:new s.Uniform1i(p),u_image1:new s.Uniform1i(p),u_brightness_low:new s.Uniform1f(p),u_brightness_high:new s.Uniform1f(p),u_saturation_factor:new s.Uniform1f(p),u_contrast_factor:new s.Uniform1f(p),u_spin_weights:new s.Uniform3f(p),u_perspective_transform:new s.Uniform2f(p)}),symbolIcon:p=>({u_is_size_zoom_constant:new s.Uniform1i(p),u_is_size_feature_constant:new s.Uniform1i(p),u_size_t:new s.Uniform1f(p),u_size:new s.Uniform1f(p),u_camera_to_center_distance:new s.Uniform1f(p),u_rotate_symbol:new s.Uniform1i(p),u_aspect_ratio:new s.Uniform1f(p),u_fade_change:new s.Uniform1f(p),u_matrix:new s.UniformMatrix4f(p),u_label_plane_matrix:new s.UniformMatrix4f(p),u_coord_matrix:new s.UniformMatrix4f(p),u_is_text:new s.Uniform1i(p),u_pitch_with_map:new s.Uniform1i(p),u_texsize:new s.Uniform2f(p),u_tile_id:new s.Uniform3f(p),u_zoom_transition:new s.Uniform1f(p),u_inv_rot_matrix:new s.UniformMatrix4f(p),u_merc_center:new s.Uniform2f(p),u_camera_forward:new s.Uniform3f(p),u_tile_matrix:new s.UniformMatrix4f(p),u_up_vector:new s.Uniform3f(p),u_ecef_origin:new s.Uniform3f(p),u_texture:new s.Uniform1i(p)}),symbolSDF:p=>({u_is_size_zoom_constant:new s.Uniform1i(p),u_is_size_feature_constant:new s.Uniform1i(p),u_size_t:new s.Uniform1f(p),u_size:new s.Uniform1f(p),u_camera_to_center_distance:new s.Uniform1f(p),u_rotate_symbol:new s.Uniform1i(p),u_aspect_ratio:new s.Uniform1f(p),u_fade_change:new s.Uniform1f(p),u_matrix:new s.UniformMatrix4f(p),u_label_plane_matrix:new s.UniformMatrix4f(p),u_coord_matrix:new s.UniformMatrix4f(p),u_is_text:new s.Uniform1i(p),u_pitch_with_map:new s.Uniform1i(p),u_texsize:new s.Uniform2f(p),u_texture:new s.Uniform1i(p),u_gamma_scale:new s.Uniform1f(p),u_device_pixel_ratio:new s.Uniform1f(p),u_tile_id:new s.Uniform3f(p),u_zoom_transition:new s.Uniform1f(p),u_inv_rot_matrix:new s.UniformMatrix4f(p),u_merc_center:new s.Uniform2f(p),u_camera_forward:new s.Uniform3f(p),u_tile_matrix:new s.UniformMatrix4f(p),u_up_vector:new s.Uniform3f(p),u_ecef_origin:new s.Uniform3f(p),u_is_halo:new s.Uniform1i(p)}),symbolTextAndIcon:p=>({u_is_size_zoom_constant:new s.Uniform1i(p),u_is_size_feature_constant:new s.Uniform1i(p),u_size_t:new s.Uniform1f(p),u_size:new s.Uniform1f(p),u_camera_to_center_distance:new s.Uniform1f(p),u_rotate_symbol:new s.Uniform1i(p),u_aspect_ratio:new s.Uniform1f(p),u_fade_change:new s.Uniform1f(p),u_matrix:new s.UniformMatrix4f(p),u_label_plane_matrix:new s.UniformMatrix4f(p),u_coord_matrix:new s.UniformMatrix4f(p),u_is_text:new s.Uniform1i(p),u_pitch_with_map:new s.Uniform1i(p),u_texsize:new s.Uniform2f(p),u_texsize_icon:new s.Uniform2f(p),u_texture:new s.Uniform1i(p),u_texture_icon:new s.Uniform1i(p),u_gamma_scale:new s.Uniform1f(p),u_device_pixel_ratio:new s.Uniform1f(p),u_is_halo:new s.Uniform1i(p)}),background:p=>({u_matrix:new s.UniformMatrix4f(p),u_opacity:new s.Uniform1f(p),u_color:new s.UniformColor(p)}),backgroundPattern:p=>({u_matrix:new s.UniformMatrix4f(p),u_opacity:new s.Uniform1f(p),u_image:new s.Uniform1i(p),u_pattern_tl:new s.Uniform2f(p),u_pattern_br:new s.Uniform2f(p),u_texsize:new s.Uniform2f(p),u_pattern_size:new s.Uniform2f(p),u_pixel_coord_upper:new s.Uniform2f(p),u_pixel_coord_lower:new s.Uniform2f(p),u_tile_units_to_pixels:new s.Uniform1f(p)}),terrainRaster:bd,terrainDepth:bd,skybox:p=>({u_matrix:new s.UniformMatrix4f(p),u_sun_direction:new s.Uniform3f(p),u_cubemap:new s.Uniform1i(p),u_opacity:new s.Uniform1f(p),u_temporal_offset:new s.Uniform1f(p)}),skyboxGradient:p=>({u_matrix:new s.UniformMatrix4f(p),u_color_ramp:new s.Uniform1i(p),u_center_direction:new s.Uniform3f(p),u_radius:new s.Uniform1f(p),u_opacity:new s.Uniform1f(p),u_temporal_offset:new s.Uniform1f(p)}),skyboxCapture:p=>({u_matrix_3f:new s.UniformMatrix3f(p),u_sun_direction:new s.Uniform3f(p),u_sun_intensity:new s.Uniform1f(p),u_color_tint_r:new s.Uniform4f(p),u_color_tint_m:new s.Uniform4f(p),u_luminance:new s.Uniform1f(p)}),globeRaster:p=>({u_proj_matrix:new s.UniformMatrix4f(p),u_globe_matrix:new s.UniformMatrix4f(p),u_normalize_matrix:new s.UniformMatrix4f(p),u_merc_matrix:new s.UniformMatrix4f(p),u_zoom_transition:new s.Uniform1f(p),u_merc_center:new s.Uniform2f(p),u_image0:new s.Uniform1i(p),u_grid_matrix:new s.UniformMatrix3f(p),u_skirt_height:new s.Uniform1f(p),u_frustum_tl:new s.Uniform3f(p),u_frustum_tr:new s.Uniform3f(p),u_frustum_br:new s.Uniform3f(p),u_frustum_bl:new s.Uniform3f(p),u_globe_pos:new s.Uniform3f(p),u_globe_radius:new s.Uniform1f(p),u_viewport:new s.Uniform2f(p)}),globeAtmosphere:p=>({u_frustum_tl:new s.Uniform3f(p),u_frustum_tr:new s.Uniform3f(p),u_frustum_br:new s.Uniform3f(p),u_frustum_bl:new s.Uniform3f(p),u_horizon:new s.Uniform1f(p),u_transition:new s.Uniform1f(p),u_fadeout_range:new s.Uniform1f(p),u_color:new s.Uniform4f(p),u_high_color:new s.Uniform4f(p),u_space_color:new s.Uniform4f(p),u_star_intensity:new s.Uniform1f(p),u_star_density:new s.Uniform1f(p),u_star_size:new s.Uniform1f(p),u_temporal_offset:new s.Uniform1f(p),u_horizon_angle:new s.Uniform1f(p),u_rotation_matrix:new s.UniformMatrix4f(p)})};let xl;function f_(p,l,h,y,x,b,A){const C=p.context,O=C.gl,U=p.transform,F=p.useProgram("collisionBox"),Z=[];let ne=0,oe=0;for(let ye=0;ye<y.length;ye++){const Se=y[ye],be=l.getTile(Se),Ce=be.getBucket(h);if(!Ce)continue;const Ne=Ap(Se,Ce,U);let We=Ne;x[0]===0&&x[1]===0||(We=p.translatePosMatrix(Ne,be,x,b));const Xe=A?Ce.textCollisionBox:Ce.iconCollisionBox,vt=Ce.collisionCircleArray;if(vt.length>0){const Ve=s.create(),ot=We;s.mul(Ve,Ce.placementInvProjMatrix,U.glCoordMatrix),s.mul(Ve,Ve,Ce.placementViewportMatrix),Z.push({circleArray:vt,circleOffset:oe,transform:ot,invTransform:Ve,projection:Ce.getProjection()}),ne+=vt.length/4,oe=ne}Xe&&(p.terrain&&p.terrain.setupElevationDraw(be,F),F.draw(C,O.LINES,s.DepthMode.disabled,s.StencilMode.disabled,p.colorModeForRenderPass(),s.CullFaceMode.disabled,c_(We,U,be,Ce.getProjection()),h.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,null,U.zoom,null,[Xe.collisionVertexBuffer,Xe.collisionVertexBufferExt]))}if(!A||!Z.length)return;const se=p.useProgram("collisionCircle"),ae=new s.StructArrayLayout2f1f2i16;ae.resize(4*ne),ae._trim();let le=0;for(const ye of Z)for(let Se=0;Se<ye.circleArray.length/4;Se++){const be=4*Se,Ce=ye.circleArray[be+0],Ne=ye.circleArray[be+1],We=ye.circleArray[be+2],Xe=ye.circleArray[be+3];ae.emplace(le++,Ce,Ne,We,Xe,0),ae.emplace(le++,Ce,Ne,We,Xe,1),ae.emplace(le++,Ce,Ne,We,Xe,2),ae.emplace(le++,Ce,Ne,We,Xe,3)}(!xl||xl.length<2*ne)&&(xl=function(ye){const Se=2*ye,be=new s.StructArrayLayout3ui6;be.resize(Se),be._trim();for(let Ce=0;Ce<Se;Ce++){const Ne=6*Ce;be.uint16[Ne+0]=4*Ce+0,be.uint16[Ne+1]=4*Ce+1,be.uint16[Ne+2]=4*Ce+2,be.uint16[Ne+3]=4*Ce+2,be.uint16[Ne+4]=4*Ce+3,be.uint16[Ne+5]=4*Ce+0}return be}(ne));const ee=C.createIndexBuffer(xl,!0),ge=C.createVertexBuffer(ae,s.collisionCircleLayout.members,!0);for(const ye of Z){const Se={u_matrix:ye.transform,u_inv_matrix:ye.invTransform,u_camera_to_center_distance:(me=U).getCameraToCenterDistance(ye.projection),u_viewport_size:[me.width,me.height]};se.draw(C,O.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,p.colorModeForRenderPass(),s.CullFaceMode.disabled,Se,h.id,ge,ee,s.SegmentVector.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,U.zoom)}var me;ge.destroy(),ee.destroy()}const Yp=s.create();function p_({width:p,height:l,anchor:h,textOffset:y,textScale:x},b){const{horizontalAlign:A,verticalAlign:C}=s.getAnchorAlignment(h),O=-(A-.5)*p,U=-(C-.5)*l,F=s.evaluateVariableOffset(h,y);return new s.pointGeometry((O/x+F[0])*b,(U/x+F[1])*b)}function fc(p,l,h,y,x,b,A,C,O,U,F){const Z=p.text.placedSymbolArray,ne=p.text.dynamicLayoutVertexArray,oe=p.icon.dynamicLayoutVertexArray,se={},ae=p.getProjection(),le=dd(C,ae,b),ee=b.elevation,ge=ae.upVectorScale(C.canonical,b.center.lat,b.worldSize).metersToTile;ne.clear();for(let me=0;me<Z.length;me++){const ye=Z.get(me),{tileAnchorX:Se,tileAnchorY:be,numGlyphs:Ce}=ye,Ne=p.allowVerticalPlacement&&!ye.placedOrientation,We=ye.hidden||!ye.crossTileID||Ne?null:y[ye.crossTileID];if(We){let Xe=0,vt=0,Ve=0;if(ee){const jt=ee?ee.getAtTileOffset(C,Se,be):0,[hn,Ft,zt]=ae.upVector(C.canonical,Se,be);Xe=jt*hn*ge,vt=jt*Ft*ge,Ve=jt*zt*ge}let[ot,et,ct,qe]=Et(ye.projectedAnchorX+Xe,ye.projectedAnchorY+vt,ye.projectedAnchorZ+Ve,h?le:A);const ze=Sn(b.getCameraToCenterDistance(ae),qe);let Qe=x.evaluateSizeForFeature(p.textSizeData,U,ye)*ze/s.ONE_EM;h&&(Qe*=p.tilePixelRatio/O);const at=p_(We,Qe);h?({x:ot,y:et,z:ct}=ae.projectTilePoint(Se+at.x,be+at.y,C.canonical),[ot,et,ct]=Et(ot+Xe,et+vt,ct+Ve,A)):(l&&at._rotate(-b.angle),ot+=at.x,et+=at.y,ct=0);const dt=p.allowVerticalPlacement&&ye.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let jt=0;jt<Ce;jt++)s.addDynamicAttributes(ne,ot,et,ct,dt);F&&ye.associatedIconIndex>=0&&(se[ye.associatedIconIndex]={x:ot,y:et,z:ct,angle:dt})}else rr(Ce,ne)}if(F){oe.clear();const me=p.icon.placedSymbolArray;for(let ye=0;ye<me.length;ye++){const Se=me.get(ye),{numGlyphs:be}=Se,Ce=se[ye];if(Se.hidden||!Ce)rr(be,oe);else{const{x:Ne,y:We,z:Xe,angle:vt}=Ce;for(let Ve=0;Ve<be;Ve++)s.addDynamicAttributes(oe,Ne,We,Xe,vt)}}p.icon.dynamicLayoutVertexBuffer.updateData(oe)}p.text.dynamicLayoutVertexBuffer.updateData(ne)}function zw(p,l,h){return h.iconsInText&&l?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function m_(p,l,h,y,x,b,A,C,O,U,F,Z){const ne=p.context,oe=ne.gl,se=p.transform,ae=C==="map",le=O==="map",ee=ae&&h.layout.get("symbol-placement")!=="point",ge=ae&&!le&&!ee,me=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ye=!1;const Se=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),be=[s.mercatorXfromLng(se.center.lng),s.mercatorYfromLat(se.center.lat)],Ce=h.layout.get("text-variable-anchor"),Ne=se.projection.name==="globe",We=[],Xe=[0,-1,0];let vt=Xe;!Ne&&!se.mercatorFromTransition||ae||(vt=function(Ve){const ot=Ve._camera.getWorldToCamera(Ve.worldSize,1),et=s.multiply([],ot,Ve.globeMatrix);s.invert(et,et);const ct=[0,0,0],qe=[0,1,0,0];return s.transformMat4$1(qe,qe,et),ct[0]=qe[0],ct[1]=qe[1],ct[2]=qe[2],s.normalize(ct,ct),ct}(se));for(const Ve of y){const ot=l.getTile(Ve),et=ot.getBucket(h);if(!et||et.projection.name==="mercator"&&Ne)continue;const ct=x?et.text:et.icon;if(!ct||et.fullyClipped||!ct.segments.get().length)continue;const qe=ct.programConfigurations.get(h.id),ze=x||et.sdfIcons,Qe=x?et.textSizeData:et.iconSizeData,at=le||se.pitch!==0,dt=s.evaluateSizeForZoom(Qe,se.zoom);let jt,hn,Ft,zt,$t=[0,0],wn=null;if(x){if(hn=ot.glyphAtlasTexture,Ft=oe.LINEAR,jt=ot.glyphAtlasTexture.size,et.iconsInText){$t=ot.imageAtlasTexture.size,wn=ot.imageAtlasTexture;const xo=Qe.kind==="composite"||Qe.kind==="camera";zt=at||p.options.rotating||p.options.zooming||xo?oe.LINEAR:oe.NEAREST}}else{const xo=h.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;hn=ot.imageAtlasTexture,Ft=ze||p.options.rotating||p.options.zooming||xo||at?oe.LINEAR:oe.NEAREST,jt=ot.imageAtlasTexture.size}const Zt=et.projection.name==="globe",Bn=Zt?vt:Xe,Un=Zt?s.globeToMercatorTransition(se.zoom):0,ir=dd(Ve,et.getProjection(),se),Jn=se.calculatePixelsToTileUnitsMatrix(ot),Gr=ic(ir,ot.tileID.canonical,le,ae,se,et.getProjection(),Jn),eo=p.terrain&&le&&ee?s.invert(s.create(),Gr):Yp,Qo=oc(ir,ot.tileID.canonical,le,ae,se,et.getProjection(),Jn),Xs=Ce&&et.hasTextData(),fr=h.layout.get("icon-text-fit")!=="none"&&Xs&&et.hasIconData();if(ee){const xo=se.elevation,No=xo?xo.getAtTileOffsetFunc(Ve,se.center.lat,se.worldSize,et.getProjection()):null,Qs=Xy(ir,ot.tileID.canonical,le,ae,se,et.getProjection(),Jn);vs(et,ir,p,x,Qs,Qo,le,U,No,Ve)}const er=ee||x&&Ce||fr,On=p.translatePosMatrix(ir,ot,b,A),Ir=er?Yp:Gr,Ci=p.translatePosMatrix(Qo,ot,b,A,!0),cr=et.getProjection().createInversionMatrix(se,Ve.canonical),Pi=[];p.terrainRenderModeElevated()&&le&&Pi.push("PITCH_WITH_MAP_TERRAIN"),Zt&&Pi.push("PROJECTION_GLOBE_VIEW"),er&&Pi.push("PROJECTED_POS_ON_VIEWPORT");const Ri=ze&&h.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ra;Ra=ze?et.iconsInText?Hp(Qe.kind,dt,ge,le,p,On,Ir,Ci,jt,$t,Ve,Un,be,cr,Bn,et.getProjection()):d_(Qe.kind,dt,ge,le,p,On,Ir,Ci,x,jt,!0,Ve,Un,be,cr,Bn,et.getProjection()):Gu(Qe.kind,dt,ge,le,p,On,Ir,Ci,x,jt,Ve,Un,be,cr,Bn,et.getProjection());const Tc={program:p.useProgram(zw(ze,x,et),qe,Pi),buffers:ct,uniformValues:Ra,atlasTexture:hn,atlasTextureIcon:wn,atlasInterpolation:Ft,atlasInterpolationIcon:zt,isSDF:ze,hasHalo:Ri,tile:ot,labelPlaneMatrixInv:eo};if(me&&et.canOverlap){ye=!0;const xo=ct.segments.get();for(const No of xo)We.push({segments:new s.SegmentVector([No]),sortKey:No.sortKey,state:Tc})}else We.push({segments:ct.segments,sortKey:0,state:Tc})}ye&&We.sort((Ve,ot)=>Ve.sortKey-ot.sortKey);for(const Ve of We){const ot=Ve.state;if(p.terrain&&p.terrain.setupElevationDraw(ot.tile,ot.program,{useDepthForOcclusion:!Ne,labelPlaneMatrixInv:ot.labelPlaneMatrixInv}),ne.activeTexture.set(oe.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,oe.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(ne.activeTexture.set(oe.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),ot.isSDF){const et=ot.uniformValues;ot.hasHalo&&(et.u_is_halo=1,g_(ot.buffers,Ve.segments,h,p,ot.program,Se,F,Z,et)),et.u_is_halo=0}g_(ot.buffers,Ve.segments,h,p,ot.program,Se,F,Z,ot.uniformValues)}}function g_(p,l,h,y,x,b,A,C,O){const U=y.context,F=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer];x.draw(U,U.gl.TRIANGLES,b,A,C,s.CullFaceMode.disabled,O,h.id,p.layoutVertexBuffer,p.indexBuffer,l,h.paint,y.transform.zoom,p.programConfigurations.get(h.id),F)}function y_(p,l,h,y,x,b,A){const C=p.context.gl,O=h.paint.get("fill-pattern"),U=O&&O.constantOr(1);let F,Z,ne,oe,se;A?(Z=U&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",F=C.LINES):(Z=U?"fillPattern":"fill",F=C.TRIANGLES);for(const ae of y){const le=l.getTile(ae);if(U&&!le.patternsLoaded())continue;const ee=le.getBucket(h);if(!ee)continue;p.prepareDrawTile();const ge=ee.programConfigurations.get(h.id),me=p.useProgram(Z,ge);U&&(p.context.activeTexture.set(C.TEXTURE0),le.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),ge.updatePaintBuffers());const ye=O.constantOr(null);if(ye&&le.imageAtlas){const be=le.imageAtlas.patternPositions[ye.toString()];be&&ge.setConstantPatternPositions(be)}const Se=p.translatePosMatrix(ae.projMatrix,le,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(A){oe=ee.indexBuffer2,se=ee.segments2;const be=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[C.drawingBufferWidth,C.drawingBufferHeight];ne=Z==="fillOutlinePattern"&&U?l_(Se,p,le,be):a_(Se,be)}else oe=ee.indexBuffer,se=ee.segments,ne=U?Md(Se,p,le):Id(Se);p.prepareDrawProgram(p.context,me,ae.toUnwrapped()),me.draw(p.context,F,x,p.stencilModeForClipping(ae),b,s.CullFaceMode.disabled,ne,h.id,ee.layoutVertexBuffer,oe,se,h.paint,p.transform.zoom,ge)}}function Xp(p,l,h,y,x,b,A){const C=p.context,O=C.gl,U=p.transform,F=h.paint.get("fill-extrusion-pattern"),Z=F.constantOr(1),ne=h.paint.get("fill-extrusion-opacity"),oe=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],se=h.layout.get("fill-extrusion-edge-radius"),ae=U.projection.name==="globe"?s.fillExtrusionHeightLift():0,le=U.projection.name==="globe",ee=le?s.globeToMercatorTransition(U.zoom):0,ge=[s.mercatorXfromLng(U.center.lng),s.mercatorYfromLat(U.center.lat)],me=[];le&&me.push("PROJECTION_GLOBE_VIEW"),oe[0]>0&&me.push("FAUX_AO");for(const ye of y){const Se=l.getTile(ye),be=Se.getBucket(h);if(!be||be.projection.name!==U.projection.name)continue;const Ce=be.programConfigurations.get(h.id),Ne=p.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Ce,me);if(p.terrain){const ct=p.terrain;if(p.style.terrainSetForDrapingOnly())ct.setupElevationDraw(Se,Ne,{useMeterToDem:!0});else{if(!be.enableTerrain)continue;if(ct.setupElevationDraw(Se,Ne,{useMeterToDem:!0}),Nw(C,l,ye,be,h,ct),!be.centroidVertexBuffer){const qe=Ne.attributes.a_centroid_pos;qe!==void 0&&O.vertexAttrib2f(qe,0,0)}}}Z&&(p.context.activeTexture.set(O.TEXTURE0),Se.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ce.updatePaintBuffers());const We=F.constantOr(null);if(We&&Se.imageAtlas){const ct=Se.imageAtlas.patternPositions[We.toString()];ct&&Ce.setConstantPatternPositions(ct)}const Xe=p.translatePosMatrix(ye.projMatrix,Se,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),vt=U.projection.createInversionMatrix(U,ye.canonical),Ve=h.paint.get("fill-extrusion-vertical-gradient"),ot=Z?jp(Xe,p,Ve,ne,oe,se,ye,Se,ae,ee,ge,vt):Sd(Xe,p,Ve,ne,oe,se,ye,ae,ee,ge,vt);p.prepareDrawProgram(C,Ne,ye.toUnwrapped());const et=[];p.terrain&&et.push(be.centroidVertexBuffer),le&&et.push(be.layoutVertexExtBuffer),Ne.draw(C,C.gl.TRIANGLES,x,b,A,s.CullFaceMode.backCCW,ot,h.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,h.paint,p.transform.zoom,Ce,et)}}function Nw(p,l,h,y,x,b){const A=[ee=>{let ge=ee.canonical.x-1,me=ee.wrap;return ge<0&&(ge=(1<<ee.canonical.z)-1,me--),new s.OverscaledTileID(ee.overscaledZ,me,ee.canonical.z,ge,ee.canonical.y)},ee=>{let ge=ee.canonical.x+1,me=ee.wrap;return ge===1<<ee.canonical.z&&(ge=0,me++),new s.OverscaledTileID(ee.overscaledZ,me,ee.canonical.z,ge,ee.canonical.y)},ee=>new s.OverscaledTileID(ee.overscaledZ,ee.wrap,ee.canonical.z,ee.canonical.x,(ee.canonical.y===0?1<<ee.canonical.z:ee.canonical.y)-1),ee=>new s.OverscaledTileID(ee.overscaledZ,ee.wrap,ee.canonical.z,ee.canonical.x,ee.canonical.y===(1<<ee.canonical.z)-1?0:ee.canonical.y+1)],C=ee=>{const ge=l.getSource().minzoom,me=Se=>{const be=l.getTileByID(Se);if(be&&be.hasData())return be.getBucket(x)},ye=[0,-1,1];for(const Se of ye){if(ee.overscaledZ+Se<ge)continue;const be=me(ee.calculateScaledKey(ee.overscaledZ+Se));if(be)return be}},O=[0,0,0],U=(ee,ge)=>(O[0]=Math.min(ee.min.y,ge.min.y),O[1]=Math.max(ee.max.y,ge.max.y),O[2]=s.EXTENT-ge.min.x>ee.max.x?ge.min.x-s.EXTENT:ee.max.x,O),F=(ee,ge)=>(O[0]=Math.min(ee.min.x,ge.min.x),O[1]=Math.max(ee.max.x,ge.max.x),O[2]=s.EXTENT-ge.min.y>ee.max.y?ge.min.y-s.EXTENT:ee.max.y,O),Z=[(ee,ge)=>U(ee,ge),(ee,ge)=>U(ge,ee),(ee,ge)=>F(ee,ge),(ee,ge)=>F(ge,ee)],ne=new s.pointGeometry(0,0);let oe,se,ae;const le=(ee,ge,me,ye,Se)=>{const be=[[ye?me:ee,ye?ee:me,0],[ye?me:ge,ye?ge:me,0]],Ce=Se<0?s.EXTENT+Se:Se,Ne=[ye?Ce:(ee+ge)/2,ye?(ee+ge)/2:Ce,0];return me===0&&Se<0||me!==0&&Se>0?b.getForTilePoints(ae,[Ne],!0,se):be.push(Ne),b.getForTilePoints(h,be,!0,oe),Math.max(be[0][2],be[1][2],Ne[2])/b.exaggeration()};for(let ee=0;ee<4;ee++){const ge=(ee<2?1:5)-ee,me=y.borders[ee];if(me.length===0)continue;const ye=ae=A[ee](h),Se=C(ye);if(!(Se&&Se instanceof s.FillExtrusionBucket&&Se.enableTerrain)||y.borderDoneWithNeighborZ[ee]===Se.canonical.z&&Se.borderDoneWithNeighborZ[ge]===y.canonical.z||(se=b.findDEMTileFor(ye),!se||!se.dem))continue;if(!oe){const We=b.findDEMTileFor(h);if(!We||!We.dem)return;oe=We}const be=Se.borders[ge];let Ce=0;const Ne=Se.borderDoneWithNeighborZ[ge]!==y.canonical.z;if(y.canonical.z===Se.canonical.z){for(let We=0;We<me.length;We++){const Xe=y.featuresOnBorder[me[We]],vt=Xe.borders[ee];let Ve;for(;Ce<be.length&&(Ve=Se.featuresOnBorder[be[Ce]],!(Ve.borders[ge][1]>vt[0]+3));)Ne&&Se.encodeCentroid(void 0,Ve,!1),Ce++;if(Ve&&Ce<be.length){const ot=Ce;let et=0;for(;!(Ve.borders[ge][0]>vt[1]-3)&&(et++,++Ce!==be.length);)Ve=Se.featuresOnBorder[be[Ce]];if(Ve=Se.featuresOnBorder[be[ot]],Xe.intersectsCount()>1||Ve.intersectsCount()>1||et!==1){et!==1&&(Ce=ot),y.encodeCentroid(void 0,Xe,!1),Ne&&Se.encodeCentroid(void 0,Ve,!1);continue}const ct=Z[ee](Xe,Ve),qe=ee%2?s.EXTENT-1:0;ne.x=le(ct[0],Math.min(s.EXTENT-1,ct[1]),qe,ee<2,ct[2]),ne.y=0,y.encodeCentroid(ne,Xe,!1),Ne&&Se.encodeCentroid(ne,Ve,!1)}else y.encodeCentroid(void 0,Xe,!1)}y.borderDoneWithNeighborZ[ee]=Se.canonical.z,y.needsCentroidUpdate=!0,Ne&&(Se.borderDoneWithNeighborZ[ge]=y.canonical.z,Se.needsCentroidUpdate=!0)}else{for(const We of me)y.encodeCentroid(void 0,y.featuresOnBorder[We],!1);if(Ne){for(const We of be)Se.encodeCentroid(void 0,Se.featuresOnBorder[We],!1);Se.borderDoneWithNeighborZ[ge]=y.canonical.z,Se.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[ee]=Se.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(p)}const Qp=new s.Color(1,0,0,1),Kp=new s.Color(0,1,0,1),__=new s.Color(0,0,1,1),v_=new s.Color(1,0,1,1),x_=new s.Color(0,1,1,1);function Jp(p,l,h){const y=p.context,x=p.transform,b=y.gl,A=x.projection.name==="globe",C=A?["PROJECTION_GLOBE_VIEW"]:null;let O=h.projMatrix;if(A&&s.globeToMercatorTransition(x.zoom)>0){const Xe=s.transitionTileAABBinECEF(h.canonical,x),vt=s.globeDenormalizeECEF(Xe);O=s.multiply(new Float32Array(16),x.globeMatrix,vt),s.multiply(O,x.projMatrix,O)}const U=p.useProgram("debug",null,C),F=l.getTileByID(h.key);p.terrain&&p.terrain.setupElevationDraw(F,U);const Z=s.DepthMode.disabled,ne=s.StencilMode.disabled,oe=p.colorModeForRenderPass(),se="$debug";y.activeTexture.set(b.TEXTURE0),p.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),A?F._makeGlobeTileDebugBuffers(p.context,x):F._makeDebugTileBoundsBuffers(p.context,x.projection);const ae=F._tileDebugBuffer||p.debugBuffer,le=F._tileDebugIndexBuffer||p.debugIndexBuffer,ee=F._tileDebugSegments||p.debugSegments;U.draw(y,b.LINE_STRIP,Z,ne,oe,s.CullFaceMode.disabled,ju(O,s.Color.red),se,ae,le,ee,null,null,null,[F._globeTileDebugBorderBuffer]);const ge=F.latestRawTileData,me=Math.floor((ge&&ge.byteLength||0)/1024),ye=l.getTile(h).tileSize,Se=512/Math.min(ye,512)*(h.overscaledZ/x.zoom)*.5;let be=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(be+=` => ${h.overscaledZ}`),be+=` ${me}kb`,function(Xe,vt){Xe.initDebugOverlayCanvas();const Ve=Xe.debugOverlayCanvas,ot=Xe.context.gl,et=Xe.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,Ve.width,Ve.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(vt,5,5),et.strokeText(vt,5,5),Xe.debugOverlayTexture.update(Ve),Xe.debugOverlayTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE)}(p,be);const Ce=F._tileDebugTextBuffer||p.debugBuffer,Ne=F._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,We=F._tileDebugTextSegments||p.debugSegments;U.draw(y,b.TRIANGLES,Z,ne,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,ju(O,s.Color.transparent,Se),se,Ce,Ne,We,null,null,null,[F._globeTileDebugTextBuffer])}function Pa(p,l,h,y){$u(p,0,l+h/2,p.transform.width,h,y)}function pc(p,l,h,y){$u(p,l-h/2,0,h,p.transform.height,y)}function $u(p,l,h,y,x,b){const A=p.context,C=A.gl;C.enable(C.SCISSOR_TEST),C.scissor(l*s.exported.devicePixelRatio,h*s.exported.devicePixelRatio,y*s.exported.devicePixelRatio,x*s.exported.devicePixelRatio),A.clear({color:b}),C.disable(C.SCISSOR_TEST)}const mc=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:gc}=mc;function Zs(p,l,h,y){p.emplaceBack(l,h,y)}class Pd{constructor(l){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Zs(this.vertexArray,-1,-1,1),Zs(this.vertexArray,1,-1,1),Zs(this.vertexArray,-1,1,1),Zs(this.vertexArray,1,1,1),Zs(this.vertexArray,-1,-1,-1),Zs(this.vertexArray,1,-1,-1),Zs(this.vertexArray,-1,1,-1),Zs(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,gc),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function Cn(p,l,h,y,x,b){const A=p.gl,C=l.paint.get("sky-atmosphere-color"),O=l.paint.get("sky-atmosphere-halo-color"),U=l.paint.get("sky-atmosphere-sun-intensity"),F=((Z,ne,oe,se,ae)=>({u_matrix_3f:Z,u_sun_direction:ne,u_sun_intensity:oe,u_color_tint_r:[se.r,se.g,se.b,se.a],u_color_tint_m:[ae.r,ae.g,ae.b,ae.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),y),x,U,C,O);A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+b,l.skyboxTexture,0),h.draw(p,A.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,F,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Rd=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Bw{constructor(l){const h=new s.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const y=new s.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(h,Rd.members),this.indexBuffer=l.createIndexBuffer(y),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const em={symbol:function(p,l,h,y,x){if(p.renderPass!=="translucent")return;const b=s.StencilMode.disabled,A=p.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(C,O,U,F,Z,ne,oe){const se=O.transform,ae=Z==="map",le=ne==="map";for(const ee of C){const ge=F.getTile(ee),me=ge.getBucket(U);if(!me||!me.text||!me.text.segments.get().length)continue;const ye=s.evaluateSizeForZoom(me.textSizeData,se.zoom),Se=dd(ee,me.getProjection(),se),be=se.calculatePixelsToTileUnitsMatrix(ge),Ce=ic(Se,ge.tileID.canonical,le,ae,se,me.getProjection(),be),Ne=U.layout.get("icon-text-fit")!=="none"&&me.hasIconData();if(ye){const We=Math.pow(2,se.zoom-ge.tileID.overscaledZ);fc(me,ae,le,oe,s.symbolSize,se,Ce,ee,We,ye,Ne)}}}(y,p,h,l,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),x),h.paint.get("icon-opacity").constantOr(1)!==0&&m_(p,l,h,y,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),b,A),h.paint.get("text-opacity").constantOr(1)!==0&&m_(p,l,h,y,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),b,A),l.map.showCollisionBoxes&&(f_(p,l,h,y,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),f_(p,l,h,y,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(p,l,h,y){if(p.renderPass!=="translucent")return;const x=h.paint.get("circle-opacity"),b=h.paint.get("circle-stroke-width"),A=h.paint.get("circle-stroke-opacity"),C=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)===0&&(b.constantOr(1)===0||A.constantOr(1)===0))return;const O=p.context,U=O.gl,F=p.transform,Z=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),ne=s.StencilMode.disabled,oe=p.colorModeForRenderPass(),se=F.projection.name==="globe",ae=[s.mercatorXfromLng(F.center.lng),s.mercatorYfromLat(F.center.lat)],le=[];for(let ge=0;ge<y.length;ge++){const me=y[ge],ye=l.getTile(me),Se=ye.getBucket(h);if(!Se||Se.projection.name!==F.projection.name)continue;const be=Se.programConfigurations.get(h.id),Ce=Vu(h);se&&Ce.push("PROJECTION_GLOBE_VIEW");const Ne=p.useProgram("circle",be,Ce),We=Se.layoutVertexBuffer,Xe=Se.globeExtVertexBuffer,vt=Se.indexBuffer,Ve=F.projection.createInversionMatrix(F,me.canonical),ot={programConfiguration:be,program:Ne,layoutVertexBuffer:We,globeExtVertexBuffer:Xe,indexBuffer:vt,uniformValues:Uu(p,me,ye,Ve,ae,h),tile:ye};if(C){const et=Se.segments.get();for(const ct of et)le.push({segments:new s.SegmentVector([ct]),sortKey:ct.sortKey,state:ot})}else le.push({segments:Se.segments,sortKey:0,state:ot})}C&&le.sort((ge,me)=>ge.sortKey-me.sortKey);const ee={useDepthForOcclusion:!se};for(const ge of le){const{programConfiguration:me,program:ye,layoutVertexBuffer:Se,globeExtVertexBuffer:be,indexBuffer:Ce,uniformValues:Ne,tile:We}=ge.state,Xe=ge.segments;p.terrain&&p.terrain.setupElevationDraw(We,ye,ee),p.prepareDrawProgram(O,ye,We.tileID.toUnwrapped()),ye.draw(O,U.TRIANGLES,Z,ne,oe,s.CullFaceMode.disabled,Ne,h.id,Se,Ce,Xe,h.paint,F.zoom,me,[be])}},heatmap:function(p,l,h,y){if(h.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const x=p.context,b=x.gl,A=s.StencilMode.disabled,C=new s.ColorMode([b.ONE,b.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(oe,se,ae,le){const ee=oe.gl,ge=se.width*le,me=se.height*le;oe.activeTexture.set(ee.TEXTURE1),oe.viewport.set([0,0,ge,me]);let ye=ae.heatmapFbo;if(!ye||ye&&(ye.width!==ge||ye.height!==me)){ye&&ye.destroy();const Se=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,Se),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),ye=ae.heatmapFbo=oe.createFramebuffer(ge,me,!1),function(be,Ce,Ne,We,Xe,vt){const Ve=be.gl;Ve.texImage2D(Ve.TEXTURE_2D,0,be.isWebGL2&&be.extRenderToTextureHalfFloat?Ve.RGBA16F:Ve.RGBA,Xe,vt,0,Ve.RGBA,be.extRenderToTextureHalfFloat?be.isWebGL2?Ve.HALF_FLOAT:be.extTextureHalfFloat.HALF_FLOAT_OES:Ve.UNSIGNED_BYTE,null),We.colorAttachment.set(Ne)}(oe,0,Se,ye,ge,me)}else ee.bindTexture(ee.TEXTURE_2D,ye.colorAttachment.get()),oe.bindFramebuffer.set(ye.framebuffer)})(x,p,h,p.transform.projection.name==="globe"?.5:.25),x.clear({color:s.Color.transparent});const O=p.transform,U=O.projection.name==="globe",F=U?["PROJECTION_GLOBE_VIEW"]:null,Z=U?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,ne=[s.mercatorXfromLng(O.center.lng),s.mercatorYfromLat(O.center.lat)];for(let oe=0;oe<y.length;oe++){const se=y[oe];if(l.hasRenderableParent(se))continue;const ae=l.getTile(se),le=ae.getBucket(h);if(!le||le.projection.name!==O.projection.name)continue;const ee=le.programConfigurations.get(h.id),ge=p.useProgram("heatmap",ee,F),{zoom:me}=p.transform;p.terrain&&p.terrain.setupElevationDraw(ae,ge),p.prepareDrawProgram(x,ge,se.toUnwrapped());const ye=O.projection.createInversionMatrix(O,se.canonical);ge.draw(x,b.TRIANGLES,s.DepthMode.disabled,A,C,Z,xs(p,se,ae,ye,ne,me,h.paint.get("heatmap-intensity")),h.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,h.paint,p.transform.zoom,ee,U?[le.globeExtVertexBuffer]:null)}x.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(x,b){const A=x.context,C=A.gl,O=b.heatmapFbo;if(!O)return;A.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,O.colorAttachment.get()),A.activeTexture.set(C.TEXTURE1);let U=b.colorRampTexture;U||(U=b.colorRampTexture=new s.Texture(A,b.colorRamp,C.RGBA)),U.bind(C.LINEAR,C.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(A,C.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,x.colorModeForRenderPass(),s.CullFaceMode.disabled,((F,Z,ne,oe)=>({u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}))(0,b),b.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,b.paint,x.transform.zoom)}(p,h))},line:function(p,l,h,y){if(p.renderPass!=="translucent")return;const x=h.paint.get("line-opacity"),b=h.paint.get("line-width");if(x.constantOr(1)===0||b.constantOr(1)===0)return;const A=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),C=p.colorModeForRenderPass(),O=p.terrain&&p.terrain.renderingToTexture?1:s.exported.devicePixelRatio,U=h.paint.get("line-dasharray"),F=U.constantOr(1),Z=h.layout.get("line-cap"),ne=h.paint.get("line-pattern"),oe=ne.constantOr(1),se=h.paint.get("line-gradient"),ae=oe?"linePattern":"line",le=p.context,ee=le.gl,ge=(ye=>{const Se=[];Cd(ye)&&Se.push("RENDER_LINE_DASH"),ye.paint.get("line-gradient")&&Se.push("RENDER_LINE_GRADIENT");const be=ye.paint.get("line-trim-offset");be[0]===0&&be[1]===0||Se.push("RENDER_LINE_TRIM_OFFSET");const Ce=ye.paint.get("line-pattern").constantOr(1),Ne=ye.paint.get("line-opacity").constantOr(1)!==1;return!Ce&&Ne&&Se.push("RENDER_LINE_ALPHA_DISCARD"),Se})(h);let me=ge.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(me=!1);for(const ye of y){const Se=l.getTile(ye);if(oe&&!Se.patternsLoaded())continue;const be=Se.getBucket(h);if(!be)continue;p.prepareDrawTile();const Ce=be.programConfigurations.get(h.id),Ne=p.useProgram(ae,Ce,ge),We=ne.constantOr(null);if(We&&Se.imageAtlas){const ze=Se.imageAtlas.patternPositions[We.toString()];ze&&Ce.setConstantPatternPositions(ze)}const Xe=U.constantOr(null),vt=Z.constantOr(null);if(!oe&&Xe&&vt&&Se.lineAtlas){const ze=Se.lineAtlas.getDash(Xe,vt);ze&&Ce.setConstantPatternPositions(ze)}let[Ve,ot]=h.paint.get("line-trim-offset");(vt==="round"||vt==="square")&&Ve!==ot&&(Ve===0&&(Ve-=1),ot===1&&(ot+=1));const et=p.terrain?ye.projMatrix:null,ct=oe?u_(p,Se,h,et,O):$p(p,Se,h,et,be.lineClipsArray.length,O,[Ve,ot]);if(se){const ze=be.gradients[h.id];let Qe=ze.texture;if(h.gradientVersion!==ze.version){let at=256;if(h.stepInterpolant){const dt=l.getSource().maxzoom,jt=ye.canonical.z===dt?Math.ceil(1<<p.transform.maxZoom-ye.canonical.z):1;at=s.clamp(s.nextPowerOfTwo(be.maxLineLength/s.EXTENT*1024*jt),256,le.maxTextureSize)}ze.gradient=s.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:at,image:ze.gradient||void 0,clips:be.lineClipsArray}),ze.texture?ze.texture.update(ze.gradient):ze.texture=new s.Texture(le,ze.gradient,ee.RGBA),ze.version=h.gradientVersion,Qe=ze.texture}le.activeTexture.set(ee.TEXTURE1),Qe.bind(h.stepInterpolant?ee.NEAREST:ee.LINEAR,ee.CLAMP_TO_EDGE)}F&&(le.activeTexture.set(ee.TEXTURE0),Se.lineAtlasTexture.bind(ee.LINEAR,ee.REPEAT),Ce.updatePaintBuffers()),oe&&(le.activeTexture.set(ee.TEXTURE0),Se.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),Ce.updatePaintBuffers()),p.prepareDrawProgram(le,Ne,ye.toUnwrapped());const qe=ze=>{Ne.draw(le,ee.TRIANGLES,A,ze,C,s.CullFaceMode.disabled,ct,h.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,h.paint,p.transform.zoom,Ce,[be.layoutVertexBuffer2])};if(me){const ze=p.stencilModeForClipping(ye).ref;ze===0&&p.terrain&&le.clear({stencil:0});const Qe={func:ee.EQUAL,mask:255};ct.u_alpha_discard_threshold=.8,qe(new s.StencilMode(Qe,ze,255,ee.KEEP,ee.KEEP,ee.INVERT)),ct.u_alpha_discard_threshold=0,qe(new s.StencilMode(Qe,ze,255,ee.KEEP,ee.KEEP,ee.KEEP))}else qe(p.stencilModeForClipping(ye))}me&&(p.resetStencilClippingMasks(),p.terrain&&le.clear({stencil:0}))},fill:function(p,l,h,y){const x=h.paint.get("fill-color"),b=h.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const A=p.colorModeForRenderPass(),C=h.paint.get("fill-pattern"),O=p.opaquePassEnabledForLayer()&&!C.constantOr(1)&&x.constantOr(s.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===O){const U=p.depthModeForSublayer(1,p.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);y_(p,l,h,y,U,A,!1)}if(p.renderPass==="translucent"&&h.paint.get("fill-antialias")){const U=p.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);y_(p,l,h,y,U,A,!0)}},"fill-extrusion":function(p,l,h,y){const x=h.paint.get("fill-extrusion-opacity");if(x!==0&&p.renderPass==="translucent"){const b=new s.DepthMode(p.context.gl.LEQUAL,s.DepthMode.ReadWrite,p.depthRangeFor3D);if(x!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))Xp(p,l,h,y,b,s.StencilMode.disabled,s.ColorMode.disabled),Xp(p,l,h,y,b,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const A=p.colorModeForRenderPass();Xp(p,l,h,y,b,s.StencilMode.disabled,A)}}},hillshade:function(p,l,h,y){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const x=p.context,b=p.depthModeForSublayer(0,s.DepthMode.ReadOnly),A=p.colorModeForRenderPass(),C=p.terrain&&p.terrain.renderingToTexture,[O,U]=p.renderPass!=="translucent"||C?[{},y]:p.stencilConfigForOverlap(y);for(const F of U){const Z=l.getTile(F);if(Z.needsHillshadePrepare&&p.renderPass==="offscreen")wd(p,Z,h,b,s.StencilMode.disabled,A);else if(p.renderPass==="translucent"){const ne=C&&p.terrain?p.terrain.stencilModeForRTTOverlap(F):O[F.overscaledZ];Nu(p,F,Z,h,b,ne,A)}}x.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,l,h,y,x,b){if(p.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!y.length)return;const A=p.context,C=A.gl,O=l.getSource(),U=p.useProgram("raster"),F=p.colorModeForRenderPass(),Z=p.terrain&&p.terrain.renderingToTexture,[ne,oe]=O instanceof Ie||Z?[{},y]:p.stencilConfigForOverlap(y),se=oe[oe.length-1].overscaledZ,ae=!p.options.moving;for(const le of oe){const ee=Z?s.DepthMode.disabled:p.depthModeForSublayer(le.overscaledZ-se,h.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,C.LESS),ge=le.toUnwrapped(),me=l.getTile(le);if(Z&&(!me||!me.hasData()))continue;const ye=Z?le.projMatrix:p.transform.calculateProjMatrix(ge,ae),Se=p.terrain&&Z?p.terrain.stencilModeForRTTOverlap(le):ne[le.overscaledZ],be=b?0:h.paint.get("raster-fade-duration");me.registerFadeDuration(be);const Ce=l.findLoadedParent(le,0),Ne=Fu(me,Ce,l,p.transform,be);let We,Xe;p.terrain&&p.terrain.prepareDrawTile();const vt=h.paint.get("raster-resampling")==="nearest"?C.NEAREST:C.LINEAR;A.activeTexture.set(C.TEXTURE0),me.texture.bind(vt,C.CLAMP_TO_EDGE),A.activeTexture.set(C.TEXTURE1),Ce?(Ce.texture.bind(vt,C.CLAMP_TO_EDGE),We=Math.pow(2,Ce.tileID.overscaledZ-me.tileID.overscaledZ),Xe=[me.tileID.canonical.x*We%1,me.tileID.canonical.y*We%1]):me.texture.bind(vt,C.CLAMP_TO_EDGE),me.texture.useMipmap&&A.extTextureFilterAnisotropic&&p.transform.pitch>20&&C.texParameterf(C.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax);const Ve=Ow(ye,Xe||[0,0],We||1,Ne,h,O instanceof Ie?O.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(A,U,ge),O instanceof Ie)O.boundsBuffer&&O.boundsSegments&&U.draw(A,C.TRIANGLES,ee,s.StencilMode.disabled,F,s.CullFaceMode.disabled,Ve,h.id,O.boundsBuffer,p.quadTriangleIndexBuffer,O.boundsSegments);else{const{tileBoundsBuffer:ot,tileBoundsIndexBuffer:et,tileBoundsSegments:ct}=p.getTileBoundsBuffers(me);U.draw(A,C.TRIANGLES,ee,Se,F,s.CullFaceMode.disabled,Ve,h.id,ot,et,ct)}}p.resetStencilClippingMasks()},background:function(p,l,h,y){const x=h.paint.get("background-color"),b=h.paint.get("background-opacity");if(b===0)return;const A=p.context,C=A.gl,O=p.transform,U=O.tileSize,F=h.paint.get("background-pattern");if(p.isPatternMissing(F))return;const Z=!F&&x.a===1&&b===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==Z)return;const ne=s.StencilMode.disabled,oe=p.depthModeForSublayer(0,Z==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),se=p.colorModeForRenderPass(),ae=p.useProgram(F?"backgroundPattern":"background");let le,ee=y;ee||(le=p.getBackgroundTiles(),ee=Object.values(le).map(ge=>ge.tileID)),F&&(A.activeTexture.set(C.TEXTURE0),p.imageManager.bind(p.context));for(const ge of ee){const me=ge.toUnwrapped(),ye=y?ge.projMatrix:p.transform.calculateProjMatrix(me);p.prepareDrawTile();const Se=l?l.getTile(ge):le?le[ge.key]:new s.Tile(ge,U,O.zoom,p),be=F?Zp(ye,b,p,F,{tileID:ge,tileSize:U}):kw(ye,b,x);p.prepareDrawProgram(A,ae,me);const{tileBoundsBuffer:Ce,tileBoundsIndexBuffer:Ne,tileBoundsSegments:We}=p.getTileBoundsBuffers(Se);ae.draw(A,C.TRIANGLES,oe,ne,se,s.CullFaceMode.disabled,be,h.id,Ce,Ne,We)}},sky:function(p,l,h){const y=p.transform,x=y.projection.name==="mercator"||y.projection.name==="globe"?1:s.smoothstep(7,8,y.zoom),b=h.paint.get("sky-opacity")*x;if(b===0)return;const A=p.context,C=h.paint.get("sky-type"),O=new s.DepthMode(A.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),U=p.frameCounter/1e3%1;C==="atmosphere"?p.renderPass==="offscreen"?h.needsSkyboxCapture(p)&&(function(F,Z,ne,oe){const se=F.context,ae=se.gl;let le=Z.skyboxFbo;if(!le){le=Z.skyboxFbo=se.createFramebuffer(32,32,!1),Z.skyboxGeometry=new Pd(se),Z.skyboxTexture=se.gl.createTexture(),ae.bindTexture(ae.TEXTURE_CUBE_MAP,Z.skyboxTexture),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MAG_FILTER,ae.LINEAR);for(let ye=0;ye<6;++ye)ae.texImage2D(ae.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,ae.RGBA,32,32,0,ae.RGBA,ae.UNSIGNED_BYTE,null)}se.bindFramebuffer.set(le.framebuffer),se.viewport.set([0,0,32,32]);const ee=Z.getCenter(F,!0),ge=F.useProgram("skyboxCapture"),me=new Float64Array(16);s.identity(me),s.rotateY(me,me,.5*-Math.PI),Cn(se,Z,ge,me,ee,0),s.identity(me),s.rotateY(me,me,.5*Math.PI),Cn(se,Z,ge,me,ee,1),s.identity(me),s.rotateX(me,me,.5*-Math.PI),Cn(se,Z,ge,me,ee,2),s.identity(me),s.rotateX(me,me,.5*Math.PI),Cn(se,Z,ge,me,ee,3),s.identity(me),Cn(se,Z,ge,me,ee,4),s.identity(me),s.rotateY(me,me,Math.PI),Cn(se,Z,ge,me,ee,5),se.viewport.set([0,0,F.width,F.height])}(p,h),h.markSkyboxValid(p)):p.renderPass==="sky"&&function(F,Z,ne,oe,se){const ae=F.context,le=ae.gl,ee=F.transform,ge=F.useProgram("skybox");ae.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_CUBE_MAP,Z.skyboxTexture);const me=((ye,Se,be,Ce,Ne)=>({u_matrix:ye,u_sun_direction:Se,u_cubemap:0,u_opacity:Ce,u_temporal_offset:Ne}))(ee.skyboxMatrix,Z.getCenter(F,!1),0,oe,se);F.prepareDrawProgram(ae,ge),ge.draw(ae,le.TRIANGLES,ne,s.StencilMode.disabled,F.colorModeForRenderPass(),s.CullFaceMode.backCW,me,"skybox",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(p,h,O,b,U):C==="gradient"&&p.renderPass==="sky"&&function(F,Z,ne,oe,se){const ae=F.context,le=ae.gl,ee=F.transform,ge=F.useProgram("skyboxGradient");Z.skyboxGeometry||(Z.skyboxGeometry=new Pd(ae)),ae.activeTexture.set(le.TEXTURE0);let me=Z.colorRampTexture;me||(me=Z.colorRampTexture=new s.Texture(ae,Z.colorRamp,le.RGBA)),me.bind(le.LINEAR,le.CLAMP_TO_EDGE);const ye=((Se,be,Ce,Ne,We)=>({u_matrix:Se,u_color_ramp:0,u_center_direction:be,u_radius:s.degToRad(Ce),u_opacity:Ne,u_temporal_offset:We}))(ee.skyboxMatrix,Z.getCenter(F,!1),Z.paint.get("sky-gradient-radius"),oe,se);F.prepareDrawProgram(ae,ge),ge.draw(ae,le.TRIANGLES,ne,s.StencilMode.disabled,F.colorModeForRenderPass(),s.CullFaceMode.backCW,ye,"skyboxGradient",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(p,h,O,b,U)},debug:function(p,l,h){for(let y=0;y<h.length;y++)Jp(p,l,h[y])},custom:function(p,l,h,y){const x=p.context,b=h.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&h.isLayerDraped()){if(p.renderPass==="offscreen"){const A=b.prerender;if(A){if(p.setCustomLayerDefaults(),x.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const C=p.transform.pointMerc;A.call(b,x.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(p.transform.zoom),[C.x,C.y],p.transform.pixelsPerMeterRatio)}else A.call(b,x.gl,p.transform.customLayerMatrix());x.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const C=b.renderToTile;if(C){const O=y[0].canonical,U=new s.MercatorCoordinate(O.x+y[0].wrap*(1<<O.z),O.y,O.z);x.setDepthMode(s.DepthMode.disabled),x.setStencilMode(s.StencilMode.disabled),x.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),C.call(b,x.gl,U),x.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),x.setColorMode(p.colorModeForRenderPass()),x.setStencilMode(s.StencilMode.disabled);const A=b.renderingMode==="3d"?new s.DepthMode(p.context.gl.LEQUAL,s.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(x.setDepthMode(A),p.transform.projection.name==="globe"){const C=p.transform.pointMerc;b.render(x.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(p.transform.zoom),[C.x,C.y],p.transform.pixelsPerMeterRatio)}else b.render(x.gl,p.transform.customLayerMatrix());x.setDirty(),p.setBaseState(),x.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Wu{constructor(l,h,y=!1){this.context=new fe(l,y),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jy,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,h){const y=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Up(this,l));const x=this._terrain;this.transform.elevation=y?x:null,x.update(l,this.transform,h)}_updateFog(l){const h=l.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,x]=h.getFovAdjustedRange(this.transform._fov);if(y>x)return void(this.transform.fogCullDistSq=null);const b=y+.78*(x-y);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,h){if(this.width=l*s.exported.devicePixelRatio,this.height=h*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const l=this.context,h=new s.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(s.EXTENT,0),h.emplaceBack(0,s.EXTENT),h.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(h,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const y=new s.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(s.EXTENT,0),y.emplaceBack(0,s.EXTENT),y.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=l.createVertexBuffer(y,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const x=new s.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(x,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const b=new s.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(s.EXTENT,0,s.EXTENT,0),b.emplaceBack(0,s.EXTENT,0,s.EXTENT),b.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(b,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const A=new s.StructArrayLayout3ui6;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(A);const C=new s.StructArrayLayout1ui2;for(const U of[0,1,3,2,0])C.emplaceBack(U);this.debugIndexBuffer=l.createIndexBuffer(C),this.emptyTexture=new s.Texture(l,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=s.create();const O=this.context.gl;this.stencilClearMode=new s.StencilMode({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new Bw(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,h.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Rn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,h,y){if(!h||this.currentStencilSource===h.id||!l.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let C=!1;for(const O of y)if(this._tileClippingMaskIDs[O.key]===void 0){C=!0;break}if(!C)return}this.currentStencilSource=h.id;const x=this.context,b=x.gl;this.nextStencilID+y.length>256&&this.clearStencil(),x.setColorMode(s.ColorMode.disabled),x.setDepthMode(s.DepthMode.disabled);const A=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of y){const O=h.getTile(C),U=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,{tileBoundsBuffer:F,tileBoundsIndexBuffer:Z,tileBoundsSegments:ne}=this.getTileBoundsBuffers(O);A.draw(x,b.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:b.ALWAYS,mask:0},U,255,b.KEEP,b.KEEP,b.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Rn(C.projMatrix),"$clipping",F,Z,ne)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new s.StencilMode({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const h=this.context.gl;return new s.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(l){const h=this.context.gl,y=l.sort((A,C)=>C.overscaledZ-A.overscaledZ),x=y[y.length-1].overscaledZ,b=y[0].overscaledZ-x+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const A={};for(let C=0;C<b;C++)A[C+x]=new s.StencilMode({func:h.GEQUAL,mask:255},C+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=b,[A,y]}return[{[x]:s.StencilMode.disabled},y]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([l.CONSTANT_COLOR,l.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(l,h,y){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new s.DepthMode(y||this.context.gl.LEQUAL,h,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){this.style=l,this.options=h,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const y=this.style.order,x=this.style._sourceCaches;for(const U in x){const F=x[U];F.used&&F.prepare(this.context)}const b={},A={},C={};for(const U in x){const F=x[U];b[U]=F.getVisibleCoordinates(),A[U]=b[U].slice().reverse(),C[U]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let U=0;U<y.length;U++)if(this.style._layers[y[U]].is3D()){this.opaquePassCutoff=U;break}if(this.terrain&&(this.terrain.updateTileBinding(C),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const U of y){const F=this.style._layers[U],Z=l._getLayerSourceCache(F);if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;const ne=Z?A[Z.id]:void 0;(F.type==="custom"||F.isSky()||ne&&ne.length)&&this.renderLayer(this,Z,F,ne)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const O=this.terrain;if(O&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&O.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const U=this.style._layers[y[this.currentLayer]],F=l._getLayerSourceCache(U);if(U.isSky())continue;const Z=F?A[F.id]:void 0;this._renderTileClippingMasks(U,F,Z),this.renderLayer(this,F,U,Z)}if(this.style.fog&&this.transform.projection.supportsFog&&function(U,F){const Z=U.context,ne=Z.gl,oe=U.transform,se=new s.DepthMode(ne.LEQUAL,s.DepthMode.ReadOnly,[0,1]),ae=U.useProgram("globeAtmosphere",null,oe.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),le=s.globeToMercatorTransition(oe.zoom),ee=F.properties.get("color").toArray01(),ge=F.properties.get("high-color").toArray01(),me=F.properties.get("space-color").toArray01PremultipliedAlpha(),ye=s.identity$1([]);s.rotateY$1(ye,ye,-s.degToRad(oe._center.lng)),s.rotateX$1(ye,ye,s.degToRad(oe._center.lat)),s.rotateZ$1(ye,ye,oe.angle),s.rotateX$1(ye,ye,-oe._pitch);const Se=s.fromQuat(new Float32Array(16),ye),be=s.mapValue(F.properties.get("star-intensity"),0,1,0,.25),Ce=5e-4,Ne=s.mapValue(F.properties.get("horizon-blend"),0,1,Ce,.25),We=s.globeUseCustomAntiAliasing(U,Z,oe)&&Ne===Ce?oe.worldSize/(2*Math.PI*1.025)-1:oe.globeRadius,Xe=U.frameCounter/1e3%1,vt=s.length(oe.globeCenterInViewSpace),Ve=Math.sqrt(Math.pow(vt,2)-Math.pow(We,2)),ot=Math.acos(Ve/vt),et=((qe,ze,Qe,at,dt,jt,hn,Ft,zt,$t,wn,Zt,Bn,Un)=>({u_frustum_tl:qe,u_frustum_tr:ze,u_frustum_br:Qe,u_frustum_bl:at,u_horizon:dt,u_transition:jt,u_fadeout_range:hn,u_color:Ft,u_high_color:zt,u_space_color:$t,u_star_intensity:wn,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Zt,u_horizon_angle:Bn,u_rotation_matrix:Un}))(oe.frustumCorners.TL,oe.frustumCorners.TR,oe.frustumCorners.BR,oe.frustumCorners.BL,oe.frustumCorners.horizon,le,Ne,ee,ge,me,be,Xe,ot,Se);U.prepareDrawProgram(Z,ae);const ct=U.atmosphereBuffer;ct&&ae.draw(Z,ne.TRIANGLES,se,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,et,"skybox",ct.vertexBuffer,ct.indexBuffer,ct.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const U=this.style._layers[y[this.currentLayer]],F=l._getLayerSourceCache(U);U.isSky()&&this.renderLayer(this,F,U,F?A[F.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const U=this.style._layers[y[this.currentLayer]],F=l._getLayerSourceCache(U);if(U.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(U)){if(U.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Z=F?(U.type==="symbol"?C:A)[F.id]:void 0;this._renderTileClippingMasks(U,F,F?b[F.id]:void 0),this.renderLayer(this,F,U,Z),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let U=null;s.values(this.style._layers).forEach(F=>{const Z=l._getLayerSourceCache(F);Z&&!F.isHidden(this.transform.zoom)&&(!U||U.getSource().maxzoom<Z.getSource().maxzoom)&&(U=Z)}),U&&this.options.showTileBoundaries&&em.debug(this,U,U.getVisibleCoordinates())}this.options.showPadding&&function(U){const F=U.transform.padding;Pa(U,U.transform.height-(F.top||0),3,Qp),Pa(U,F.bottom||0,3,Kp),pc(U,F.left||0,3,__),pc(U,U.transform.width-(F.right||0),3,v_);const Z=U.transform.centerPoint;(function(ne,oe,se,ae){$u(ne,oe-1,se-10,2,20,ae),$u(ne,oe-10,se-1,20,2,ae)})(U,Z.x,U.transform.height-Z.y,x_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,h,y,x){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||x&&x.length)&&(this.id=y.id,this.gpuTimingStart(y),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(y.type)||l.terrain&&y.type==="custom")&&em[y.type](l,h,y,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let y=this.gpuTimers[l.id];y||(y=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),y.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,h=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),l.beginQueryEXT(l.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const h={};for(const y in l){const x=l[y],b=this.context.extTimerQuery,A=b.getQueryObjectEXT(x.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(x.query),h[y]=A}return h}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let y=0;for(const x of l)y+=h.getQueryObjectEXT(x,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(x);return y}translatePosMatrix(l,h,y,x,b){if(!y[0]&&!y[1])return l;const A=b?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(A){const U=Math.sin(A),F=Math.cos(A);y=[y[0]*F-y[1]*U,y[0]*U+y[1]*F]}const C=[b?y[0]:bt(h,y[0],this.transform.zoom),b?y[1]:bt(h,y[1],this.transform.zoom),0],O=new Float32Array(16);return s.translate(O,l,C),O}saveTileTexture(l){const h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),this.transform.projection.name==="globe"&&x.push("GLOBE"),h&&x.push("ZERO_EXAGGERATION"),y&&!l&&y.getOpacity(this.transform.pitch)!==0&&x.push("FOG"),l&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(l,h,y){this.cache=this.cache||{};const x=y||[],b=this.currentGlobalDefines().concat(x),A=Vp.cacheKey(kp[l],l,b,h);return this.cache[A]||(this.cache[A]=new Vp(this.context,l,kp[l],h,Lw[l],b)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,h,y){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const b=x.getOpacity(this.transform.pitch),A=((C,O,U,F,Z,ne,oe,se,ae,le,ee)=>{const ge=C.transform,me=O.properties.get("color").toArray01();me[3]=F;const ye=C.frameCounter/1e3%1;return{u_fog_matrix:U?ge.calculateFogTileMatrix(U):C.identityMat,u_fog_range:O.getFovAdjustedRange(ge._fov),u_fog_color:me,u_fog_horizon_blend:O.properties.get("horizon-blend"),u_fog_temporal_offset:ye,u_frustum_tl:Z,u_frustum_tr:ne,u_frustum_br:oe,u_frustum_bl:se,u_globe_pos:ae,u_globe_radius:le,u_viewport:ee,u_globe_transition:s.globeToMercatorTransition(ge.zoom),u_is_globe:+(ge.projection.name==="globe")}})(this,x,y,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);h.setFogUniformValues(l,A)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,h=l.createTexture();return l.bindTexture(l.TEXTURE_2D,h),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,h=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const x of y)h[x.key]=l[x.key]||new s.Tile(x,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class tm{constructor(l=0,h=0,y=0,x=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=y,this.right=x}interpolate(l,h,y){return h.top!=null&&l.top!=null&&(this.top=s.number(l.top,h.top,y)),h.bottom!=null&&l.bottom!=null&&(this.bottom=s.number(l.bottom,h.bottom,y)),h.left!=null&&l.left!=null&&(this.left=s.number(l.left,h.left,y)),h.right!=null&&l.right!=null&&(this.right=s.number(l.right,h.right,y)),this}getCenter(l,h){const y=s.clamp((this.left+l-this.right)/2,0,l),x=s.clamp((this.top+h-this.bottom)/2,0,h);return new s.pointGeometry(y,x)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new tm(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function w_(p,l){const h=s.getColumn(p,3);s.fromQuat(p,l),s.setColumn(p,3,h)}function Dd(p,l){const h=s.identity$1([]);return s.rotateZ$1(h,h,-l),s.rotateX$1(h,h,-p),h}function b_(p,l){const h=[p[0],p[1],0],y=[l[0],l[1],0];if(s.length(h)>=1e-15){const A=s.normalize([],h);s.scale$2(y,A,s.dot(y,A)),l[0]=y[0],l[1]=y[1]}const x=s.cross([],l,p);if(s.len(x)<1e-15)return null;const b=Math.atan2(-x[1],x[0]);return Dd(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),b)}class Od{constructor(l,h){this.position=l,this.orientation=h}get position(){return this._position}set position(l){if(l){const h=l instanceof s.MercatorCoordinate?l:new s.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(h.x=s.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(l,h){if(this.orientation=null,!this.position)return;const y=this.position,x=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(l)):0,b=s.MercatorCoordinate.fromLngLat(l,x),A=[b.x-y.x,b.y-y.y,b.z-y.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=b_(A,h)}setPitchBearing(l,h){this.orientation=Dd(s.degToRad(l),s.degToRad(-h))}}class yc{constructor(l,h){this._transform=s.identity([]),this.orientation=h,this.position=l}get mercatorPosition(){const l=this.position;return new s.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=s.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var h;l&&s.setColumn(this._transform,3,[(h=l)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||s.identity$1([]),l&&w_(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,h){this._orientation=Dd(l,h),w_(this._transform,this._orientation)}forward(){const l=s.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=s.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=s.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,h){const y=new Float64Array(16);return s.invert(y,this.getWorldToCamera(l,h)),y}getWorldToCameraPosition(l,h,y){const x=this.position;s.scale$2(x,x,-l);const b=new Float64Array(16);return s.fromScaling(b,[y,y,y]),s.translate(b,b,x),b[10]*=h,b}getWorldToCamera(l,h){const y=new Float64Array(16),x=new Float64Array(4),b=this.position;return s.conjugate(x,this._orientation),s.scale$2(b,b,-l),s.fromQuat(y,x),s.translate(y,y,b),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=h,y[9]*=h,y[10]*=h,y[11]*=h,y}getCameraToClipPerspective(l,h,y,x){const b=new Float64Array(16);return s.perspective(b,l,h,y,x),b}getDistanceToElevation(l,h=!1){const y=l===0?0:s.mercatorZfromAltitude(l,h?s.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(y-this.position[2])/x[2]}clone(){return new yc([...this.position],[...this.orientation])}}function _c(p,l){const h=wl(p.projection,p.zoom,p.width,p.height),y=function(b,A,C,O,U){const F=new s.LngLat(C.lng-180*bl,C.lat),Z=new s.LngLat(C.lng+180*bl,C.lat),ne=b.project(F.lng,F.lat),oe=b.project(Z.lng,Z.lat),se=-Math.atan2(oe.y-ne.y,oe.x-ne.x),ae=s.MercatorCoordinate.fromLngLat(C);ae.y=s.clamp(ae.y,-.999975,.999975);const le=ae.toLngLat(),ee=b.project(le.lng,le.lat),ge=s.MercatorCoordinate.fromLngLat(le);ge.x+=bl;const me=ge.toLngLat(),ye=b.project(me.lng,me.lat),Se=Hu(ye.x-ee.x,ye.y-ee.y,se),be=s.MercatorCoordinate.fromLngLat(le);be.y+=bl;const Ce=be.toLngLat(),Ne=b.project(Ce.lng,Ce.lat),We=Hu(Ne.x-ee.x,Ne.y-ee.y,se),Xe=Math.abs(Se.x)/Math.abs(We.y),vt=s.identity([]);s.rotateZ(vt,vt,-se*(1-(U?0:O)));const Ve=s.identity([]);return s.scale(Ve,Ve,[1,1-(1-Xe)*O,1]),Ve[4]=-We.x/We.y*O,s.rotateZ(Ve,Ve,se),s.multiply(Ve,vt,Ve),Ve}(p.projection,0,p.center,h,l),x=kd(p);return s.scale(y,y,[x,x,1]),y}function kd(p){const l=p.projection,h=wl(p.projection,p.zoom,p.width,p.height),y=qu(l,p.center),x=qu(l,s.LngLat.convert(l.center));return Math.pow(2,y*h+(1-h)*x)}function wl(p,l,h,y,x=1/0){const b=p.range;if(!b)return 0;const A=Math.min(x,Math.max(h,y)),C=Math.log(A/1024)/Math.LN2;return s.smoothstep(b[0]+C,b[1]+C,l)}const bl=1/4e4;function qu(p,l){const h=s.clamp(l.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=new s.LngLat(l.lng-180*bl,h),x=new s.LngLat(l.lng+180*bl,h),b=p.project(y.lng,h),A=p.project(x.lng,h),C=s.MercatorCoordinate.fromLngLat(y),O=s.MercatorCoordinate.fromLngLat(x),U=A.x-b.x,F=A.y-b.y,Z=O.x-C.x,ne=O.y-C.y,oe=Math.sqrt((Z*Z+ne*ne)/(U*U+F*F));return Math.log(oe)/Math.LN2}function Hu(p,l,h){const y=Math.cos(h),x=Math.sin(h);return{x:p*y-l*x,y:p*x+l*y}}class Lt{constructor(l,h,y,x,b,A,C){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=y??0,this._maxPitch=x??60,this.setProjection(A),this.setMaxBounds(C),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new tm,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new yc,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new Lt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,h=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(l||y)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const y=!v(h,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const h=l!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const h=-l*Math.PI/180;var y;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(y=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),function(x,b,A){var C=b[0],O=b[1],U=b[2],F=b[3],Z=Math.sin(A),ne=Math.cos(A);x[0]=C*ne+U*Z,x[1]=O*ne+F*Z,x[2]=C*-Z+U*ne,x[3]=O*-Z+F*ne}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const h=s.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=s.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let x=0,b=0;for(let A=0;A<h.length;A++){const C=new s.pointGeometry(h[A][0]*this.width,y+h[A][1]*(this.height-y)),O=l.pointCoordinate(C);if(!O)continue;const U=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);x+=O[3]*U,b+=U}return b===0?NaN:x/b}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*h,x=this._mercatorZfromZoom(l),b=this._mercatorZfromZoom(this._maxZoom),A=Math.max(x-y,b);this._setZoom(this._zoomFromMercatorZ(A))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let y;y=l.z<this._camera.position[2]?[h.x,h.y,h.z]:[l.x,l.y,l.z];const x=s.length(s.sub([],this._camera.position,y));return s.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let h=!1;if(l.orientation&&!s.exactEquals(l.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(l.orientation)),l.position){const y=[l.position.x,l.position.y,l.position.z];s.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,h=new Od;return h.position=new s.MercatorCoordinate(l[0],l[1],l[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(l){if(!s.length$1(l))return!1;s.normalize$1(l,l);const h=s.transformQuat([],[0,0,-1],l),y=s.transformQuat([],[0,-1,0],l);if(y[2]<0)return!1;const x=b_(h,y);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(l){const h=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;l[2]=s.clamp(l[2],x/y,x/h),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,y){this._unmodified=!1,this._edgeInsets.interpolate(l,h,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(l){const h=[new s.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const y=this.pointCoordinate(new s.pointGeometry(0,0)),x=this.pointCoordinate(new s.pointGeometry(this.width,0)),b=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),A=this.pointCoordinate(new s.pointGeometry(0,this.height)),C=Math.floor(Math.min(y.x,x.x,b.x,A.x)),O=Math.floor(Math.max(y.x,x.x,b.x,A.x)),U=1;for(let F=C-U;F<=O+U;F++)F!==0&&h.push(new s.UnwrappedTileID(F,l))}return h}coveringTiles(l){let h=this.coveringZoomLevel(l);const y=h,x=this.elevation&&!l.isTerrainDEM,b=this.projection.name==="mercator";if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);const A=this.locationCoordinate(this.center),C=this.center.lat,O=1<<h,U=[O*A.x,O*A.y,0],F=this.projection.name==="globe",Z=!F,ne=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,Z),oe=F?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),se=O*s.mercatorZfromAltitude(1,this.center.lat),ae=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),le=[O*oe.x,O*oe.y,ae*(Z?1:se)],ee=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),ge=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,me=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ye=l.isTerrainDEM?-me:this._elevation?this._elevation.getMinElevationBelowMSL():0,Se=this.projection.isReprojectedInTileSpace?kd(this):1,be=qe=>{const Qe=new s.MercatorCoordinate(qe.x+25e-6,qe.y,qe.z),at=new s.MercatorCoordinate(qe.x,qe.y+25e-6,qe.z),dt=qe.toLngLat(),jt=Qe.toLngLat(),hn=at.toLngLat(),Ft=this.locationCoordinate(dt),zt=this.locationCoordinate(jt),$t=this.locationCoordinate(hn),wn=Math.hypot(zt.x-Ft.x,zt.y-Ft.y),Zt=Math.hypot($t.x-Ft.x,$t.y-Ft.y);return Math.sqrt(wn*Zt)*Se/25e-6},Ce=qe=>{const ze=me,Qe=ye;return{aabb:s.tileAABB(this,O,0,0,0,qe,Qe,ze,this.projection),zoom:0,x:0,y:0,minZ:Qe,maxZ:ze,wrap:qe,fullyVisible:!1}},Ne=[];let We=[];const Xe=h,vt=l.reparseOverscaled?y:h,Ve=qe=>qe*qe,ot=Ve((ae-this._centerAltitude)*se),et=qe=>{if(!this._elevation||!qe.tileID||!b)return;const ze=this._elevation.getMinMaxForTile(qe.tileID),Qe=qe.aabb;ze?(Qe.min[2]=ze.min,Qe.max[2]=ze.max,Qe.center[2]=(Qe.min[2]+Qe.max[2])/2):(qe.shouldSplit=ct(qe),qe.shouldSplit||(Qe.min[2]=Qe.max[2]=Qe.center[2]=this._centerAltitude))},ct=qe=>{if(qe.zoom<ge)return!0;if(qe.zoom===Xe)return!1;if(qe.shouldSplit!=null)return qe.shouldSplit;const ze=qe.aabb.distanceX(le),Qe=qe.aabb.distanceY(le);let at=ot,dt=1;if(F){at=Ve(qe.aabb.distanceZ(le));const Ft=Math.pow(2,qe.zoom),zt=s.latFromMercatorY((qe.y+1)/Ft),$t=s.latFromMercatorY(qe.y/Ft),wn=Math.min(Math.max(C,zt),$t),Zt=s.circumferenceAtLatitude(wn)/s.circumferenceAtLatitude(C);if(dt=wn===C?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Zt/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&qe.zoom===Xe-1&&Zt>=.9)return!0}else if(x&&(at=Ve(qe.aabb.distanceZ(le)*se)),this.projection.isReprojectedInTileSpace&&y<=5){const Ft=Math.pow(2,qe.zoom),zt=be(new s.MercatorCoordinate((qe.x+.5)/Ft,(qe.y+.5)/Ft));dt=zt>.85?1:zt}const jt=ze*ze+Qe*Qe+at,hn=Ve((1<<Xe-qe.zoom)*ee*dt*((Ft,zt)=>{if(zt*Ve(.707)<Ft)return 1;const $t=Math.sqrt(zt/Ft);return $t/(1.4144271570014144+(Math.pow(1.1,$t-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(at,ot),jt));return jt<hn};if(this.renderWorldCopies)for(let qe=1;qe<=3;qe++)Ne.push(Ce(-qe)),Ne.push(Ce(qe));for(Ne.push(Ce(0));Ne.length>0;){const qe=Ne.pop(),ze=qe.x,Qe=qe.y;let at=qe.fullyVisible;if(!at){const dt=qe.aabb.intersects(ne);if(dt===0)continue;at=dt===2}if(qe.zoom!==Xe&&ct(qe))for(let dt=0;dt<4;dt++){const jt=(ze<<1)+dt%2,hn=(Qe<<1)+(dt>>1),Ft={aabb:b?qe.aabb.quadrant(dt):s.tileAABB(this,O,qe.zoom+1,jt,hn,qe.wrap,qe.minZ,qe.maxZ,this.projection),zoom:qe.zoom+1,x:jt,y:hn,wrap:qe.wrap,fullyVisible:at,tileID:void 0,shouldSplit:void 0,minZ:qe.minZ,maxZ:qe.maxZ};x&&!F&&(Ft.tileID=new s.OverscaledTileID(qe.zoom+1===Xe?vt:qe.zoom+1,qe.wrap,qe.zoom+1,jt,hn),et(Ft)),Ne.push(Ft)}else{const dt=qe.zoom===Xe?vt:qe.zoom;if(l.minzoom&&l.minzoom>dt)continue;const jt=U[0]-(.5+ze+(qe.wrap<<qe.zoom))*(1<<h-qe.zoom),hn=U[1]-.5-Qe,Ft=qe.tileID?qe.tileID:new s.OverscaledTileID(dt,qe.wrap,qe.zoom,ze,Qe);We.push({tileID:Ft,distanceSq:jt*jt+hn*hn})}}if(this.fogCullDistSq){const qe=this.fogCullDistSq,ze=this.horizonLineFromTop();We=We.filter(Qe=>{const at=[0,0,0,1],dt=[s.EXTENT,s.EXTENT,0,1],jt=this.calculateFogTileMatrix(Qe.tileID.toUnwrapped());s.transformMat4$1(at,at,jt),s.transformMat4$1(dt,dt,jt);const hn=s.getAABBPointSquareDist(at,dt);if(hn===0)return!0;let Ft=!1;const zt=this._elevation;if(zt&&hn>qe&&ze!==0){const $t=this.calculateProjMatrix(Qe.tileID.toUnwrapped());let wn;l.isTerrainDEM||(wn=zt.getMinMaxForTile(Qe.tileID)),wn||(wn={min:ye,max:me});const Zt=s.furthestTileCorner(this.rotation),Bn=[Zt[0]*s.EXTENT,Zt[1]*s.EXTENT,wn.max];s.transformMat4(Bn,Bn,$t),Ft=(1-Bn[1])*this.height*.5<ze}return hn<qe||Ft})}return We.sort((qe,ze)=>qe.distanceSq-ze.distanceSq).map(qe=>qe.tileID)}resize(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const h=s.clamp(l.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=this.projection.project(l.lng,h);return new s.pointGeometry(y.x*this.worldSize,y.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,h){let y,x;const b=this.centerPoint;if(this.projection.name==="globe"){const C=this.worldSize;y=(h.x-b.x)/C,x=(h.y-b.y)/C}else{const C=this.pointCoordinate(h),O=this.pointCoordinate(b);y=C.x-O.x,x=C.y-O.y}const A=this.locationCoordinate(l);this.setLocation(new s.MercatorCoordinate(A.x-y,A.y-x))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,h){const y=h?s.mercatorZfromAltitude(h,l.lat):void 0,x=this.projection.project(l.lng,l.lat);return new s.MercatorCoordinate(x.x,x.y,y)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,h){const y=h??this._centerAltitude,x=[l.x,l.y,0,1],b=[l.x,l.y,1,1];s.transformMat4$1(x,x,this.pixelMatrixInverse),s.transformMat4$1(b,b,this.pixelMatrixInverse);const A=b[3];s.scale$1(x,x,1/x[3]),s.scale$1(b,b,1/A);const C=x[2],O=b[2];return{p0:x,p1:b,t:C===O?0:(y-C)/(O-C)}}screenPointToMercatorRay(l){const h=[l.x,l.y,0,1],y=[l.x,l.y,1,1];return s.transformMat4$1(h,h,this.pixelMatrixInverse),s.transformMat4$1(y,y,this.pixelMatrixInverse),s.scale$1(h,h,1/h[3]),s.scale$1(y,y,1/y[3]),h[2]=s.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,y[2]=s.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,s.scale$1(h,h,1/this.worldSize),s.scale$1(y,y,1/this.worldSize),new s.Ray([h[0],h[1],h[2]],s.normalize([],s.sub([],y,h)))}rayIntersectionCoordinate(l){const{p0:h,p1:y,t:x}=l,b=s.mercatorZfromAltitude(h[2],this._center.lat),A=s.mercatorZfromAltitude(y[2],this._center.lat);return new s.MercatorCoordinate(s.number(h[0],y[0],x)/this.worldSize,s.number(h[1],y[1],x)/this.worldSize,s.number(b,A,x))}pointCoordinate(l,h=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,h)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let h=this.projection.pointCoordinate3D(this,l.x,l.y);if(h)return new s.MercatorCoordinate(h[0],h[1],h[2]);let y=0,x=this.horizonLineFromTop();if(l.y>x)return this.pointCoordinate(l);const b=.02*x,A=l.clone();for(let C=0;C<10&&x-y>b;C++){A.y=s.number(y,x,.66);const O=this.projection.pointCoordinate3D(this,A.x,A.y);O?(x=A.y,h=O):y=A.y}return h?new s.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,h){const y=h&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,x=[l.x*this.worldSize,l.y*this.worldSize,y+l.toAltitude(),1];return s.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new s.pointGeometry(x[0]/x[3],x[1]/x[3]):new s.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:h}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,b=this.pointLocation3D(new s.pointGeometry(h,l)),A=this.pointLocation3D(new s.pointGeometry(x,l)),C=this.pointLocation3D(new s.pointGeometry(x,y)),O=this.pointLocation3D(new s.pointGeometry(h,y));let U=Math.min(b.lng,A.lng,C.lng,O.lng),F=Math.max(b.lng,A.lng,C.lng,O.lng),Z=Math.min(b.lat,A.lat,C.lat,O.lat),ne=Math.max(b.lat,A.lat,C.lat,O.lat);const oe=Math.pow(2,-this.zoom)/16*270,se=this.projection.name==="globe"?1:4,ae=(le,ee,ge,me,ye)=>{const Se=(le+ge)/2,be=(ee+me)/2,Ce=new s.pointGeometry(Se,be),{lng:Ne,lat:We}=this.pointLocation3D(Ce),Xe=Math.max(0,U-Ne,Z-We,Ne-F,We-ne);U=Math.min(U,Ne),F=Math.max(F,Ne),Z=Math.min(Z,We),ne=Math.max(ne,We),(ye<se||Xe>oe)&&(ae(le,ee,Se,be,ye+1),ae(Se,be,ge,me,ye+1))};if(ae(h,l,x,l,1),ae(x,l,x,y,1),ae(x,y,h,y,1),ae(h,y,h,l,1),this.projection.name==="globe"){const[le,ee]=s.polesInViewport(this);le?(ne=90,F=180,U=-180):ee&&(Z=-90,F=180,U=-180)}return new s.LngLatBounds(new s.LngLat(U,Z),new s.LngLat(F,ne))}_getBoundsRectangular(l,h){const{top:y,left:x}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,A=this.width-this._edgeInsets.right,C=new s.pointGeometry(x,y),O=new s.pointGeometry(A,y),U=new s.pointGeometry(A,b),F=new s.pointGeometry(x,b);let Z=this.pointCoordinate(C,l),ne=this.pointCoordinate(O,l);const oe=this.pointCoordinate(U,h),se=this.pointCoordinate(F,h),ae=(le,ee)=>(ee.y-le.y)/(ee.x-le.x);return Z.y>1&&ne.y>=0?Z=new s.MercatorCoordinate((1-se.y)/ae(se,Z)+se.x,1):Z.y<0&&ne.y<=1&&(Z=new s.MercatorCoordinate(-se.y/ae(se,Z)+se.x,0)),ne.y>1&&Z.y>=0?ne=new s.MercatorCoordinate((1-oe.y)/ae(oe,ne)+oe.x,1):ne.y<0&&Z.y<=1&&(ne=new s.MercatorCoordinate(-oe.y/ae(oe,ne)+oe.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(se)).extend(this.coordinateLocation(oe))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=l.visibleDemTiles.reduce((y,x)=>{if(x.dem){const b=x.dem.tree;y.min=Math.min(y.min,b.minimums[0]),y.max=Math.max(y.max,b.maximums[0])}return y},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*l.exaggeration(),h.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-h*(1-this._horizonShift);return l?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,h){return this.projection.createTileMatrix(this,h,l)}calculateDistanceTileData(l){const h=l.key,y=this._distanceTileDataCache;if(y[h])return y[h];const x=l.canonical,b=1/this.height,A=this.cameraWorldSize,C=A/this.zoomScale(x.z),O=(x.x+Math.pow(2,x.z)*l.wrap)*C,U=x.y*C,F=this.point;F.x*=A/this.worldSize,F.y*=A/this.worldSize;const Z=this.angle,ne=Math.sin(-Z),oe=-Math.cos(-Z);return y[h]={bearing:[ne,oe],center:[(F.x-O)*b,(F.y-U)*b],scale:C/s.EXTENT*b},y[h]}calculateFogTileMatrix(l){const h=l.key,y=this._fogTileMatrixCache;if(y[h])return y[h];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return s.multiply(x,this.worldToFogMatrix,x),y[h]=new Float32Array(x),y[h]}calculateProjMatrix(l,h=!1){const y=l.key,x=h?this._alignedProjMatrixCache:this._projMatrixCache;if(x[y])return x[y];const b=this.calculatePosMatrix(l,this.worldSize);return s.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,b),x[y]=new Float32Array(b),x[y]}calculatePixelsToTileUnitsMatrix(l){const h=l.tileID.key,y=this._pixelsToTileUnitsCache;if(y[h])return y[h];const x=function(b,A){const{scale:C}=b.tileTransform,O=C*s.EXTENT/(b.tileSize*Math.pow(2,A.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return U=new Float32Array(4),ne=(F=A.inverseAdjustmentMatrix)[1],oe=F[2],se=F[3],le=(Z=[O,O])[1],U[0]=F[0]*(ae=Z[0]),U[1]=ne*ae,U[2]=oe*le,U[3]=se*le,U;var U,F,Z,ne,oe,se,ae,le}(l,this);return y[h]=x,y[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,h=s.fromScaling([],[l,l,l]);return s.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const h=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(h),x=this._camera.forward(),b=s.mercatorZfromAltitude(1,this._center.lat);y[2]/=b,x[2]/=b,s.normalize(x,x);const A=l.raycast(y,x,l.exaggeration());if(A){const C=s.scaleAndAdd([],y,x,A),O=new s.MercatorCoordinate(C[0],C[1],s.mercatorZfromAltitude(C[2],s.latFromMercatorY(C[1]))),U=(O.z+s.length([O.x-y[0],O.y-y[1],O.z-y[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(U),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const h=this._elevation,y=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(y),b=h.getAtPointOrZero(new s.MercatorCoordinate(...x)),A=this.pixelsPerMeter/this.worldSize*b,C=this._minimumHeightOverTerrain(),O=x[2]-A;if(O<=C)if(O<0||l){const U=this.locationCoordinate(this._center,this._centerAltitude),F=[x[0],x[1],U.z-x[2]],Z=s.length(F);F[2]-=(C-O)/this._pixelsPerMercatorPixel;const ne=s.length(F);if(ne===0)return;s.scale$2(F,F,Z/ne*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],U.z*this._pixelsPerMercatorPixel-F[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const ne=this.center;return ne.lat=s.clamp(ne.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(ne.lng=s.clamp(ne.lng,this.minLng,this.maxLng)),this.center=ne,void(this._constraining=!1)}const h=this._unmodified,{x:y,y:x}=this.point;let b=0,A=y,C=x;const O=this.width/2,U=this.height/2,F=this.worldMinY*this.scale,Z=this.worldMaxY*this.scale;if(x-U<F&&(C=F+U),x+U>Z&&(C=Z-U),Z-F<this.height&&(b=Math.max(b,this.height/(Z-F)),C=(Z+F)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ne=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,se=this.worldSize/2-(ne+oe)/2;A=(y+se+this.worldSize)%this.worldSize-se,A-O<ne&&(A=ne+O),A+O>oe&&(A=oe-O),oe-ne<this.width&&(b=Math.max(b,this.width/(oe-ne)),A=(oe+ne)/2)}A===y&&C===x||(this.center=this.unproject(new s.pointGeometry(A,C))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,h=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const y=wl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?h:1,b=this._camera.getWorldToCamera(this.worldSize,x),A=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);A[8]=2*-l.x/this.width,A[9]=2*l.y/this.height;let C=s.mul([],A,b);if(this.projection.isReprojectedInTileSpace){const be=this.locationCoordinate(this.center),Ce=s.identity([]);s.translate(Ce,Ce,[be.x*this.worldSize,be.y*this.worldSize,0]),s.multiply(Ce,Ce,_c(this)),s.translate(Ce,Ce,[-be.x*this.worldSize,-be.y*this.worldSize,0]),s.multiply(C,C,Ce),this.inverseAdjustmentMatrix=function(Ne){const We=_c(Ne,!0);return re([],[We[0],We[1],We[4],We[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],C,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=C,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const O=s.invert([],A);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(O,this.horizonLineFromTop(),this.height);const U=new Float32Array(16);s.identity(U),s.scale(U,U,[1,-1,1]),s.rotateX(U,U,this._pitch),s.rotateZ(U,U,this.angle);const F=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Z=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;F[8]=2*-l.x/this.width,F[9]=2*(l.y+Z)/this.height,this.skyboxMatrix=s.multiply(U,F,U);const ne=this.point,oe=ne.x,se=ne.y,ae=this.width%2/2,le=this.height%2/2,ee=Math.cos(this.angle),ge=Math.sin(this.angle),me=oe-Math.round(oe)+ee*ae+ge*le,ye=se-Math.round(se)+ee*le+ge*ae,Se=new Float64Array(C);if(s.translate(Se,Se,[me>.5?me-1:me,ye>.5?ye-1:ye,0]),this.alignedProjMatrix=Se,C=s.create(),s.scale(C,C,[this.width/2,-this.height/2,1]),s.translate(C,C,[1,-1,0]),this.labelPlaneMatrix=C,C=s.create(),s.scale(C,C,[1,-1,1]),s.translate(C,C,[-1,-1,0]),s.scale(C,C,[2/this.width,2/this.height,1]),this.glCoordMatrix=C,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},C=s.invert(new Float64Array(16),this.pixelMatrix),!C)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=C,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const be=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(be,be,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=C;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,y=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,b=[l,l,h];s.scale$2(b,b,x),s.scale$2(y,y,-1),s.multiply$2(y,y,b);const A=s.create();s.translate(A,A,y),s.scale(A,A,b),this.mercatorFogMatrix=A,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,h,x)}_computeCameraPosition(l){const h=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),x=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-l/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-y[0]*b,x.y/this.worldSize-y[1]*b,l/this.worldSize*this._centerAltitude-y[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],x=l[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(b=Math.min((h-y)/x,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,l,b),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,h=this._camera.forward(),{pitch:y,bearing:x}=this._camera.getPitchBearing(),b=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,A=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),C=Math.max((l[2]-b)/Math.cos(y),A),O=this._zoomFromMercatorZ(C);s.scaleAndAdd(l,l,h,C),this._pitch=s.clamp(y,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(x,-Math.PI,Math.PI),this._setZoom(s.clamp(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let h=0,y=s.GLOBE_ZOOM_THRESHOLD_MAX,x=0,b=1/0;for(;y-h>1e-6&&y>h;){const A=h+.5*(y-h),C=this.tileSize*Math.pow(2,A),O=this.getCameraToCenterDistance(this.projection,A,C),U=this.scaleZoom(O/(l*this.tileSize)),F=Math.abs(A-U);F<b&&(b=F,x=A),A<U?h=A:y=A}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,h){const y=Math.min(l.x,h.x),x=Math.max(l.x,h.x),b=Math.min(l.y,h.y),A=Math.max(l.y,h.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const C=[new s.pointGeometry(y,b),new s.pointGeometry(x,A),new s.pointGeometry(y,A),new s.pointGeometry(x,b)],O=this.renderWorldCopies?-3:0,U=this.renderWorldCopies?4:1;for(const F of C){const Z=this.pointRayIntersection(F);if(Z.t<0)return!0;const ne=this.rayIntersectionCoordinate(Z);if(ne.x<O||ne.y<0||ne.x>U||ne.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.pointGeometry(0,0),new s.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,h){const y=s.length(s.sub([],this._camera.position,l)),x=this._zoomFromMercatorZ(y)+h;return y-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([h,y,x],b){const A=[h,y,x,1];s.transformMat4$1(A,A,b);const C=A[3]=Math.max(A[3],1e-6);return A[0]/=C,A[1]/=C,A[2]/=C,A}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,l))}}getCameraToCenterDistance(l,h=this.zoom,y=this.worldSize){const x=wl(l,h,this.width,this.height,1024),b=l.pixelSpaceConversion(this.center.lat,y,x);return .5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(l,l,this.globeMatrix),l}}function zo(p,l){let h=!1,y=null;const x=()=>{y=null,h&&(p(),y=setTimeout(x,l),h=!1)};return()=>(h=!0,y||x(),y)}class E_{constructor(l){this._hashName=l&&encodeURIComponent(l),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=zo(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,s.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const h=nm(l);if(this._hashName){const y=this._hashName;let x=!1;const b=s.window.location.hash.slice(1).split("&").map(A=>{const C=A.split("=")[0];return C===y?(x=!0,`${C}=${h}`):A}).filter(A=>A);return x||b.push(`${y}=${h}`),`#${b.join("&")}`}return`#${h}`}_getCurrentHash(){const l=s.window.location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(h=y)}),(h&&h[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(y=>isNaN(y))){const y=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(h[3]||0):l.getBearing();return l.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:y,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,l)}}function nm(p,l){const h=p.getCenter(),y=Math.round(100*p.getZoom())/100,x=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,x),A=Math.round(h.lng*b)/b,C=Math.round(h.lat*b)/b,O=p.getBearing(),U=p.getPitch();let F=l?`/${A}/${C}/${y}`:`${y}/${C}/${A}`;return(O||U)&&(F+="/"+Math.round(10*O)/10),U&&(F+=`/${Math.round(U)}`),F}const Zu={linearity:.3,easing:s.bezier(0,0,.3,1)},vc=s.extend({deceleration:2500,maxSpeed:1400},Zu),T_=s.extend({deceleration:20,maxSpeed:1400},Zu),Ld=s.extend({deceleration:1e3,maxSpeed:360},Zu),rm=s.extend({deceleration:1e3,maxSpeed:90},Zu);class zd{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=s.exported.now();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(s.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)h.zoom+=b.zoomDelta||0,h.bearing+=b.bearingDelta||0,h.pitch+=b.pitchDelta||0,b.panDelta&&h.pan._add(b.panDelta),b.around&&(h.around=b.around),b.pinchAround&&(h.pinchAround=b.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(h.pan.mag()){const b=Xu(h.pan.mag(),y,s.extend({},vc,l||{}));x.offset=h.pan.mult(b.amount/h.pan.mag()),x.center=this._map.transform.center,Yu(x,b)}if(h.zoom){const b=Xu(h.zoom,y,T_);x.zoom=this._map.transform.zoom+b.amount,Yu(x,b)}if(h.bearing){const b=Xu(h.bearing,y,Ld);x.bearing=this._map.transform.bearing+s.clamp(b.amount,-179,179),Yu(x,b)}if(h.pitch){const b=Xu(h.pitch,y,rm);x.pitch=this._map.transform.pitch+b.amount,Yu(x,b)}if(x.zoom||x.bearing){const b=h.pinchAround===void 0?h.around:h.pinchAround;x.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function Yu(p,l){(!p.duration||p.duration<l.duration)&&(p.duration=l.duration,p.easing=l.easing)}function Xu(p,l,h){const{maxSpeed:y,linearity:x,deceleration:b}=h,A=s.clamp(p*x/(l/1e3),-y,y),C=Math.abs(A)/(b*x);return{easing:h.easing,duration:1e3*C,amount:A*(C/2)}}class di extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y,x={}){const b=$(h.getCanvasContainer(),y),A=h.unproject(b);super(l,s.extend({point:b,lngLat:A,originalEvent:y},x)),this._defaultPrevented=!1,this.target=h}}class Nd extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){const x=l==="touchend"?y.changedTouches:y.touches,b=X(h.getCanvasContainer(),x),A=b.map(O=>h.unproject(O)),C=b.reduce((O,U,F,Z)=>O.add(U.div(Z.length)),new s.pointGeometry(0,0));super(l,{points:b,point:C,lngLats:A,lngLat:h.unproject(C),originalEvent:y}),this._defaultPrevented=!1}}class Fw extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){super(l,{originalEvent:y}),this._defaultPrevented=!1}}class S_{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new Fw(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new di(l.type,this._map,l))}mouseup(l){this._map.fire(new di(l.type,this._map,l))}preclick(l){const h=s.extend({},l);h.type="preclick",this._map.fire(new di(h.type,this._map,h))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(l),this._map.fire(new di(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new di(l.type,this._map,l))}mouseover(l){this._map.fire(new di(l.type,this._map,l))}mouseout(l){this._map.fire(new di(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Nd(l.type,this._map,l))}touchmove(l){this._map.fire(new Nd(l.type,this._map,l))}touchend(l){this._map.fire(new Nd(l.type,this._map,l))}touchcancel(l){this._map.fire(new Nd(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bd{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new di(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new di(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class im{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(G(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const y=h,x=this._startPos,b=this._lastPos;if(!x||!b||b.equals(y)||!this._box&&y.dist(x)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=P("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const A=Math.min(x.x,y.x),C=Math.max(x.x,y.x),O=Math.min(x.y,y.y),U=Math.max(x.y,y.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${A}px,${O}px)`,this._box.style.width=C-A+"px",this._box.style.height=U-O+"px")})}mouseupWindow(l,h){if(!this._active)return;const y=this._startPos,x=h;if(y&&l.button===0){if(this.reset(),W(),y.x!==x.x||y.y!==x.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:b=>b.fitScreenCoordinates(y,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),z(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new s.Event(l,{originalEvent:h}))}}function Fd(p,l){const h={};for(let y=0;y<p.length;y++)h[p[y].identifier]=l[y];return h}class I_{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),y.length===this.numTouches&&(this.centroid=function(x){const b=new s.pointGeometry(0,0);for(const A of x)b._add(A);return b.div(x.length)}(h),this.touches=Fd(y,h)))}touchmove(l,h,y){if(this.aborted||!this.centroid)return;const x=Fd(y,h);for(const b in this.touches){const A=this.touches[b],C=x[b];(!C||C.dist(A)>30)&&(this.aborted=!0)}}touchend(l,h,y){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class xc{constructor(l){this.singleTap=new I_(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,h,y){this.singleTap.touchstart(l,h,y)}touchmove(l,h,y){this.singleTap.touchmove(l,h,y)}touchend(l,h,y){const x=this.singleTap.touchend(l,h,y);if(x){const b=l.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(x)<30;if(b&&A||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class om{constructor(){this._zoomIn=new xc({numTouches:1,numTaps:2}),this._zoomOut=new xc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,y){this._zoomIn.touchstart(l,h,y),this._zoomOut.touchstart(l,h,y)}touchmove(l,h,y){this._zoomIn.touchmove(l,h,y),this._zoomOut.touchmove(l,h,y)}touchend(l,h,y){const x=this._zoomIn.touchend(l,h,y),b=this._zoomOut.touchend(l,h,y);return x?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()+1,around:A.unproject(x)},{originalEvent:l})}):b?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:A.getZoom()-1,around:A.unproject(b)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const M_={0:1,2:2};class Ud{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,h){return!1}_move(l,h){return{}}mousedown(l,h){if(this._lastPoint)return;const y=te(l);this._correctButton(l,y)&&(this._lastPoint=h,this._eventButton=y)}mousemoveWindow(l,h){const y=this._lastPoint;if(y){if(l.preventDefault(),this._eventButton!=null&&function(x,b){const A=M_[b];return x.buttons===void 0||(x.buttons&A)!==A}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(y,h)}}mouseupWindow(l){this._lastPoint&&te(l)===this._eventButton&&(this._moved&&W(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class A_ extends Ud{mousedown(l,h){super.mousedown(l,h),this._lastPoint&&(this._active=!0)}_correctButton(l,h){return h===0&&!l.ctrlKey}_move(l,h){return{around:h,panDelta:h.sub(l)}}}class sm extends Ud{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const y=.8*(h.x-l.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(l){l.preventDefault()}}class am extends Ud{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const y=-.5*(h.y-l.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(l){l.preventDefault()}}class wc{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(l,h,y){return this._calculateTransform(l,h,y)}touchmove(l,h,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,h,y)}}touchend(l,h,y){this._calculateTransform(l,h,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,y){y.length>0&&(this._active=!0);const x=Fd(y,h),b=new s.pointGeometry(0,0),A=new s.pointGeometry(0,0);let C=0;for(const U in x){const F=x[U],Z=this._touches[U];Z&&(b._add(F),A._add(F.sub(Z)),C++,x[U]=F)}if(this._touches=x,C<this._minTouches||!A.mag())return;const O=A.div(C);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(C),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=P("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Vd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,h,y){return{}}touchstart(l,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,y){const x=this._firstTwoTouches;if(!x)return;l.preventDefault();const[b,A]=x,C=Qu(y,h,b),O=Qu(y,h,A);if(!C||!O)return;const U=this._aroundCenter?null:C.add(O).div(2);return this._move([C,O],U,l)}touchend(l,h,y){if(!this._firstTwoTouches)return;const[x,b]=this._firstTwoTouches,A=Qu(y,h,x),C=Qu(y,h,b);A&&C||(this._active&&W(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Qu(p,l,h){for(let y=0;y<p.length;y++)if(p[y].identifier===h)return l[y]}function C_(p,l){return Math.log(p/l)/Math.LN2}class P_ extends Vd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const y=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(C_(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:C_(this._distance,y),pinchAround:h}}}function lm(p,l){return 180*p.angleWith(l)/Math.PI}class R_ extends Vd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h){const y=this._vector;if(this._vector=l[0].sub(l[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:lm(this._vector,y),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const x=lm(l,y);return Math.abs(x)<h}}function jd(p){return Math.abs(p.y)>Math.abs(p.x)}class Ai extends Vd{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,jd(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,y){const x=this._lastPoints;if(!x)return;const b=l[0].sub(x[0]),A=l[1].sub(x[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(b,A,y.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(b.y+A.y)/2*-.5})}gestureBeginsVertically(l,h,y){if(this._valid!==void 0)return this._valid;const x=l.mag()>=2,b=h.mag()>=2;if(!x&&!b)return;if(!x||!b)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const A=l.y>0==h.y>0;return jd(l)&&jd(h)&&A}}const Uw={panStep:100,bearingStep:15,pitchStep:10};class D_{constructor(){const l=Uw;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,y=0,x=0,b=0,A=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?y=-1:(l.preventDefault(),b=-1);break;case 39:l.shiftKey?y=1:(l.preventDefault(),b=1);break;case 38:l.shiftKey?x=1:(l.preventDefault(),A=-1);break;case 40:l.shiftKey?x=-1:(l.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(y=0,x=0),{cameraAnimation:C=>{const O=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:Vw,zoom:h?Math.round(O)+h*(l.shiftKey?2:1):O,bearing:C.getBearing()+y*this._bearingStep,pitch:C.getPitch()+x*this._pitchStep,offset:[-b*this._panStep,-A*this._panStep],center:C.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Vw(p){return p*(2-p)}const O_=4.000244140625;class Ys{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=l.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const y=s.exported.now(),x=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,h!==0&&h%O_==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(x*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=$(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>O_?this._wheelZoomRate:this._defaultZoomRate;let U=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&U!==0&&(U=1/U);const F=h(),Z=Math.pow(2,F),ne=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):Z;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ne*U))),this._type==="wheel"&&(this._startZoom=F,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:h(),x=this._startZoom,b=this._easing;let A,C=!1;if(this._type==="wheel"&&x&&b){const O=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),U=b(O);A=s.number(x,y,U),O<1?this._frameId||(this._frameId=!0):C=!0}else A=y,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:A-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=s.ease;if(this._prevEase){const y=this._prevEase,x=(s.exported.now()-y.start)/y.duration,b=y.easing(x+.01)-y.easing(x),A=.27/Math.sqrt(b*b+1e-4)*.01,C=Math.sqrt(.0729-A*A);h=s.bezier(A,C,.25,1)}return this._prevEase={start:s.exported.now(),duration:l,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=P("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class k_{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class bc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,h){return l.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(l.shiftKey?-1:1),around:y.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ws{constructor(){this._tap=new xc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,h,y){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=h[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(l,h,y))}touchmove(l,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const x=h[0],b=x.y-this._swipePoint.y;return this._swipePoint=x,l.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(l,h,y)}touchend(l,h,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(l,h,y)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gd{constructor(l,h,y){this._el=l,this._mousePan=h,this._touchPan=y}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bt{constructor(l,h,y){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class L_{constructor(l,h,y,x){this._el=l,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ku=p=>p.zoom||p.drag||p.pitch||p.rotate;class Ju extends s.Event{}class eh{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,h){const y=s.sub([],h,l);this.radius=s.length(y[2]<0?s.div([],y,this.constants):[y[0],y[1],0])}projectRay(l){s.div(l,l,this.constants),s.normalize(l,l),s.mul$1(l,l,this.constants);const h=s.scale$2([],l,this.radius);if(h[2]>0){const y=s.scale$2([],[0,0,1],s.dot(h,[0,0,1])),x=s.scale$2([],s.normalize([],[h[0],h[1],0]),this.radius),b=s.add([],h,s.scale$2([],s.sub([],s.add([],x,y),h),2));h[0]=b[0],h[1]=b[1]}return h}}function th(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class z_{constructor(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new zd(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new eh,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),s.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[x,b,A]of this._listeners)x.addEventListener(b,x===s.window.document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[l,h,y]of this._listeners)l.removeEventListener(h,l===s.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(l){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new S_(h,l));const x=h.boxZoom=new im(h,l);this._add("boxZoom",x);const b=new om,A=new bc;h.doubleClickZoom=new k_(A,b),this._add("tapZoom",b),this._add("clickZoom",A);const C=new ws;this._add("tapDragZoom",C);const O=h.touchPitch=new Ai(h);this._add("touchPitch",O);const U=new sm(l),F=new am(l);h.dragRotate=new Bt(l,U,F),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]);const Z=new A_(l),ne=new wc(h,l);h.dragPan=new Gd(y,Z,ne),this._add("mousePan",Z),this._add("touchPan",ne,["touchZoom","touchRotate"]);const oe=new R_,se=new P_;h.touchZoomRotate=new L_(y,se,oe,C),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Bd(h));const ae=h.scrollZoom=new Ys(h,this);this._add("scrollZoom",ae,["mousePan"]);const le=h.keyboard=new D_;this._add("keyboard",le);for(const ee of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[ee]&&h[ee].enable(l[ee])}_add(l,h,y){this._handlers.push({handlerName:l,handler:h,allowed:y}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ku(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,h,y){for(const x in l)if(x!==y&&(!h||h.indexOf(x)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const h=[];for(const y of l)this._el.contains(y.target)&&h.push(y);return h}handleEvent(l,h){this._updatingCamera=!0;const y=l.type==="renderFrame",x=y?void 0:l,b={needsRenderFrame:!1},A={},C={},O=l.touches?this._getMapTouches(l.touches):void 0,U=O?X(this._el,O):y?void 0:$(this._el,l);for(const{handlerName:ne,handler:oe,allowed:se}of this._handlers){if(!oe.isEnabled())continue;let ae;this._blockedByActive(C,se,ne)?oe.reset():oe[h||l.type]&&(ae=oe[h||l.type](l,U,O),this.mergeHandlerResult(b,A,ae,ne,x),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||oe.isActive())&&(C[ne]=oe)}const F={};for(const ne in this._previousActiveHandlers)C[ne]||(F[ne]=x);this._previousActiveHandlers=C,(Object.keys(F).length||th(b))&&(this._changes.push([b,A,F]),this._triggerRenderFrame()),(Object.keys(C).length||th(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=b;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(l,h,y,x,b){if(!y)return;s.extend(l,y);const A={handlerName:x,originalEvent:y.originalEvent||b};y.zoomDelta!==void 0&&(h.zoom=A),y.panDelta!==void 0&&(h.drag=A),y.pitchDelta!==void 0&&(h.pitch=A),y.bearingDelta!==void 0&&(h.rotate=A)}_applyChanges(){const l={},h={},y={};for(const[x,b,A]of this._changes)x.panDelta&&(l.panDelta=(l.panDelta||new s.pointGeometry(0,0))._add(x.panDelta)),x.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(l.around=x.around),x.aroundCoord!==void 0&&(l.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(l.pinchAround=x.pinchAround),x.noInertia&&(l.noInertia=x.noInertia),s.extend(h,b),s.extend(y,A);this._updateMapTransform(l,h,y),this._changes=[]}_updateMapTransform(l,h,y){const x=this._map,b=x.transform,A=ge=>[ge.x,ge.y,ge.z];if((ge=>{const me=this._eventsInProgress.drag;return me&&!this._handlersById[me.handlerName].isActive()})()&&!th(l)){const ge=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",ge!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&x._stop(!0),!th(l))return void this._fireEvents(h,y,!0);let{panDelta:C,zoomDelta:O,bearingDelta:U,pitchDelta:F,around:Z,aroundCoord:ne,pinchAround:oe}=l;b._isCameraConstrained&&(O>0&&(O=0),b._isCameraConstrained=!1),oe!==void 0&&(Z=oe),(O||(ge=>h.drag&&!this._eventsInProgress.drag)())&&Z&&(this._dragOrigin=A(b.pointCoordinate3D(Z)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",x._stop(!0),Z=Z||x.transform.centerPoint,U&&(b.bearing+=U),F&&(b.pitch+=F),b._updateCameraState();const se=[0,0,0];if(C)if(b.projection.name==="mercator"){const ge=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(Z).dir),me=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(Z.sub(C)).dir);se[0]=me[0]-ge[0],se[1]=me[1]-ge[1]}else{const ge=b.pointCoordinate(Z);if(b.projection.name==="globe"){C=C.rotate(-b.angle);const me=b._pixelsPerMercatorPixel/b.worldSize;se[0]=-C.x*s.mercatorScale(s.latFromMercatorY(ge.y))*me,se[1]=-C.y*s.mercatorScale(b.center.lat)*me}else{const me=b.pointCoordinate(Z.sub(C));ge&&me&&(se[0]=me.x-ge.x,se[1]=me.y-ge.y)}}const ae=b.zoom,le=[0,0,0];if(O){const ge=A(ne||b.pointCoordinate3D(Z)),me={dir:s.normalize([],s.sub([],ge,b._camera.position))};if(me.dir[2]<0){const ye=b.zoomDeltaToMovement(ge,O);s.scale$2(le,me.dir,ye)}}const ee=s.add(se,se,le);b._translateCameraConstrained(ee),O&&Math.abs(b.zoom-ae)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,y,!0)}_fireEvents(l,h,y){const x=Ku(this._eventsInProgress),b=Ku(l),A={};for(const F in l){const{originalEvent:Z}=l[F];this._eventsInProgress[F]||(A[`${F}start`]=Z),this._eventsInProgress[F]=l[F]}!x&&b&&this._fireEvent("movestart",b.originalEvent);for(const F in A)this._fireEvent(F,A[F]);b&&this._fireEvent("move",b.originalEvent);for(const F in l){const{originalEvent:Z}=l[F];this._fireEvent(F,Z)}const C={};let O;for(const F in this._eventsInProgress){const{handlerName:Z,originalEvent:ne}=this._eventsInProgress[F];this._handlersById[Z].isActive()||(delete this._eventsInProgress[F],O=h[Z]||ne,C[`${F}end`]=O)}for(const F in C)this._fireEvent(F,C[F]);const U=Ku(this._eventsInProgress);if(y&&(x||b)&&!U){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;F?(Z(F.bearing||this._map.getBearing())&&(F.bearing=0),this._map.easeTo(F,{originalEvent:O})):(this._map.fire(new s.Event("moveend",{originalEvent:O})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new s.Event(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Ju("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const cm="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class N_ extends s.Evented{constructor(l,h){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=h.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}panBy(l,h,y){return l=s.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,s.extend({offset:l},h),y)}panTo(l,h,y){return this.easeTo(s.extend({center:l},h),y)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,y){return this.easeTo(s.extend({zoom:l},h),y)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,y){return this.easeTo(s.extend({bearing:l},h),y)}resetNorth(l,h){return this.rotateTo(0,s.extend({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}cameraForBounds(l,h){l=s.LngLatBounds.convert(l);const y=h&&h.bearing||0,x=h&&h.pitch||0,b=l.getNorthWest(),A=l.getSouthEast();return this._cameraForBounds(this.transform,b,A,y,x,h)}_extendCameraOptions(l){const h={top:0,bottom:0,right:0,left:0};if(typeof(l=s.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const y=l.padding;l.padding={top:y,bottom:y,right:y,left:y}}return l.padding=s.extend(h,l.padding),l}_minimumAABBFrustumDistance(l,h){const y=h.max[0]-h.min[0],x=h.max[1]-h.min[1];return y/x>l.aspect?y/(2*Math.tan(.5*l.fovX)*l.aspect):x/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,h,y,x,b,A){const C=l.clone(),O=this._extendCameraOptions(A);C.bearing=x,C.pitch=b;const U=s.LngLat.convert(h),F=s.LngLat.convert(y),Z=.5*(U.lat+F.lat),ne=.5*(U.lng+F.lng),oe=s.latLngToECEF(Z,ne),se=s.normalize([],oe),ae=s.normalize([],s.cross([],se,[0,1,0])),le=s.cross([],ae,se),ee=[ae[0],ae[1],ae[2],0,le[0],le[1],le[2],0,se[0],se[1],se[2],0,0,0,0,1],ge=[oe,s.latLngToECEF(U.lat,U.lng),s.latLngToECEF(F.lat,U.lng),s.latLngToECEF(F.lat,F.lng),s.latLngToECEF(U.lat,F.lng),s.latLngToECEF(Z,U.lng),s.latLngToECEF(Z,F.lng),s.latLngToECEF(U.lat,ne),s.latLngToECEF(F.lat,ne)];let me=s.Aabb.fromPoints(ge.map(at=>[s.dot(ae,at),s.dot(le,at),s.dot(se,at)]));const ye=s.transformMat4([],me.center,ee);s.squaredLength(ye)===0&&s.set(ye,0,0,1),s.normalize(ye,ye),s.scale$2(ye,ye,s.GLOBE_RADIUS),C.center=s.ecefToLatLng(ye);const Se=C.getWorldToCameraMatrix(),be=s.invert(new Float64Array(16),Se);me=s.Aabb.applyTransform(me,s.multiply([],Se,ee)),s.transformMat4(ye,ye,Se);const Ce=.5*(me.max[2]-me.min[2]),Ne=this._minimumAABBFrustumDistance(C,me),We=s.scale$2([],[0,0,1],Ce),Xe=s.add(We,ye,We),vt=Ne+(C.pitch===0?0:s.distance(ye,Xe)),Ve=C.globeCenterInViewSpace,ot=s.sub([],ye,[Ve[0],Ve[1],Ve[2]]);s.normalize(ot,ot),s.scale$2(ot,ot,vt);const et=s.add([],ye,ot);s.transformMat4(et,et,be);const ct=s.earthRadius/s.GLOBE_RADIUS,qe=s.length(et),ze=s.mercatorZfromAltitude(Math.max(qe*ct-s.earthRadius,Number.EPSILON),0),Qe=Math.min(C.zoomFromMercatorZAdjusted(ze),O.maxZoom);return Qe>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(C.setProjection({name:"mercator"}),C.zoom=Qe,this._cameraForBounds(C,h,y,x,b,A)):{center:C.center,zoom:Qe,bearing:x,pitch:b}}queryTerrainElevation(l,h){const y=this.transform.elevation;return y?(h=s.extend({},{exaggerated:!0},h),y.getAtPoint(s.MercatorCoordinate.fromLngLat(l),null,h.exaggerated)):null}_cameraForBounds(l,h,y,x,b,A){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,h,y,x,b,A);const C=l.clone(),O=this._extendCameraOptions(A),U=C.padding;C.bearing=x,C.pitch=b;const F=s.LngLat.convert(h),Z=s.LngLat.convert(y),ne=new s.LngLat(F.lng,Z.lat),oe=new s.LngLat(Z.lng,F.lat),se=C.project(F),ae=C.project(Z),le=this.queryTerrainElevation(F),ee=this.queryTerrainElevation(Z),ge=this.queryTerrainElevation(ne),me=this.queryTerrainElevation(oe),ye=[[se.x,se.y,Math.min(le||0,ee||0,ge||0,me||0)],[ae.x,ae.y,Math.max(le||0,ee||0,ge||0,me||0)]];let Se=s.Aabb.fromPoints(ye);const be=C.getWorldToCameraMatrix(),Ce=s.invert(new Float64Array(16),be);Se=s.Aabb.applyTransform(Se,be);const Ne=s.sub([],Se.max,Se.min),We=U.left||0,Xe=U.right||0,vt=U.bottom||0,Ve=U.top||0,{left:ot,right:et,top:ct,bottom:qe}=O.padding,ze=.5*(We+Xe),Qe=.5*(Ve+vt),at=Math.min(C.scaleZoom(C.scale*Math.min((C.width-(We+Xe+ot+et))/Ne[0],(C.height-(vt+Ve+qe+ct))/Ne[1])),O.maxZoom),dt=C.scale/C.zoomScale(at);Se=new s.Aabb([Se.min[0]-(ot+ze)*dt,Se.min[1]-(qe+Qe)*dt,Se.min[2]],[Se.max[0]+(et+ze)*dt,Se.max[1]+(ct+Qe)*dt,Se.max[2]]);const jt=.5*Ne[2],hn=this._minimumAABBFrustumDistance(C,Se),Ft=[0,0,1,0];s.transformMat4$1(Ft,Ft,be),s.normalize$2(Ft,Ft);const zt=s.scale$2([],Ft,hn+jt),$t=s.add([],Se.center,zt),wn=(typeof O.offset.x=="number"&&typeof O.offset.y=="number"?new s.pointGeometry(O.offset.x,O.offset.y):s.pointGeometry.convert(O.offset)).rotate(-s.degToRad(x));Se.center[0]-=wn.x*dt,Se.center[1]+=wn.y*dt,s.transformMat4(Se.center,Se.center,Ce),s.transformMat4($t,$t,Ce);const Zt=[Se.center[0],Se.center[1],$t[2]*C.pixelsPerMeter];s.scale$2(Zt,Zt,1/C.worldSize);const Bn=s.lngFromMercatorX(Zt[0]),Un=s.latFromMercatorY(Zt[1]),ir=Math.min(C._zoomFromMercatorZ(Zt[2]),O.maxZoom),Jn=new s.LngLat(Bn,Un);return C.mercatorFromTransition&&ir<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(C.setProjection({name:"globe"}),C.zoom=ir,this._cameraForBounds(C,h,y,x,b,A)):{center:Jn,zoom:ir,bearing:x,pitch:b}}fitBounds(l,h,y){const x=this.cameraForBounds(l,h);return this._fitInternal(x,h,y)}fitScreenCoordinates(l,h,y,x,b){const A=s.pointGeometry.convert(l),C=s.pointGeometry.convert(h),O=new s.pointGeometry(Math.min(A.x,C.x),Math.min(A.y,C.y)),U=new s.pointGeometry(Math.max(A.x,C.x),Math.max(A.y,C.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(A,C))return this;const F=this.transform.pointLocation3D(O),Z=this.transform.pointLocation3D(U),ne=this.transform.pointLocation3D(new s.pointGeometry(O.x,U.y)),oe=this.transform.pointLocation3D(new s.pointGeometry(U.x,O.y)),se=[Math.min(F.lng,Z.lng,ne.lng,oe.lng),Math.min(F.lat,Z.lat,ne.lat,oe.lat)],ae=[Math.max(F.lng,Z.lng,ne.lng,oe.lng),Math.max(F.lat,Z.lat,ne.lat,oe.lat)],le=x&&x.pitch?x.pitch:this.getPitch(),ee=this._cameraForBounds(this.transform,se,ae,y,le,x);return this._fitInternal(ee,x,b)}_fitInternal(l,h,y){return l?(delete(h=s.extend(l,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(l,h){this.stop();const y=l.preloadOnly?this.transform.clone():this.transform;let x=!1,b=!1,A=!1;return"zoom"in l&&y.zoom!==+l.zoom&&(x=!0,y.zoom=+l.zoom),l.center!==void 0&&(y.center=s.LngLat.convert(l.center)),"bearing"in l&&y.bearing!==+l.bearing&&(b=!0,y.bearing=+l.bearing),"pitch"in l&&y.pitch!==+l.pitch&&(A=!0,y.pitch=+l.pitch),l.padding==null||y.isPaddingEqual(l.padding)||(y.padding=l.padding),l.preloadOnly?(this._preloadTiles(y),this):(this.fire(new s.Event("movestart",h)).fire(new s.Event("move",h)),x&&this.fire(new s.Event("zoomstart",h)).fire(new s.Event("zoom",h)).fire(new s.Event("zoomend",h)),b&&this.fire(new s.Event("rotatestart",h)).fire(new s.Event("rotate",h)).fire(new s.Event("rotateend",h)),A&&this.fire(new s.Event("pitchstart",h)).fire(new s.Event("pitch",h)).fire(new s.Event("pitchend",h)),this.fire(new s.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(cm),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,h){const y=this.transform;if(!y.projection.supportsFreeCamera)return s.warnOnce(cm),this;this.stop();const x=y.zoom,b=y.pitch,A=y.bearing;y.setFreeCameraOptions(l);const C=x!==y.zoom,O=b!==y.pitch,U=A!==y.bearing;return this.fire(new s.Event("movestart",h)).fire(new s.Event("move",h)),C&&this.fire(new s.Event("zoomstart",h)).fire(new s.Event("zoom",h)).fire(new s.Event("zoomend",h)),U&&this.fire(new s.Event("rotatestart",h)).fire(new s.Event("rotate",h)).fire(new s.Event("rotateend",h)),O&&this.fire(new s.Event("pitchstart",h)).fire(new s.Event("pitch",h)).fire(new s.Event("pitchend",h)),this.fire(new s.Event("moveend",h)),this}easeTo(l,h){this._stop(!1,l.easeId),((l=s.extend({offset:[0,0],duration:500,easing:s.ease},l)).animate===!1||!l.essential&&s.exported.prefersReducedMotion)&&(l.duration=0);const y=this.transform,x=this.getZoom(),b=this.getBearing(),A=this.getPitch(),C=this.getPadding(),O="zoom"in l?+l.zoom:x,U="bearing"in l?this._normalizeBearing(l.bearing,b):b,F="pitch"in l?+l.pitch:A,Z="padding"in l?l.padding:y.padding,ne=s.pointGeometry.convert(l.offset);let oe,se,ae;if(y.projection.name==="globe"){const We=s.MercatorCoordinate.fromLngLat(y.center),Xe=ne.rotate(-y.angle);We.x+=Xe.x/y.worldSize,We.y+=Xe.y/y.worldSize;const vt=We.toLngLat(),Ve=s.LngLat.convert(l.center||vt);this._normalizeCenter(Ve),oe=y.centerPoint.add(Xe),se=new s.pointGeometry(We.x,We.y).mult(y.worldSize),ae=new s.pointGeometry(s.mercatorXfromLng(Ve.lng),s.mercatorYfromLat(Ve.lat)).mult(y.worldSize).sub(se)}else{oe=y.centerPoint.add(ne);const We=y.pointLocation(oe),Xe=s.LngLat.convert(l.center||We);this._normalizeCenter(Xe),se=y.project(We),ae=y.project(Xe).sub(se)}const le=y.zoomScale(O-x);let ee,ge;l.around&&(ee=s.LngLat.convert(l.around),ge=y.locationPoint(ee));const me=this._zooming||O!==x,ye=this._rotating||b!==U,Se=this._pitching||F!==A,be=!y.isPaddingEqual(Z),Ce=We=>Xe=>{if(me&&(We.zoom=s.number(x,O,Xe)),ye&&(We.bearing=s.number(b,U,Xe)),Se&&(We.pitch=s.number(A,F,Xe)),be&&(We.interpolatePadding(C,Z,Xe),oe=We.centerPoint.add(ne)),ee)We.setLocationAtPoint(ee,ge);else{const vt=We.zoomScale(We.zoom-x),Ve=O>x?Math.min(2,le):Math.max(.5,le),ot=Math.pow(Ve,1-Xe),et=We.unproject(se.add(ae.mult(Xe*ot)).mult(vt));We.setLocationAtPoint(We.renderWorldCopies?et.wrap():et,oe)}return l.preloadOnly||this._fireMoveEvents(h),We};if(l.preloadOnly){const We=this._emulate(Ce,l.duration,y);return this._preloadTiles(We),this}const Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=me,this._rotating=ye,this._pitching=Se,this._padding=be,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,Ne),this._ease(Ce(y),We=>{y.recenterOnTerrain(),this._afterEase(h,We)},l),this}_prepareEase(l,h,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||y.moving||this.fire(new s.Event("movestart",l)),this._zooming&&!y.zooming&&this.fire(new s.Event("zoomstart",l)),this._rotating&&!y.rotating&&this.fire(new s.Event("rotatestart",l)),this._pitching&&!y.pitching&&this.fire(new s.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new s.Event("move",l)),this._zooming&&this.fire(new s.Event("zoom",l)),this._rotating&&this.fire(new s.Event("rotate",l)),this._pitching&&this.fire(new s.Event("pitch",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,x=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new s.Event("zoomend",l)),x&&this.fire(new s.Event("rotateend",l)),b&&this.fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l))}flyTo(l,h){if(!l.essential&&s.exported.prefersReducedMotion){const at=s.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(at,h)}this.stop(),l=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},l);const y=this.transform,x=this.getZoom(),b=this.getBearing(),A=this.getPitch(),C=this.getPadding(),O="zoom"in l?s.clamp(+l.zoom,y.minZoom,y.maxZoom):x,U="bearing"in l?this._normalizeBearing(l.bearing,b):b,F="pitch"in l?+l.pitch:A,Z="padding"in l?l.padding:y.padding,ne=y.zoomScale(O-x),oe=s.pointGeometry.convert(l.offset);let se=y.centerPoint.add(oe);const ae=y.pointLocation(se),le=s.LngLat.convert(l.center||ae);this._normalizeCenter(le);const ee=y.project(ae),ge=y.project(le).sub(ee);let me=l.curve;const ye=Math.max(y.width,y.height),Se=ye/ne,be=ge.mag();if("minZoom"in l){const at=s.clamp(Math.min(l.minZoom,x,O),y.minZoom,y.maxZoom),dt=ye/y.zoomScale(at-x);me=Math.sqrt(dt/be*2)}const Ce=me*me;function Ne(at){const dt=(Se*Se-ye*ye+(at?-1:1)*Ce*Ce*be*be)/(2*(at?Se:ye)*Ce*be);return Math.log(Math.sqrt(dt*dt+1)-dt)}function We(at){return(Math.exp(at)-Math.exp(-at))/2}function Xe(at){return(Math.exp(at)+Math.exp(-at))/2}const vt=Ne(0);let Ve=function(at){return Xe(vt)/Xe(vt+me*at)},ot=function(at){return ye*((Xe(vt)*(We(dt=vt+me*at)/Xe(dt))-We(vt))/Ce)/be;var dt},et=(Ne(1)-vt)/me;if(Math.abs(be)<1e-6||!isFinite(et)){if(Math.abs(ye-Se)<1e-6)return this.easeTo(l,h);const at=Se<ye?-1:1;et=Math.abs(Math.log(Se/ye))/me,ot=function(){return 0},Ve=function(dt){return Math.exp(at*me*dt)}}l.duration="duration"in l?+l.duration:1e3*et/("screenSpeed"in l?+l.screenSpeed/me:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const ct=b!==U,qe=F!==A,ze=!y.isPaddingEqual(Z),Qe=at=>dt=>{const jt=dt*et,hn=1/Ve(jt);at.zoom=dt===1?O:x+at.scaleZoom(hn),ct&&(at.bearing=s.number(b,U,dt)),qe&&(at.pitch=s.number(A,F,dt)),ze&&(at.interpolatePadding(C,Z,dt),se=at.centerPoint.add(oe));const Ft=dt===1?le:at.unproject(ee.add(ge.mult(ot(jt))).mult(hn));return at.setLocationAtPoint(at.renderWorldCopies?Ft.wrap():Ft,se),at._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(h),at};if(l.preloadOnly){const at=this._emulate(Qe,l.duration,y);return this._preloadTiles(at),this}return this._zooming=!0,this._rotating=ct,this._pitching=qe,this._padding=ze,this._prepareEase(h,!1),this._ease(Qe(y),()=>this._afterEase(h),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,h)}if(!l){const y=this.handlers;y&&y.stop(!1)}return this}_ease(l,h,y){y.animate===!1||y.duration===0?(l(1),h()):(this._easeStart=s.exported.now(),this._easeOptions=y,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,h){l=s.wrap(l,-180,180);const y=Math.abs(l-h);return Math.abs(l-360-h)<y&&(l-=360),Math.abs(l+360-h)<y&&(l+=360),l}_normalizeCenter(l){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const y=l.lng-h.center.lng;l.lng+=y>180?-360:y<-180?360:0}_emulate(l,h,y){const x=Math.ceil(15*h/1e3),b=[],A=l(y.clone());for(let C=0;C<=x;C++){const O=A(C/x);b.push(O.clone())}return b}}class um{constructor(l={}){this.options=l,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const h=this.options&&this.options.compact;return this._map=l,this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P("button","mapboxgl-ctrl-attrib-button",this._container),P("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const y=this._map._getUIString(`AttributionControl.${h}`);l.setAttribute("aria-label",y),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(l){const y=h.reduce((x,b,A)=>(b.value&&(x+=`${b.key}=${b.value}${A<h.length-1?"&":""}`),x),"?");l.href=`${s.config.FEEDBACK_URL}/${y}#${nm(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const h=this._map.style._sourceCaches;for(const x in h){const b=h[x];if(b.used){const A=b.getSource();A.attribution&&l.indexOf(A.attribution)<0&&l.push(A.attribution)}}l.sort((x,b)=>x.length-b.length),l=l.filter((x,b)=>{for(let A=b+1;A<l.length;A++)if(l[A].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const y=l.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,l.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class hm{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=P("div","mapboxgl-ctrl");const h=P("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const h in l){const y=l[h].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class nh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const x of y)if(x.id===l)return void(x.cancelled=!0)}run(l=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function $d(p,l,h){if(p=new s.LngLat(p.lng,p.lat),l){const y=new s.LngLat(p.lng-360,p.lat),x=new s.LngLat(p.lng+360,p.lat),b=360*Math.ceil(Math.abs(p.lng-h.center.lng)/360),A=h.locationPoint(p).distSqr(l),C=l.x<0||l.y<0||l.x>h.width||l.y>h.height;h.locationPoint(y).distSqr(l)<A&&(C||Math.abs(y.lng-h.center.lng)<b)?p=y:h.locationPoint(x).distSqr(l)<A&&(C||Math.abs(x.lng-h.center.lng)<b)&&(p=x)}for(;Math.abs(p.lng-h.center.lng)>180;){const y=h.locationPoint(p);if(y.x>=0&&y.y>=0&&y.x<=h.width&&y.y<=h.height)break;p.lng>h.center.lng?p.lng-=360:p.lng+=360}return p}const Ec={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Wd extends s.Evented{constructor(l,h){if(super(),(l instanceof s.window.HTMLElement||h)&&(l=s.extend({element:l},h)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=s.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=P("div");const x=41,b=27,A=D("svg",{display:"block",height:x*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${x}`},this._element),C=D("radialGradient",{id:"shadowGradient"},D("defs",{},A));D("stop",{offset:"10%","stop-opacity":.4},C),D("stop",{offset:"100%","stop-opacity":.05},C),D("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},A),D("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},A),D("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},A),D("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},A),this._offset=s.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const y=this._element.classList;for(const x in Ec)y.remove(`mapboxgl-marker-anchor-${x}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=s.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const h=l.code,y=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(l){const h=l.originalEvent.target,y=this._element;this._popup&&(h===y||y.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,h=this._pos;if(!l||!h)return!1;const y=l.unproject(h),x=l.getFreeCameraOptions();if(!x.position)return!1;const b=x.position.toLngLat();return b.distanceTo(y)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const h=this._pos;if(!h||h.x<0||h.x>l.transform.width||h.y<0||h.y>l.transform.height)return void this._clearFadeTimer();const y=l.unproject(h);let x;l._showingGlobe()&&s.isLngLatBehindGlobe(l.transform,this._lngLat)?x=0:(x=1-l._queryFogOpacity(y),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${Ec[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const l=this._pos,h=this._map,y=this.getPitchAlignment();if(!h||!l||y!=="map")return"";if(!h._showingGlobe()){const O=h.getPitch();return O?`rotateX(${O}deg)`:""}const x=s.radToDeg(s.globeTiltAtLngLat(h.transform,this._lngLat)),b=l.sub(s.globeCenterToScreenPoint(h.transform)),A=Math.abs(b.x)+Math.abs(b.y);if(A===0)return"";const C=x/A;return`rotateX(${-b.y*C}deg) rotateY(${b.x*C}deg)`}_calculateZTransform(){const l=this._pos,h=this._map;if(!h||!l)return"";let y=0;const x=this.getRotationAlignment();if(x==="map")if(h._showingGlobe()){const b=h.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),A=h.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);y=s.radToDeg(Math.atan2(A.y,A.x))-90}else y=-h.getBearing();else if(x==="horizon"){const b=s.smoothstep(4,6,h.getZoom()),A=s.globeCenterToScreenPoint(h.transform);A.y+=b*h.transform.height;const C=l.sub(A),O=s.radToDeg(Math.atan2(C.y,C.x));y=(O>90?O-270:O+90)*(1-b)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(l){s.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=$d(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),l===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=s.pointGeometry.convert(l),this._update(),this}_onMove(l){const h=this._map;if(!h)return;const y=this._pointerdownPos,x=this._positionDelta;if(y&&x){if(!this._isDragging){const b=this._clickTolerance||h._clickTolerance;if(l.point.dist(y)<b)return;this._isDragging=!0}this._pos=l.point.sub(x),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(l){const h=this._map,y=this._pos;h&&y&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(y),this._pointerdownPos=l.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const h=this._map;return h&&(l?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const B_={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},F_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function dm(p=new s.pointGeometry(0,0),l="bottom"){if(typeof p=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(l){case"top":return new s.pointGeometry(0,p);case"top-left":return new s.pointGeometry(h,h);case"top-right":return new s.pointGeometry(-h,h);case"bottom":return new s.pointGeometry(0,-p);case"bottom-left":return new s.pointGeometry(h,-h);case"bottom-right":return new s.pointGeometry(-h,-h);case"left":return new s.pointGeometry(p,0);case"right":return new s.pointGeometry(-p,0)}return new s.pointGeometry(0,0)}return p instanceof s.pointGeometry||Array.isArray(p)?s.pointGeometry.convert(p):s.pointGeometry.convert(p[l]||[0,0])}class U_{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const h=s.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,h,y){this._start=this.getValue(h),this._end=l,this._startTime=h,this._endTime=h+y}}const V_={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},j_={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},fm={showCompass:!0,showZoom:!0,visualizePitch:!1};class G_{constructor(l,h,y=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new sm({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,y&&(this.mousePitch=new am({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),G()}move(l,h){const y=this.map,x=this.mouseRotate.mousemoveWindow(l,h),b=x&&x.bearingDelta;if(b&&y.setBearing(y.getBearing()+b),this.mousePitch){const A=this.mousePitch.mousemoveWindow(l,h),C=A&&A.pitchDelta;C&&y.setPitch(y.getPitch()+C)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){z(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(s.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),$(this.element,l)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,$(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=X(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=X(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const $_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},W_={maxWidth:100,unit:"metric"};function q_(p,l,h){const y=qd(l),x=y/l,b={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[h];this._map._requestDomTask(()=>{this._container.style.width=p*x+"px",this._container.innerHTML=`${y}&nbsp;${b}`})}function qd(p){const l=Math.pow(10,`${Math.floor(p)}`.length-1);let h=p/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:h>=1?1:function(y){const x=Math.pow(10,Math.ceil(-Math.log(y)/Math.LN10));return Math.round(y*x)/x}(h),l*h}const rh={version:s.version,supported:E,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends N_{constructor(p){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(p=s.extend({},j_,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(p.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Lt(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._useWebGL2=p.useWebGL2,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new nh,this._domRenderTaskQueue=new nh,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},V_,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new U_(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,typeof p.container=="string"){if(this._container=s.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new z_(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new E_(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,s.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new um({customAttribution:p.customAttribution})),this._logoControl=new hm,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new s.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new s.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(p,l){if(l===void 0&&(l=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=p.onAdd(this);this._controls.push(p);const y=this._controlPositions[l];return l.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(p);return l>-1&&this._controls.splice(l,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new s.Event("movestart",p)).fire(new s.Event("move",p)),this.fire(new s.Event("resize",p)),l&&this.fire(new s.Event("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(s.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?s.window.navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(l=>l==="auto"?s.window.navigator.language:l):p}setLanguage(p){const l=this._parseLanguage(p);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,l=p.projection.name;let h;l==="globe"&&p.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(p.setMercatorFromTransition(),h=!0):l==="mercator"&&p.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(p.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,l){return this._updateProjection(p||l||{name:"mercator"})}_updateProjection(p){let l;if(l=p.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(p){return this.transform.locationPoint3D(s.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(s.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,l,h){if(p==="mouseenter"||p==="mouseover"){let y=!1;const x=A=>{const C=l.filter(U=>this.getLayer(U)),O=C.length?this.queryRenderedFeatures(A.point,{layers:C}):[];O.length?y||(y=!0,h.call(this,new di(p,this,A.originalEvent,{features:O}))):y=!1},b=()=>{y=!1};return{layers:new Set(l),listener:h,delegates:{mousemove:x,mouseout:b}}}if(p==="mouseleave"||p==="mouseout"){let y=!1;const x=A=>{const C=l.filter(O=>this.getLayer(O));(C.length?this.queryRenderedFeatures(A.point,{layers:C}):[]).length?y=!0:y&&(y=!1,h.call(this,new di(p,this,A.originalEvent)))},b=A=>{y&&(y=!1,h.call(this,new di(p,this,A.originalEvent)))};return{layers:new Set(l),listener:h,delegates:{mousemove:x,mouseout:b}}}{const y=x=>{const b=l.filter(C=>this.getLayer(C)),A=b.length?this.queryRenderedFeatures(x.point,{layers:b}):[];A.length&&(x.features=A,h.call(this,x),delete x.features)};return{layers:new Set(l),listener:h,delegates:{[p]:y}}}}on(p,l,h){if(h===void 0)return super.on(p,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(p,l,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(y);for(const x in y.delegates)this.on(x,y.delegates[x]);return this}once(p,l,h){if(h===void 0)return super.once(p,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(p,l,h);for(const x in y.delegates)this.once(x,y.delegates[x]);return this}off(p,l,h){if(h===void 0)return super.off(p,l);l=new Set(Array.isArray(l)?l:[l]);const y=(b,A)=>{if(b.size!==A.size)return!1;for(const C of b)if(!A.has(C))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[p]:void 0;return x&&(b=>{for(let A=0;A<b.length;A++){const C=b[A];if(C.listener===h&&y(C.layers,l)){for(const O in C.delegates)this.off(O,C.delegates[O]);return b.splice(A,1),this}}})(x),this}queryRenderedFeatures(p,l){return this.style?(l!==void 0||p===void 0||p instanceof s.pointGeometry||Array.isArray(p)||(l=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(p,l){return this.style.querySourceFeatures(p,l)}setStyle(p,l){return(l=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(p,l))}_getUIString(p){const l=this._locale[p];if(l==null)throw new Error(`Missing UI string '${p}'`);return l}_updateStyle(p,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new Lo(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Lo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,l){if(typeof p=="string"){const h=this._requestManager.normalizeStyleURL(p),y=this._requestManager.transformRequest(h,s.ResourceType.Style);s.getJSON(y,(x,b)=>{x?this.fire(new s.ErrorEvent(x)):b&&this._updateDiff(b,l)})}else typeof p=="object"&&this._updateDiff(p,l)}_updateDiff(p,l){try{this.style.setState(p)&&this._update(!0)}catch(h){s.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(p,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(p,l){return this._lazyInitEmptyStyle(),this.style.addSource(p,l),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const l in p){const h=p[l]._tiles;for(const y in h){const x=h[y];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(p,l,h){this._lazyInitEmptyStyle(),this.style.addSourceType(p,l,h)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,l,{pixelRatio:h=1,sdf:y=!1,stretchX:x,stretchY:b,content:A}={}){if(this._lazyInitEmptyStyle(),l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap){const{width:C,height:O,data:U}=s.exported.getImageData(l);this.style.addImage(p,{data:new s.RGBAImage({width:C,height:O},U),pixelRatio:h,stretchX:x,stretchY:b,content:A,sdf:y,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:C,height:O}=l,U=l;this.style.addImage(p,{data:new s.RGBAImage({width:C,height:O},new Uint8Array(U.data)),pixelRatio:h,stretchX:x,stretchY:b,content:A,sdf:y,version:0,userImage:U}),U.onAdd&&U.onAdd(this,p)}}updateImage(p,l){const h=this.style.getImage(p);if(!h)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap?s.exported.getImageData(l):l,{width:x,height:b}=y;x!==void 0&&b!==void 0?x===h.data.width&&b===h.data.height?(h.data.replace(y.data,!(l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap)),this.style.updateImage(p,h)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${b})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,l){s.getImage(this._requestManager.transformRequest(p,s.ResourceType.Image),(h,y)=>{l(h,y instanceof s.window.HTMLImageElement?s.exported.getImageData(y):y)})}listImages(){return this.style.listImages()}addLayer(p,l){return this._lazyInitEmptyStyle(),this.style.addLayer(p,l),this._update(!0)}moveLayer(p,l){return this.style.moveLayer(p,l),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,l,h){return this.style.setLayerZoomRange(p,l,h),this._update(!0)}setFilter(p,l,h={}){return this.style.setFilter(p,l,h),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,l,h,y={}){return this.style.setPaintProperty(p,l,h,y),this._update(!0)}getPaintProperty(p,l){return this.style.getPaintProperty(p,l)}setLayoutProperty(p,l,h,y={}){return this.style.setLayoutProperty(p,l,h,y),this._update(!0)}getLayoutProperty(p,l){return this.style.getLayoutProperty(p,l)}setLight(p,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(p),this.transform):0}setFeatureState(p,l){return this.style.setFeatureState(p,l),this._update()}removeFeatureState(p,l){return this.style.removeFeatureState(p,l),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let h,y,x,b=this._container;for(;b&&(!y||!x);){const A=s.window.getComputedStyle(b).transform;A&&A!=="none"&&(h=A.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(y=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(x=h[3])),b=b.parentElement}this._containerWidth=y?Math.abs(p/y):p,this._containerHeight=x?Math.abs(l/x):l}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=P("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=P("div","mapboxgl-canvas-container",p);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=P("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=P("div","mapboxgl-control-container",p),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=P("div",`mapboxgl-ctrl-${x}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,l){const h=s.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(p),this._canvas.height=h*Math.ceil(l),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${l}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const l=this._markers.indexOf(p);l!==-1&&this._markers.splice(l,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const l=this._popups.indexOf(p);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const p=s.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",p),h=l||this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);h?(this._useWebGL2&&!l&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(h,!0),this.painter=new Wu(h,this.transform,!!l),this.on("data",y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(h)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let l;const h=this.painter.context.extTimerQuery,y=s.exported.now();if(this.listens("gpu-timing-frame")&&(l=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const C=this.transform.zoom,O=this.transform.pitch,U=s.exported.now(),F=new s.EvaluationParameters(C,{now:U,fadeDuration:x,pitch:O,transition:this.style.getTransition()});this.style.update(F)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const C=s.exported.now()-y;h.endQueryEXT(h.TIME_ELAPSED_EXT,l),setTimeout(()=>{const O=h.getQueryObjectEXT(l,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(l),this.fire(new s.Event("gpu-timing-frame",{cpuTime:C,gpuTime:O})),s.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:O}})},50)}if(this.listens("gpu-timing-layer")){const C=this.painter.collectGpuTimers();setTimeout(()=>{const O=this.painter.queryGpuTimers(C);this.fire(new s.Event("gpu-timing-layer",{layerTimes:O}))},50)}if(this.listens("gpu-timing-deferred-render")){const C=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const O=this.painter.queryGpuTimeDeferredRender(C);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:O}))},50)}const A=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(A||this._repaint)this.triggerRepaint();else{const C=!this.isMoving()&&this.loaded();if(C&&(b=this._updateAverageElevation(y,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),C&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const O=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:O})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||A||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const l of this._markers)p&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!p||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(p,l=!1){const h=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);if((l||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const y=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=p;const A=Math.abs(y-x);if(A>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(x),h(x);this._averageElevation.easeTo(x,p,300)}else if(A>1e-4)return this._averageElevation.jumpTo(x),h(x)}return!!this._averageElevation.isEasing(p)&&h(this._averageElevation.getValue(p))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===s.AUTH_ERR_MSG||p.status===401)){const l=this.painter.context.gl;s.storeAuthState(l,!1),this._logoControl instanceof hm&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const h=this.painter.context.gl,y=h.createFramebuffer();function x(b){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,b,0);const A=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,A),A}return h.bindFramebuffer(h.FRAMEBUFFER,y),this._canvasPixelComparison(x(p),l.canvasCopies.map(x),l.timeStamps)}_canvasPixelComparison(p,l,h){let y=h[1]-h[0];const x=p.length/4;for(let b=0;b<l.length;b++){const A=l[b];let C=0;for(let O=0;O<A.length;O+=4)A[O]===p[O]&&A[O+1]===p[O+1]&&A[O+2]===p[O+2]&&A[O+3]===p[O+3]&&(C+=1);y+=(h[b+2]-h[b+1])*(1-C/x)}return y}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=s.exported.frame(l=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(l)}))}_preloadTiles(p){const l=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(l,(h,y)=>h._preloadTiles(p,y),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,p&&this._update())}_setCacheLimits(p,l){s.setCacheLimits(p,l)}get version(){return s.version}},NavigationControl:class{constructor(p){this.options=s.extend({},fm,p),this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),P("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),P("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:l}):h.resetNorth({},{originalEvent:l}))}),this._compassIcon=P("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const l=p.getZoom(),h=l===p.getMaxZoom(),y=l===p.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new G_(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,l){const h=P("button",p,this._container);return h.type="button",h.addEventListener("click",l),h}_setButtonTitle(p,l){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${l}`);p.setAttribute("aria-label",h),p.firstElementChild&&p.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends s.Evented{constructor(p){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},$_,p),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=zo(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const l=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,p(h)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(h=>l(h.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(p){const l=this._map.getMaxBounds(),h=p.coords;return!!l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",p)),this._finish()}}_updateCamera(p){const l=new s.LngLat(p.coords.longitude,p.coords.latitude),h=p.coords.accuracy,y=this._map.getBearing(),x=s.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(h),x,{geolocateSource:!0})}_updateMarker(p){if(p){const l=new s.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,l=s.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,h=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=P("button","mapboxgl-ctrl-geolocate",this._container),P("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P("div","mapboxgl-user-location"),this._dotElement.appendChild(P("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(P("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Wd({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=P("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:um,ScaleControl:class{constructor(p){this.options=s.extend({},W_,p),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=q_.bind(this)),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,l=this._map,h=l._containerHeight/2,y=l._containerWidth/2-p/2,x=l.unproject([y,h]),b=l.unproject([y+p,h]),A=x.distanceTo(b);if(this.options.unit==="imperial"){const C=3.2808*A;C>5280?this._setScale(p,C/5280,"mile"):this._setScale(p,C,"foot")}else this.options.unit==="nautical"?this._setScale(p,A/1852,"nautical-mile"):A>=1e3?this._setScale(p,A/1e3,"kilometer"):this._setScale(p,A,"meter")}_setScale(p,l,h){const y=qd(l),x=y/l;this._map._requestDomTask(()=>{this._container.style.width=p*x+"px",this._container.innerHTML=h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:h}).format(y):`${y}&nbsp;nm`})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof s.window.HTMLElement?this._container=p.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=P("button","mapboxgl-ctrl-fullscreen",this._controlContainer);P("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(p){super(),this.options=s.extend(Object.create(B_),p),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=s.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(s.window.document.createTextNode(p))}setHTML(p){const l=s.window.document.createDocumentFragment(),h=s.window.document.createElement("body");let y;for(h.innerHTML=p;y=h.firstChild,y;)l.appendChild(y);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=P("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(p),this.options.closeButton){const h=this._closeButton=P("button","mapboxgl-popup-close-button",l);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let l;return this._classList.delete(p)?l=!1:(this._classList.add(p),l=!0),this._updateClassList(),l}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const l=this._map,h=this._container,y=this._pos;if(!l||!h||!y)return"bottom";const x=h.offsetWidth,b=h.offsetHeight,A=y.x<x/2,C=y.x>l.transform.width-x/2;if(y.y+p<b)return A?"top-left":C?"top-right":"top";if(y.y>l.transform.height-b){if(A)return"bottom-left";if(C)return"bottom-right"}return A?"left":C?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),p.className=l.join(" ")}_update(p){const l=this._map,h=this._content;if(!l||!this._lngLat&&!this._trackPointer||!h)return;let y=this._container;if(y||(y=this._container=P("div","mapboxgl-popup",l.getContainer()),this._tip=P("div","mapboxgl-popup-tip",y),y.appendChild(h)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=$d(this._lngLat,this._pos,l.transform)),!this._trackPointer||p){const x=this._pos=this._trackPointer&&p?p:l.project(this._lngLat),b=dm(this.options.offset),A=this._anchor=this._getAnchor(b.y),C=dm(this.options.offset,A),O=x.add(C).round();l._requestDomTask(()=>{this._container&&A&&(this._container.style.transform=`${Ec[A]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&l._showingGlobe()){const x=s.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(F_);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:Wd,Style:Lo,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Od,Evented:s.Evented,config:s.config,prewarm:function(){on().acquire(Kt)},clearPrewarmedResources:function(){const p=qt;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(Kt),qt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(p){s.config.ACCESS_TOKEN=p},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(p){s.config.API_URL=p},get workerCount(){return Ht.workerCount},set workerCount(p){Ht.workerCount=p},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){s.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){s.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return rh});var m=c;return m})})(jie);const Hl=aS;Hl.accessToken="pk.eyJ1IjoianVzdGlubTM1MDEiLCJhIjoiY2xlemkwbW1jMXNnczN2bWtyeGl0Zzk1MCJ9.mFADKJCRybPTMrtLp5r9kA";const Gie="mapbox://styles/justinm3501/clfej09fp000e01pk1192aw6u?optimize=true",$ie=()=>{var V;const e=jy(),{data:t,isSuccess:n}=Mu(),{data:i,error:c,isLoading:f,isError:m,isSuccess:s}=cw((V=t==null?void 0:t.user)==null?void 0:V._id,{skip:!n}),v=Vy(H=>H==null?void 0:H.displaySlice),E=ue.useRef(null),I=ue.useRef(null);ue.useEffect(()=>{if(e(Sy("null")),!I.current)return I.current=new Hl.Map({container:E.current??"",style:Gie,center:[50,50],zoom:1,attributionControl:!1}).setMaxZoom(2.5),()=>{var H;return(H=I.current)==null?void 0:H.remove}},[]),ue.useEffect(()=>{var G,z,N,W,$,X,te,J,re;const H=i==null?void 0:i.allPosts.findIndex(ce=>ce._id===v.idCurrent);v.idCurrent.length>=10&&((z=(G=i==null?void 0:i.allPosts[H])==null?void 0:G.destCoordinates)!=null&&z.lng)&&((W=(N=i==null?void 0:i.allPosts[H])==null?void 0:N.destCoordinates)!=null&&W.lat)&&((re=I.current)==null||re.flyTo({center:[(X=($=i==null?void 0:i.allPosts[H])==null?void 0:$.destCoordinates)==null?void 0:X.lng,(J=(te=i==null?void 0:i.allPosts[H])==null?void 0:te.destCoordinates)==null?void 0:J.lat],essential:!0,duration:2e3}))},[v]);const M=({markerClicked:H,id:G,destination:z})=>At("button",{onClick:()=>H(G),children:[Pe(Kz,{className:"transition text-red-500 w-12 h-12 hover:animate-bounce"}),Pe("div",{className:"hidden hover:show p-5 bg-red-300",children:"Toronto, Canada"})]}),P=H=>{e(Sy(H))},[D,k]=ue.useState([]);return ue.useEffect(()=>{s&&(D.forEach(H=>H==null?void 0:H.remove()),k([]),i.allPosts.forEach(H=>{var G,z;if(H.destCoordinates.lng,H.destCoordinates.lat){const N=document.createElement("div");bx(N).render(Pe(M,{markerClicked:P,id:H._id,destination:H.destiantion}));let $=new Hl.Marker(N).setLngLat([(G=H==null?void 0:H.destCoordinates)==null?void 0:G.lng,(z=H==null?void 0:H.destCoordinates)==null?void 0:z.lat]).setOffset([0,-20]);$.addTo(I.current),k(X=>[...X,$]),D.push($)}}))},[i,s]),Pe(il,{children:Pe("div",{ref:E,className:"map-container"})})},Wie=({setDisplayedComponent:e,setPostsCollapsed:t,postCollapsed:n})=>At("div",{className:"flex md:w-4/6 lg:w-2/3 xl:w-1/3 w-11/12 px-4 bg-white pb-2 lg:pb-3 pt-5 h-15 lg:h-20 rounded-t-lg shadow-lg content-center z-30 justify-between ",children:[Pe("div",{className:"w-1/3 flex items-center justify-start"}),Pe("div",{className:"w-1/3 flex items-center justify-center",children:Pe("button",{onClick:()=>e(i=>!i),className:"h-full bg-zinc-700 text-white font-roboto text-lg px-4 py-1 lg:px-8 font-medium rounded-lg transition hover:scale-110 active:bg-zinc-500",children:Pe(wZ,{className:"w-7 lg:w-10 lg:h-10 text-white"})})}),Pe("div",{className:"w-1/3 flex items-center justify-end pr-1",children:Pe("button",{onClick:()=>t(i=>!i),className:"",children:n?Pe(_Z,{className:"w-7"}):Pe(vZ,{className:"w-7"})})})]}),qie=()=>{const[e,t]=ue.useState(!0),[n,i]=ue.useState(!0);return At(MD,{children:[Pe($ie,{}),Pe("div",{className:"w-full",children:Pe(nd.div,{initial:{opacity:0,y:-200},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex flex-col h-screen w-full justify-end items-center xl:items-start ml-0 xl:ml-36 2xl:ml-44 pt-20",children:n?At(il,{children:[e&&Pe(MD,{children:Pe(Vie,{})}),Pe(Wie,{setDisplayedComponent:i,setPostsCollapsed:t,postCollapsed:e})]}):Pe(Lee,{setDisplayedComponent:i})})})]})},Hie=()=>localStorage.getItem("Bearer")?Pe(oI,{}):Pe(tG,{to:"/auth/login"}),Zie=()=>{ue.useState("");const[e,t]=ue.useState({pass:"",confirmPass:""}),n=()=>{};return Pe("div",{className:"w-2/3 lg:w-1/3 xl:w-1/3 2xl:w-1/4",children:At("form",{className:"flex flex-col w-full space-y-4",onSubmit:()=>{},children:[At("label",{className:"font-roboto text-xl font-medium",children:["New Password",Pe("input",{id:"username",value:e.pass,type:"text",placeholder:"Password",onChange:n,className:" w-full p-3 mt-1  font-roboto font-medium text-lg text-zinc-800 border-2 border-gray-300 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg "})]}),At("label",{className:"font-roboto text-xl font-medium",children:["Confirm New Password",Pe("input",{id:"email",value:e.confirmPass,type:"email",placeholder:"Confirm password",onChange:n,className:" w-full p-3 mt-1  font-roboto font-medium text-lg text-zinc-800 border-2 border-gray-300 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg "})]}),Pe("button",{className:"w-full bg-zinc-800 text-white rounded-md h-14 text-xl active:scale-95 transition disabled:bg-zinc-500",disabled:!1,children:"Change Password"})]})})},Yie=()=>{const{data:e,isSuccess:t}=Mu(),[n,{isLoading:i,isSuccess:c}]=RH(),[f,m]=ue.useState(""),[s,v]=ue.useState({firstName:"",lastName:"",username:"",email:"",profileImg:"",baseLocation:{location:"",lat:"",lng:""}});ue.useEffect(()=>{var k,V,H,G,z,N,W,$,X,te,J,re,ce;t&&(v({...s,firstName:(k=e==null?void 0:e.user)==null?void 0:k.firstName,lastName:(V=e==null?void 0:e.user)==null?void 0:V.lastName,username:(H=e==null?void 0:e.user)==null?void 0:H.username,email:(G=e==null?void 0:e.user)==null?void 0:G.email,profileImg:(z=e==null?void 0:e.user)==null?void 0:z.profileImg,baseLocation:{location:(W=(N=e==null?void 0:e.user)==null?void 0:N.baseLocation)==null?void 0:W.location,lat:(X=($=e==null?void 0:e.user)==null?void 0:$.baseLocation)==null?void 0:X.lat,lng:(J=(te=e==null?void 0:e.user)==null?void 0:te.baseLocation)==null?void 0:J.lng}}),m((ce=(re=e==null?void 0:e.user)==null?void 0:re.baseLocation)==null?void 0:ce.location))},[t]);const E=async k=>{try{let V=await HI(k);return await WI(V[0])}catch(V){console.log(V)}},I=k=>{let V=k.target.value;v({...s,[k.target.id]:V})},M=async k=>{k.preventDefault();const V=await E(f);console.log(V);const H={...s,baseLocation:{location:f,...V}};n(H)},P=k=>{m(k)},D=ue.useCallback(({getInputProps:k,getSuggestionItemProps:V,suggestions:H,loading:G})=>At("div",{className:"autocomplete-root",children:[At("label",{className:"font-roboto text-xl font-medium",children:["Location",Pe("input",{className:"w-full p-3 mt-1 font-roboto font-medium text-lg text-zinc-800 border-2 border-gray-300 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg ",...k(),placeholder:"Your current location (Dont worry, it's not public)"})]}),At("div",{className:"absolute bg-white rounded-xl shadow-lg mt-1",children:[G&&Pe("div",{className:"text-xl font-roboto text-zinc-800",children:"Loading..."}),H.map(z=>Pe("div",{className:" transition text-lg font-roboto font-medium px-6 py-2 text-zinc-800 hover:text-purple-700 hover:scale-105",...V(z),children:Pe("span",{children:z.description})},z.description))]})]}),[f]);return t?Pe("div",{className:"w-2/3 lg:w-1/3 xl:w-1/3 2xl:w-1/4 pb-10",children:At("form",{className:"flex flex-col w-full space-y-4",onSubmit:M,children:[At("div",{className:"flex",children:[Pe("img",{src:"data:image/png;base64,"+s.profileImg,className:"w-28 rounded-full mb-5"}),At("div",{className:"font-roboto mt-7 ml-6",children:[Pe("p",{className:"text-xl font-medium  -mb-1",children:"Avatar"}),Pe("a",{className:"text-sm text-zinc-600 font-normal hover:underline",children:"Change Photo"})]})]}),At("div",{className:"flex w-full",children:[At("label",{className:"font-roboto text-xl font-medium flex flex-col w-1/2 mr-4",children:["First Name",Pe("input",{id:"firstName",value:s.firstName,type:"text",placeholder:"Your first name",onChange:I,className:" w-full p-3 mt-1 font-roboto font-medium text-lg text-zinc-800 border-2 border-gray-300 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg "})]}),At("label",{className:"font-roboto text-xl font-medium flex flex-col w-1/2",children:["Last Name",Pe("input",{id:"lastName",value:s.lastName,type:"text",placeholder:"Your last name",onChange:I,className:" w-full p-3 mt-1 font-roboto font-medium text-lg text-zinc-800 border-2 border-gray-300 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg "})]})]}),At("label",{className:"font-roboto text-xl font-medium",children:["Username",Pe("input",{id:"username",value:s.username,type:"text",placeholder:"Username",onChange:I,className:" w-full p-3 mt-1  font-roboto font-medium text-lg text-zinc-800 border-2 border-gray-300 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg "})]}),At("label",{className:"font-roboto text-xl font-medium",children:["Email",Pe("input",{id:"email",value:s.email,type:"email",placeholder:"Your email",onChange:I,className:" w-full p-3 mt-1  font-roboto font-medium text-lg text-zinc-800 border-2 border-gray-300 rounded-lg bg-transparent sm:text-md focus:ring--purple-600 focus:border-purple-600 focus:shadow-lg "})]}),Pe(nN,{value:f,onChange:P,children:D}),Pe("button",{className:"w-full bg-zinc-800 text-white rounded-md h-14 text-xl active:scale-95 transition disabled:bg-zinc-500",disabled:!!i,children:"Save Changes "}),c&&Pe("h1",{children:"Congrats its updated"})]})}):Pe("h1",{children:"Loading..."})},Xie=()=>Pe("div",{children:Pe("h1",{children:"Preferences"})}),Qie=()=>Pe(q3,{children:At(as,{path:"/",element:Pe(Kie,{}),children:[Pe(as,{index:!0,path:"/",element:Pe(Yie,{})}),Pe(as,{path:"/password",element:Pe(Zie,{})}),Pe(as,{path:"/preferences",element:Pe(Xie,{})})]})}),Kie=()=>At("div",{className:"flex flex-col items-center pt-28 h-screen w-full",children:[At("div",{className:"w-10/12 xl:w-1/2 mb-16 justify-center",children:[Pe("h1",{className:"self-start font-roboto text-4xl font-medium text-zinc-800 pb-1.5",children:"Account"}),Pe("p",{className:"font-roboto text-xl text-zinc-700",children:"Set your account settings below"}),Pe("div",{className:"p-2 rounded-lg bg-white mt-5 shadow-md",children:At("ul",{className:"flex w-full font-roboto text-md lg:text-xl text-zinc-800 items-center space-x-2",children:[Pe("li",{className:"w-1/3",children:Pe(Bl,{to:"/account",end:!0,children:({isActive:e})=>Pe("div",{className:e?"font-semibold w-full rounded-md p-3  bg-zinc-100 text-center text-purple-800":"font-semibold w-full rounded-md p-3 text-center transition hover:scale-110",children:"Profile"})})}),Pe("li",{className:"w-1/3",children:Pe(Bl,{to:"/account/password",children:({isActive:e,isPending:t})=>Pe("div",{className:e?"font-semibold w-full rounded-md p-3  bg-zinc-100 text-center text-purple-800":"font-semibold w-full rounded-md p-3 text-center transition hover:scale-110",children:"Password"})})}),Pe("li",{className:"w-1/3",children:Pe(Bl,{to:"/account/preferences",children:({isActive:e})=>Pe("div",{className:e?"font-semibold w-full rounded-md p-3  bg-zinc-100 text-center text-purple-800":"font-semibold w-full rounded-md p-3 text-center transition hover:scale-110",children:"Preferences"})})})]})})]}),Pe(oI,{})]}),Jie=({username:e,profileImg:t})=>{const[n,i]=ue.useState(!1);return At("div",{className:"w-14 h-14",children:[Pe("img",{className:"rounded-full w-14 h-14 border-white border-separate border-2 border-spacing-7 transition hover:scale-125",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),src:"data:image/png;base64,"+t}),n&&Pe("div",{className:"w-fit bg-white rounded-lg p-3  shadow-lg bg-opacity-75",children:Pe("h1",{className:"text-lg text-zinc-800 font-roboto font-medium transition ",children:e})})]})},eoe=()=>{Hl.accessToken="pk.eyJ1IjoianVzdGlubTM1MDEiLCJhIjoiY2xlemkwbW1jMXNnczN2bWtyeGl0Zzk1MCJ9.mFADKJCRybPTMrtLp5r9kA";const e="mapbox://styles/justinm3501/clfej09fp000e01pk1192aw6u?optimize=true",{data:t,isSuccess:n}=PH(),i=ue.useRef(null),c=ue.useRef(null),f=ue.useRef([window.innerWidth,window.innerHeight]);return ue.useEffect(()=>{let m,s;if(f.current[0]<=1280?(m=.7,s=1):(m=2,s=3),!c.current)return c.current=new Hl.Map({container:i.current??"",style:e,center:[-74.5,40],zoom:m,attributionControl:!1,trackResize:!0}).setMaxZoom(s).setMinZoom(1),()=>{var v;return(v=c.current)==null?void 0:v.remove}},[]),ue.useEffect(()=>{n&&t.allUsers.forEach(m=>{var s,v;if(m!=null&&m.baseLocation.lng&&(m!=null&&m.baseLocation.lat)){const E=document.createElement("div");bx(E).render(Pe(Jie,{username:m.username,profileImg:m.profileImg})),new Hl.Marker(E).setLngLat([(s=m==null?void 0:m.baseLocation)==null?void 0:s.lng,(v=m==null?void 0:m.baseLocation)==null?void 0:v.lat]).setOffset([0,-20]).addTo(c.current)}})},[t,n]),Pe(il,{children:Pe("div",{ref:i,className:"landingMapContainer w-screen h-screen lg:mt-0"})})},toe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALHSURBVHgBtZhJa1RBFIVPa4JTEhyTaOKA0UVsESMKIkRBRNwKSjYuxV/gxj8g7ly5ETfuRBBE3OlCV844IBicNRrFmY5jEqPnUNWkeMmruj0d+Mjrqlfvna66det2CqivVpEB//czuUiupwbNRP20hBwmHaRA5pE+MkzexQbOQP20zb84q52JcXU1MSunfS4SaoJNmt5NZD1pJ1/IbXI/uGc4Z+xrJGSJiUXkCNlOlpOFpItsIa1kkEz4l3X4vrI+kNPkV+wFBaR1gPRH+i+T82QdmQO3xIqNT95g1IBkWY73if5dZDP5Crf+MnEcbouaZFkOmSjCxYG+VQumzqC+8UrykSyA2ykK1CcwyGJijDST1WQppl9CGVW8jPr7L8Atz2+4uIjKskUVmHvIshwDj0mPv9YSdJIX5BJZAYMsMdFL2iL9+uatgYlnZK8fp5m4Qn6gRhN9if7R4HpHpk9xMb8eJloifSW4M6OscfINLkCHyF3yFglZTMyO9LX5l/309yk33CJryAh5DoMsJiYS/cXgWoGonaQYOQajLLvjOyqT0vZJ8s86wGIiuc8zuokKsqXVxNNIn2ZpLNO2G9PXFTWZ0HGdt8WaMHW59MwBVCBr2tb0FjEZyNp2Z8kZ8pJszYzpJtdgOEGtJiQVLDfglkY1w1HyxhtUHunPefZDGFRJeaej+hFcFvwbtOeVbxsRzzFVmZCavZlQnTn3Kl33oAEmlAVPZNq6I/dvQANMSH+Cax3t4QGn2AlnqheGErLWkl8VVBgTD8i94PNiuMK4YSa05vuDz9opV8mroE07JFnYVGtC+eIgXHVd1h24OnQoc287DA+rVHrxIbI2aFNGPeevlcjGg2d3pR5YzUzsgytiQ+nULPlrnZ4jQV+sNKzaRPZw0i+swUxbaCKZlav514DKN/0m1VY9BRcLWWlJlCNK3mQp9sD/765/LMIqOX0AAAAASUVORK5CYII=",noe=()=>At("div",{className:"w-auto",children:[Pe("h1",{className:"font-black absolute text-zinc-400 left-10 top-20 font-inter text-opacity-10 text-[200px] -z-10 hidden 2xl:block",children:"WorldWander"}),At("div",{className:"absolute top-10 2xl:top-1/3 ml-10 md:ml-36 origin-center w-11/12 2xl:w-2/3 z-10 pointer-events-none",children:[Pe("h2",{className:"font-roboto text-zinc-800 font-semibold text-2xl md:text-5xl lg:text-6xl mt-10",children:"Share your adventures."}),Pe("h4",{className:"font-roboto text-zinc-500 font-semi-bold text-xl w-11/12 lg:text-[35px] max-w-xl pt-1 leading-tight",children:"Display your travels and experiences in a easy and beautiful way."}),Pe(Sx,{to:"/auth/register",children:At("button",{className:" mt-5 xl:mt-12 px-3 md:px-5 py-1.5 md:py-3 text-purple-700 font-roboto font-medium border-2 lg:border-4 border-zinc-300 rounded-lg flex items-center text-lg md:text-2xl hover:border-purple-700 hover:shadow-lg pointer-events-auto transition active:translate-x-4 ",children:["Join Us ",Pe(Zz,{className:"text-purple-700 w-6 lg:w-8 h-6 lg:h-8 ml-2 lg:ml-3"})]})})]}),At("div",{className:"flex w-fit absolute bottom-4 md:bottom-10 lg:bottom-20 left-4 md:left-10 lg:left-36 items-center",children:[Pe("div",{className:"rounded-full h-14 lg:h-24 w-14 lg:w-24 p-3 lg:p-6 bg-purple-300 mr-3 flex items-center justify-center",children:Pe("img",{className:"-ml-1 w-full",src:toe})}),At("div",{children:[Pe("p",{className:"text-zinc-800 font-roboto font-medium text-md lg:text-xl",children:"100+ Wanderers"}),Pe("p",{className:"text-zinc-500 font-roboto font-medium text-sm lg:text-md w-60 leading-tight",children:"Over 100 people around the world sharing their adventures."})]})]}),Pe(eoe,{})]}),V4="/assets/AuthBG-7c958c85.png";var roe=Object.create,Cw=Object.defineProperty,ioe=Object.getOwnPropertyDescriptor,ooe=Object.getOwnPropertyNames,soe=Object.getPrototypeOf,aoe=Object.prototype.hasOwnProperty,loe=(e,t)=>{for(var n in t)Cw(e,n,{get:t[n],enumerable:!0})},j4=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of ooe(t))!aoe.call(e,c)&&c!==n&&Cw(e,c,{get:()=>t[c],enumerable:!(i=ioe(t,c))||i.enumerable});return e},Tn=(e,t,n)=>(n=e!=null?roe(soe(e)):{},j4(t||!e||!e.__esModule?Cw(n,"default",{value:e,enumerable:!0}):n,e)),coe=e=>j4(Cw({},"__esModule",{value:!0}),e),G4={};loe(G4,{BarsFade:()=>hoe,BarsRotateFade:()=>doe,BarsScale:()=>foe,BarsScaleFade:()=>poe,BarsScaleMiddle:()=>moe,BlocksScale:()=>goe,BlocksShuffleThree:()=>yoe,BlocksShuffleTwo:()=>_oe,BlocksWave:()=>voe,BouncingBall:()=>xoe,Clock:()=>woe,DotRevolve:()=>boe,Eclipse:()=>Eoe,EclipseHalf:()=>Toe,GoeeyBallsOne:()=>Soe,GoeeyBallsTwo:()=>Ioe,Multiple:()=>koe,NinetyRing:()=>Moe,NinetyRingWithBg:()=>Aoe,OneEightyRing:()=>Coe,OneEightyRingWithBg:()=>Poe,Pulse:()=>Roe,PulseMultiple:()=>Doe,PulseRing:()=>Ooe,PulseRingsThree:()=>Loe,PulseRingsTwo:()=>zoe,PulseThree:()=>Noe,PulseTwo:()=>Boe,SixDotsRotate:()=>Foe,SixDotsScale:()=>Uoe,SixDotsScaleMiddle:()=>Voe,Tadpole:()=>joe,ThreeDotsBounce:()=>Goe,ThreeDotsFade:()=>$oe,ThreeDotsMiddle:()=>Zoe,ThreeDotsMoving:()=>Woe,ThreeDotsRotate:()=>qoe,ThreeDotsScale:()=>Hoe,TwelveDotsScaleRotate:()=>Yoe,TwoSeventyRing:()=>Xoe,TwoSeventyRingWithBg:()=>Qoe,Wifi:()=>Koe,WifiFade:()=>Joe,WindToy:()=>ese});var uoe=coe(G4),bh=Tn(ue);function hoe({width:e=24,height:t=24,color:n,dur:i="0.75s"}){return bh.default.createElement("svg",{width:e,height:t,fill:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},bh.default.createElement("rect",{x:"1",y:"4",width:"6",height:"14",opacity:"1"},bh.default.createElement("animate",{id:"a",begin:"0;b.end-0.25s",attributeName:"opacity",dur:i,values:"1;.2",fill:"freeze"})),bh.default.createElement("rect",{x:"9",y:"4",width:"6",height:"14",opacity:".4"},bh.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"opacity",dur:i,values:"1;.2",fill:"freeze"})),bh.default.createElement("rect",{x:"17",y:"4",width:"6",height:"14",opacity:".3"},bh.default.createElement("animate",{id:"b",begin:"a.begin+0.3s",attributeName:"opacity",dur:i,values:"1;.2",fill:"freeze"})))}var $a=Tn(ue);function doe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return $a.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},$a.default.createElement("g",null,$a.default.createElement("rect",{x:"11",y:"1",width:"2",height:"5",opacity:".14"}),$a.default.createElement("rect",{x:"11",y:"1",width:"2",height:"5",transform:"rotate(30 12 12)",opacity:".29"}),$a.default.createElement("rect",{x:"11",y:"1",width:"2",height:"5",transform:"rotate(60 12 12)",opacity:".43"}),$a.default.createElement("rect",{x:"11",y:"1",width:"2",height:"5",transform:"rotate(90 12 12)",opacity:".57"}),$a.default.createElement("rect",{x:"11",y:"1",width:"2",height:"5",transform:"rotate(120 12 12)",opacity:".71"}),$a.default.createElement("rect",{x:"11",y:"1",width:"2",height:"5",transform:"rotate(150 12 12)",opacity:".86"}),$a.default.createElement("rect",{x:"11",y:"1",width:"2",height:"5",transform:"rotate(180 12 12)"}),$a.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"discrete",dur:n,values:"0 12 12;30 12 12;60 12 12;90 12 12;120 12 12;150 12 12;180 12 12;210 12 12;240 12 12;270 12 12;300 12 12;330 12 12;360 12 12",repeatCount:"indefinite"})))}var ao=Tn(ue);function foe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return ao.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ao.default.createElement("rect",{x:"1",y:"6",width:"2.8",height:"12"},ao.default.createElement("animate",{id:"a",begin:"0;b.end-0.1s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"}),ao.default.createElement("animate",{begin:"0;b.end-0.1s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"})),ao.default.createElement("rect",{x:"5.8",y:"6",width:"2.8",height:"12"},ao.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"}),ao.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"})),ao.default.createElement("rect",{x:"10.6",y:"6",width:"2.8",height:"12"},ao.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"}),ao.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"})),ao.default.createElement("rect",{x:"15.4",y:"6",width:"2.8",height:"12"},ao.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"}),ao.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"})),ao.default.createElement("rect",{x:"20.2",y:"6",width:"2.8",height:"12"},ao.default.createElement("animate",{id:"b",begin:"a.begin+0.4s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"}),ao.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".36,.61,.3,.98;.36,.61,.3,.98"})))}var ts=Tn(ue);function poe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return ts.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ts.default.createElement("rect",{x:"1",y:"4",width:"6",height:"14",opacity:"1"},ts.default.createElement("animate",{id:"a",begin:"0;b.end-0.25s",attributeName:"y",dur:n,values:"1;5",fill:"freeze"}),ts.default.createElement("animate",{begin:"0;b.end-0.25s",attributeName:"height",dur:n,values:"22;14",fill:"freeze"}),ts.default.createElement("animate",{begin:"0;b.end-0.25s",attributeName:"opacity",dur:n,values:"1;.2",fill:"freeze"})),ts.default.createElement("rect",{x:"9",y:"4",width:"6",height:"14",opacity:".4"},ts.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"y",dur:"0.75s",values:"1;5",fill:"freeze"}),ts.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"height",dur:n,values:"22;14",fill:"freeze"}),ts.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"opacity",dur:n,values:"1;.2",fill:"freeze"})),ts.default.createElement("rect",{x:"17",y:"4",width:"6",height:"14",opacity:".3"},ts.default.createElement("animate",{id:"b",begin:"a.begin+0.3s",attributeName:"y",dur:n,values:"1;5",fill:"freeze"}),ts.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"height",dur:n,values:"22;14",fill:"freeze"}),ts.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"opacity",dur:n,values:"1;.2",fill:"freeze"})))}var lo=Tn(ue);function moe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return lo.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},lo.default.createElement("rect",{x:"1",y:"6",width:"2.8",height:"12"},lo.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".14,.73,.34,1;.65,.26,.82,.45"}),lo.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".14,.73,.34,1;.65,.26,.82,.45"})),lo.default.createElement("rect",{x:"5.8",y:"6",width:"2.8",height:"12"},lo.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".14,.73,.34,1;.65,.26,.82,.45"}),lo.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".14,.73,.34,1;.65,.26,.82,.45"})),lo.default.createElement("rect",{x:"10.6",y:"6",width:"2.8",height:"12"},lo.default.createElement("animate",{id:"a",begin:"0;b.end-0.1s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".14,.73,.34,1;.65,.26,.82,.45"}),lo.default.createElement("animate",{begin:"0;b.end-0.1s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".14,.73,.34,1;.65,.26,.82,.45"})),lo.default.createElement("rect",{x:"15.4",y:"6",width:"2.8",height:"12"},lo.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".14,.73,.34,1;.65,.26,.82,.45"}),lo.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".14,.73,.34,1;.65,.26,.82,.45"})),lo.default.createElement("rect",{x:"20.2",y:"6",width:"2.8",height:"12"},lo.default.createElement("animate",{id:"b",begin:"a.begin+0.4s",attributeName:"y",calcMode:"spline",dur:n,values:"6;1;6",keySplines:".14,.73,.34,1;.65,.26,.82,.45"}),lo.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"height",calcMode:"spline",dur:n,values:"12;22;12",keySplines:".14,.73,.34,1;.65,.26,.82,.45"})))}var ri=Tn(ue);function goe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return ri.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ri.default.createElement("rect",{x:"1.5",y:"1.5",rx:"1",width:"9",height:"9"},ri.default.createElement("animate",{id:"a",begin:"0;b.end+0.15s",attributeName:"x",dur:n,values:"1.5;.5;1.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"0;b.end+0.15s",attributeName:"y",dur:n,values:"1.5;.5;1.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"0;b.end+0.15s",attributeName:"width",dur:n,values:"9;11;9",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"0;b.end+0.15s",attributeName:"height",dur:n,values:"9;11;9",keyTimes:"0;.2;1"})),ri.default.createElement("rect",{x:"13.5",y:"1.5",rx:"1",width:"9",height:"9"},ri.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"x",dur:n,values:"13.5;12.5;13.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"y",dur:n,values:"1.5;.5;1.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"width",dur:n,values:"9;11;9",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"height",dur:n,values:"9;11;9",keyTimes:"0;.2;1"})),ri.default.createElement("rect",{x:"13.5",y:"13.5",rx:"1",width:"9",height:"9"},ri.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"x",dur:n,values:"13.5;12.5;13.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"y",dur:n,values:"13.5;12.5;13.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"width",dur:n,values:"9;11;9",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"height",dur:n,values:"9;11;9",keyTimes:"0;.2;1"})),ri.default.createElement("rect",{x:"1.5",y:"13.5",rx:"1",width:"9",height:"9"},ri.default.createElement("animate",{id:"b",begin:"a.begin+0.45s",attributeName:"x",dur:n,values:"1.5;.5;1.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.45s",attributeName:"y",dur:n,values:"13.5;12.5;13.5",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.45s",attributeName:"width",dur:n,values:"9;11;9",keyTimes:"0;.2;1"}),ri.default.createElement("animate",{begin:"a.begin+0.45s",attributeName:"height",dur:n,values:"9;11;9",keyTimes:"0;.2;1"})))}var co=Tn(ue);function yoe({width:e=24,height:t=24,dur:n="0.2s",color:i}){return co.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement("rect",{x:"1",y:"1",rx:"1",width:"10",height:"10"},co.default.createElement("animate",{id:"a",begin:"0;l.end",attributeName:"x",dur:n,values:"1;13",fill:"freeze"}),co.default.createElement("animate",{id:"d",begin:"c.end",attributeName:"y",dur:n,values:"1;13",fill:"freeze"}),co.default.createElement("animate",{id:"g",begin:"f.end",attributeName:"x",dur:n,values:"13;1",fill:"freeze"}),co.default.createElement("animate",{id:"j",begin:"i.end",attributeName:"y",dur:n,values:"13;1",fill:"freeze"})),co.default.createElement("rect",{x:"1",y:"13",rx:"1",width:"10",height:"10"},co.default.createElement("animate",{id:"b",begin:"a.end",attributeName:"y",dur:n,values:"13;1",fill:"freeze"}),co.default.createElement("animate",{id:"e",begin:"d.end",attributeName:"x",dur:n,values:"1;13",fill:"freeze"}),co.default.createElement("animate",{id:"h",begin:"g.end",attributeName:"y",dur:n,values:"1;13",fill:"freeze"}),co.default.createElement("animate",{id:"k",begin:"j.end",attributeName:"x",dur:n,values:"13;1",fill:"freeze"})),co.default.createElement("rect",{x:"13",y:"13",rx:"1",width:"10",height:"10"},co.default.createElement("animate",{id:"c",begin:"b.end",attributeName:"x",dur:n,values:"13;1",fill:"freeze"}),co.default.createElement("animate",{id:"f",begin:"e.end",attributeName:"y",dur:n,values:"13;1",fill:"freeze"}),co.default.createElement("animate",{id:"i",begin:"h.end",attributeName:"x",dur:n,values:"1;13",fill:"freeze"}),co.default.createElement("animate",{id:"l",begin:"k.end",attributeName:"y",dur:n,values:"1;13",fill:"freeze"})))}var oa=Tn(ue);function _oe({width:e=24,height:t=24,dur:n="0.2s",color:i}){return oa.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},oa.default.createElement("rect",{x:"1",y:"1",rx:"1",width:"10",height:"10"},oa.default.createElement("animate",{id:"a",begin:"0;k.end",attributeName:"x",dur:n,values:"1;13",fill:"freeze"}),oa.default.createElement("animate",{id:"d",begin:"b.end",attributeName:"y",dur:n,values:"1;13",fill:"freeze"}),oa.default.createElement("animate",{id:"g",begin:"e.end",attributeName:"x",dur:n,values:"13;1",fill:"freeze"}),oa.default.createElement("animate",{id:"j",begin:"h.end",attributeName:"y",dur:n,values:"13;1",fill:"freeze"})),oa.default.createElement("rect",{x:"1",y:"13",rx:"1",width:"10",height:"10"},oa.default.createElement("animate",{id:"b",begin:"a.end",attributeName:"y",dur:n,values:"13;1",fill:"freeze"}),oa.default.createElement("animate",{id:"e",begin:"d.end",attributeName:"x",dur:n,values:"1;13",fill:"freeze"}),oa.default.createElement("animate",{id:"h",begin:"g.end",attributeName:"y",dur:n,values:"1;13",fill:"freeze"}),oa.default.createElement("animate",{id:"k",begin:"j.end",attributeName:"x",dur:n,values:"13;1",fill:"freeze"})))}var gn=Tn(ue);function voe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return gn.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},gn.default.createElement("rect",{x:"1",y:"1",width:"7.33",height:"7.33"},gn.default.createElement("animate",{id:"a",begin:"0;b.end+0.2s",attributeName:"x",dur:n,values:"1;4;1"}),gn.default.createElement("animate",{begin:"0;b.end+0.2s",attributeName:"y",dur:n,values:"1;4;1"}),gn.default.createElement("animate",{begin:"0;b.end+0.2s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"0;b.end+0.2s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"8.33",y:"1",width:"7.33",height:"7.33"},gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"x",dur:n,values:"8.33;11.33;8.33"}),gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"y",dur:n,values:"1;4;1"}),gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"1",y:"8.33",width:"7.33",height:"7.33"},gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"x",dur:n,values:"1;4;1"}),gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"y",dur:n,values:"8.33;11.33;8.33"}),gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"15.66",y:"1",width:"7.33",height:"7.33"},gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"x",dur:n,values:"15.66;18.66;15.66"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"y",dur:n,values:"1;4;1"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"8.33",y:"8.33",width:"7.33",height:"7.33"},gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"x",dur:n,values:"8.33;11.33;8.33"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"y",dur:n,values:"8.33;11.33;8.33"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"1",y:"15.66",width:"7.33",height:"7.33"},gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"x",dur:n,values:"1;4;1"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"y",dur:n,values:"15.66;18.66;15.66"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"15.66",y:"8.33",width:"7.33",height:"7.33"},gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"x",dur:n,values:"15.66;18.66;15.66"}),gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"y",dur:n,values:"8.33;11.33;8.33"}),gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"8.33",y:"15.66",width:"7.33",height:"7.33"},gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"x",dur:n,values:"8.33;11.33;8.33"}),gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"y",dur:n,values:"15.66;18.66;15.66"}),gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.3s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})),gn.default.createElement("rect",{x:"15.66",y:"15.66",width:"7.33",height:"7.33"},gn.default.createElement("animate",{id:"b",begin:"a.begin+0.4s",attributeName:"x",dur:n,values:"15.66;18.66;15.66"}),gn.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"y",dur:n,values:"15.66;18.66;15.66"}),gn.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"width",dur:n,values:"7.33;1.33;7.33"}),gn.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"height",dur:n,values:"7.33;1.33;7.33"})))}var Eh=Tn(ue);function ga(e){return typeof e=="string"?e.slice(-1).toLocaleLowerCase()==="s"?parseFloat(e.slice(0,-1)):parseFloat(e):e}function xoe({width:e=24,height:t=24,dur:n="0.375s",color:i}){return Eh.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Eh.default.createElement("ellipse",{cx:"12",cy:"5",rx:"4",ry:"4"},Eh.default.createElement("animate",{id:"f",begin:"0;r.end",attributeName:"cy",calcMode:"spline",dur:n,values:"5;20",keySplines:".33,0,.66,.33",fill:"freeze"}),Eh.default.createElement("animate",{id:"b",begin:"f.end",attributeName:"rx",calcMode:"spline",dur:ga(n)/7.5,values:"4;4.8;4",keySplines:".33,0,.66,.33;.33,.66,.66,1"}),Eh.default.createElement("animate",{begin:"f.end",attributeName:"ry",calcMode:"spline",dur:ga(n)/7.5,values:"4;3;4",keySplines:".33,0,.66,.33;.33,.66,.66,1"}),Eh.default.createElement("animate",{begin:"f.end",attributeName:"cy",calcMode:"spline",dur:ga(n)/7.5,values:"20;20.5;20",keySplines:".33,0,.66,.33;.33,.66,.66,1"}),Eh.default.createElement("animate",{id:"r",begin:"b.end",attributeName:"cy",calcMode:"spline",dur:n,values:"20;5",keySplines:".33,.66,.66,1"})))}var yf=Tn(ue);function woe({width:e=24,height:t=24,dur:n="9s",color:i}){return yf.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},yf.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z"}),yf.default.createElement("rect",{x:"11",y:"6",rx:"1",width:"2",height:"7"},yf.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})),yf.default.createElement("rect",{x:"11",y:"11",rx:"1",width:"2",height:"9"},yf.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:ga(n)/12,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var dv=Tn(ue);function boe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return dv.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},dv.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"}),dv.default.createElement("circle",{cx:"12",cy:"2.5",r:"1.5"},dv.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var aT=Tn(ue);function Eoe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return aT.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},aT.default.createElement("path",{d:"M2,12A11.2,11.2,0,0,1,13,1.05C12.67,1,12.34,1,12,1a11,11,0,0,0,0,22c.34,0,.67,0,1-.05C6,23,2,17.74,2,12Z"},aT.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var lT=Tn(ue);function Toe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return lT.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},lT.default.createElement("path",{d:"M2,12A10.94,10.94,0,0,1,5,4.65c-.21-.19-.42-.36-.62-.55h0A11,11,0,0,0,12,23c.34,0,.67,0,1-.05C6,23,2,17.74,2,12Z"},lT.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var ns=Tn(ue);function Soe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return ns.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ns.default.createElement("defs",null,ns.default.createElement("filter",{id:"g"},ns.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1.5",result:"b"}),ns.default.createElement("feColorMatrix",{in:"b",mode:"matrix",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 18 -7",result:"g"}),ns.default.createElement("feBlend",{in:"SourceGraphic",in2:"g"}))),ns.default.createElement("g",{filter:"url(#g)"},ns.default.createElement("circle",{cx:"4",cy:"12",r:"3"},ns.default.createElement("animate",{attributeName:"cx",calcMode:"spline",dur:n,values:"4;9;4",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite"}),ns.default.createElement("animate",{attributeName:"r",calcMode:"spline",dur:n,values:"3;8;3",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite"})),ns.default.createElement("circle",{cx:"15",cy:"12",r:"8"},ns.default.createElement("animate",{attributeName:"cx",calcMode:"spline",dur:n,values:"15;20;15",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite"}),ns.default.createElement("animate",{attributeName:"r",calcMode:"spline",dur:n,values:"8;3;8",keySplines:".56,.52,.17,.98;.56,.52,.17,.98",repeatCount:"indefinite"}))))}var Ps=Tn(ue);function Ioe({width:e=24,height:t=24,dur:n="2s",color:i}){return Ps.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ps.default.createElement("defs",null,Ps.default.createElement("filter",{id:"g"},Ps.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1",result:"b"}),Ps.default.createElement("feColorMatrix",{in:"b",mode:"matrix",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 18 -7",result:"g"}),Ps.default.createElement("feBlend",{in:"SourceGraphic",in2:"g"}))),Ps.default.createElement("g",{filter:"url(#g)"},Ps.default.createElement("circle",{cx:"5",cy:"12",r:"4"},Ps.default.createElement("animate",{attributeName:"cx",calcMode:"spline",dur:n,values:"5;8;5",keySplines:".36,.62,.43,.99;.79,0,.58,.57",repeatCount:"indefinite"})),Ps.default.createElement("circle",{cx:"19",cy:"12",r:"4"},Ps.default.createElement("animate",{attributeName:"cx",calcMode:"spline",dur:n,values:"19;16;19",keySplines:".36,.62,.43,.99;.79,0,.58,.57",repeatCount:"indefinite"})),Ps.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:ga(n)/(3/4),values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var cT=Tn(ue);function Moe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return cT.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},cT.default.createElement("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"},cT.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var fv=Tn(ue);function Aoe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return fv.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},fv.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"}),fv.default.createElement("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"},fv.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var uT=Tn(ue);function Coe({width:e=24,height:t=24,dur:n="0.75",color:i}){return uT.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},uT.default.createElement("path",{d:"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z"},uT.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var pv=Tn(ue);function Poe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return pv.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},pv.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"}),pv.default.createElement("path",{d:"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z"},pv.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var mv=Tn(ue);function Roe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return mv.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},mv.default.createElement("circle",{cx:"12",cy:"12",r:"0"},mv.default.createElement("animate",{attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",repeatCount:"indefinite"}),mv.default.createElement("animate",{attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",repeatCount:"indefinite"})))}var Wa=Tn(ue);function Doe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return Wa.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Wa.default.createElement("circle",{cx:"12",cy:"12",r:"0"},Wa.default.createElement("animate",{id:"a",begin:"0;c.end",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),Wa.default.createElement("animate",{begin:"0;c.end",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})),Wa.default.createElement("circle",{cx:"12",cy:"12",r:"0"},Wa.default.createElement("animate",{id:"b",begin:"a.begin+0.2s",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),Wa.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})),Wa.default.createElement("circle",{cx:"12",cy:"12",r:"0"},Wa.default.createElement("animate",{id:"c",begin:"a.begin+0.4s",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),Wa.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})))}var hg=Tn(ue);function Ooe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return hg.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},hg.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},hg.default.createElement("animateTransform",{attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99",repeatCount:"indefinite"}),hg.default.createElement("animateTransform",{attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99",repeatCount:"indefinite"}),hg.default.createElement("animate",{attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",repeatCount:"indefinite"})))}var rs=Tn(ue);function koe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return rs.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},rs.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},rs.default.createElement("animateTransform",{id:"a",begin:"0;c.end",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),rs.default.createElement("animateTransform",{begin:"0;c.end",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),rs.default.createElement("animate",{begin:"0;c.end",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})),rs.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},rs.default.createElement("animateTransform",{id:"b",begin:"a.begin+0.2s",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),rs.default.createElement("animateTransform",{begin:"a.begin+0.2s",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),rs.default.createElement("animate",{begin:"a.begin+0.2s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})),rs.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},rs.default.createElement("animateTransform",{id:"c",begin:"a.begin+0.4s",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),rs.default.createElement("animateTransform",{begin:"a.begin+0.4s",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),rs.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})))}var is=Tn(ue);function Loe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return is.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},is.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},is.default.createElement("animateTransform",{id:"a",begin:"0;c.begin+0.4s",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),is.default.createElement("animateTransform",{begin:"0;c.begin+0.4s",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),is.default.createElement("animate",{begin:"0;c.begin+0.4s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})),is.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},is.default.createElement("animateTransform",{id:"b",begin:"a.begin+0.4s",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),is.default.createElement("animateTransform",{begin:"a.begin+0.4s",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),is.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})),is.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},is.default.createElement("animateTransform",{id:"c",begin:"a.begin+0.8s",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),is.default.createElement("animateTransform",{begin:"a.begin+0.8s",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),is.default.createElement("animate",{begin:"a.begin+0.8s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})))}var Ol=Tn(ue);function zoe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return Ol.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ol.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},Ol.default.createElement("animateTransform",{id:"a",begin:"0;b.begin+0.6s",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),Ol.default.createElement("animateTransform",{begin:"0;b.begin+0.6s",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),Ol.default.createElement("animate",{begin:"0;b.begin+0.6s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})),Ol.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,20a9,9,0,1,1,9-9A9,9,0,0,1,12,21Z",transform:"translate(12, 12) scale(0)"},Ol.default.createElement("animateTransform",{id:"b",begin:"a.begin+0.6s",attributeName:"transform",calcMode:"spline",type:"translate",dur:n,values:"12 12;0 0",keySplines:".52,.6,.25,.99"}),Ol.default.createElement("animateTransform",{begin:"a.begin+0.6s",attributeName:"transform",calcMode:"spline",additive:"sum",type:"scale",dur:n,values:"0;1",keySplines:".52,.6,.25,.99"}),Ol.default.createElement("animate",{begin:"a.begin+0.6s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99"})))}var qa=Tn(ue);function Noe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return qa.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},qa.default.createElement("circle",{cx:"12",cy:"12",r:"0"},qa.default.createElement("animate",{id:"a",begin:"0;c.begin+0.4s",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),qa.default.createElement("animate",{begin:"0;c.begin+0.4s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})),qa.default.createElement("circle",{cx:"12",cy:"12",r:"0"},qa.default.createElement("animate",{id:"b",begin:"a.begin+0.4s",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),qa.default.createElement("animate",{begin:"a.begin+0.4s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})),qa.default.createElement("circle",{cx:"12",cy:"12",r:"0"},qa.default.createElement("animate",{id:"c",begin:"a.begin+0.8s",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),qa.default.createElement("animate",{begin:"a.begin+0.8s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})))}var Th=Tn(ue);function Boe({width:e=24,height:t=24,dur:n="1.2s",color:i}){return Th.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Th.default.createElement("circle",{cx:"12",cy:"12",r:"0"},Th.default.createElement("animate",{id:"a",begin:"0;b.begin+0.6s",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),Th.default.createElement("animate",{begin:"0;b.begin+0.6s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})),Th.default.createElement("circle",{cx:"12",cy:"12",r:"0"},Th.default.createElement("animate",{id:"b",begin:"a.begin+0.6s",attributeName:"r",calcMode:"spline",dur:n,values:"0;11",keySplines:".52,.6,.25,.99",fill:"freeze"}),Th.default.createElement("animate",{begin:"a.begin+0.6s",attributeName:"opacity",calcMode:"spline",dur:n,values:"1;0",keySplines:".52,.6,.25,.99",fill:"freeze"})))}var Ha=Tn(ue);function Foe({width:e=24,height:t=24,dur:n="0.75",color:i}){return Ha.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ha.default.createElement("g",null,Ha.default.createElement("circle",{cx:"12",cy:"2.5",r:"1.5",opacity:".14"}),Ha.default.createElement("circle",{cx:"16.75",cy:"3.77",r:"1.5",opacity:".29"}),Ha.default.createElement("circle",{cx:"20.23",cy:"7.25",r:"1.5",opacity:".43"}),Ha.default.createElement("circle",{cx:"21.50",cy:"12.00",r:"1.5",opacity:".57"}),Ha.default.createElement("circle",{cx:"20.23",cy:"16.75",r:"1.5",opacity:".71"}),Ha.default.createElement("circle",{cx:"16.75",cy:"20.23",r:"1.5",opacity:".86"}),Ha.default.createElement("circle",{cx:"12",cy:"21.5",r:"1.5"}),Ha.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"discrete",dur:n,values:"0 12 12;30 12 12;60 12 12;90 12 12;120 12 12;150 12 12;180 12 12;210 12 12;240 12 12;270 12 12;300 12 12;330 12 12;360 12 12",repeatCount:"indefinite"})))}var Ar=Tn(ue);function Uoe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return Ar.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ar.default.createElement("circle",{cx:"12",cy:"3",r:"0"},Ar.default.createElement("animate",{id:"a",begin:"0;l.end-0.5s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"16.50",cy:"4.21",r:"0"},Ar.default.createElement("animate",{id:"b",begin:"a.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"7.50",cy:"4.21",r:"0"},Ar.default.createElement("animate",{id:"l",begin:"k.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"19.79",cy:"7.50",r:"0"},Ar.default.createElement("animate",{id:"c",begin:"b.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"4.21",cy:"7.50",r:"0"},Ar.default.createElement("animate",{id:"k",begin:"j.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"21.00",cy:"12.00",r:"0"},Ar.default.createElement("animate",{id:"d",begin:"c.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"3.00",cy:"12.00",r:"0"},Ar.default.createElement("animate",{id:"j",begin:"i.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"19.79",cy:"16.50",r:"0"},Ar.default.createElement("animate",{id:"e",begin:"d.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"4.21",cy:"16.50",r:"0"},Ar.default.createElement("animate",{id:"i",begin:"h.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"16.50",cy:"19.79",r:"0"},Ar.default.createElement("animate",{id:"f",begin:"e.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"7.50",cy:"19.79",r:"0"},Ar.default.createElement("animate",{id:"h",begin:"g.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})),Ar.default.createElement("circle",{cx:"12",cy:"21",r:"0"},Ar.default.createElement("animate",{id:"g",begin:"f.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keyTimes:"0;.2;1",keySplines:"0,1,0,1;.53,0,.61,.73",fill:"freeze"})))}var Cr=Tn(ue);function Voe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return Cr.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Cr.default.createElement("circle",{cx:"12",cy:"3",r:"0"},Cr.default.createElement("animate",{id:"a",begin:"0;l.end-0.5s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"16.50",cy:"4.21",r:"0"},Cr.default.createElement("animate",{id:"b",begin:"a.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"7.50",cy:"4.21",r:"0"},Cr.default.createElement("animate",{id:"l",begin:"k.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"19.79",cy:"7.50",r:"0"},Cr.default.createElement("animate",{id:"c",begin:"b.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"4.21",cy:"7.50",r:"0"},Cr.default.createElement("animate",{id:"k",begin:"j.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"21.00",cy:"12.00",r:"0"},Cr.default.createElement("animate",{id:"d",begin:"c.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"3.00",cy:"12.00",r:"0"},Cr.default.createElement("animate",{id:"j",begin:"i.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"19.79",cy:"16.50",r:"0"},Cr.default.createElement("animate",{id:"e",begin:"d.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"4.21",cy:"16.50",r:"0"},Cr.default.createElement("animate",{id:"i",begin:"h.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"16.50",cy:"19.79",r:"0"},Cr.default.createElement("animate",{id:"f",begin:"e.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"7.50",cy:"19.79",r:"0"},Cr.default.createElement("animate",{id:"h",begin:"g.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Cr.default.createElement("circle",{cx:"12",cy:"21",r:"0"},Cr.default.createElement("animate",{id:"g",begin:"f.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"0;2;0",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})))}var hT=Tn(ue);function joe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return hT.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},hT.default.createElement("path",{d:"M12,23a9.63,9.63,0,0,1-8-9.5,9.51,9.51,0,0,1,6.79-9.1A1.66,1.66,0,0,0,12,2.81h0a1.67,1.67,0,0,0-1.94-1.64A11,11,0,0,0,12,23Z"},hT.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var Sh=Tn(ue);function Goe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return Sh.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Sh.default.createElement("circle",{cx:"4",cy:"12",r:"3"},Sh.default.createElement("animate",{id:"a",begin:"0;b.end+0.25s",attributeName:"cy",calcMode:"spline",dur:n,values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})),Sh.default.createElement("circle",{cx:"12",cy:"12",r:"3"},Sh.default.createElement("animate",{begin:"a.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:n,values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})),Sh.default.createElement("circle",{cx:"20",cy:"12",r:"3"},Sh.default.createElement("animate",{id:"b",begin:"a.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:n,values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})))}var Ih=Tn(ue);function $oe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return Ih.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ih.default.createElement("circle",{cx:"4",cy:"12",r:"3",opacity:"1"},Ih.default.createElement("animate",{id:"a",begin:"0;b.end-0.25s",attributeName:"opacity",dur:n,values:"1;.2",fill:"freeze"})),Ih.default.createElement("circle",{cx:"12",cy:"12",r:"3",opacity:".4"},Ih.default.createElement("animate",{begin:"a.begin+0.15s",attributeName:"opacity",dur:n,values:"1;.2",fill:"freeze"})),Ih.default.createElement("circle",{cx:"20",cy:"12",r:"3",opacity:".3"},Ih.default.createElement("animate",{id:"b",begin:"a.begin+0.3s",attributeName:"opacity",dur:n,values:"1;.2",fill:"freeze"})))}var Pr=Tn(ue);function Woe({width:e=24,height:t=24,dur:n="0.5s",color:i}){return Pr.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Pr.default.createElement("circle",{cx:"4",cy:"12",r:"0"},Pr.default.createElement("animate",{begin:"0;h.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"}),Pr.default.createElement("animate",{begin:"b.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"}),Pr.default.createElement("animate",{begin:"d.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"}),Pr.default.createElement("animate",{id:"g",begin:"f.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),Pr.default.createElement("animate",{id:"h",begin:"g.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"})),Pr.default.createElement("circle",{cx:"4",cy:"12",r:"3"},Pr.default.createElement("animate",{begin:"0;h.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"}),Pr.default.createElement("animate",{begin:"b.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"}),Pr.default.createElement("animate",{id:"e",begin:"d.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),Pr.default.createElement("animate",{id:"f",begin:"e.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"}),Pr.default.createElement("animate",{begin:"f.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"})),Pr.default.createElement("circle",{cx:"12",cy:"12",r:"3"},Pr.default.createElement("animate",{begin:"0;h.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"}),Pr.default.createElement("animate",{id:"c",begin:"b.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),Pr.default.createElement("animate",{id:"d",begin:"c.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"}),Pr.default.createElement("animate",{begin:"d.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"}),Pr.default.createElement("animate",{begin:"f.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"})),Pr.default.createElement("circle",{cx:"20",cy:"12",r:"3"},Pr.default.createElement("animate",{id:"a",begin:"0;h.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"3;0",fill:"freeze"}),Pr.default.createElement("animate",{id:"b",begin:"a.end",attributeName:"cx",dur:"0.001s",values:"20;4",fill:"freeze"}),Pr.default.createElement("animate",{begin:"b.end",attributeName:"r",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"0;3",fill:"freeze"}),Pr.default.createElement("animate",{id:"e",begin:"d.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"4;12",fill:"freeze"}),Pr.default.createElement("animate",{begin:"f.end",attributeName:"cx",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1",values:"12;20",fill:"freeze"})))}var _f=Tn(ue);function qoe({width:e=24,height:t=24,dur:n="1s",color:i}){return _f.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_f.default.createElement("circle",{cx:"12",cy:"12",r:"3"}),_f.default.createElement("g",null,_f.default.createElement("circle",{cx:"4",cy:"12",r:"3"}),_f.default.createElement("circle",{cx:"20",cy:"12",r:"3"}),_f.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"spline",dur:n,keySplines:".36,.6,.31,1;.36,.6,.31,1",values:"0 12 12;180 12 12;360 12 12",repeatCount:"indefinite"})))}var Mh=Tn(ue);function Hoe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return Mh.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Mh.default.createElement("circle",{cx:"4",cy:"12",r:"3"},Mh.default.createElement("animate",{id:"a",begin:"0;b.end-0.25s",attributeName:"r",dur:n,values:"3;.2;3"})),Mh.default.createElement("circle",{cx:"12",cy:"12",r:"3"},Mh.default.createElement("animate",{begin:"a.end-0.6s",attributeName:"r",dur:n,values:"3;.2;3"})),Mh.default.createElement("circle",{cx:"20",cy:"12",r:"3"},Mh.default.createElement("animate",{id:"b",begin:"a.end-0.45s",attributeName:"r",dur:n,values:"3;.2;3"})))}var Ah=Tn(ue);function Zoe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return Ah.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ah.default.createElement("circle",{cx:"4",cy:"12",r:"1.5"},Ah.default.createElement("animate",{attributeName:"r",dur:n,values:"1.5;3;1.5",repeatCount:"indefinite"})),Ah.default.createElement("circle",{cx:"12",cy:"12",r:"3"},Ah.default.createElement("animate",{attributeName:"r",dur:n,values:"3;1.5;3",repeatCount:"indefinite"})),Ah.default.createElement("circle",{cx:"20",cy:"12",r:"1.5"},Ah.default.createElement("animate",{attributeName:"r",dur:n,values:"1.5;3;1.5",repeatCount:"indefinite"})))}var Er=Tn(ue);function Yoe({width:e=24,height:t=24,dur:n="0.6s",color:i}){return Er.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Er.default.createElement("g",null,Er.default.createElement("circle",{cx:"12",cy:"3",r:"1"},Er.default.createElement("animate",{id:"a",begin:"0;l.end-0.5s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"16.50",cy:"4.21",r:"1"},Er.default.createElement("animate",{id:"b",begin:"a.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"7.50",cy:"4.21",r:"1"},Er.default.createElement("animate",{id:"l",begin:"k.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"19.79",cy:"7.50",r:"1"},Er.default.createElement("animate",{id:"c",begin:"b.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"4.21",cy:"7.50",r:"1"},Er.default.createElement("animate",{id:"k",begin:"j.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"21.00",cy:"12.00",r:"1"},Er.default.createElement("animate",{id:"d",begin:"c.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"3.00",cy:"12.00",r:"1"},Er.default.createElement("animate",{id:"j",begin:"i.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"19.79",cy:"16.50",r:"1"},Er.default.createElement("animate",{id:"e",begin:"d.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"4.21",cy:"16.50",r:"1"},Er.default.createElement("animate",{id:"i",begin:"h.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"16.50",cy:"19.79",r:"1"},Er.default.createElement("animate",{id:"f",begin:"e.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"7.50",cy:"19.79",r:"1"},Er.default.createElement("animate",{id:"h",begin:"g.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("circle",{cx:"12",cy:"21",r:"1"},Er.default.createElement("animate",{id:"g",begin:"f.begin+0.1s",attributeName:"r",calcMode:"spline",dur:n,values:"1;2;1",keySplines:".27,.42,.37,.99;.53,0,.61,.73"})),Er.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:"6s",values:"360 12 12;0 12 12",repeatCount:"indefinite"})))}var dT=Tn(ue);function Xoe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return dT.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},dT.default.createElement("path",{d:"M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z"},dT.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var gv=Tn(ue);function Qoe({width:e=24,height:t=24,dur:n="0.75s",color:i}){return gv.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},gv.default.createElement("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"}),gv.default.createElement("path",{d:"M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z"},gv.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var Za=Tn(ue),fT=.25/.001;function Koe({width:e=24,height:t=24,dur:n="0.25s",color:i}){return Za.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Za.default.createElement("path",{d:"M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21",opacity:"0"},Za.default.createElement("animate",{id:"a",begin:"0;d.end+0.2s",attributeName:"opacity",calcMode:"discrete",dur:n,values:"0;1",fill:"freeze"}),Za.default.createElement("animate",{id:"d",begin:"c.end+0.5s",attributeName:"opacity",dur:ga(n)/fT,values:"1;0",fill:"freeze"})),Za.default.createElement("path",{d:"M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z",opacity:"0"},Za.default.createElement("animate",{id:"b",begin:"a.end",attributeName:"opacity",calcMode:"discrete",dur:n,values:"0;1",fill:"freeze"}),Za.default.createElement("animate",{begin:"c.end+0.5s",attributeName:"opacity",dur:ga(n)/fT,values:"1;0",fill:"freeze"})),Za.default.createElement("path",{d:"M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3",opacity:"0"},Za.default.createElement("animate",{id:"c",begin:"b.end",attributeName:"opacity",calcMode:"discrete",dur:n,values:"0;1",fill:"freeze"}),Za.default.createElement("animate",{begin:"c.end+0.5s",attributeName:"opacity",dur:ga(n)/fT,values:"1;0",fill:"freeze"})))}var Ya=Tn(ue);function Joe({width:e=24,height:t=24,dur:n="0.25s",color:i}){return Ya.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ya.default.createElement("path",{d:"M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21",opacity:"0"},Ya.default.createElement("animate",{id:"a",begin:"0;d.end+0.2s",attributeName:"opacity",dur:n,values:"0;1",fill:"freeze"}),Ya.default.createElement("animate",{id:"d",begin:"c.end+0.5s",attributeName:"opacity",dur:ga(n)/2.5,values:"1;0",fill:"freeze"})),Ya.default.createElement("path",{d:"M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z",opacity:"0"},Ya.default.createElement("animate",{id:"b",begin:"a.end",attributeName:"opacity",dur:n,values:"0;1",fill:"freeze"}),Ya.default.createElement("animate",{begin:"c.end+0.5s",attributeName:"opacity",dur:ga(n)/2.5,values:"1;0",fill:"freeze"})),Ya.default.createElement("path",{d:"M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3",opacity:"0"},Ya.default.createElement("animate",{id:"c",begin:"b.end",attributeName:"opacity",dur:n,values:"0;1",fill:"freeze"}),Ya.default.createElement("animate",{begin:"c.end+0.5s",attributeName:"opacity",dur:ga(n)/2.5,values:"1;0",fill:"freeze"})))}var pT=Tn(ue);function ese({width:e=24,height:t=24,dur:n="1.5s",color:i}){return pT.default.createElement("svg",{width:e,height:t,fill:i,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},pT.default.createElement("path",{d:"M20.27,4.74a4.93,4.93,0,0,1,1.52,4.61,5.32,5.32,0,0,1-4.1,4.51,5.12,5.12,0,0,1-5.2-1.5,5.53,5.53,0,0,0,6.13-1.48A5.66,5.66,0,0,0,20.27,4.74ZM12.32,11.53a5.49,5.49,0,0,0-1.47-6.2A5.57,5.57,0,0,0,4.71,3.72,5.17,5.17,0,0,1,9.53,2.2,5.52,5.52,0,0,1,13.9,6.45,5.28,5.28,0,0,1,12.32,11.53ZM19.2,20.29a4.92,4.92,0,0,1-4.72,1.49,5.32,5.32,0,0,1-4.34-4.05A5.2,5.2,0,0,1,11.6,12.5a5.6,5.6,0,0,0,1.51,6.13A5.63,5.63,0,0,0,19.2,20.29ZM3.79,19.38A5.18,5.18,0,0,1,2.32,14a5.3,5.3,0,0,1,4.59-4,5,5,0,0,1,4.58,1.61,5.55,5.55,0,0,0-6.32,1.69A5.46,5.46,0,0,0,3.79,19.38ZM12.23,12a5.11,5.11,0,0,0,3.66-5,5.75,5.75,0,0,0-3.18-6,5,5,0,0,1,4.42,2.3,5.21,5.21,0,0,1,.24,5.92A5.4,5.4,0,0,1,12.23,12ZM11.76,12a5.18,5.18,0,0,0-3.68,5.09,5.58,5.58,0,0,0,3.19,5.79c-1,.35-2.9-.46-4-1.68A5.51,5.51,0,0,1,11.76,12ZM23,12.63a5.07,5.07,0,0,1-2.35,4.52,5.23,5.23,0,0,1-5.91.2,5.24,5.24,0,0,1-2.67-4.77,5.51,5.51,0,0,0,5.45,3.33A5.52,5.52,0,0,0,23,12.63ZM1,11.23a5,5,0,0,1,2.49-4.5,5.23,5.23,0,0,1,5.81-.06,5.3,5.3,0,0,1,2.61,4.74A5.56,5.56,0,0,0,6.56,8.06,5.71,5.71,0,0,0,1,11.23Z"},pT.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",dur:n,values:"0 12 12;360 12 12",repeatCount:"indefinite"})))}var rx={},tse={get exports(){return rx},set exports(e){rx=e}};(()=>{var e={296:(c,f,m)=>{var s=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,I=/^0o[0-7]+$/i,M=parseInt,P=typeof m.g=="object"&&m.g&&m.g.Object===Object&&m.g,D=typeof self=="object"&&self&&self.Object===Object&&self,k=P||D||Function("return this")(),V=Object.prototype.toString,H=Math.max,G=Math.min,z=function(){return k.Date.now()};function N($){var X=typeof $;return!!$&&(X=="object"||X=="function")}function W($){if(typeof $=="number")return $;if(function(J){return typeof J=="symbol"||function(re){return!!re&&typeof re=="object"}(J)&&V.call(J)=="[object Symbol]"}($))return NaN;if(N($)){var X=typeof $.valueOf=="function"?$.valueOf():$;$=N(X)?X+"":X}if(typeof $!="string")return $===0?$:+$;$=$.replace(s,"");var te=E.test($);return te||I.test($)?M($.slice(2),te?2:8):v.test($)?NaN:+$}c.exports=function($,X,te){var J,re,ce,Ee,Me,Le,Ae=0,Oe=!1,ke=!1,je=!0;if(typeof $!="function")throw new TypeError("Expected a function");function De(bt){var Nt=J,ft=re;return J=re=void 0,Ae=bt,Ee=$.apply(ft,Nt)}function Be(bt){return Ae=bt,Me=setTimeout(tt,X),Oe?De(bt):Ee}function He(bt){var Nt=bt-Le;return Le===void 0||Nt>=X||Nt<0||ke&&bt-Ae>=ce}function tt(){var bt=z();if(He(bt))return Mt(bt);Me=setTimeout(tt,function(Nt){var ft=X-(Nt-Le);return ke?G(ft,ce-(Nt-Ae)):ft}(bt))}function Mt(bt){return Me=void 0,je&&J?De(bt):(J=re=void 0,Ee)}function Dt(){var bt=z(),Nt=He(bt);if(J=arguments,re=this,Le=bt,Nt){if(Me===void 0)return Be(Le);if(ke)return Me=setTimeout(tt,X),De(Le)}return Me===void 0&&(Me=setTimeout(tt,X)),Ee}return X=W(X)||0,N(te)&&(Oe=!!te.leading,ce=(ke="maxWait"in te)?H(W(te.maxWait)||0,X):ce,je="trailing"in te?!!te.trailing:je),Dt.cancel=function(){Me!==void 0&&clearTimeout(Me),Ae=0,J=Le=re=Me=void 0},Dt.flush=function(){return Me===void 0?Ee:Mt(z())},Dt}},96:(c,f,m)=>{var s="Expected a function",v=/^\s+|\s+$/g,E=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,M=/^0o[0-7]+$/i,P=parseInt,D=typeof m.g=="object"&&m.g&&m.g.Object===Object&&m.g,k=typeof self=="object"&&self&&self.Object===Object&&self,V=D||k||Function("return this")(),H=Object.prototype.toString,G=Math.max,z=Math.min,N=function(){return V.Date.now()};function W(X){var te=typeof X;return!!X&&(te=="object"||te=="function")}function $(X){if(typeof X=="number")return X;if(function(re){return typeof re=="symbol"||function(ce){return!!ce&&typeof ce=="object"}(re)&&H.call(re)=="[object Symbol]"}(X))return NaN;if(W(X)){var te=typeof X.valueOf=="function"?X.valueOf():X;X=W(te)?te+"":te}if(typeof X!="string")return X===0?X:+X;X=X.replace(v,"");var J=I.test(X);return J||M.test(X)?P(X.slice(2),J?2:8):E.test(X)?NaN:+X}c.exports=function(X,te,J){var re=!0,ce=!0;if(typeof X!="function")throw new TypeError(s);return W(J)&&(re="leading"in J?!!J.leading:re,ce="trailing"in J?!!J.trailing:ce),function(Ee,Me,Le){var Ae,Oe,ke,je,De,Be,He=0,tt=!1,Mt=!1,Dt=!0;if(typeof Ee!="function")throw new TypeError(s);function bt(Vt){var Mn=Ae,Jt=Oe;return Ae=Oe=void 0,He=Vt,je=Ee.apply(Jt,Mn)}function Nt(Vt){return He=Vt,De=setTimeout(Ot,Me),tt?bt(Vt):je}function ft(Vt){var Mn=Vt-Be;return Be===void 0||Mn>=Me||Mn<0||Mt&&Vt-He>=ke}function Ot(){var Vt=N();if(ft(Vt))return an(Vt);De=setTimeout(Ot,function(Mn){var Jt=Me-(Mn-Be);return Mt?z(Jt,ke-(Mn-He)):Jt}(Vt))}function an(Vt){return De=void 0,Dt&&Ae?bt(Vt):(Ae=Oe=void 0,je)}function pn(){var Vt=N(),Mn=ft(Vt);if(Ae=arguments,Oe=this,Be=Vt,Mn){if(De===void 0)return Nt(Be);if(Mt)return De=setTimeout(Ot,Me),bt(Be)}return De===void 0&&(De=setTimeout(Ot,Me)),je}return Me=$(Me)||0,W(Le)&&(tt=!!Le.leading,ke=(Mt="maxWait"in Le)?G($(Le.maxWait)||0,Me):ke,Dt="trailing"in Le?!!Le.trailing:Dt),pn.cancel=function(){De!==void 0&&clearTimeout(De),He=0,Ae=Be=Oe=De=void 0},pn.flush=function(){return De===void 0?je:an(N())},pn}(X,te,{leading:re,maxWait:te,trailing:ce})}},703:(c,f,m)=>{var s=m(414);function v(){}function E(){}E.resetWarningCache=v,c.exports=function(){function I(D,k,V,H,G,z){if(z!==s){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}function M(){return I}I.isRequired=I;var P={array:I,bool:I,func:I,number:I,object:I,string:I,symbol:I,any:I,arrayOf:M,element:I,elementType:I,instanceOf:M,node:I,objectOf:M,oneOf:M,oneOfType:M,shape:M,exact:M,checkPropTypes:E,resetWarningCache:v};return P.PropTypes=P,P}},697:(c,f,m)=>{c.exports=m(703)()},414:c=>{c.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function n(c){var f=t[c];if(f!==void 0)return f.exports;var m=t[c]={exports:{}};return e[c](m,m.exports,n),m.exports}n.n=c=>{var f=c&&c.__esModule?()=>c.default:()=>c;return n.d(f,{a:f}),f},n.d=(c,f)=>{for(var m in f)n.o(f,m)&&!n.o(c,m)&&Object.defineProperty(c,m,{enumerable:!0,get:f[m]})},n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),n.o=(c,f)=>Object.prototype.hasOwnProperty.call(c,f),n.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var i={};(()=>{n.r(i),n.d(i,{LazyLoadComponent:()=>Ui,LazyLoadImage:()=>Ta,trackWindowScroll:()=>tt});const c=ue;var f=n.n(c),m=n(697);const s=Jf;var v=n.n(s);function E(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function I(yt){return(I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye})(yt)}function M(yt,Ye){var wt=Object.keys(yt);if(Object.getOwnPropertySymbols){var It=Object.getOwnPropertySymbols(yt);Ye&&(It=It.filter(function(dr){return Object.getOwnPropertyDescriptor(yt,dr).enumerable})),wt.push.apply(wt,It)}return wt}function P(yt,Ye,wt){return Ye in yt?Object.defineProperty(yt,Ye,{value:wt,enumerable:!0,configurable:!0,writable:!0}):yt[Ye]=wt,yt}function D(yt,Ye){for(var wt=0;wt<Ye.length;wt++){var It=Ye[wt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(yt,It.key,It)}}function k(yt,Ye){return(k=Object.setPrototypeOf||function(wt,It){return wt.__proto__=It,wt})(yt,Ye)}function V(yt,Ye){if(Ye&&(I(Ye)==="object"||typeof Ye=="function"))return Ye;if(Ye!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(wt){if(wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}(yt)}function H(yt){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(Ye){return Ye.__proto__||Object.getPrototypeOf(Ye)})(yt)}var G=function(yt){yt.forEach(function(Ye){Ye.isIntersecting&&Ye.target.onVisible()})},z={},N=function(yt){(function(ut,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Super expression must either be null or a function");ut.prototype=Object.create(_t&&_t.prototype,{constructor:{value:ut,writable:!0,configurable:!0}}),_t&&k(ut,_t)})(Vn,yt);var Ye,wt,It,dr,hi=(It=Vn,dr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ut,_t=H(It);if(dr){var Wt=H(this).constructor;ut=Reflect.construct(_t,arguments,Wt)}else ut=_t.apply(this,arguments);return V(this,ut)});function Vn(ut){var _t;if(function(Qt,dn){if(!(Qt instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,Vn),(_t=hi.call(this,ut)).supportsObserver=!ut.scrollPosition&&ut.useIntersectionObserver&&E(),_t.supportsObserver){var Wt=ut.threshold;_t.observer=function(Qt){return z[Qt]=z[Qt]||new IntersectionObserver(G,{rootMargin:Qt+"px"}),z[Qt]}(Wt)}return _t}return Ye=Vn,(wt=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,_t=this.placeholder.getBoundingClientRect(),Wt=v().findDOMNode(this.placeholder).style,Qt={left:parseInt(Wt.getPropertyValue("margin-left"),10)||0,top:parseInt(Wt.getPropertyValue("margin-top"),10)||0};return{bottom:ut.y+_t.bottom+Qt.top,left:ut.x+_t.left+Qt.left,right:ut.x+_t.right+Qt.left,top:ut.y+_t.top+Qt.top}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var ut=this.props,_t=ut.scrollPosition,Wt=ut.threshold,Qt=this.getPlaceholderBoundingBox(_t),dn=_t.y+window.innerHeight,An=_t.x,Wn=_t.x+window.innerWidth,ar=_t.y;return ar-Wt<=Qt.bottom&&dn+Wt>=Qt.top&&An-Wt<=Qt.right&&Wn+Wt>=Qt.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var ut=this,_t=this.props,Wt=_t.className,Qt=_t.height,dn=_t.placeholder,An=_t.style,Wn=_t.width;if(dn&&typeof dn.type!="function")return f().cloneElement(dn,{ref:function(Qn){return ut.placeholder=Qn}});var ar=function(Qn){for(var Tr=1;Tr<arguments.length;Tr++){var lr=arguments[Tr]!=null?arguments[Tr]:{};Tr%2?M(Object(lr),!0).forEach(function(Kn){P(Qn,Kn,lr[Kn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qn,Object.getOwnPropertyDescriptors(lr)):M(Object(lr)).forEach(function(Kn){Object.defineProperty(Qn,Kn,Object.getOwnPropertyDescriptor(lr,Kn))})}return Qn}({display:"inline-block"},An);return Wn!==void 0&&(ar.width=Wn),Qt!==void 0&&(ar.height=Qt),f().createElement("span",{className:Wt,ref:function(Qn){return ut.placeholder=Qn},style:ar},dn)}}])&&D(Ye.prototype,wt),Vn}(f().Component);N.propTypes={onVisible:m.PropTypes.func.isRequired,className:m.PropTypes.string,height:m.PropTypes.oneOfType([m.PropTypes.number,m.PropTypes.string]),placeholder:m.PropTypes.element,threshold:m.PropTypes.number,useIntersectionObserver:m.PropTypes.bool,scrollPosition:m.PropTypes.shape({x:m.PropTypes.number.isRequired,y:m.PropTypes.number.isRequired}),width:m.PropTypes.oneOfType([m.PropTypes.number,m.PropTypes.string])},N.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const W=N;var $=n(296),X=n.n($),te=n(96),J=n.n(te),re=function(yt){var Ye=getComputedStyle(yt,null);return Ye.getPropertyValue("overflow")+Ye.getPropertyValue("overflow-y")+Ye.getPropertyValue("overflow-x")};const ce=function(yt){if(!(yt instanceof HTMLElement))return window;for(var Ye=yt;Ye&&Ye instanceof HTMLElement;){if(/(scroll|auto)/.test(re(Ye)))return Ye;Ye=Ye.parentNode}return window};function Ee(yt){return(Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye})(yt)}var Me=["delayMethod","delayTime"];function Le(){return(Le=Object.assign||function(yt){for(var Ye=1;Ye<arguments.length;Ye++){var wt=arguments[Ye];for(var It in wt)Object.prototype.hasOwnProperty.call(wt,It)&&(yt[It]=wt[It])}return yt}).apply(this,arguments)}function Ae(yt,Ye){for(var wt=0;wt<Ye.length;wt++){var It=Ye[wt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(yt,It.key,It)}}function Oe(yt,Ye){return(Oe=Object.setPrototypeOf||function(wt,It){return wt.__proto__=It,wt})(yt,Ye)}function ke(yt,Ye){if(Ye&&(Ee(Ye)==="object"||typeof Ye=="function"))return Ye;if(Ye!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return je(yt)}function je(yt){if(yt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return yt}function De(yt){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(Ye){return Ye.__proto__||Object.getPrototypeOf(Ye)})(yt)}var Be=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},He=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const tt=function(yt){var Ye=function(wt){(function(Wt,Qt){if(typeof Qt!="function"&&Qt!==null)throw new TypeError("Super expression must either be null or a function");Wt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Wt,writable:!0,configurable:!0}}),Qt&&Oe(Wt,Qt)})(_t,wt);var It,dr,hi,Vn,ut=(hi=_t,Vn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Wt,Qt=De(hi);if(Vn){var dn=De(this).constructor;Wt=Reflect.construct(Qt,arguments,dn)}else Wt=Qt.apply(this,arguments);return ke(this,Wt)});function _t(Wt){var Qt;if(function(An,Wn){if(!(An instanceof Wn))throw new TypeError("Cannot call a class as a function")}(this,_t),(Qt=ut.call(this,Wt)).useIntersectionObserver=Wt.useIntersectionObserver&&E(),Qt.useIntersectionObserver)return ke(Qt);var dn=Qt.onChangeScroll.bind(je(Qt));return Wt.delayMethod==="debounce"?Qt.delayedScroll=X()(dn,Wt.delayTime):Wt.delayMethod==="throttle"&&(Qt.delayedScroll=J()(dn,Wt.delayTime)),Qt.state={scrollPosition:{x:Be(),y:He()}},Qt.baseComponentRef=f().createRef(),Qt}return It=_t,(dr=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||ce(v().findDOMNode(this.baseComponentRef.current))!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=ce(v().findDOMNode(this.baseComponentRef.current)),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:Be(),y:He()}})}},{key:"render",value:function(){var Wt=this.props,Qt=(Wt.delayMethod,Wt.delayTime,function(An,Wn){if(An==null)return{};var ar,Qn,Tr=function(Kn,ji){if(Kn==null)return{};var Oo,ko,fe={},Y=Object.keys(Kn);for(ko=0;ko<Y.length;ko++)Oo=Y[ko],ji.indexOf(Oo)>=0||(fe[Oo]=Kn[Oo]);return fe}(An,Wn);if(Object.getOwnPropertySymbols){var lr=Object.getOwnPropertySymbols(An);for(Qn=0;Qn<lr.length;Qn++)ar=lr[Qn],Wn.indexOf(ar)>=0||Object.prototype.propertyIsEnumerable.call(An,ar)&&(Tr[ar]=An[ar])}return Tr}(Wt,Me)),dn=this.useIntersectionObserver?null:this.state.scrollPosition;return f().createElement(yt,Le({forwardRef:this.baseComponentRef,scrollPosition:dn},Qt))}}])&&Ae(It.prototype,dr),_t}(f().Component);return Ye.propTypes={delayMethod:m.PropTypes.oneOf(["debounce","throttle"]),delayTime:m.PropTypes.number,useIntersectionObserver:m.PropTypes.bool},Ye.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},Ye};function Mt(yt){return(Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye})(yt)}function Dt(yt,Ye){for(var wt=0;wt<Ye.length;wt++){var It=Ye[wt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(yt,It.key,It)}}function bt(yt,Ye){return(bt=Object.setPrototypeOf||function(wt,It){return wt.__proto__=It,wt})(yt,Ye)}function Nt(yt,Ye){if(Ye&&(Mt(Ye)==="object"||typeof Ye=="function"))return Ye;if(Ye!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(wt){if(wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}(yt)}function ft(yt){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(Ye){return Ye.__proto__||Object.getPrototypeOf(Ye)})(yt)}var Ot=function(yt){(function(ut,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Super expression must either be null or a function");ut.prototype=Object.create(_t&&_t.prototype,{constructor:{value:ut,writable:!0,configurable:!0}}),_t&&bt(ut,_t)})(Vn,yt);var Ye,wt,It,dr,hi=(It=Vn,dr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ut,_t=ft(It);if(dr){var Wt=ft(this).constructor;ut=Reflect.construct(_t,arguments,Wt)}else ut=_t.apply(this,arguments);return Nt(this,ut)});function Vn(ut){return function(_t,Wt){if(!(_t instanceof Wt))throw new TypeError("Cannot call a class as a function")}(this,Vn),hi.call(this,ut)}return Ye=Vn,(wt=[{key:"render",value:function(){return f().createElement(W,this.props)}}])&&Dt(Ye.prototype,wt),Vn}(f().Component);const an=tt(Ot);function pn(yt){return(pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye})(yt)}function Vt(yt,Ye){for(var wt=0;wt<Ye.length;wt++){var It=Ye[wt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(yt,It.key,It)}}function Mn(yt,Ye){return(Mn=Object.setPrototypeOf||function(wt,It){return wt.__proto__=It,wt})(yt,Ye)}function Jt(yt,Ye){if(Ye&&(pn(Ye)==="object"||typeof Ye=="function"))return Ye;if(Ye!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _r(yt)}function _r(yt){if(yt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return yt}function yn(yt){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(Ye){return Ye.__proto__||Object.getPrototypeOf(Ye)})(yt)}var ui=function(yt){(function(ut,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Super expression must either be null or a function");ut.prototype=Object.create(_t&&_t.prototype,{constructor:{value:ut,writable:!0,configurable:!0}}),_t&&Mn(ut,_t)})(Vn,yt);var Ye,wt,It,dr,hi=(It=Vn,dr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ut,_t=yn(It);if(dr){var Wt=yn(this).constructor;ut=Reflect.construct(_t,arguments,Wt)}else ut=_t.apply(this,arguments);return Jt(this,ut)});function Vn(ut){var _t;(function(Wn,ar){if(!(Wn instanceof ar))throw new TypeError("Cannot call a class as a function")})(this,Vn),_t=hi.call(this,ut);var Wt=ut.afterLoad,Qt=ut.beforeLoad,dn=ut.scrollPosition,An=ut.visibleByDefault;return _t.state={visible:An},An&&(Qt(),Wt()),_t.onVisible=_t.onVisible.bind(_r(_t)),_t.isScrollTracked=!!(dn&&Number.isFinite(dn.x)&&dn.x>=0&&Number.isFinite(dn.y)&&dn.y>=0),_t}return Ye=Vn,(wt=[{key:"componentDidUpdate",value:function(ut,_t){_t.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var ut=this.props,_t=ut.className,Wt=ut.delayMethod,Qt=ut.delayTime,dn=ut.height,An=ut.placeholder,Wn=ut.scrollPosition,ar=ut.style,Qn=ut.threshold,Tr=ut.useIntersectionObserver,lr=ut.width;return this.isScrollTracked||Tr&&E()?f().createElement(W,{className:_t,height:dn,onVisible:this.onVisible,placeholder:An,scrollPosition:Wn,style:ar,threshold:Qn,useIntersectionObserver:Tr,width:lr}):f().createElement(an,{className:_t,delayMethod:Wt,delayTime:Qt,height:dn,onVisible:this.onVisible,placeholder:An,style:ar,threshold:Qn,width:lr})}}])&&Vt(Ye.prototype,wt),Vn}(f().Component);ui.propTypes={afterLoad:m.PropTypes.func,beforeLoad:m.PropTypes.func,useIntersectionObserver:m.PropTypes.bool,visibleByDefault:m.PropTypes.bool},ui.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Ui=ui;function _o(yt){return(_o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye})(yt)}var Vi=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function Po(yt,Ye){var wt=Object.keys(yt);if(Object.getOwnPropertySymbols){var It=Object.getOwnPropertySymbols(yt);Ye&&(It=It.filter(function(dr){return Object.getOwnPropertyDescriptor(yt,dr).enumerable})),wt.push.apply(wt,It)}return wt}function vo(yt){for(var Ye=1;Ye<arguments.length;Ye++){var wt=arguments[Ye]!=null?arguments[Ye]:{};Ye%2?Po(Object(wt),!0).forEach(function(It){ti(yt,It,wt[It])}):Object.getOwnPropertyDescriptors?Object.defineProperties(yt,Object.getOwnPropertyDescriptors(wt)):Po(Object(wt)).forEach(function(It){Object.defineProperty(yt,It,Object.getOwnPropertyDescriptor(wt,It))})}return yt}function ti(yt,Ye,wt){return Ye in yt?Object.defineProperty(yt,Ye,{value:wt,enumerable:!0,configurable:!0,writable:!0}):yt[Ye]=wt,yt}function vr(){return(vr=Object.assign||function(yt){for(var Ye=1;Ye<arguments.length;Ye++){var wt=arguments[Ye];for(var It in wt)Object.prototype.hasOwnProperty.call(wt,It)&&(yt[It]=wt[It])}return yt}).apply(this,arguments)}function Ro(yt,Ye){for(var wt=0;wt<Ye.length;wt++){var It=Ye[wt];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(yt,It.key,It)}}function Gs(yt,Ye){return(Gs=Object.setPrototypeOf||function(wt,It){return wt.__proto__=It,wt})(yt,Ye)}function Ea(yt,Ye){if(Ye&&(_o(Ye)==="object"||typeof Ye=="function"))return Ye;if(Ye!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(wt){if(wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}(yt)}function $s(yt){return($s=Object.setPrototypeOf?Object.getPrototypeOf:function(Ye){return Ye.__proto__||Object.getPrototypeOf(Ye)})(yt)}var Do=function(yt){(function(ut,_t){if(typeof _t!="function"&&_t!==null)throw new TypeError("Super expression must either be null or a function");ut.prototype=Object.create(_t&&_t.prototype,{constructor:{value:ut,writable:!0,configurable:!0}}),_t&&Gs(ut,_t)})(Vn,yt);var Ye,wt,It,dr,hi=(It=Vn,dr=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ut,_t=$s(It);if(dr){var Wt=$s(this).constructor;ut=Reflect.construct(_t,arguments,Wt)}else ut=_t.apply(this,arguments);return Ea(this,ut)});function Vn(ut){var _t;return function(Wt,Qt){if(!(Wt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Vn),(_t=hi.call(this,ut)).state={loaded:!1},_t}return Ye=Vn,(wt=[{key:"onImageLoad",value:function(){var ut=this;return this.state.loaded?null:function(){ut.props.afterLoad(),ut.setState({loaded:!0})}}},{key:"getImg",value:function(){var ut=this.props,_t=(ut.afterLoad,ut.beforeLoad,ut.delayMethod,ut.delayTime,ut.effect,ut.placeholder,ut.placeholderSrc,ut.scrollPosition,ut.threshold,ut.useIntersectionObserver,ut.visibleByDefault,ut.wrapperClassName,ut.wrapperProps,function(Wt,Qt){if(Wt==null)return{};var dn,An,Wn=function(Qn,Tr){if(Qn==null)return{};var lr,Kn,ji={},Oo=Object.keys(Qn);for(Kn=0;Kn<Oo.length;Kn++)lr=Oo[Kn],Tr.indexOf(lr)>=0||(ji[lr]=Qn[lr]);return ji}(Wt,Qt);if(Object.getOwnPropertySymbols){var ar=Object.getOwnPropertySymbols(Wt);for(An=0;An<ar.length;An++)dn=ar[An],Qt.indexOf(dn)>=0||Object.prototype.propertyIsEnumerable.call(Wt,dn)&&(Wn[dn]=Wt[dn])}return Wn}(ut,Vi));return f().createElement("img",vr({onLoad:this.onImageLoad()},_t))}},{key:"getLazyLoadImage",value:function(){var ut=this.props,_t=ut.beforeLoad,Wt=ut.className,Qt=ut.delayMethod,dn=ut.delayTime,An=ut.height,Wn=ut.placeholder,ar=ut.scrollPosition,Qn=ut.style,Tr=ut.threshold,lr=ut.useIntersectionObserver,Kn=ut.visibleByDefault,ji=ut.width;return f().createElement(Ui,{beforeLoad:_t,className:Wt,delayMethod:Qt,delayTime:dn,height:An,placeholder:Wn,scrollPosition:ar,style:Qn,threshold:Tr,useIntersectionObserver:lr,visibleByDefault:Kn,width:ji},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(ut){var _t=this.props,Wt=_t.effect,Qt=_t.height,dn=_t.placeholderSrc,An=_t.width,Wn=_t.wrapperClassName,ar=_t.wrapperProps,Qn=this.state.loaded,Tr=Qn?" lazy-load-image-loaded":"",lr=Qn||!dn?{}:{backgroundImage:"url(".concat(dn,")"),backgroundSize:"100% 100%"};return f().createElement("span",vr({className:Wn+" lazy-load-image-background "+Wt+Tr,style:vo(vo({},lr),{},{color:"transparent",display:"inline-block",height:Qt,width:An})},ar),ut)}},{key:"render",value:function(){var ut=this.props,_t=ut.effect,Wt=ut.placeholderSrc,Qt=ut.visibleByDefault,dn=ut.wrapperClassName,An=ut.wrapperProps,Wn=this.getLazyLoadImage();return(_t||Wt)&&!Qt||dn||An?this.getWrappedLazyLoadImage(Wn):Wn}}])&&Ro(Ye.prototype,wt),Vn}(f().Component);Do.propTypes={afterLoad:m.PropTypes.func,beforeLoad:m.PropTypes.func,delayMethod:m.PropTypes.string,delayTime:m.PropTypes.number,effect:m.PropTypes.string,placeholderSrc:m.PropTypes.string,threshold:m.PropTypes.number,useIntersectionObserver:m.PropTypes.bool,visibleByDefault:m.PropTypes.bool,wrapperClassName:m.PropTypes.string,wrapperProps:m.PropTypes.object},Do.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const Ta=Do})(),tse.exports=i})();const nse=()=>{const e=Oy(),[t,n]=ue.useState(""),[i,c]=ue.useState({username:"",password:""}),f=M=>{let P=M.target.value;c({...i,[M.target.id]:P})},[m,{isLoading:s,isSuccess:v}]=CH(),{refetch:E}=Mu(),I=async M=>{var P;M.preventDefault();try{const D=await m(i).unwrap();localStorage.setItem("Bearer",D.token),E(),e("/mywanders")}catch(D){switch((P=D==null?void 0:D.data)==null?void 0:P.msg){case"No username entered":n("No username entered");break;case"No password entered":n("No password entered");break;case"Could not find that user. Hmmm... ":n("Could not find that user");break;case"You entered the wrong password":n("You entered the wrong password");break;default:n("Hmmmm, something went wrong. Try again.");break}console.log(D)}};return Pe("div",{className:"w-screen flex h-screen justify-center items-center",children:At("div",{className:" h-fit m-5 w-11/12 sm:w-2/3 md:w-3/6 lg:w-5/6 xl:w-5/6 bg-white rounded-3xl shadow-md p-8 lg:p-5 flex",children:[Pe(rx.LazyLoadImage,{src:V4,alt:"mountain image",className:" max-w-1/2 max-h-full lg:w-1/2 rounded-3xl  object-cover mr-5 w-0  hidden lg:block"}),At("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center pb-5",children:[Pe("h2",{className:"font-roboto font-bold text-3xl lg:text-4xl text-center  text-zinc-800",children:"Hello Again!"}),Pe("p",{className:"my-3 text-lg font-roboto text-zinc-500 text-center font-medium",children:"Continue sharing your travels with the world!"}),At("form",{className:"w-full flex flex-col items-center",children:[At("div",{className:"flex flex-col w-full lg:w-4/6",children:[Pe("div",{className:"border-2 border-red-600 rounded-md p-4",children:At("p",{className:"text-sm",children:[Pe("span",{className:"font-bold",children:"Work In Progress:"})," To test website login with username: johnsmith12 and pass:123 or create account as needed"]})}),Pe("input",{id:"username",type:"username",placeholder:"Username",value:i.username,onChange:M=>{f(M)},className:" w-full p-3 mt-3 lg:mt-10 font-roboto font-semibold text-sm lg:text-lg text-zinc-800 outline-gray-500 rounded-lg bg-transparent outline border-none outline-2 outline-offset-0 focus:outline-purple-600 focus:shadow-lg "}),Pe("input",{id:"password",type:"password",placeholder:"Password",value:i.password,onChange:M=>{f(M)},className:" w-full p-3 mt-5 font-roboto font-semibold text-sm lg:text-lg text-zinc-800 outline-gray-500 rounded-lg bg-transparent outline border-none outline-2 focus:outline-offset-0 focus:outline-purple-600 focus:shadow-lg "}),Pe("a",{className:"self-end font-roboto font-normal text-sm lg:text-lg pt-2 text-zinc-800 hover:underline hover:text-purple-600",children:"Recover Password"}),At("button",{onClick:M=>I(M),disabled:!!s,className:"w-full bg-zinc-800 text-white rounded-md h-10 lg:h-14 text-md lg:text-xl mt-4 lg:mt-6 active:scale-95 transition disabled:bg-zinc-700 flex items-center justify-center gap-3",children:["Sign In ",s&&Pe(uoe.ThreeDotsBounce,{color:"#ffffff"})]}),At("p",{className:"font-roboto font-normal text-sm lg:text-lg text-right text-zinc-800 mt-3",children:["Not a member? ",Pe(Sx,{to:"/auth/register",className:"hover:underline hover:text-purple-600",children:"Sign Up"})]}),t!==""&&At("div",{className:"text-zinc-800 font-roboto font-medium text-md items-center flex mt-3",children:[Pe(Yz,{className:"w-5 h-5 text-red-500 mr-1"})," ",t]})]}),At("div",{className:"flex w-full lg:w-4/6 mt-3 lg:mt-5 items-center justify-center",children:[Pe("div",{className:"w-full bg-zinc-300 h-0.5"}),Pe("p",{className:" mx-4 min-w-fit text-md lg:text-lg font-roboto text-zinc-500",children:"Or continue with"}),Pe("div",{className:"w-full bg-zinc-300 h-0.5"})]})]}),At("button",{onClick:()=>{},disabled:!0,className:" disabled:bg-zinc-300 w-full lg:w-4/6 bg-zinc-800 text-white rounded-md h-10 lg:h-14 text-md lg:text-xl mt-5 lg:mt-10 active:scale-95 transition flex justify-center items-center",children:[At("svg",{className:"mr-2 h-5 w-5","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"github",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Pe("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#ffffff"}),Pe("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#ffffff"}),Pe("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#ffffff"}),Pe("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#ffffff"}),Pe("path",{d:"M1 1h22v22H1z",fill:"none"})]}),"Sign in With Google"]})]})]})})};/*!
 * FilePondPluginFileEncode 2.1.10
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const rse=function(){self.onmessage=t=>{e(t.data.message,n=>{self.postMessage({id:t.data.id,message:n})})};const e=(t,n)=>{const{file:i}=t,c=new FileReader;c.onloadend=()=>{n(c.result.replace("data:","").replace(/^.+,/,""))},c.readAsDataURL(i)}},$4=({addFilter:e,utils:t})=>{const{Type:n,createWorker:i,createRoute:c,isFile:f}=t,m=({name:v,file:E})=>new Promise(I=>{const M=i(rse);M.post({file:E},P=>{I({name:v,data:P}),M.terminate()})}),s=[];return e("DID_CREATE_ITEM",(v,{query:E})=>{E("GET_ALLOW_FILE_ENCODE")&&(v.extend("getFileEncodeBase64String",()=>s[v.id]&&s[v.id].data),v.extend("getFileEncodeDataURL",()=>`data:${v.fileType};base64,${s[v.id].data}`))}),e("SHOULD_PREPARE_OUTPUT",(v,{query:E})=>new Promise(I=>{I(E("GET_ALLOW_FILE_ENCODE"))})),e("COMPLETE_PREPARE_OUTPUT",(v,{item:E,query:I})=>new Promise(M=>{if(!I("GET_ALLOW_FILE_ENCODE")||!f(v)&&!Array.isArray(v))return M(v);s[E.id]={metadata:E.getMetadata(),data:null},Promise.all((v instanceof Blob?[{name:null,file:v}]:v).map(m)).then(P=>{s[E.id].data=v instanceof Blob?P[0].data:P,M(v)})})),e("CREATE_VIEW",v=>{const{is:E,view:I,query:M}=v;!E("file-wrapper")||!M("GET_ALLOW_FILE_ENCODE")||I.registerWriter(c({DID_PREPARE_OUTPUT:({root:P,action:D})=>{if(M("IS_ASYNC"))return;const k=M("GET_ITEM",D.id);if(!k)return;const V=s[k.id],H=V.metadata,G=V.data,z=JSON.stringify({id:k.id,name:k.file.name,type:k.file.type,size:k.file.size,metadata:H,data:G});P.ref.data?P.ref.data.value=z:P.dispatch("DID_DEFINE_VALUE",{id:k.id,value:z})},DID_REMOVE_ITEM:({action:P})=>{const D=M("GET_ITEM",P.id);D&&delete s[D.id]}}))}),{options:{allowFileEncode:[!0,n.BOOLEAN]}}},ise=typeof window<"u"&&typeof window.document<"u";ise&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:$4}));/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const W4=({addFilter:e,utils:t})=>{const{Type:n,isString:i,replaceInString:c,guesstimateMimeType:f,getExtensionFromFilename:m,getFilenameFromURL:s}=t,v=(D,k)=>{const V=(/^[^/]+/.exec(D)||[]).pop(),H=k.slice(0,-2);return V===H},E=(D,k)=>D.some(V=>/\*$/.test(V)?v(k,V):V===k),I=D=>{let k="";if(i(D)){const V=s(D),H=m(V);H&&(k=f(H))}else k=D.type;return k},M=(D,k,V)=>{if(k.length===0)return!0;const H=I(D);return V?new Promise((G,z)=>{V(D,H).then(N=>{E(k,N)?G():z()}).catch(z)}):E(k,H)},P=D=>k=>D[k]===null?!1:D[k]||k;return e("SET_ATTRIBUTE_TO_OPTION_MAP",D=>Object.assign(D,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(D,{query:k})=>k("GET_ALLOW_FILE_TYPE_VALIDATION")?M(D,k("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(D,{query:k})=>new Promise((V,H)=>{if(!k("GET_ALLOW_FILE_TYPE_VALIDATION")){V(D);return}const G=k("GET_ACCEPTED_FILE_TYPES"),z=k("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),N=M(D,G,z),W=()=>{const $=G.map(P(k("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(te=>te!==!1),X=$.filter(function(te,J){return $.indexOf(te)===J});H({status:{main:k("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:c(k("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:X.join(", "),allButLastType:X.slice(0,-1).join(", "),lastType:X[$.length-1]})}})};if(typeof N=="boolean")return N?V(D):W();N.then(()=>{V(D)}).catch(W)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},ose=typeof window<"u"&&typeof window.document<"u";ose&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:W4}));/*!
 * FilePondPluginImageCrop 2.0.6
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Ik=e=>/^image/.test(e.type),q4=({addFilter:e,utils:t})=>{const{Type:n,isFile:i,getNumericAspectRatioFromString:c}=t,f=(E,I)=>!(!Ik(E.file)||!I("GET_ALLOW_IMAGE_CROP")),m=E=>typeof E=="object",s=E=>typeof E=="number",v=(E,I)=>E.setMetadata("crop",Object.assign({},E.getMetadata("crop"),I));return e("DID_CREATE_ITEM",(E,{query:I})=>{E.extend("setImageCrop",M=>{if(!(!f(E,I)||!m(center)))return E.setMetadata("crop",M),M}),E.extend("setImageCropCenter",M=>{if(!(!f(E,I)||!m(M)))return v(E,{center:M})}),E.extend("setImageCropZoom",M=>{if(!(!f(E,I)||!s(M)))return v(E,{zoom:Math.max(1,M)})}),E.extend("setImageCropRotation",M=>{if(!(!f(E,I)||!s(M)))return v(E,{rotation:M})}),E.extend("setImageCropFlip",M=>{if(!(!f(E,I)||!m(M)))return v(E,{flip:M})}),E.extend("setImageCropAspectRatio",M=>{if(!f(E,I)||typeof M>"u")return;const P=E.getMetadata("crop"),D=c(M),k={center:{x:.5,y:.5},flip:P?Object.assign({},P.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:D};return E.setMetadata("crop",k),k})}),e("DID_LOAD_ITEM",(E,{query:I})=>new Promise((M,P)=>{const D=E.file;if(!i(D)||!Ik(D)||!I("GET_ALLOW_IMAGE_CROP")||E.getMetadata("crop"))return M(E);const V=I("GET_IMAGE_CROP_ASPECT_RATIO");E.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:V?c(V):null}),M(E)})),{options:{allowImageCrop:[!0,n.BOOLEAN],imageCropAspectRatio:[null,n.STRING]}}},sse=typeof window<"u"&&typeof window.document<"u";sse&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:q4}));/*!
 * FilePondPluginImageResize 2.0.10
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const ase=e=>/^image/.test(e.type),lse=(e,t)=>{let n=new Image;n.onload=()=>{const i=n.naturalWidth,c=n.naturalHeight;n=null,t({width:i,height:c})},n.onerror=()=>t(null),n.src=e},H4=({addFilter:e,utils:t})=>{const{Type:n}=t;return e("DID_LOAD_ITEM",(i,{query:c})=>new Promise((f,m)=>{const s=i.file;if(!ase(s)||!c("GET_ALLOW_IMAGE_RESIZE"))return f(i);const v=c("GET_IMAGE_RESIZE_MODE"),E=c("GET_IMAGE_RESIZE_TARGET_WIDTH"),I=c("GET_IMAGE_RESIZE_TARGET_HEIGHT"),M=c("GET_IMAGE_RESIZE_UPSCALE");if(E===null&&I===null)return f(i);const P=E===null?I:E,D=I===null?P:I,k=URL.createObjectURL(s);lse(k,V=>{if(URL.revokeObjectURL(k),!V)return f(i);let{width:H,height:G}=V;const z=(i.getMetadata("exif")||{}).orientation||-1;if(z>=5&&z<=8&&([H,G]=[G,H]),H===P&&G===D)return f(i);if(!M){if(v==="cover"){if(H<=P||G<=D)return f(i)}else if(H<=P&&G<=P)return f(i)}i.setMetadata("resize",{mode:v,upscale:M,size:{width:P,height:D}}),f(i)})})),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}},cse=typeof window<"u"&&typeof window.document<"u";cse&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:H4}));/*!
 * FilePondPluginImageTransform 3.8.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const use=e=>/^image/.test(e.type),hse=e=>e.substr(0,e.lastIndexOf("."))||e,dse={jpeg:"jpg","svg+xml":"svg"},fse=(e,t)=>{const n=hse(e),i=t.split("/")[1],c=dse[i]||i;return`${n}.${c}`},pse=e=>/jpeg|png|svg\+xml/.test(e)?e:"image/jpeg",mse=e=>/^image/.test(e.type),gse={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},yse=(e,t,n)=>(n===-1&&(n=1),gse[n](e,t)),Wg=(e,t)=>({x:e,y:t}),_se=(e,t)=>e.x*t.x+e.y*t.y,Mk=(e,t)=>Wg(e.x-t.x,e.y-t.y),vse=(e,t)=>_se(Mk(e,t),Mk(e,t)),Ak=(e,t)=>Math.sqrt(vse(e,t)),Ck=(e,t)=>{const n=e,i=1.5707963267948966,c=t,f=1.5707963267948966-t,m=Math.sin(i),s=Math.sin(c),v=Math.sin(f),E=Math.cos(f),I=n/m,M=I*s,P=I*v;return Wg(E*M,E*P)},xse=(e,t)=>{const n=e.width,i=e.height,c=Ck(n,t),f=Ck(i,t),m=Wg(e.x+Math.abs(c.x),e.y-Math.abs(c.y)),s=Wg(e.x+e.width+Math.abs(f.y),e.y+Math.abs(f.x)),v=Wg(e.x-Math.abs(f.y),e.y+e.height-Math.abs(f.x));return{width:Ak(m,s),height:Ak(m,v)}},Z4=(e,t,n=0,i={x:.5,y:.5})=>{const c=i.x>.5?1-i.x:i.x,f=i.y>.5?1-i.y:i.y,m=c*2*e.width,s=f*2*e.height,v=xse(t,n);return Math.max(v.width/m,v.height/s)},Y4=(e,t)=>{let n=e.width,i=n*t;i>e.height&&(i=e.height,n=i/t);const c=(e.width-n)*.5,f=(e.height-i)*.5;return{x:c,y:f,width:n,height:i}},Pk=(e,t,n=1)=>{const i=e.height/e.width;let c=1,f=t,m=1,s=i;s>f&&(s=f,m=s/i);const v=Math.max(c/m,f/s),E=e.width/(n*v*m),I=E*t;return{width:E,height:I}},X4=e=>{e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,1,1)},Rk=e=>e&&(e.horizontal||e.vertical),wse=(e,t,n)=>{if(t<=1&&!Rk(n))return e.width=e.naturalWidth,e.height=e.naturalHeight,e;const i=document.createElement("canvas"),c=e.naturalWidth,f=e.naturalHeight,m=t>=5&&t<=8;m?(i.width=f,i.height=c):(i.width=c,i.height=f);const s=i.getContext("2d");if(t&&s.transform.apply(s,yse(c,f,t)),Rk(n)){const v=[1,0,0,1,0,0];(!m&&n.horizontal||m&n.vertical)&&(v[0]=-1,v[4]=c),(!m&&n.vertical||m&&n.horizontal)&&(v[3]=-1,v[5]=f),s.transform(...v)}return s.drawImage(e,0,0,c,f),i},bse=(e,t,n={},i={})=>{const{canvasMemoryLimit:c,background:f=null}=i,m=n.zoom||1,s=wse(e,t,n.flip),v={width:s.width,height:s.height},E=n.aspectRatio||v.height/v.width;let I=Pk(v,E,m);if(c){const N=I.width*I.height;if(N>c){const W=Math.sqrt(c)/Math.sqrt(N);v.width=Math.floor(v.width*W),v.height=Math.floor(v.height*W),I=Pk(v,E,m)}}const M=document.createElement("canvas"),P={x:I.width*.5,y:I.height*.5},D={x:0,y:0,width:I.width,height:I.height,center:P},k=typeof n.scaleToFit>"u"||n.scaleToFit,V=m*Z4(v,Y4(D,E),n.rotation,k?n.center:{x:.5,y:.5});M.width=Math.round(I.width/V),M.height=Math.round(I.height/V),P.x/=V,P.y/=V;const H={x:P.x-v.width*(n.center?n.center.x:.5),y:P.y-v.height*(n.center?n.center.y:.5)},G=M.getContext("2d");f&&(G.fillStyle=f,G.fillRect(0,0,M.width,M.height)),G.translate(P.x,P.y),G.rotate(n.rotation||0),G.drawImage(s,H.x-P.x,H.y-P.y,v.width,v.height);const z=G.getImageData(0,0,M.width,M.height);return X4(M),z},Ese=(()=>typeof window<"u"&&typeof window.document<"u")();Ese&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=this.toDataURL(t,n).split(",")[1];setTimeout(function(){for(var c=atob(i),f=c.length,m=new Uint8Array(f),s=0;s<f;s++)m[s]=c.charCodeAt(s);e(new Blob([m],{type:t||"image/png"}))})}}));const Tse=(e,t,n=null)=>new Promise(i=>{const c=n?n(e):e;Promise.resolve(c).then(f=>{f.toBlob(i,t.type,t.quality)})}),ix=(e,t)=>Iy(e.x*t,e.y*t),ox=(e,t)=>Iy(e.x+t.x,e.y+t.y),Q4=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:Iy(e.x/t,e.y/t)},Kc=(e,t,n)=>{const i=Math.cos(t),c=Math.sin(t),f=Iy(e.x-n.x,e.y-n.y);return Iy(n.x+i*f.x-c*f.y,n.y+c*f.x+i*f.y)},Iy=(e=0,t=0)=>({x:e,y:t}),Hi=(e,t,n=1,i)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(i?t[i]:Math.min(t.width,t.height))},hd=(e,t,n)=>{const i=e.borderStyle||e.lineStyle||"solid",c=e.backgroundColor||e.fontColor||"transparent",f=e.borderColor||e.lineColor||"transparent",m=Hi(e.borderWidth||e.lineWidth,t,n),s=e.lineCap||"round",v=e.lineJoin||"round",E=typeof i=="string"?"":i.map(M=>Hi(M,t,n)).join(","),I=e.opacity||1;return{"stroke-linecap":s,"stroke-linejoin":v,"stroke-width":m||0,"stroke-dasharray":E,stroke:f,fill:c,opacity:I}},Rs=e=>e!=null,Tp=(e,t,n=1)=>{let i=Hi(e.x,t,n,"width")||Hi(e.left,t,n,"width"),c=Hi(e.y,t,n,"height")||Hi(e.top,t,n,"height"),f=Hi(e.width,t,n,"width"),m=Hi(e.height,t,n,"height"),s=Hi(e.right,t,n,"width"),v=Hi(e.bottom,t,n,"height");return Rs(c)||(Rs(m)&&Rs(v)?c=t.height-m-v:c=v),Rs(i)||(Rs(f)&&Rs(s)?i=t.width-f-s:i=s),Rs(f)||(Rs(i)&&Rs(s)?f=t.width-i-s:f=0),Rs(m)||(Rs(c)&&Rs(v)?m=t.height-c-v:m=0),{x:i||0,y:c||0,width:f||0,height:m||0}},Sse=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),rl=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),Ise="http://www.w3.org/2000/svg",Uf=(e,t)=>{const n=document.createElementNS(Ise,e);return t&&rl(n,t),n},Mse=e=>rl(e,{...e.rect,...e.styles}),Ase=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,i=e.rect.width*.5,c=e.rect.height*.5;return rl(e,{cx:t,cy:n,rx:i,ry:c,...e.styles})},Cse={contain:"xMidYMid meet",cover:"xMidYMid slice"},Pse=(e,t)=>{rl(e,{...e.rect,...e.styles,preserveAspectRatio:Cse[t.fit]||"none"})},Rse={left:"start",center:"middle",right:"end"},Dse=(e,t,n,i)=>{const c=Hi(t.fontSize,n,i),f=t.fontFamily||"sans-serif",m=t.fontWeight||"normal",s=Rse[t.textAlign]||"start";rl(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":m,"font-size":c,"font-family":f,"text-anchor":s}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},Ose=(e,t,n,i)=>{rl(e,{...e.rect,...e.styles,fill:"none"});const c=e.childNodes[0],f=e.childNodes[1],m=e.childNodes[2],s=e.rect,v={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(rl(c,{x1:s.x,y1:s.y,x2:v.x,y2:v.y}),!t.lineDecoration)return;f.style.display="none",m.style.display="none";const E=Q4({x:v.x-s.x,y:v.y-s.y}),I=Hi(.05,n,i);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const M=ix(E,I),P=ox(s,M),D=Kc(s,2,P),k=Kc(s,-2,P);rl(f,{style:"display:block;",d:`M${D.x},${D.y} L${s.x},${s.y} L${k.x},${k.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const M=ix(E,-I),P=ox(v,M),D=Kc(v,2,P),k=Kc(v,-2,P);rl(m,{style:"display:block;",d:`M${D.x},${D.y} L${v.x},${v.y} L${k.x},${k.y}`})}},kse=(e,t,n,i)=>{rl(e,{...e.styles,fill:"none",d:Sse(t.points.map(c=>({x:Hi(c.x,n,i,"width"),y:Hi(c.y,n,i,"height")})))})},yv=e=>t=>Uf(e,{id:t.id}),Lse=e=>{const t=Uf("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},zse=e=>{const t=Uf("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Uf("line");t.appendChild(n);const i=Uf("path");t.appendChild(i);const c=Uf("path");return t.appendChild(c),t},Nse={image:Lse,rect:yv("rect"),ellipse:yv("ellipse"),text:yv("text"),path:yv("path"),line:zse},Bse={rect:Mse,ellipse:Ase,image:Pse,text:Dse,path:kse,line:Ose},Fse=(e,t)=>Nse[e](t),Use=(e,t,n,i,c)=>{t!=="path"&&(e.rect=Tp(n,i,c)),e.styles=hd(n,i,c),Bse[t](e,n,i,c)},K4=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,Vse=(e,t={},n,i)=>new Promise(c=>{const{background:f=null}=i,m=new FileReader;m.onloadend=()=>{const s=m.result,v=document.createElement("div");v.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",v.innerHTML=s;const E=v.querySelector("svg");document.body.appendChild(v);const I=E.getBBox();v.parentNode.removeChild(v);const M=v.querySelector("title"),P=E.getAttribute("viewBox")||"",D=E.getAttribute("width")||"",k=E.getAttribute("height")||"";let V=parseFloat(D)||null,H=parseFloat(k)||null;const G=(D.match(/[a-z]+/)||[])[0]||"",z=(k.match(/[a-z]+/)||[])[0]||"",N=P.split(" ").map(parseFloat),W=N.length?{x:N[0],y:N[1],width:N[2],height:N[3]}:I;let $=V??W.width,X=H??W.height;E.style.overflow="visible",E.setAttribute("width",$),E.setAttribute("height",X);let te="";if(n&&n.length){const bt={width:$,height:X};te=n.sort(K4).reduce((Nt,ft)=>{const Ot=Fse(ft[0],ft[1]);return Use(Ot,ft[0],ft[1],bt),Ot.removeAttribute("id"),Ot.getAttribute("opacity")===1&&Ot.removeAttribute("opacity"),Nt+`
`+Ot.outerHTML+`
`},""),te=`

<g>${te.replace(/&nbsp;/g," ")}</g>

`}const J=t.aspectRatio||X/$,re=$,ce=re*J,Ee=typeof t.scaleToFit>"u"||t.scaleToFit,Me=t.center?t.center.x:.5,Le=t.center?t.center.y:.5,Ae=Z4({width:$,height:X},Y4({width:re,height:ce},J),t.rotation,Ee?{x:Me,y:Le}:{x:.5,y:.5}),Oe=t.zoom*Ae,ke=t.rotation*(180/Math.PI),je={x:re*.5,y:ce*.5},De={x:je.x-$*Me,y:je.y-X*Le},Be=[`rotate(${ke} ${je.x} ${je.y})`,`translate(${je.x} ${je.y})`,`scale(${Oe})`,`translate(${-je.x} ${-je.y})`,`translate(${De.x} ${De.y})`],He=t.flip&&t.flip.horizontal,tt=t.flip&&t.flip.vertical,Mt=[`scale(${He?-1:1} ${tt?-1:1})`,`translate(${He?-$:0} ${tt?-X:0})`],Dt=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="${re}${G}" height="${ce}${z}" 
viewBox="0 0 ${re} ${ce}" ${f?'style="background:'+f+'" ':""}
preserveAspectRatio="xMinYMin"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns="http://www.w3.org/2000/svg">
<!-- Generated by PQINA - https://pqina.nl/ -->
<title>${M?M.textContent:""}</title>
<g transform="${Be.join(" ")}">
<g transform="${Mt.join(" ")}">
${E.outerHTML}${te}
</g>
</g>
</svg>`;c(Dt)},m.readAsText(e)}),jse=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},Gse=()=>{const e={resize:I,filter:E},t=(M,P)=>(M.forEach(D=>{P=e[D.type](P,D.data)}),P),n=(M,P)=>{let D=M.transforms,k=null;if(D.forEach(V=>{V.type==="filter"&&(k=V)}),k){let V=null;D.forEach(H=>{H.type==="resize"&&(V=H)}),V&&(V.data.matrix=k.data,D=D.filter(H=>H.type!=="filter"))}P(t(D,M.imageData))};self.onmessage=M=>{n(M.data.message,P=>{self.postMessage({id:M.data.id,message:P},[P.data.buffer])})};const i=1,c=1,f=1;function m(M,P,D){const k=P[M]/255,V=P[M+1]/255,H=P[M+2]/255,G=P[M+3]/255,z=k*D[0]+V*D[1]+H*D[2]+G*D[3]+D[4],N=k*D[5]+V*D[6]+H*D[7]+G*D[8]+D[9],W=k*D[10]+V*D[11]+H*D[12]+G*D[13]+D[14],$=k*D[15]+V*D[16]+H*D[17]+G*D[18]+D[19],X=Math.max(0,z*$)+i*(1-$),te=Math.max(0,N*$)+c*(1-$),J=Math.max(0,W*$)+f*(1-$);P[M]=Math.max(0,Math.min(1,X))*255,P[M+1]=Math.max(0,Math.min(1,te))*255,P[M+2]=Math.max(0,Math.min(1,J))*255}const s=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function v(M){return self.JSON.stringify(M||[])===s}function E(M,P){if(!P||v(P))return M;const D=M.data,k=D.length,V=P[0],H=P[1],G=P[2],z=P[3],N=P[4],W=P[5],$=P[6],X=P[7],te=P[8],J=P[9],re=P[10],ce=P[11],Ee=P[12],Me=P[13],Le=P[14],Ae=P[15],Oe=P[16],ke=P[17],je=P[18],De=P[19];let Be=0,He=0,tt=0,Mt=0,Dt=0,bt=0,Nt=0,ft=0,Ot=0,an=0,pn=0,Vt=0;for(;Be<k;Be+=4)He=D[Be]/255,tt=D[Be+1]/255,Mt=D[Be+2]/255,Dt=D[Be+3]/255,bt=He*V+tt*H+Mt*G+Dt*z+N,Nt=He*W+tt*$+Mt*X+Dt*te+J,ft=He*re+tt*ce+Mt*Ee+Dt*Me+Le,Ot=He*Ae+tt*Oe+Mt*ke+Dt*je+De,an=Math.max(0,bt*Ot)+i*(1-Ot),pn=Math.max(0,Nt*Ot)+c*(1-Ot),Vt=Math.max(0,ft*Ot)+f*(1-Ot),D[Be]=Math.max(0,Math.min(1,an))*255,D[Be+1]=Math.max(0,Math.min(1,pn))*255,D[Be+2]=Math.max(0,Math.min(1,Vt))*255;return M}function I(M,P){let{mode:D="contain",upscale:k=!1,width:V,height:H,matrix:G}=P;if(G=!G||v(G)?null:G,!V&&!H)return E(M,G);if(V===null?V=H:H===null&&(H=V),D!=="force"){let Me=V/M.width,Le=H/M.height,Ae=1;if(D==="cover"?Ae=Math.max(Me,Le):D==="contain"&&(Ae=Math.min(Me,Le)),Ae>1&&k===!1)return E(M,G);V=M.width*Ae,H=M.height*Ae}const z=M.width,N=M.height,W=Math.round(V),$=Math.round(H),X=M.data,te=new Uint8ClampedArray(W*$*4),J=z/W,re=N/$,ce=Math.ceil(J*.5),Ee=Math.ceil(re*.5);for(let Me=0;Me<$;Me++)for(let Le=0;Le<W;Le++){let Ae=(Le+Me*W)*4,Oe=0,ke=0,je=0,De=0,Be=0,He=0,tt=0,Mt=(Me+.5)*re;for(let Dt=Math.floor(Me*re);Dt<(Me+1)*re;Dt++){let bt=Math.abs(Mt-(Dt+.5))/Ee,Nt=(Le+.5)*J,ft=bt*bt;for(let Ot=Math.floor(Le*J);Ot<(Le+1)*J;Ot++){let an=Math.abs(Nt-(Ot+.5))/ce,pn=Math.sqrt(ft+an*an);if(pn>=-1&&pn<=1&&(Oe=2*pn*pn*pn-3*pn*pn+1,Oe>0)){an=4*(Ot+Dt*z);let Vt=X[an+3];tt+=Oe*Vt,je+=Oe,Vt<255&&(Oe=Oe*Vt/250),De+=Oe*X[an],Be+=Oe*X[an+1],He+=Oe*X[an+2],ke+=Oe}}}te[Ae]=De/ke,te[Ae+1]=Be/ke,te[Ae+2]=He/ke,te[Ae+3]=tt/je,G&&m(Ae,te,G)}return{data:te,width:W,height:$}}},$se=(e,t)=>{if(e.getUint32(t+4,!1)!==1165519206)return;t+=4;const n=e.getUint16(t+=6,!1)===18761;t+=e.getUint32(t+4,n);const i=e.getUint16(t,n);t+=2;for(let c=0;c<i;c++)if(e.getUint16(t+c*12,n)===274)return e.setUint16(t+c*12+8,1,n),!0;return!1},Wse=e=>{const t=new DataView(e);if(t.getUint16(0)!==65496)return null;let n=2,i,c,f=!1;for(;n<t.byteLength&&(i=t.getUint16(n,!1),c=t.getUint16(n+2,!1)+2,!(!(i>=65504&&i<=65519||i===65534)||(f||(f=$se(t,n)),n+c>t.byteLength)));)n+=c;return e.slice(0,n)},qse=e=>new Promise(t=>{const n=new FileReader;n.onload=()=>t(Wse(n.result)||null),n.readAsArrayBuffer(e.slice(0,256*1024))}),Hse=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Zse=(e,t)=>{const n=Hse();if(n){const i=new n;return i.append(e),i.getBlob(t)}return new Blob([e],{type:t})},Yse=()=>Math.random().toString(36).substr(2,9),Xse=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),i=new Worker(n),c=[];return{transfer:()=>{},post:(f,m,s)=>{const v=Yse();c[v]=m,i.onmessage=E=>{const I=c[E.data.id];I&&(I(E.data.message),delete c[E.data.id])},i.postMessage({id:v,message:f},s)},terminate:()=>{i.terminate(),URL.revokeObjectURL(n)}}},Qse=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=c=>{n(c)},i.src=e}),Kse=e=>e.reduce((t,n)=>t.then(i=>n().then(Array.prototype.concat.bind(i))),Promise.resolve([])),Jse=(e,t)=>new Promise(n=>{const i={width:e.width,height:e.height},c=e.getContext("2d"),f=t.sort(K4).map(m=>()=>new Promise(s=>{sae[m[0]](c,i,m[1],s)&&s()}));Kse(f).then(()=>n(e))}),Sp=(e,t)=>{e.beginPath(),e.lineCap=t["stroke-linecap"],e.lineJoin=t["stroke-linejoin"],e.lineWidth=t["stroke-width"],t["stroke-dasharray"].length&&e.setLineDash(t["stroke-dasharray"].split(",")),e.fillStyle=t.fill,e.strokeStyle=t.stroke,e.globalAlpha=t.opacity||1},Ip=e=>{e.fill(),e.stroke(),e.globalAlpha=1},eae=(e,t,n)=>{const i=Tp(n,t),c=hd(n,t);return Sp(e,c),e.rect(i.x,i.y,i.width,i.height),Ip(e),!0},tae=(e,t,n)=>{const i=Tp(n,t),c=hd(n,t);Sp(e,c);const f=i.x,m=i.y,s=i.width,v=i.height,E=.5522848,I=s/2*E,M=v/2*E,P=f+s,D=m+v,k=f+s/2,V=m+v/2;return e.moveTo(f,V),e.bezierCurveTo(f,V-M,k-I,m,k,m),e.bezierCurveTo(k+I,m,P,V-M,P,V),e.bezierCurveTo(P,V+M,k+I,D,k,D),e.bezierCurveTo(k-I,D,f,V+M,f,V),Ip(e),!0},nae=(e,t,n,i)=>{const c=Tp(n,t),f=hd(n,t);Sp(e,f);const m=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(m.crossOrigin=""),m.onload=()=>{if(n.fit==="cover"){const v=c.width/c.height,E=v>1?m.width:m.height*v,I=v>1?m.width/v:m.height,M=m.width*.5-E*.5,P=m.height*.5-I*.5;e.drawImage(m,M,P,E,I,c.x,c.y,c.width,c.height)}else if(n.fit==="contain"){const v=Math.min(c.width/m.width,c.height/m.height),E=v*m.width,I=v*m.height,M=c.x+c.width*.5-E*.5,P=c.y+c.height*.5-I*.5;e.drawImage(m,0,0,m.width,m.height,M,P,E,I)}else e.drawImage(m,0,0,m.width,m.height,c.x,c.y,c.width,c.height);Ip(e),i()},m.src=n.src},rae=(e,t,n)=>{const i=Tp(n,t),c=hd(n,t);Sp(e,c);const f=Hi(n.fontSize,t),m=n.fontFamily||"sans-serif",s=n.fontWeight||"normal",v=n.textAlign||"left";return e.font=`${s} ${f}px ${m}`,e.textAlign=v,e.fillText(n.text,i.x,i.y),Ip(e),!0},iae=(e,t,n)=>{const i=hd(n,t);Sp(e,i),e.beginPath();const c=n.points.map(m=>({x:Hi(m.x,t,1,"width"),y:Hi(m.y,t,1,"height")}));e.moveTo(c[0].x,c[0].y);const f=c.length;for(let m=1;m<f;m++)e.lineTo(c[m].x,c[m].y);return Ip(e),!0},oae=(e,t,n)=>{const i=Tp(n,t),c=hd(n,t);Sp(e,c),e.beginPath();const f={x:i.x,y:i.y},m={x:i.x+i.width,y:i.y+i.height};e.moveTo(f.x,f.y),e.lineTo(m.x,m.y);const s=Q4({x:m.x-f.x,y:m.y-f.y}),v=.04*Math.min(t.width,t.height);if(n.lineDecoration.indexOf("arrow-begin")!==-1){const E=ix(s,v),I=ox(f,E),M=Kc(f,2,I),P=Kc(f,-2,I);e.moveTo(M.x,M.y),e.lineTo(f.x,f.y),e.lineTo(P.x,P.y)}if(n.lineDecoration.indexOf("arrow-end")!==-1){const E=ix(s,-v),I=ox(m,E),M=Kc(m,2,I),P=Kc(m,-2,I);e.moveTo(M.x,M.y),e.lineTo(m.x,m.y),e.lineTo(P.x,P.y)}return Ip(e),!0},sae={rect:eae,ellipse:tae,image:nae,text:rae,line:oae,path:iae},aae=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t},lae=(e,t,n={})=>new Promise((i,c)=>{if(!e||!mse(e))return c({status:"not an image file",file:e});const{stripImageHead:f,beforeCreateBlob:m,afterCreateBlob:s,canvasMemoryLimit:v}=n,{crop:E,size:I,filter:M,markup:P,output:D}=t,k=t.image&&t.image.orientation?Math.max(1,Math.min(8,t.image.orientation)):null,V=D&&D.quality,H=V===null?null:V/100,G=D&&D.type||null,z=D&&D.background||null,N=[];I&&(typeof I.width=="number"||typeof I.height=="number")&&N.push({type:"resize",data:I}),M&&M.length===20&&N.push({type:"filter",data:M});const W=te=>{const J=s?s(te):te;Promise.resolve(J).then(i)},$=(te,J)=>{const re=aae(te),ce=P.length?Jse(re,P):re;Promise.resolve(ce).then(Ee=>{Tse(Ee,J,m).then(Me=>{if(X4(Ee),f)return W(Me);qse(e).then(Le=>{Le!==null&&(Me=new Blob([Le,Me.slice(20)],{type:Me.type})),W(Me)})}).catch(c)})};if(/svg/.test(e.type)&&G===null)return Vse(e,E,P,{background:z}).then(te=>{i(Zse(te,"image/svg+xml"))});const X=URL.createObjectURL(e);Qse(X).then(te=>{URL.revokeObjectURL(X);const J=bse(te,k,E,{canvasMemoryLimit:v,background:z}),re={quality:H,type:G||e.type};if(!N.length)return $(J,re);const ce=Xse(Gse);ce.post({transforms:N,imageData:J},Ee=>{$(jse(Ee),re),ce.terminate()},[J.data.buffer])}).catch(c)}),cae=["x","y","left","top","right","bottom","width","height"],uae=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,hae=e=>{const[t,n]=e,i=n.points?{}:cae.reduce((c,f)=>(c[f]=uae(n[f]),c),{});return[t,{zIndex:0,...n,...i}]},dae=e=>new Promise((t,n)=>{const i=new Image;i.src=URL.createObjectURL(e);const c=()=>{const m=i.naturalWidth,s=i.naturalHeight;m&&s&&(URL.revokeObjectURL(i.src),clearInterval(f),t({width:m,height:s}))};i.onerror=m=>{URL.revokeObjectURL(i.src),clearInterval(f),n(m)};const f=setInterval(c,1);c()});typeof window<"u"&&typeof window.document<"u"&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){const i=this;setTimeout(()=>{const c=i.toDataURL(t,n).split(",")[1],f=atob(c);let m=f.length;const s=new Uint8Array(m);for(;m--;)s[m]=f.charCodeAt(m);e(new Blob([s],{type:t||"image/png"}))})}}));const CM=typeof window<"u"&&typeof window.document<"u",fae=CM&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,J4=({addFilter:e,utils:t})=>{const{Type:n,forin:i,getFileFromBlob:c,isFile:f}=t,m=["crop","resize","filter","markup","output"],s=I=>(M,P,D)=>M(P,I?I(D):D),v=I=>I.aspectRatio===null&&I.rotation===0&&I.zoom===1&&I.center&&I.center.x===.5&&I.center.y===.5&&I.flip&&I.flip.horizontal===!1&&I.flip.vertical===!1;e("SHOULD_PREPARE_OUTPUT",(I,{query:M})=>new Promise(P=>{P(!M("IS_ASYNC"))}));const E=(I,M,P)=>new Promise(D=>{if(!I("GET_ALLOW_IMAGE_TRANSFORM")||P.archived||!f(M)||!use(M))return D(!1);dae(M).then(()=>{const k=I("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(k){const V=k(M);if(V==null)return handleRevert(!0);if(typeof V=="boolean")return D(V);if(typeof V.then=="function")return V.then(D)}D(!0)}).catch(k=>{D(!1)})});return e("DID_CREATE_ITEM",(I,{query:M,dispatch:P})=>{M("GET_ALLOW_IMAGE_TRANSFORM")&&I.extend("requestPrepare",()=>new Promise((D,k)=>{P("REQUEST_PREPARE_OUTPUT",{query:I.id,item:I,success:D,failure:k},!0)}))}),e("PREPARE_OUTPUT",(I,{query:M,item:P})=>new Promise(D=>{E(M,I,P).then(k=>{if(!k)return D(I);const V=[];M("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&V.push(()=>new Promise(J=>{J({name:M("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:I})})),M("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&V.push((J,re,ce)=>new Promise(Ee=>{J(re,ce).then(Me=>Ee({name:M("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:Me}))}));const H=M("GET_IMAGE_TRANSFORM_VARIANTS")||{};i(H,(J,re)=>{const ce=s(re);V.push((Ee,Me,Le)=>new Promise(Ae=>{ce(Ee,Me,Le).then(Oe=>Ae({name:J,file:Oe}))}))});const G=M("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),z=M("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),N=G===null?null:G/100,W=M("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),$=M("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||m;P.setMetadata("output",{type:W,quality:N,client:$},!0);const X=(J,re)=>new Promise((ce,Ee)=>{const Me={...re};Object.keys(Me).filter(tt=>tt!=="exif").forEach(tt=>{$.indexOf(tt)===-1&&delete Me[tt]});const{resize:Le,exif:Ae,output:Oe,crop:ke,filter:je,markup:De}=Me,Be={image:{orientation:Ae?Ae.orientation:null},output:Oe&&(Oe.type||typeof Oe.quality=="number"||Oe.background)?{type:Oe.type,quality:typeof Oe.quality=="number"?Oe.quality*100:null,background:Oe.background||M("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:Le&&(Le.size.width||Le.size.height)?{mode:Le.mode,upscale:Le.upscale,...Le.size}:void 0,crop:ke&&!v(ke)?{...ke}:void 0,markup:De&&De.length?De.map(hae):[],filter:je};if(Be.output){const tt=Oe.type?Oe.type!==J.type:!1,Mt=/\/jpe?g$/.test(J.type),Dt=Oe.quality!==null?Mt&&z==="always":!1;if(!!!(Be.size||Be.crop||Be.filter||tt||Dt))return ce(J)}const He={beforeCreateBlob:M("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:M("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:M("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:M("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};lae(J,Be,He).then(tt=>{const Mt=c(tt,fse(J.name,pse(tt.type)));ce(Mt)}).catch(Ee)}),te=V.map(J=>J(X,I,P.getMetadata()));Promise.all(te).then(J=>{D(J.length===1&&J[0].name===null?J[0].file:J)})})})),{options:{allowImageTransform:[!0,n.BOOLEAN],imageTransformImageFilter:[null,n.FUNCTION],imageTransformOutputMimeType:[null,n.STRING],imageTransformOutputQuality:[null,n.INT],imageTransformOutputStripImageHead:[!0,n.BOOLEAN],imageTransformClientTransforms:[null,n.ARRAY],imageTransformOutputQualityMode:["always",n.STRING],imageTransformVariants:[null,n.OBJECT],imageTransformVariantsIncludeDefault:[!0,n.BOOLEAN],imageTransformVariantsDefaultName:[null,n.STRING],imageTransformVariantsIncludeOriginal:[!1,n.BOOLEAN],imageTransformVariantsOriginalName:["original_",n.STRING],imageTransformBeforeCreateBlob:[null,n.FUNCTION],imageTransformAfterCreateBlob:[null,n.FUNCTION],imageTransformCanvasMemoryLimit:[CM&&fae?4096*4096:null,n.INT],imageTransformCanvasBackgroundColor:[null,n.STRING]}}};CM&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:J4}));/*!
 * FilePondPluginImageEdit 1.6.3
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const mT=e=>/^image/.test(e.type),eB=e=>{const{addFilter:t,utils:n,views:i}=e,{Type:c,createRoute:f,createItemAPI:m=I=>I}=n,{fileActionButton:s}=i;t("SHOULD_REMOVE_ON_REVERT",(I,{item:M,query:P})=>new Promise(D=>{const{file:k}=M,V=P("GET_ALLOW_IMAGE_EDIT")&&P("GET_IMAGE_EDIT_ALLOW_EDIT")&&mT(k);D(!V)})),t("DID_LOAD_ITEM",(I,{query:M,dispatch:P})=>new Promise((D,k)=>{if(I.origin>1){D(I);return}const{file:V}=I;if(!M("GET_ALLOW_IMAGE_EDIT")||!M("GET_IMAGE_EDIT_INSTANT_EDIT")){D(I);return}if(!mT(V)){D(I);return}const H=(z,N,W)=>$=>{v.shift(),$?N(z):W(z),P("KICK"),G()},G=()=>{if(!v.length)return;const{item:z,resolve:N,reject:W}=v[0];P("EDIT_ITEM",{id:z.id,handleEditorResponse:H(z,N,W)})};E({item:I,resolve:D,reject:k}),v.length===1&&G()})),t("DID_CREATE_ITEM",(I,{query:M,dispatch:P})=>{I.extend("edit",()=>{P("EDIT_ITEM",{id:I.id})})});const v=[],E=I=>(v.push(I),I);return t("CREATE_VIEW",I=>{const{is:M,view:P,query:D}=I;if(!D("GET_ALLOW_IMAGE_EDIT"))return;const k=D("GET_ALLOW_IMAGE_PREVIEW");if(!(M("file-info")&&!k||M("file")&&k))return;const H=D("GET_IMAGE_EDIT_EDITOR");if(!H)return;H.filepondCallbackBridge||(H.outputData=!0,H.outputFile=!1,H.filepondCallbackBridge={onconfirm:H.onconfirm||(()=>{}),oncancel:H.oncancel||(()=>{})});const G=({root:W,props:$,action:X})=>{const{id:te}=$,{handleEditorResponse:J}=X;H.cropAspectRatio=W.query("GET_IMAGE_CROP_ASPECT_RATIO")||H.cropAspectRatio,H.outputCanvasBackgroundColor=W.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||H.outputCanvasBackgroundColor;const re=W.query("GET_ITEM",te);if(!re)return;const ce=re.file,Ee=re.getMetadata("crop"),Me={center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},Le=re.getMetadata("resize"),Ae=re.getMetadata("filter")||null,Oe=re.getMetadata("filters")||null,ke=re.getMetadata("colors")||null,je=re.getMetadata("markup")||null,De={crop:Ee||Me,size:Le?{upscale:Le.upscale,mode:Le.mode,width:Le.size.width,height:Le.size.height}:null,filter:Oe?Oe.id||Oe.matrix:W.query("GET_ALLOW_IMAGE_FILTER")&&W.query("GET_IMAGE_FILTER_COLOR_MATRIX")&&!ke?Ae:null,color:ke,markup:je};H.onconfirm=({data:Be})=>{const{crop:He,size:tt,filter:Mt,color:Dt,colorMatrix:bt,markup:Nt}=Be,ft={};if(He&&(ft.crop=He),tt){const Ot=(re.getMetadata("resize")||{}).size,an={width:tt.width,height:tt.height};!(an.width&&an.height)&&Ot&&(an.width=Ot.width,an.height=Ot.height),(an.width||an.height)&&(ft.resize={upscale:tt.upscale,mode:tt.mode,size:an})}Nt&&(ft.markup=Nt),ft.colors=Dt,ft.filters=Mt,ft.filter=bt,re.setMetadata(ft),H.filepondCallbackBridge.onconfirm(Be,m(re)),J&&(H.onclose=()=>{J(!0),H.onclose=null})},H.oncancel=()=>{H.filepondCallbackBridge.oncancel(m(re)),J&&(H.onclose=()=>{J(!1),H.onclose=null})},H.open(ce,De)},z=({root:W,props:$})=>{if(!D("GET_IMAGE_EDIT_ALLOW_EDIT"))return;const{id:X}=$,te=D("GET_ITEM",X);if(!te)return;const J=te.file;if(mT(J))if(W.ref.handleEdit=re=>{re.stopPropagation(),W.dispatch("EDIT_ITEM",{id:X})},k){const re=P.createChildView(s,{label:"edit",icon:D("GET_IMAGE_EDIT_ICON_EDIT"),opacity:0});re.element.classList.add("filepond--action-edit-item"),re.element.dataset.align=D("GET_STYLE_IMAGE_EDIT_BUTTON_EDIT_ITEM_POSITION"),re.on("click",W.ref.handleEdit),W.ref.buttonEditItem=P.appendChildView(re)}else{const re=P.element.querySelector(".filepond--file-info-main"),ce=document.createElement("button");ce.className="filepond--action-edit-item-alt",ce.innerHTML=D("GET_IMAGE_EDIT_ICON_EDIT")+"<span>edit</span>",ce.addEventListener("click",W.ref.handleEdit),re.appendChild(ce),W.ref.editButton=ce}};P.registerDestroyer(({root:W})=>{W.ref.buttonEditItem&&W.ref.buttonEditItem.off("click",W.ref.handleEdit),W.ref.editButton&&W.ref.editButton.removeEventListener("click",W.ref.handleEdit)});const N={EDIT_ITEM:G,DID_LOAD_ITEM:z};if(k){const W=({root:$})=>{$.ref.buttonEditItem&&($.ref.buttonEditItem.opacity=1)};N.DID_IMAGE_PREVIEW_SHOW=W}P.registerWriter(f(N))}),{options:{allowImageEdit:[!0,c.BOOLEAN],styleImageEditButtonEditItemPosition:["bottom center",c.STRING],imageEditInstantEdit:[!1,c.BOOLEAN],imageEditAllowEdit:[!0,c.BOOLEAN],imageEditIconEdit:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><path d="M8.5 17h1.586l7-7L15.5 8.414l-7 7V17zm-1.707-2.707l8-8a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-8 8A1 1 0 0 1 10.5 19h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 .293-.707z" fill="currentColor" fill-rule="nonzero"/></svg>',c.STRING],imageEditEditor:[null,c.OBJECT]}}},pae=typeof window<"u"&&typeof window.document<"u";pae&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:eB}));const mae=({handleChange:e,userData:t,setUserData:n,setFormPage:i})=>{const c=Oy();X1(W4,aM,lM,q4,H4,J4,eB,$4);const[f,{data:m,isLoading:s,isError:v}]=AH(),{refetch:E}=Mu(),[I,M]=ue.useState(""),P=k=>k.email.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?k.username?k.firstName?k.lastName?k.password?!0:(M("Invalid Password"),!1):(M("No Last Name"),!1):(M("No First Name"),!1):(M("Invalid Username"),!1):(M("Invalid Email"),!1),D=async k=>{if(k.preventDefault(),!!P(t))try{await f({...t}).then(V=>{var H;localStorage.setItem("Bearer",(H=V==null?void 0:V.data)==null?void 0:H.token),n({username:"",email:"",password:"",firstName:"",lastName:"",profileImg:""}),E(),c("/mywanders")}).catch(V=>console.log(V)),console.log(m)}catch(V){console.log(V)}};return At("div",{className:"w-full lg:w-4/6 flex flex-col items-center pt-10",children:[Pe(GN,{labelIdle:'Drag & Drop your profile picture or <span class="filepond--label-action">Browse</span>',imagePreviewHeight:170,imageCropAspectRatio:"1:1",imageResizeTargetWidth:200,imageResizeTargetHeight:200,stylePanelLayout:"compact circle",styleLoadIndicatorPosition:"center bottom",styleButtonRemoveItemPosition:"center bottom",styleButtonProcessItemPosition:"right bottom",styleImageEditButtonEditItemPosition:"right bottom",className:"filepond",name:"filepond",allowImageEdit:!0,acceptedFileTypes:["image/png","image/jpeg","image/gif"],allowFileEncode:!0,onaddfile:(k,V)=>{console.log(k),n({...t,profileImg:V==null?void 0:V.getFileEncodeBase64String()})}}),Pe("input",{id:"username",type:"username",placeholder:"Username",value:t.username,onChange:k=>{e(k)},className:" w-full p-3 mt-10 lg:mt-10 font-roboto font-semibold text-sm lg:text-lg text-zinc-800 outline-gray-500 rounded-lg bg-transparent outline border-none outline-2 focus:outline-offset-0 focus:outline-purple-600 focus:shadow-lg "}),Pe("p",{className:"text-roboto text-zinc-500 text-xs lg:text-lg pt-2 w-11/12",children:"* Your username will be used to create a unique url for your wanders. (e.g. worldwander.com/johnsmith12)"}),Pe("button",{onClick:k=>D(k),className:"w-full bg-zinc-800 text-white rounded-md h-10 lg:h-14 text-xl mt-6 active:scale-95 transition flex items-center justify-center",children:"Create Account"}),At("a",{onClick:()=>i(!0),className:"text-md lg:text-xl font-roboto text-zinc-800 self-start flex mt-3 items-center hover:underline hover:cursor-pointer",children:[Pe(gZ,{className:"w-4 lg:w-6 mr-1"}),"Back"]}),I!==""&&At("div",{className:"text-zinc-800 font-roboto font-medium text-md items-center flex mt-3",children:[Pe(Yz,{className:"w-5 h-5 text-red-500 mr-1"})," ",I]})]})},gae=()=>{const[e,t]=ue.useState(!0),[n,i]=ue.useState({username:"",email:"",password:"",firstName:"",lastName:"",profileImg:""}),c=f=>{let m=f.target.value;i({...n,[f.target.id]:m})};return Pe("div",{className:"w-screen flex h-screen justify-center items-center",children:At("div",{className:" h-fit m-5 w-11/12 sm:w-2/3 md:w-3/6 lg:w-5/6 xl:w-5/6 bg-white rounded-3xl  shadow-md p-8 lg:p-5 flex",children:[Pe(rx.LazyLoadImage,{src:V4,alt:"mountain image",className:"h-full min-h-full rounded-3xl object-cover mr-5 w-0 lg:w-1/2 hidden lg:block"}),At("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center py-4",children:[Pe("h2",{className:"font-roboto font-bold text-3xl lg:text-4xl text-center  text-zinc-800",children:"Welcome!"}),Pe("p",{className:"my-3 text-lg font-roboto text-zinc-500 text-center font-medium",children:"Start sharing your travels with the world!"}),e?At("div",{className:"w-full lg:w-4/6 flex flex-col items-center mt-3 lg:mt-10 space-y-5",children:[At("div",{className:"flex w-full space-x-5 mt-3",children:[Pe("input",{id:"firstName",type:"firstName",placeholder:"First Name",value:n==null?void 0:n.firstName,onChange:f=>{c(f)},className:" w-1/2 p-3  font-roboto font-semibold text-sm lg:text-lg text-zinc-800 outline-gray-500 rounded-lg bg-transparent outline border-none outline-2 focus:outline-offset-0 focus:outline-purple-600 focus:shadow-lg "}),Pe("input",{id:"lastName",type:"lastName",placeholder:"Last Name",value:n==null?void 0:n.lastName,onChange:f=>{c(f)},className:" w-1/2 p-3  font-roboto font-semibold text-sm lg:text-lg text-zinc-800 outline-gray-500 rounded-lg bg-transparent outline border-none outline-2 focus:outline-offset-0 focus:outline-purple-600 focus:shadow-lg "})]}),Pe("input",{id:"email",type:"email",placeholder:"Email",value:n.email,onChange:f=>{c(f)},className:" w-full p-3 mt-3 lg:mt-10 font-roboto font-semibold text-sm lg:text-lg text-zinc-800 outline-gray-500 rounded-lg bg-transparent outline border-none outline-2 focus:outline-offset-0 focus:outline-purple-600 focus:shadow-lg "}),Pe("input",{id:"password",type:"password",placeholder:"Password",value:n.password,onChange:f=>{c(f)},className:"w-full p-3 mt-3 lg:mt-10 font-roboto font-semibold text-sm lg:text-lg text-zinc-800 outline-gray-500 rounded-lg bg-transparent outline border-none outline-2 focus:outline-offset-0 focus:outline-purple-600 focus:shadow-lg "}),At("button",{onClick:()=>t(!1),className:"w-full bg-zinc-800 text-white rounded-md h-10 lg:h-14 text-md lg:text-xl mt-6 active:scale-95 transition flex items-center justify-center",children:["Create Account",Pe(Zz,{className:"w-6 h-6 lg:w-8 lg:h-8 ml-3 text-white "})]}),At("p",{className:"font-roboto font-normal text-sm lg:text-lg text-right text-zinc-800 self-en self-end mt-2",children:["Already a member? ",Pe(Sx,{to:"/auth/login",className:"hover:underline hover:text-purple-600",children:"Sign In"})]}),At("div",{className:"flex w-full mt-3 lg:mt-5 items-center justify-center",children:[Pe("div",{className:"w-full bg-zinc-300 h-0.5"}),Pe("p",{className:" mx-4 min-w-fit text-md lg:text-lg font-roboto text-zinc-500",children:"Or continue with"}),Pe("div",{className:"w-full bg-zinc-300 h-0.5"})]}),At("button",{onClick:()=>{},disabled:!0,className:"disabled:bg-zinc-300 w-full lg:w-4/6 bg-zinc-800 text-white rounded-md h-10 lg:h-14 text-md lg:text-xl mt-5 lg:mt-10 active:scale-95 transition flex justify-center items-center",children:[At("svg",{className:"mr-2 h-5 w-5","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"github",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Pe("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#ffffff"}),Pe("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#ffffff"}),Pe("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#ffffff"}),Pe("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#ffffff"}),Pe("path",{d:"M1 1h22v22H1z",fill:"none"})]}),"Sign in With Google"]})]}):Pe(mae,{userData:n,setUserData:i,handleChange:c,setFormPage:t})]})]})})};Hl.accessToken="pk.eyJ1IjoianVzdGlubTM1MDEiLCJhIjoiY2xlemkwbW1jMXNnczN2bWtyeGl0Zzk1MCJ9.mFADKJCRybPTMrtLp5r9kA";const yae="mapbox://styles/justinm3501/clfej09fp000e01pk1192aw6u?optimize=true",_ae=({paramsUID:e})=>{const t=jy(),{data:n,error:i,isLoading:c,isError:f,isSuccess:m}=cw(e),s=ue.useRef(null),v=ue.useRef(null);ue.useEffect(()=>{if(!v.current)return v.current=new Hl.Map({container:s.current??"",style:yae,center:[50,50],zoom:1,attributionControl:!1}).setMaxZoom(2.5),()=>{var k;return(k=v.current)==null?void 0:k.remove}},[]);const E=Vy(k=>k==null?void 0:k.displaySlice);ue.useEffect(()=>{var V,H,G,z,N;const k=n==null?void 0:n.allPosts.findIndex(W=>W._id===E.idCurrent);E.idCurrent.length>=10&&((N=v.current)==null||N.flyTo({center:[(H=(V=n==null?void 0:n.allPosts[k])==null?void 0:V.destCoordinates)==null?void 0:H.lng,(z=(G=n==null?void 0:n.allPosts[k])==null?void 0:G.destCoordinates)==null?void 0:z.lat],essential:!0,duration:2e3}))},[E]);const I=({markerClicked:k,id:V,destination:H})=>At("button",{onClick:()=>k(V),children:[Pe(Kz,{className:"transition text-red-500 w-12 h-12 hover:animate-bounce"}),Pe("div",{className:"hidden hover:show p-5 bg-red-300",children:"Toronto, Canada"})]}),M=k=>{t(Sy(k))},[P,D]=ue.useState([]);return ue.useEffect(()=>{m&&(P.forEach(k=>k==null?void 0:k.remove()),D([]),n.allPosts.forEach(k=>{var V,H;if(k.destCoordinates.lng,k.destCoordinates.lat){const G=document.createElement("div");bx(G).render(Pe(I,{markerClicked:M,id:k._id,destination:k.destiantion}));let N=new Hl.Marker(G).setLngLat([(V=k==null?void 0:k.destCoordinates)==null?void 0:V.lng,(H=k==null?void 0:k.destCoordinates)==null?void 0:H.lat]).setOffset([0,-20]);N.addTo(v.current),D(W=>[...W,N]),P.push(N)}}))},[n,m]),Pe("div",{ref:s,className:"map-container"})},vae=({post:e})=>{const t=jy(),n=Vy(f=>f==null?void 0:f.displaySlice),i=ue.useRef(null),c=pz(i);return ue.useEffect(()=>{c&&n!==e._id&&t(Sy(e._id))},[c]),ue.useEffect(()=>{n.idCurrent===e._id&&c===!1&&i.current&&i.current.scrollIntoView({behavior:"smooth"})},[n]),At("div",{ref:i,className:"flex flex-col w-full h-full bg-opacity-60 shadow-lg backdrop-blur-sm lg:bg-opacity-100 bg-white px-3 pt-3 snap-always rounded-2xl snap-center relative",children:[Pe("div",{className:"w-full flex overflow-scroll scroll snap-x snap-mandatory scrollbar-hide",children:e.photos.map(f=>{const[m,s]=ue.useState(!1);return Pe("img",{onLoad:()=>s(v=>!v),src:`/images/${f}`,className:"w-full rounded-2xl snap-always snap-center object-cover aspect-square"},f)})}),Pe("h1",{className:"font-inter text-3xl lg:text-4xl leading-snug tracking-wide font-semibold text-zinc-800 text-center pt-2",children:e.destination}),At("p",{className:"font-inter text-lg lg:text-xl font-normal text-zinc-600 text-center pt-1",children:[Gt(e.dateTraveled,"YYYY-MM-DD").format("MMMM Do YYYY"),", For ",e.tripLength," days"]}),Pe("h1",{className:"font-inter text-lg lg:text-xl font-normal text-zinc-800  text-center line-clamp-3",children:e.description}),Pe("div",{className:"flex justify-between items-center mt-auto",children:At("div",{className:"flex items-center gap-3",children:[Pe("p",{className:"mt-1 text-lg",children:"2 Likes"}),Pe("button",{type:"button",onClick:()=>{},className:"my-5 transition ease-in-out hover:scale-110 self-start",children:Pe(Qz,{className:"select-none mx-auto h-8 w-8 text-zinc-800 "})})]})})]})};let _v;const xae=({paramsUID:e})=>{var E;const{data:t,error:n,isLoading:i,isError:c,isSuccess:f}=cw(e),m=ue.useRef(null),{scrollYProgress:s}=fz({container:m}),v=hz(s,{stiffness:100,damping:30,restDelta:.001});return i?_v=Pe("div",{className:"flex w-full h-full justify-center items-center",children:Pe(Xz,{className:"h-12 w-12 text-zinc-800 animate-spin"})}):f?(_v=t.allPosts.map(I=>Pe(vae,{post:I},I._id)),(E=m==null?void 0:m.current)==null||E.scrollBy({top:500,behavior:"smooth"})):c&&(_v=Pe("h1",{className:"font-roboto text-3xl font-medium text-red-500 w-1/4",children:"Hmmm... Something went wrong, try again."})),At(il,{children:[Pe(nd.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},ref:m,className:"space-y-8 z-20 rounded-2xl max-w-xl min-w-lg h-[760px] lg:h-[760px] md:w-4/6 lg:w-2/3 xl:w-1/3 w-11/12 shadow-md overflow-scroll snap-mandatory scrollbar-hide snap-y",children:_v},"modal"),Pe("div",{className:"md:w-4/6 lg:w-2/3 xl:w-1/3 w-11/12 -mb-3 overflow-hidden z-30 mt-5 rounded-[60px]",children:Pe(nd.div,{className:"w-full bg-zinc-300 origin-left h-sm]",style:{scaleX:v}})})]})},wae=({})=>{var n,i,c,f;const e=Wj();if(e.username===void 0)return null;console.log(e.username);const{data:t}=DH(e.username);return console.log(t),At(il,{children:[Pe(_ae,{paramsUID:(n=t==null?void 0:t.userinfo)==null?void 0:n._id}),At(nd.div,{initial:{opacity:0,y:-200},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex flex-col pl-0 max-w-full xl:pl-32 h-screen w-screen justify-center items-center xl:items-start",children:[At("div",{className:"w-full pl-5 xl:pl-0 pb-20 xl:pb-32 flex items-center",children:[Pe("img",{src:"data:image/png;base64,"+((i=t==null?void 0:t.userinfo)==null?void 0:i.profileImg),className:"w-24 h-24 text-zinc-800 rounded-full"}),At("h2",{className:"text-5xl font-inter font-normal pl-4",children:["Welcome to ",Pe("br",{}),At("span",{className:"text-purple-600 font-bold",children:[(c=t==null?void 0:t.userinfo)==null?void 0:c.firstName,"'s"]})," Wanders!"]})]}),Pe(xae,{paramsUID:(f=t==null?void 0:t.userinfo)==null?void 0:f._id})]})]})};function bae(){return At(il,{children:[Pe(bZ,{}),At(q3,{children:[Pe(as,{index:!0,element:Pe(noe,{})}),Pe(as,{path:"/user/:username",element:Pe(wae,{})}),At(as,{path:"/auth",children:[Pe(as,{path:"login",element:Pe(nse,{})}),Pe(as,{path:"register",element:Pe(gae,{})})]}),At(as,{element:Pe(Hie,{}),children:[Pe(as,{element:Pe(Qie,{}),path:"/account/*"}),Pe(as,{path:"/mywanders",element:Pe(qie,{})})]})]}),Pe(oI,{})]})}const Eae=DW({reducer:{[Ug.reducerPath]:Ug.reducer,displaySlice:Fie},middleware:e=>e().concat(Ug.middleware),devTools:!0});yT.createRoot(document.getElementById("root")).render(Pe(pp.StrictMode,{children:Pe(aG,{children:Pe(cH,{store:Eae,children:Pe(bae,{})})})}))});export default Tae();
